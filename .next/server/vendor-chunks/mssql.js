"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/mssql";
exports.ids = ["vendor-chunks/mssql"];
exports.modules = {

/***/ "(rsc)/../node_modules/mssql/index.js":
/*!**************************************!*\
  !*** ../node_modules/mssql/index.js ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nmodule.exports = __webpack_require__(/*! ./lib/tedious */ \"(rsc)/../node_modules/mssql/lib/tedious/index.js\")\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLDZHQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uLi9ub2RlX21vZHVsZXMvbXNzcWwvaW5kZXguanM/MTNmMSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi90ZWRpb3VzJylcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/index.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/base/connection-pool.js":
/*!*********************************************************!*\
  !*** ../node_modules/mssql/lib/base/connection-pool.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst { EventEmitter } = __webpack_require__(/*! node:events */ \"node:events\")\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/../node_modules/debug/src/index.js\")('mssql:base')\nconst { parseSqlConnectionString } = __webpack_require__(/*! @tediousjs/connection-string */ \"(rsc)/../node_modules/@tediousjs/connection-string/lib/index.js\")\nconst tarn = __webpack_require__(/*! tarn */ \"(rsc)/../node_modules/tarn/dist/tarn.js\")\nconst { IDS } = __webpack_require__(/*! ../utils */ \"(rsc)/../node_modules/mssql/lib/utils.js\")\nconst ConnectionError = __webpack_require__(/*! ../error/connection-error */ \"(rsc)/../node_modules/mssql/lib/error/connection-error.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/../node_modules/mssql/lib/shared.js\")\nconst { MSSQLError } = __webpack_require__(/*! ../error */ \"(rsc)/../node_modules/mssql/lib/error/index.js\")\n\n/**\n * Class ConnectionPool.\n *\n * Internally, each `Connection` instance is a separate pool of TDS connections. Once you create a new `Request`/`Transaction`/`Prepared Statement`, a new TDS connection is acquired from the pool and reserved for desired action. Once the action is complete, connection is released back to the pool.\n *\n * @property {Boolean} connected If true, connection is established.\n * @property {Boolean} connecting If true, connection is being established.\n *\n * @fires ConnectionPool#connect\n * @fires ConnectionPool#close\n */\n\nclass ConnectionPool extends EventEmitter {\n  /**\n   * Create new Connection.\n   *\n   * @param {Object|String} config Connection configuration object or connection string.\n   * @param {basicCallback} [callback] A callback which is called after connection has established, or an error has occurred.\n   */\n\n  constructor (config, callback) {\n    super()\n\n    IDS.add(this, 'ConnectionPool')\n    debug('pool(%d): created', IDS.get(this))\n\n    this._connectStack = []\n    this._closeStack = []\n\n    this._connected = false\n    this._connecting = false\n    this._healthy = false\n\n    if (typeof config === 'string') {\n      try {\n        this.config = this.constructor.parseConnectionString(config)\n      } catch (ex) {\n        if (typeof callback === 'function') {\n          return setImmediate(callback, ex)\n        }\n        throw ex\n      }\n    } else {\n      this.config = config\n    }\n\n    // set defaults\n    this.config.port = this.config.port || 1433\n    this.config.options = this.config.options || {}\n    this.config.stream = this.config.stream || false\n    this.config.parseJSON = this.config.parseJSON || false\n    this.config.arrayRowMode = this.config.arrayRowMode || false\n    this.config.validateConnection = 'validateConnection' in this.config ? this.config.validateConnection : true\n\n    const namedServer = /^(.*)\\\\(.*)$/.exec(this.config.server)\n    if (namedServer) {\n      this.config.server = namedServer[1]\n      this.config.options.instanceName = namedServer[2]\n    }\n\n    if (typeof this.config.options.useColumnNames !== 'undefined' && this.config.options.useColumnNames !== true) {\n      const ex = new MSSQLError('Invalid options `useColumnNames`, use `arrayRowMode` instead')\n      if (typeof callback === 'function') {\n        return setImmediate(callback, ex)\n      }\n      throw ex\n    }\n\n    if (typeof callback === 'function') {\n      this.connect(callback)\n    }\n  }\n\n  get connected () {\n    return this._connected\n  }\n\n  get connecting () {\n    return this._connecting\n  }\n\n  get healthy () {\n    return this._healthy\n  }\n\n  static parseConnectionString (connectionString) {\n    return this._parseConnectionString(connectionString)\n  }\n\n  static _parseAuthenticationType (type, entries) {\n    switch (type.toLowerCase()) {\n      case 'active directory integrated':\n        if (entries.includes('token')) {\n          return 'azure-active-directory-access-token'\n        } else if (['client id', 'client secret', 'tenant id'].every(entry => entries.includes(entry))) {\n          return 'azure-active-directory-service-principal-secret'\n        } else if (['client id', 'msi endpoint', 'msi secret'].every(entry => entries.includes(entry))) {\n          return 'azure-active-directory-msi-app-service'\n        } else if (['client id', 'msi endpoint'].every(entry => entries.includes(entry))) {\n          return 'azure-active-directory-msi-vm'\n        }\n        return 'azure-active-directory-default'\n      case 'active directory password':\n        return 'azure-active-directory-password'\n      case 'ntlm':\n        return 'ntlm'\n      default:\n        return 'default'\n    }\n  }\n\n  static _parseConnectionString (connectionString) {\n    const parsed = parseSqlConnectionString(connectionString, true, true)\n    return Object.entries(parsed).reduce((config, [key, value]) => {\n      switch (key) {\n        case 'application name':\n          break\n        case 'applicationintent':\n          Object.assign(config.options, {\n            readOnlyIntent: value === 'readonly'\n          })\n          break\n        case 'asynchronous processing':\n          break\n        case 'attachdbfilename':\n          break\n        case 'authentication':\n          Object.assign(config, {\n            authentication_type: this._parseAuthenticationType(value, Object.keys(parsed))\n          })\n          break\n        case 'column encryption setting':\n          break\n        case 'connection timeout':\n          Object.assign(config, {\n            connectionTimeout: value * 1000\n          })\n          break\n        case 'connection lifetime':\n          break\n        case 'connectretrycount':\n          break\n        case 'connectretryinterval':\n          Object.assign(config.options, {\n            connectionRetryInterval: value * 1000\n          })\n          break\n        case 'context connection':\n          break\n        case 'client id':\n          Object.assign(config, {\n            clientId: value\n          })\n          break\n        case 'client secret':\n          Object.assign(config, {\n            clientSecret: value\n          })\n          break\n        case 'current language':\n          Object.assign(config.options, {\n            language: value\n          })\n          break\n        case 'data source':\n        {\n          let server = value\n          let instanceName\n          let port = 1433\n          if (/^np:/i.test(server)) {\n            throw new Error('Connection via Named Pipes is not supported.')\n          }\n          if (/^tcp:/i.test(server)) {\n            server = server.substr(4)\n          }\n          const namedServerParts = /^(.*)\\\\(.*)$/.exec(server)\n          if (namedServerParts) {\n            server = namedServerParts[1].trim()\n            instanceName = namedServerParts[2].trim()\n          }\n          const serverParts = /^(.*),(.*)$/.exec(server)\n          if (serverParts) {\n            server = serverParts[1].trim()\n            port = parseInt(serverParts[2].trim(), 10)\n          } else {\n            const instanceParts = /^(.*),(.*)$/.exec(instanceName)\n            if (instanceParts) {\n              instanceName = instanceParts[1].trim()\n              port = parseInt(instanceParts[2].trim(), 10)\n            }\n          }\n          if (server === '.' || server === '(.)' || server.toLowerCase() === '(localdb)' || server.toLowerCase() === '(local)') {\n            server = 'localhost'\n          }\n          Object.assign(config, {\n            port,\n            server\n          })\n          if (instanceName) {\n            Object.assign(config.options, {\n              instanceName\n            })\n          }\n          break\n        }\n        case 'encrypt':\n          Object.assign(config.options, {\n            encrypt: !!value\n          })\n          break\n        case 'enlist':\n          break\n        case 'failover partner':\n          break\n        case 'initial catalog':\n          Object.assign(config, {\n            database: value\n          })\n          break\n        case 'integrated security':\n          break\n        case 'max pool size':\n          Object.assign(config.pool, {\n            max: value\n          })\n          break\n        case 'min pool size':\n          Object.assign(config.pool, {\n            min: value\n          })\n          break\n        case 'msi endpoint':\n          Object.assign(config, {\n            msiEndpoint: value\n          })\n          break\n        case 'msi secret':\n          Object.assign(config, {\n            msiSecret: value\n          })\n          break\n        case 'multipleactiveresultsets':\n          break\n        case 'multisubnetfailover':\n          Object.assign(config.options, {\n            multiSubnetFailover: value\n          })\n          break\n        case 'network library':\n          break\n        case 'packet size':\n          Object.assign(config.options, {\n            packetSize: value\n          })\n          break\n        case 'password':\n          Object.assign(config, {\n            password: value\n          })\n          break\n        case 'persist security info':\n          break\n        case 'poolblockingperiod':\n          break\n        case 'pooling':\n          break\n        case 'replication':\n          break\n        case 'tenant id':\n          Object.assign(config, {\n            tenantId: value\n          })\n          break\n        case 'token':\n          Object.assign(config, {\n            token: value\n          })\n          break\n        case 'transaction binding':\n          Object.assign(config.options, {\n            enableImplicitTransactions: value.toLowerCase() === 'implicit unbind'\n          })\n          break\n        case 'transparentnetworkipresolution':\n          break\n        case 'trustservercertificate':\n          Object.assign(config.options, {\n            trustServerCertificate: value\n          })\n          break\n        case 'type system version':\n          break\n        case 'user id': {\n          let user = value\n          let domain\n          const domainUser = /^(.*)\\\\(.*)$/.exec(user)\n          if (domainUser) {\n            domain = domainUser[1]\n            user = domainUser[2]\n          }\n          if (domain) {\n            Object.assign(config, {\n              domain\n            })\n          }\n          if (user) {\n            Object.assign(config, {\n              user\n            })\n          }\n          break\n        }\n        case 'user instance':\n          break\n        case 'workstation id':\n          Object.assign(config.options, {\n            workstationId: value\n          })\n          break\n        case 'request timeout':\n          Object.assign(config, {\n            requestTimeout: parseInt(value, 10)\n          })\n          break\n        case 'stream':\n          Object.assign(config, {\n            stream: !!value\n          })\n          break\n        case 'useutc':\n          Object.assign(config.options, {\n            useUTC: !!value\n          })\n          break\n        case 'parsejson':\n          Object.assign(config, {\n            parseJSON: !!value\n          })\n          break\n      }\n      return config\n    }, { options: {}, pool: {} })\n  }\n\n  /**\n   * Acquire connection from this connection pool.\n   *\n   * @param {ConnectionPool|Transaction|PreparedStatement} requester Requester.\n   * @param {acquireCallback} [callback] A callback which is called after connection has been acquired, or an error has occurred. If omited, method returns Promise.\n   * @return {ConnectionPool|Promise}\n   */\n\n  acquire (requester, callback) {\n    const acquirePromise = shared.Promise.resolve(this._acquire()).catch(err => {\n      this.emit('error', err)\n      throw err\n    })\n    if (typeof callback === 'function') {\n      acquirePromise.then(connection => callback(null, connection, this.config)).catch(callback)\n      return this\n    }\n\n    return acquirePromise\n  }\n\n  _acquire () {\n    if (!this.pool) {\n      return shared.Promise.reject(new ConnectionError('Connection not yet open.', 'ENOTOPEN'))\n    } else if (this.pool.destroyed) {\n      return shared.Promise.reject(new ConnectionError('Connection is closing', 'ENOTOPEN'))\n    }\n\n    return this.pool.acquire().promise\n  }\n\n  /**\n   * Release connection back to the pool.\n   *\n   * @param {Connection} connection Previously acquired connection.\n   * @return {ConnectionPool}\n   */\n\n  release (connection) {\n    debug('connection(%d): released', IDS.get(connection))\n\n    if (this.pool) {\n      this.pool.release(connection)\n    }\n    return this\n  }\n\n  /**\n   * Creates a new connection pool with one active connection. This one initial connection serves as a probe to find out whether the configuration is valid.\n   *\n   * @param {basicCallback} [callback] A callback which is called after connection has established, or an error has occurred. If omited, method returns Promise.\n   * @return {ConnectionPool|Promise}\n   */\n\n  connect (callback) {\n    if (typeof callback === 'function') {\n      this._connect(callback)\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      return this._connect(err => {\n        if (err) return reject(err)\n        resolve(this)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} callback\n   */\n\n  _connect (callback) {\n    if (this._connected) {\n      debug('pool(%d): already connected, executing connect callback immediately', IDS.get(this))\n      return setImmediate(callback, null, this)\n    }\n\n    this._connectStack.push(callback)\n\n    if (this._connecting) {\n      return\n    }\n\n    this._connecting = true\n    debug('pool(%d): connecting', IDS.get(this))\n\n    // create one test connection to check if everything is ok\n    this._poolCreate().then((connection) => {\n      debug('pool(%d): connected', IDS.get(this))\n      this._healthy = true\n\n      return this._poolDestroy(connection).then(() => {\n        // prepare pool\n        this.pool = new tarn.Pool(\n          Object.assign({\n            create: () => this._poolCreate()\n              .then(connection => {\n                this._healthy = true\n                return connection\n              })\n              .catch(err => {\n                if (this.pool.numUsed() + this.pool.numFree() <= 0) {\n                  this._healthy = false\n                }\n                throw err\n              }),\n            validate: this._poolValidate.bind(this),\n            destroy: this._poolDestroy.bind(this),\n            max: 10,\n            min: 0,\n            idleTimeoutMillis: 30000,\n            propagateCreateError: true\n          }, this.config.pool)\n        )\n\n        this._connecting = false\n        this._connected = true\n      })\n    }).then(() => {\n      this._connectStack.forEach((cb) => {\n        setImmediate(cb, null, this)\n      })\n    }).catch(err => {\n      this._connecting = false\n      this._connectStack.forEach((cb) => {\n        setImmediate(cb, err)\n      })\n    }).then(() => {\n      this._connectStack = []\n    })\n  }\n\n  get size () {\n    return this.pool.numFree() + this.pool.numUsed() + this.pool.numPendingCreates()\n  }\n\n  get available () {\n    return this.pool.numFree()\n  }\n\n  get pending () {\n    return this.pool.numPendingAcquires()\n  }\n\n  get borrowed () {\n    return this.pool.numUsed()\n  }\n\n  /**\n   * Close all active connections in the pool.\n   *\n   * @param {basicCallback} [callback] A callback which is called after connection has closed, or an error has occurred. If omited, method returns Promise.\n   * @return {ConnectionPool|Promise}\n   */\n\n  close (callback) {\n    if (typeof callback === 'function') {\n      this._close(callback)\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._close(err => {\n        if (err) return reject(err)\n        resolve(this)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} callback\n   */\n\n  _close (callback) {\n    // we don't allow pools in a connecting state to be closed because it means there are far too many\n    // edge cases to deal with\n    if (this._connecting) {\n      debug('pool(%d): close called while connecting', IDS.get(this))\n      setImmediate(callback, new ConnectionError('Cannot close a pool while it is connecting'))\n    }\n\n    if (!this.pool) {\n      debug('pool(%d): already closed, executing close callback immediately', IDS.get(this))\n      return setImmediate(callback, null)\n    }\n\n    this._closeStack.push(callback)\n\n    if (this.pool.destroyed) return\n\n    this._connecting = this._connected = this._healthy = false\n\n    this.pool.destroy().then(() => {\n      debug('pool(%d): pool closed, removing pool reference and executing close callbacks', IDS.get(this))\n      this.pool = null\n      this._closeStack.forEach(cb => {\n        setImmediate(cb, null)\n      })\n    }).catch(err => {\n      this.pool = null\n      this._closeStack.forEach(cb => {\n        setImmediate(cb, err)\n      })\n    }).then(() => {\n      this._closeStack = []\n    })\n  }\n\n  /**\n   * Returns new request using this connection.\n   *\n   * @return {Request}\n   */\n\n  request () {\n    return new shared.driver.Request(this)\n  }\n\n  /**\n   * Returns new transaction using this connection.\n   *\n   * @return {Transaction}\n   */\n\n  transaction () {\n    return new shared.driver.Transaction(this)\n  }\n\n  /**\n   * Creates a new query using this connection from a tagged template string.\n   *\n   * @variation 1\n   * @param {Array} strings Array of string literals.\n   * @param {...*} keys Values.\n   * @return {Request}\n   */\n\n  /**\n   * Execute the SQL command.\n   *\n   * @variation 2\n   * @param {String} command T-SQL command to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  query () {\n    if (typeof arguments[0] === 'string') { return new shared.driver.Request(this).query(arguments[0], arguments[1]) }\n\n    const values = Array.prototype.slice.call(arguments)\n    const strings = values.shift()\n\n    return new shared.driver.Request(this)._template(strings, values, 'query')\n  }\n\n  /**\n   * Creates a new batch using this connection from a tagged template string.\n   *\n   * @variation 1\n   * @param {Array} strings Array of string literals.\n   * @param {...*} keys Values.\n   * @return {Request}\n   */\n\n  /**\n   * Execute the SQL command.\n   *\n   * @variation 2\n   * @param {String} command T-SQL command to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  batch () {\n    if (typeof arguments[0] === 'string') { return new shared.driver.Request(this).batch(arguments[0], arguments[1]) }\n\n    const values = Array.prototype.slice.call(arguments)\n    const strings = values.shift()\n\n    return new shared.driver.Request(this)._template(strings, values, 'batch')\n  }\n}\n\nmodule.exports = ConnectionPool\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9iYXNlL2Nvbm5lY3Rpb24tcG9vbC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixRQUFRLGVBQWUsRUFBRSxtQkFBTyxDQUFDLGdDQUFhO0FBQzlDLGNBQWMsbUJBQU8sQ0FBQyx1REFBTztBQUM3QixRQUFRLDJCQUEyQixFQUFFLG1CQUFPLENBQUMscUdBQThCO0FBQzNFLGFBQWEsbUJBQU8sQ0FBQyxxREFBTTtBQUMzQixRQUFRLE1BQU0sRUFBRSxtQkFBTyxDQUFDLDBEQUFVO0FBQ2xDLHdCQUF3QixtQkFBTyxDQUFDLDRGQUEyQjtBQUMzRCxlQUFlLG1CQUFPLENBQUMsNERBQVc7QUFDbEMsUUFBUSxhQUFhLEVBQUUsbUJBQU8sQ0FBQyxnRUFBVTs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsU0FBUztBQUN2QixjQUFjLFNBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsYUFBYSxlQUFlO0FBQzVCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJLFdBQVcsWUFBWTtBQUNoQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDhDQUE4QztBQUMzRCxhQUFhLGlCQUFpQjtBQUM5QixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsWUFBWTtBQUN6QixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZUFBZTtBQUM1QixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsZUFBZTtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsTUFBTTtBQUNuQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSx5QkFBeUI7QUFDdEMsY0FBYztBQUNkOztBQUVBO0FBQ0EsNENBQTRDOztBQUU1QztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxNQUFNO0FBQ25CLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLHlCQUF5QjtBQUN0QyxjQUFjO0FBQ2Q7O0FBRUE7QUFDQSw0Q0FBNEM7O0FBRTVDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvYmFzZS9jb25uZWN0aW9uLXBvb2wuanM/MWJkZiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgeyBFdmVudEVtaXR0ZXIgfSA9IHJlcXVpcmUoJ25vZGU6ZXZlbnRzJylcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnbXNzcWw6YmFzZScpXG5jb25zdCB7IHBhcnNlU3FsQ29ubmVjdGlvblN0cmluZyB9ID0gcmVxdWlyZSgnQHRlZGlvdXNqcy9jb25uZWN0aW9uLXN0cmluZycpXG5jb25zdCB0YXJuID0gcmVxdWlyZSgndGFybicpXG5jb25zdCB7IElEUyB9ID0gcmVxdWlyZSgnLi4vdXRpbHMnKVxuY29uc3QgQ29ubmVjdGlvbkVycm9yID0gcmVxdWlyZSgnLi4vZXJyb3IvY29ubmVjdGlvbi1lcnJvcicpXG5jb25zdCBzaGFyZWQgPSByZXF1aXJlKCcuLi9zaGFyZWQnKVxuY29uc3QgeyBNU1NRTEVycm9yIH0gPSByZXF1aXJlKCcuLi9lcnJvcicpXG5cbi8qKlxuICogQ2xhc3MgQ29ubmVjdGlvblBvb2wuXG4gKlxuICogSW50ZXJuYWxseSwgZWFjaCBgQ29ubmVjdGlvbmAgaW5zdGFuY2UgaXMgYSBzZXBhcmF0ZSBwb29sIG9mIFREUyBjb25uZWN0aW9ucy4gT25jZSB5b3UgY3JlYXRlIGEgbmV3IGBSZXF1ZXN0YC9gVHJhbnNhY3Rpb25gL2BQcmVwYXJlZCBTdGF0ZW1lbnRgLCBhIG5ldyBURFMgY29ubmVjdGlvbiBpcyBhY3F1aXJlZCBmcm9tIHRoZSBwb29sIGFuZCByZXNlcnZlZCBmb3IgZGVzaXJlZCBhY3Rpb24uIE9uY2UgdGhlIGFjdGlvbiBpcyBjb21wbGV0ZSwgY29ubmVjdGlvbiBpcyByZWxlYXNlZCBiYWNrIHRvIHRoZSBwb29sLlxuICpcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gY29ubmVjdGVkIElmIHRydWUsIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQuXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IGNvbm5lY3RpbmcgSWYgdHJ1ZSwgY29ubmVjdGlvbiBpcyBiZWluZyBlc3RhYmxpc2hlZC5cbiAqXG4gKiBAZmlyZXMgQ29ubmVjdGlvblBvb2wjY29ubmVjdFxuICogQGZpcmVzIENvbm5lY3Rpb25Qb29sI2Nsb3NlXG4gKi9cblxuY2xhc3MgQ29ubmVjdGlvblBvb2wgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAvKipcbiAgICogQ3JlYXRlIG5ldyBDb25uZWN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGNvbmZpZyBDb25uZWN0aW9uIGNvbmZpZ3VyYXRpb24gb2JqZWN0IG9yIGNvbm5lY3Rpb24gc3RyaW5nLlxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgY29ubmVjdGlvbiBoYXMgZXN0YWJsaXNoZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC5cbiAgICovXG5cbiAgY29uc3RydWN0b3IgKGNvbmZpZywgY2FsbGJhY2spIHtcbiAgICBzdXBlcigpXG5cbiAgICBJRFMuYWRkKHRoaXMsICdDb25uZWN0aW9uUG9vbCcpXG4gICAgZGVidWcoJ3Bvb2woJWQpOiBjcmVhdGVkJywgSURTLmdldCh0aGlzKSlcblxuICAgIHRoaXMuX2Nvbm5lY3RTdGFjayA9IFtdXG4gICAgdGhpcy5fY2xvc2VTdGFjayA9IFtdXG5cbiAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZVxuICAgIHRoaXMuX2Nvbm5lY3RpbmcgPSBmYWxzZVxuICAgIHRoaXMuX2hlYWx0aHkgPSBmYWxzZVxuXG4gICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuY29uc3RydWN0b3IucGFyc2VDb25uZWN0aW9uU3RyaW5nKGNvbmZpZylcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBleClcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBleFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZ1xuICAgIH1cblxuICAgIC8vIHNldCBkZWZhdWx0c1xuICAgIHRoaXMuY29uZmlnLnBvcnQgPSB0aGlzLmNvbmZpZy5wb3J0IHx8IDE0MzNcbiAgICB0aGlzLmNvbmZpZy5vcHRpb25zID0gdGhpcy5jb25maWcub3B0aW9ucyB8fCB7fVxuICAgIHRoaXMuY29uZmlnLnN0cmVhbSA9IHRoaXMuY29uZmlnLnN0cmVhbSB8fCBmYWxzZVxuICAgIHRoaXMuY29uZmlnLnBhcnNlSlNPTiA9IHRoaXMuY29uZmlnLnBhcnNlSlNPTiB8fCBmYWxzZVxuICAgIHRoaXMuY29uZmlnLmFycmF5Um93TW9kZSA9IHRoaXMuY29uZmlnLmFycmF5Um93TW9kZSB8fCBmYWxzZVxuICAgIHRoaXMuY29uZmlnLnZhbGlkYXRlQ29ubmVjdGlvbiA9ICd2YWxpZGF0ZUNvbm5lY3Rpb24nIGluIHRoaXMuY29uZmlnID8gdGhpcy5jb25maWcudmFsaWRhdGVDb25uZWN0aW9uIDogdHJ1ZVxuXG4gICAgY29uc3QgbmFtZWRTZXJ2ZXIgPSAvXiguKilcXFxcKC4qKSQvLmV4ZWModGhpcy5jb25maWcuc2VydmVyKVxuICAgIGlmIChuYW1lZFNlcnZlcikge1xuICAgICAgdGhpcy5jb25maWcuc2VydmVyID0gbmFtZWRTZXJ2ZXJbMV1cbiAgICAgIHRoaXMuY29uZmlnLm9wdGlvbnMuaW5zdGFuY2VOYW1lID0gbmFtZWRTZXJ2ZXJbMl1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlnLm9wdGlvbnMudXNlQ29sdW1uTmFtZXMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuY29uZmlnLm9wdGlvbnMudXNlQ29sdW1uTmFtZXMgIT09IHRydWUpIHtcbiAgICAgIGNvbnN0IGV4ID0gbmV3IE1TU1FMRXJyb3IoJ0ludmFsaWQgb3B0aW9ucyBgdXNlQ29sdW1uTmFtZXNgLCB1c2UgYGFycmF5Um93TW9kZWAgaW5zdGVhZCcpXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIGV4KVxuICAgICAgfVxuICAgICAgdGhyb3cgZXhcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLmNvbm5lY3QoY2FsbGJhY2spXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNvbm5lY3RlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3RlZFxuICB9XG5cbiAgZ2V0IGNvbm5lY3RpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25uZWN0aW5nXG4gIH1cblxuICBnZXQgaGVhbHRoeSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlYWx0aHlcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZUNvbm5lY3Rpb25TdHJpbmcgKGNvbm5lY3Rpb25TdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VDb25uZWN0aW9uU3RyaW5nKGNvbm5lY3Rpb25TdHJpbmcpXG4gIH1cblxuICBzdGF0aWMgX3BhcnNlQXV0aGVudGljYXRpb25UeXBlICh0eXBlLCBlbnRyaWVzKSB7XG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2FjdGl2ZSBkaXJlY3RvcnkgaW50ZWdyYXRlZCc6XG4gICAgICAgIGlmIChlbnRyaWVzLmluY2x1ZGVzKCd0b2tlbicpKSB7XG4gICAgICAgICAgcmV0dXJuICdhenVyZS1hY3RpdmUtZGlyZWN0b3J5LWFjY2Vzcy10b2tlbidcbiAgICAgICAgfSBlbHNlIGlmIChbJ2NsaWVudCBpZCcsICdjbGllbnQgc2VjcmV0JywgJ3RlbmFudCBpZCddLmV2ZXJ5KGVudHJ5ID0+IGVudHJpZXMuaW5jbHVkZXMoZW50cnkpKSkge1xuICAgICAgICAgIHJldHVybiAnYXp1cmUtYWN0aXZlLWRpcmVjdG9yeS1zZXJ2aWNlLXByaW5jaXBhbC1zZWNyZXQnXG4gICAgICAgIH0gZWxzZSBpZiAoWydjbGllbnQgaWQnLCAnbXNpIGVuZHBvaW50JywgJ21zaSBzZWNyZXQnXS5ldmVyeShlbnRyeSA9PiBlbnRyaWVzLmluY2x1ZGVzKGVudHJ5KSkpIHtcbiAgICAgICAgICByZXR1cm4gJ2F6dXJlLWFjdGl2ZS1kaXJlY3RvcnktbXNpLWFwcC1zZXJ2aWNlJ1xuICAgICAgICB9IGVsc2UgaWYgKFsnY2xpZW50IGlkJywgJ21zaSBlbmRwb2ludCddLmV2ZXJ5KGVudHJ5ID0+IGVudHJpZXMuaW5jbHVkZXMoZW50cnkpKSkge1xuICAgICAgICAgIHJldHVybiAnYXp1cmUtYWN0aXZlLWRpcmVjdG9yeS1tc2ktdm0nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdhenVyZS1hY3RpdmUtZGlyZWN0b3J5LWRlZmF1bHQnXG4gICAgICBjYXNlICdhY3RpdmUgZGlyZWN0b3J5IHBhc3N3b3JkJzpcbiAgICAgICAgcmV0dXJuICdhenVyZS1hY3RpdmUtZGlyZWN0b3J5LXBhc3N3b3JkJ1xuICAgICAgY2FzZSAnbnRsbSc6XG4gICAgICAgIHJldHVybiAnbnRsbSdcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnZGVmYXVsdCdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX3BhcnNlQ29ubmVjdGlvblN0cmluZyAoY29ubmVjdGlvblN0cmluZykge1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlU3FsQ29ubmVjdGlvblN0cmluZyhjb25uZWN0aW9uU3RyaW5nLCB0cnVlLCB0cnVlKVxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhwYXJzZWQpLnJlZHVjZSgoY29uZmlnLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgIGNhc2UgJ2FwcGxpY2F0aW9uIG5hbWUnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2FwcGxpY2F0aW9uaW50ZW50JzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZy5vcHRpb25zLCB7XG4gICAgICAgICAgICByZWFkT25seUludGVudDogdmFsdWUgPT09ICdyZWFkb25seSdcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2FzeW5jaHJvbm91cyBwcm9jZXNzaW5nJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdhdHRhY2hkYmZpbGVuYW1lJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdhdXRoZW50aWNhdGlvbic6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uX3R5cGU6IHRoaXMuX3BhcnNlQXV0aGVudGljYXRpb25UeXBlKHZhbHVlLCBPYmplY3Qua2V5cyhwYXJzZWQpKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnY29sdW1uIGVuY3J5cHRpb24gc2V0dGluZyc6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnY29ubmVjdGlvbiB0aW1lb3V0JzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgY29ubmVjdGlvblRpbWVvdXQ6IHZhbHVlICogMTAwMFxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnY29ubmVjdGlvbiBsaWZldGltZSc6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnY29ubmVjdHJldHJ5Y291bnQnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2Nvbm5lY3RyZXRyeWludGVydmFsJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZy5vcHRpb25zLCB7XG4gICAgICAgICAgICBjb25uZWN0aW9uUmV0cnlJbnRlcnZhbDogdmFsdWUgKiAxMDAwXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdjb250ZXh0IGNvbm5lY3Rpb24nOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2NsaWVudCBpZCc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIGNsaWVudElkOiB2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnY2xpZW50IHNlY3JldCc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIGNsaWVudFNlY3JldDogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2N1cnJlbnQgbGFuZ3VhZ2UnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLm9wdGlvbnMsIHtcbiAgICAgICAgICAgIGxhbmd1YWdlOiB2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZGF0YSBzb3VyY2UnOlxuICAgICAgICB7XG4gICAgICAgICAgbGV0IHNlcnZlciA9IHZhbHVlXG4gICAgICAgICAgbGV0IGluc3RhbmNlTmFtZVxuICAgICAgICAgIGxldCBwb3J0ID0gMTQzM1xuICAgICAgICAgIGlmICgvXm5wOi9pLnRlc3Qoc2VydmVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb25uZWN0aW9uIHZpYSBOYW1lZCBQaXBlcyBpcyBub3Qgc3VwcG9ydGVkLicpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgvXnRjcDovaS50ZXN0KHNlcnZlcikpIHtcbiAgICAgICAgICAgIHNlcnZlciA9IHNlcnZlci5zdWJzdHIoNClcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgbmFtZWRTZXJ2ZXJQYXJ0cyA9IC9eKC4qKVxcXFwoLiopJC8uZXhlYyhzZXJ2ZXIpXG4gICAgICAgICAgaWYgKG5hbWVkU2VydmVyUGFydHMpIHtcbiAgICAgICAgICAgIHNlcnZlciA9IG5hbWVkU2VydmVyUGFydHNbMV0udHJpbSgpXG4gICAgICAgICAgICBpbnN0YW5jZU5hbWUgPSBuYW1lZFNlcnZlclBhcnRzWzJdLnRyaW0oKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzZXJ2ZXJQYXJ0cyA9IC9eKC4qKSwoLiopJC8uZXhlYyhzZXJ2ZXIpXG4gICAgICAgICAgaWYgKHNlcnZlclBhcnRzKSB7XG4gICAgICAgICAgICBzZXJ2ZXIgPSBzZXJ2ZXJQYXJ0c1sxXS50cmltKClcbiAgICAgICAgICAgIHBvcnQgPSBwYXJzZUludChzZXJ2ZXJQYXJ0c1syXS50cmltKCksIDEwKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZVBhcnRzID0gL14oLiopLCguKikkLy5leGVjKGluc3RhbmNlTmFtZSlcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZVBhcnRzKSB7XG4gICAgICAgICAgICAgIGluc3RhbmNlTmFtZSA9IGluc3RhbmNlUGFydHNbMV0udHJpbSgpXG4gICAgICAgICAgICAgIHBvcnQgPSBwYXJzZUludChpbnN0YW5jZVBhcnRzWzJdLnRyaW0oKSwgMTApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzZXJ2ZXIgPT09ICcuJyB8fCBzZXJ2ZXIgPT09ICcoLiknIHx8IHNlcnZlci50b0xvd2VyQ2FzZSgpID09PSAnKGxvY2FsZGIpJyB8fCBzZXJ2ZXIudG9Mb3dlckNhc2UoKSA9PT0gJyhsb2NhbCknKSB7XG4gICAgICAgICAgICBzZXJ2ZXIgPSAnbG9jYWxob3N0J1xuICAgICAgICAgIH1cbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgcG9ydCxcbiAgICAgICAgICAgIHNlcnZlclxuICAgICAgICAgIH0pXG4gICAgICAgICAgaWYgKGluc3RhbmNlTmFtZSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcub3B0aW9ucywge1xuICAgICAgICAgICAgICBpbnN0YW5jZU5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnZW5jcnlwdCc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcub3B0aW9ucywge1xuICAgICAgICAgICAgZW5jcnlwdDogISF2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZW5saXN0JzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdmYWlsb3ZlciBwYXJ0bmVyJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdpbml0aWFsIGNhdGFsb2cnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICBkYXRhYmFzZTogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2ludGVncmF0ZWQgc2VjdXJpdHknOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ21heCBwb29sIHNpemUnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLnBvb2wsIHtcbiAgICAgICAgICAgIG1heDogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ21pbiBwb29sIHNpemUnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLnBvb2wsIHtcbiAgICAgICAgICAgIG1pbjogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ21zaSBlbmRwb2ludCc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIG1zaUVuZHBvaW50OiB2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnbXNpIHNlY3JldCc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIG1zaVNlY3JldDogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ211bHRpcGxlYWN0aXZlcmVzdWx0c2V0cyc6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnbXVsdGlzdWJuZXRmYWlsb3Zlcic6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcub3B0aW9ucywge1xuICAgICAgICAgICAgbXVsdGlTdWJuZXRGYWlsb3ZlcjogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ25ldHdvcmsgbGlicmFyeSc6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncGFja2V0IHNpemUnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLm9wdGlvbnMsIHtcbiAgICAgICAgICAgIHBhY2tldFNpemU6IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIHBhc3N3b3JkOiB2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncGVyc2lzdCBzZWN1cml0eSBpbmZvJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdwb29sYmxvY2tpbmdwZXJpb2QnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3Bvb2xpbmcnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3JlcGxpY2F0aW9uJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd0ZW5hbnQgaWQnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICB0ZW5hbnRJZDogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3Rva2VuJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgdG9rZW46IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd0cmFuc2FjdGlvbiBiaW5kaW5nJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZy5vcHRpb25zLCB7XG4gICAgICAgICAgICBlbmFibGVJbXBsaWNpdFRyYW5zYWN0aW9uczogdmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ltcGxpY2l0IHVuYmluZCdcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3RyYW5zcGFyZW50bmV0d29ya2lwcmVzb2x1dGlvbic6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAndHJ1c3RzZXJ2ZXJjZXJ0aWZpY2F0ZSc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcub3B0aW9ucywge1xuICAgICAgICAgICAgdHJ1c3RTZXJ2ZXJDZXJ0aWZpY2F0ZTogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3R5cGUgc3lzdGVtIHZlcnNpb24nOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3VzZXIgaWQnOiB7XG4gICAgICAgICAgbGV0IHVzZXIgPSB2YWx1ZVxuICAgICAgICAgIGxldCBkb21haW5cbiAgICAgICAgICBjb25zdCBkb21haW5Vc2VyID0gL14oLiopXFxcXCguKikkLy5leGVjKHVzZXIpXG4gICAgICAgICAgaWYgKGRvbWFpblVzZXIpIHtcbiAgICAgICAgICAgIGRvbWFpbiA9IGRvbWFpblVzZXJbMV1cbiAgICAgICAgICAgIHVzZXIgPSBkb21haW5Vc2VyWzJdXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICAgIGRvbWFpblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICAgIHVzZXJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAndXNlciBpbnN0YW5jZSc6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnd29ya3N0YXRpb24gaWQnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLm9wdGlvbnMsIHtcbiAgICAgICAgICAgIHdvcmtzdGF0aW9uSWQ6IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdyZXF1ZXN0IHRpbWVvdXQnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICByZXF1ZXN0VGltZW91dDogcGFyc2VJbnQodmFsdWUsIDEwKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc3RyZWFtJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgc3RyZWFtOiAhIXZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd1c2V1dGMnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLm9wdGlvbnMsIHtcbiAgICAgICAgICAgIHVzZVVUQzogISF2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncGFyc2Vqc29uJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgcGFyc2VKU09OOiAhIXZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbmZpZ1xuICAgIH0sIHsgb3B0aW9uczoge30sIHBvb2w6IHt9IH0pXG4gIH1cblxuICAvKipcbiAgICogQWNxdWlyZSBjb25uZWN0aW9uIGZyb20gdGhpcyBjb25uZWN0aW9uIHBvb2wuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29ubmVjdGlvblBvb2x8VHJhbnNhY3Rpb258UHJlcGFyZWRTdGF0ZW1lbnR9IHJlcXVlc3RlciBSZXF1ZXN0ZXIuXG4gICAqIEBwYXJhbSB7YWNxdWlyZUNhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGNvbm5lY3Rpb24gaGFzIGJlZW4gYWNxdWlyZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtDb25uZWN0aW9uUG9vbHxQcm9taXNlfVxuICAgKi9cblxuICBhY3F1aXJlIChyZXF1ZXN0ZXIsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgYWNxdWlyZVByb21pc2UgPSBzaGFyZWQuUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2FjcXVpcmUoKSkuY2F0Y2goZXJyID0+IHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpXG4gICAgICB0aHJvdyBlcnJcbiAgICB9KVxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFjcXVpcmVQcm9taXNlLnRoZW4oY29ubmVjdGlvbiA9PiBjYWxsYmFjayhudWxsLCBjb25uZWN0aW9uLCB0aGlzLmNvbmZpZykpLmNhdGNoKGNhbGxiYWNrKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICByZXR1cm4gYWNxdWlyZVByb21pc2VcbiAgfVxuXG4gIF9hY3F1aXJlICgpIHtcbiAgICBpZiAoIXRoaXMucG9vbCkge1xuICAgICAgcmV0dXJuIHNoYXJlZC5Qcm9taXNlLnJlamVjdChuZXcgQ29ubmVjdGlvbkVycm9yKCdDb25uZWN0aW9uIG5vdCB5ZXQgb3Blbi4nLCAnRU5PVE9QRU4nKSlcbiAgICB9IGVsc2UgaWYgKHRoaXMucG9vbC5kZXN0cm95ZWQpIHtcbiAgICAgIHJldHVybiBzaGFyZWQuUHJvbWlzZS5yZWplY3QobmV3IENvbm5lY3Rpb25FcnJvcignQ29ubmVjdGlvbiBpcyBjbG9zaW5nJywgJ0VOT1RPUEVOJykpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucG9vbC5hY3F1aXJlKCkucHJvbWlzZVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2UgY29ubmVjdGlvbiBiYWNrIHRvIHRoZSBwb29sLlxuICAgKlxuICAgKiBAcGFyYW0ge0Nvbm5lY3Rpb259IGNvbm5lY3Rpb24gUHJldmlvdXNseSBhY3F1aXJlZCBjb25uZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtDb25uZWN0aW9uUG9vbH1cbiAgICovXG5cbiAgcmVsZWFzZSAoY29ubmVjdGlvbikge1xuICAgIGRlYnVnKCdjb25uZWN0aW9uKCVkKTogcmVsZWFzZWQnLCBJRFMuZ2V0KGNvbm5lY3Rpb24pKVxuXG4gICAgaWYgKHRoaXMucG9vbCkge1xuICAgICAgdGhpcy5wb29sLnJlbGVhc2UoY29ubmVjdGlvbilcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGNvbm5lY3Rpb24gcG9vbCB3aXRoIG9uZSBhY3RpdmUgY29ubmVjdGlvbi4gVGhpcyBvbmUgaW5pdGlhbCBjb25uZWN0aW9uIHNlcnZlcyBhcyBhIHByb2JlIHRvIGZpbmQgb3V0IHdoZXRoZXIgdGhlIGNvbmZpZ3VyYXRpb24gaXMgdmFsaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBjb25uZWN0aW9uIGhhcyBlc3RhYmxpc2hlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge0Nvbm5lY3Rpb25Qb29sfFByb21pc2V9XG4gICAqL1xuXG4gIGNvbm5lY3QgKGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fY29ubmVjdChjYWxsYmFjaylcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY29ubmVjdChlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycilcbiAgICAgICAgcmVzb2x2ZSh0aGlzKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gY2FsbGJhY2tcbiAgICovXG5cbiAgX2Nvbm5lY3QgKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuX2Nvbm5lY3RlZCkge1xuICAgICAgZGVidWcoJ3Bvb2woJWQpOiBhbHJlYWR5IGNvbm5lY3RlZCwgZXhlY3V0aW5nIGNvbm5lY3QgY2FsbGJhY2sgaW1tZWRpYXRlbHknLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbnVsbCwgdGhpcylcbiAgICB9XG5cbiAgICB0aGlzLl9jb25uZWN0U3RhY2sucHVzaChjYWxsYmFjaylcblxuICAgIGlmICh0aGlzLl9jb25uZWN0aW5nKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLl9jb25uZWN0aW5nID0gdHJ1ZVxuICAgIGRlYnVnKCdwb29sKCVkKTogY29ubmVjdGluZycsIElEUy5nZXQodGhpcykpXG5cbiAgICAvLyBjcmVhdGUgb25lIHRlc3QgY29ubmVjdGlvbiB0byBjaGVjayBpZiBldmVyeXRoaW5nIGlzIG9rXG4gICAgdGhpcy5fcG9vbENyZWF0ZSgpLnRoZW4oKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgIGRlYnVnKCdwb29sKCVkKTogY29ubmVjdGVkJywgSURTLmdldCh0aGlzKSlcbiAgICAgIHRoaXMuX2hlYWx0aHkgPSB0cnVlXG5cbiAgICAgIHJldHVybiB0aGlzLl9wb29sRGVzdHJveShjb25uZWN0aW9uKS50aGVuKCgpID0+IHtcbiAgICAgICAgLy8gcHJlcGFyZSBwb29sXG4gICAgICAgIHRoaXMucG9vbCA9IG5ldyB0YXJuLlBvb2woXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBjcmVhdGU6ICgpID0+IHRoaXMuX3Bvb2xDcmVhdGUoKVxuICAgICAgICAgICAgICAudGhlbihjb25uZWN0aW9uID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFsdGh5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvb2wubnVtVXNlZCgpICsgdGhpcy5wb29sLm51bUZyZWUoKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9oZWFsdGh5ID0gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgdmFsaWRhdGU6IHRoaXMuX3Bvb2xWYWxpZGF0ZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgZGVzdHJveTogdGhpcy5fcG9vbERlc3Ryb3kuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIG1heDogMTAsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBpZGxlVGltZW91dE1pbGxpczogMzAwMDAsXG4gICAgICAgICAgICBwcm9wYWdhdGVDcmVhdGVFcnJvcjogdHJ1ZVxuICAgICAgICAgIH0sIHRoaXMuY29uZmlnLnBvb2wpXG4gICAgICAgIClcblxuICAgICAgICB0aGlzLl9jb25uZWN0aW5nID0gZmFsc2VcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZVxuICAgICAgfSlcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuX2Nvbm5lY3RTdGFjay5mb3JFYWNoKChjYikgPT4ge1xuICAgICAgICBzZXRJbW1lZGlhdGUoY2IsIG51bGwsIHRoaXMpXG4gICAgICB9KVxuICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICB0aGlzLl9jb25uZWN0aW5nID0gZmFsc2VcbiAgICAgIHRoaXMuX2Nvbm5lY3RTdGFjay5mb3JFYWNoKChjYikgPT4ge1xuICAgICAgICBzZXRJbW1lZGlhdGUoY2IsIGVycilcbiAgICAgIH0pXG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLl9jb25uZWN0U3RhY2sgPSBbXVxuICAgIH0pXG4gIH1cblxuICBnZXQgc2l6ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMucG9vbC5udW1GcmVlKCkgKyB0aGlzLnBvb2wubnVtVXNlZCgpICsgdGhpcy5wb29sLm51bVBlbmRpbmdDcmVhdGVzKClcbiAgfVxuXG4gIGdldCBhdmFpbGFibGUgKCkge1xuICAgIHJldHVybiB0aGlzLnBvb2wubnVtRnJlZSgpXG4gIH1cblxuICBnZXQgcGVuZGluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucG9vbC5udW1QZW5kaW5nQWNxdWlyZXMoKVxuICB9XG5cbiAgZ2V0IGJvcnJvd2VkICgpIHtcbiAgICByZXR1cm4gdGhpcy5wb29sLm51bVVzZWQoKVxuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIGFsbCBhY3RpdmUgY29ubmVjdGlvbnMgaW4gdGhlIHBvb2wuXG4gICAqXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBjb25uZWN0aW9uIGhhcyBjbG9zZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtDb25uZWN0aW9uUG9vbHxQcm9taXNlfVxuICAgKi9cblxuICBjbG9zZSAoY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9jbG9zZShjYWxsYmFjaylcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl9jbG9zZShlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycilcbiAgICAgICAgcmVzb2x2ZSh0aGlzKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gY2FsbGJhY2tcbiAgICovXG5cbiAgX2Nsb3NlIChjYWxsYmFjaykge1xuICAgIC8vIHdlIGRvbid0IGFsbG93IHBvb2xzIGluIGEgY29ubmVjdGluZyBzdGF0ZSB0byBiZSBjbG9zZWQgYmVjYXVzZSBpdCBtZWFucyB0aGVyZSBhcmUgZmFyIHRvbyBtYW55XG4gICAgLy8gZWRnZSBjYXNlcyB0byBkZWFsIHdpdGhcbiAgICBpZiAodGhpcy5fY29ubmVjdGluZykge1xuICAgICAgZGVidWcoJ3Bvb2woJWQpOiBjbG9zZSBjYWxsZWQgd2hpbGUgY29ubmVjdGluZycsIElEUy5nZXQodGhpcykpXG4gICAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBDb25uZWN0aW9uRXJyb3IoJ0Nhbm5vdCBjbG9zZSBhIHBvb2wgd2hpbGUgaXQgaXMgY29ubmVjdGluZycpKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5wb29sKSB7XG4gICAgICBkZWJ1ZygncG9vbCglZCk6IGFscmVhZHkgY2xvc2VkLCBleGVjdXRpbmcgY2xvc2UgY2FsbGJhY2sgaW1tZWRpYXRlbHknLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbnVsbClcbiAgICB9XG5cbiAgICB0aGlzLl9jbG9zZVN0YWNrLnB1c2goY2FsbGJhY2spXG5cbiAgICBpZiAodGhpcy5wb29sLmRlc3Ryb3llZCkgcmV0dXJuXG5cbiAgICB0aGlzLl9jb25uZWN0aW5nID0gdGhpcy5fY29ubmVjdGVkID0gdGhpcy5faGVhbHRoeSA9IGZhbHNlXG5cbiAgICB0aGlzLnBvb2wuZGVzdHJveSgpLnRoZW4oKCkgPT4ge1xuICAgICAgZGVidWcoJ3Bvb2woJWQpOiBwb29sIGNsb3NlZCwgcmVtb3ZpbmcgcG9vbCByZWZlcmVuY2UgYW5kIGV4ZWN1dGluZyBjbG9zZSBjYWxsYmFja3MnLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgdGhpcy5wb29sID0gbnVsbFxuICAgICAgdGhpcy5fY2xvc2VTdGFjay5mb3JFYWNoKGNiID0+IHtcbiAgICAgICAgc2V0SW1tZWRpYXRlKGNiLCBudWxsKVxuICAgICAgfSlcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgdGhpcy5wb29sID0gbnVsbFxuICAgICAgdGhpcy5fY2xvc2VTdGFjay5mb3JFYWNoKGNiID0+IHtcbiAgICAgICAgc2V0SW1tZWRpYXRlKGNiLCBlcnIpXG4gICAgICB9KVxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5fY2xvc2VTdGFjayA9IFtdXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG5ldyByZXF1ZXN0IHVzaW5nIHRoaXMgY29ubmVjdGlvbi5cbiAgICpcbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgcmVxdWVzdCAoKSB7XG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QodGhpcylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG5ldyB0cmFuc2FjdGlvbiB1c2luZyB0aGlzIGNvbm5lY3Rpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge1RyYW5zYWN0aW9ufVxuICAgKi9cblxuICB0cmFuc2FjdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlRyYW5zYWN0aW9uKHRoaXMpXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBxdWVyeSB1c2luZyB0aGlzIGNvbm5lY3Rpb24gZnJvbSBhIHRhZ2dlZCB0ZW1wbGF0ZSBzdHJpbmcuXG4gICAqXG4gICAqIEB2YXJpYXRpb24gMVxuICAgKiBAcGFyYW0ge0FycmF5fSBzdHJpbmdzIEFycmF5IG9mIHN0cmluZyBsaXRlcmFscy5cbiAgICogQHBhcmFtIHsuLi4qfSBrZXlzIFZhbHVlcy5cbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgdGhlIFNRTCBjb21tYW5kLlxuICAgKlxuICAgKiBAdmFyaWF0aW9uIDJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbW1hbmQgVC1TUUwgY29tbWFuZCB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHtSZXF1ZXN0fnJlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBleGVjdXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1JlcXVlc3R8UHJvbWlzZX1cbiAgICovXG5cbiAgcXVlcnkgKCkge1xuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykgeyByZXR1cm4gbmV3IHNoYXJlZC5kcml2ZXIuUmVxdWVzdCh0aGlzKS5xdWVyeShhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSkgfVxuXG4gICAgY29uc3QgdmFsdWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuICAgIGNvbnN0IHN0cmluZ3MgPSB2YWx1ZXMuc2hpZnQoKVxuXG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QodGhpcykuX3RlbXBsYXRlKHN0cmluZ3MsIHZhbHVlcywgJ3F1ZXJ5JylcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGJhdGNoIHVzaW5nIHRoaXMgY29ubmVjdGlvbiBmcm9tIGEgdGFnZ2VkIHRlbXBsYXRlIHN0cmluZy5cbiAgICpcbiAgICogQHZhcmlhdGlvbiAxXG4gICAqIEBwYXJhbSB7QXJyYXl9IHN0cmluZ3MgQXJyYXkgb2Ygc3RyaW5nIGxpdGVyYWxzLlxuICAgKiBAcGFyYW0gey4uLip9IGtleXMgVmFsdWVzLlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICAgKi9cblxuICAvKipcbiAgICogRXhlY3V0ZSB0aGUgU1FMIGNvbW1hbmQuXG4gICAqXG4gICAqIEB2YXJpYXRpb24gMlxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29tbWFuZCBULVNRTCBjb21tYW5kIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0ge1JlcXVlc3R+cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGV4ZWN1dGlvbiBoYXMgY29tcGxldGVkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7UmVxdWVzdHxQcm9taXNlfVxuICAgKi9cblxuICBiYXRjaCAoKSB7XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7IHJldHVybiBuZXcgc2hhcmVkLmRyaXZlci5SZXF1ZXN0KHRoaXMpLmJhdGNoKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdKSB9XG5cbiAgICBjb25zdCB2YWx1ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXG4gICAgY29uc3Qgc3RyaW5ncyA9IHZhbHVlcy5zaGlmdCgpXG5cbiAgICByZXR1cm4gbmV3IHNoYXJlZC5kcml2ZXIuUmVxdWVzdCh0aGlzKS5fdGVtcGxhdGUoc3RyaW5ncywgdmFsdWVzLCAnYmF0Y2gnKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29ubmVjdGlvblBvb2xcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/base/connection-pool.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/base/index.js":
/*!***********************************************!*\
  !*** ../node_modules/mssql/lib/base/index.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst ConnectionPool = __webpack_require__(/*! ./connection-pool */ \"(rsc)/../node_modules/mssql/lib/base/connection-pool.js\")\nconst PreparedStatement = __webpack_require__(/*! ./prepared-statement */ \"(rsc)/../node_modules/mssql/lib/base/prepared-statement.js\")\nconst Request = __webpack_require__(/*! ./request */ \"(rsc)/../node_modules/mssql/lib/base/request.js\")\nconst Transaction = __webpack_require__(/*! ./transaction */ \"(rsc)/../node_modules/mssql/lib/base/transaction.js\")\nconst { ConnectionError, TransactionError, RequestError, PreparedStatementError, MSSQLError } = __webpack_require__(/*! ../error */ \"(rsc)/../node_modules/mssql/lib/error/index.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/../node_modules/mssql/lib/shared.js\")\nconst Table = __webpack_require__(/*! ../table */ \"(rsc)/../node_modules/mssql/lib/table.js\")\nconst ISOLATION_LEVEL = __webpack_require__(/*! ../isolationlevel */ \"(rsc)/../node_modules/mssql/lib/isolationlevel.js\")\nconst { TYPES } = __webpack_require__(/*! ../datatypes */ \"(rsc)/../node_modules/mssql/lib/datatypes.js\")\nconst { connect, close, on, off, removeListener, query, batch } = __webpack_require__(/*! ../global-connection */ \"(rsc)/../node_modules/mssql/lib/global-connection.js\")\n\nmodule.exports = {\n  ConnectionPool,\n  Transaction,\n  Request,\n  PreparedStatement,\n  ConnectionError,\n  TransactionError,\n  RequestError,\n  PreparedStatementError,\n  MSSQLError,\n  driver: shared.driver,\n  exports: {\n    ConnectionError,\n    TransactionError,\n    RequestError,\n    PreparedStatementError,\n    MSSQLError,\n    Table,\n    ISOLATION_LEVEL,\n    TYPES,\n    MAX: 65535, // (1 << 16) - 1\n    map: shared.map,\n    getTypeByValue: shared.getTypeByValue,\n    connect,\n    close,\n    on,\n    removeListener,\n    off,\n    query,\n    batch\n  }\n}\n\nObject.defineProperty(module.exports, \"Promise\", ({\n  enumerable: true,\n  get: () => {\n    return shared.Promise\n  },\n  set: (value) => {\n    shared.Promise = value\n  }\n}))\n\nObject.defineProperty(module.exports, \"valueHandler\", ({\n  enumerable: true,\n  value: shared.valueHandler,\n  writable: false,\n  configurable: false\n}))\n\nfor (const key in TYPES) {\n  const value = TYPES[key]\n  module.exports.exports[key] = value\n  module.exports.exports[key.toUpperCase()] = value\n}\n\n/**\n * @callback Request~requestCallback\n * @param {Error} err Error on error, otherwise null.\n * @param {Object} [result] Request result.\n */\n\n/**\n * @callback Request~bulkCallback\n * @param {Error} err Error on error, otherwise null.\n * @param {Number} [rowsAffected] Number of affected rows.\n */\n\n/**\n * @callback basicCallback\n * @param {Error} err Error on error, otherwise null.\n * @param {Connection} [connection] Acquired connection.\n */\n\n/**\n * @callback acquireCallback\n * @param {Error} err Error on error, otherwise null.\n * @param {Connection} [connection] Acquired connection.\n * @param {Object} [config] Connection config\n */\n\n/**\n * Dispatched after connection has established.\n * @event ConnectionPool#connect\n */\n\n/**\n * Dispatched after connection has closed a pool (by calling close).\n * @event ConnectionPool#close\n */\n\n/**\n * Dispatched when transaction begin.\n * @event Transaction#begin\n */\n\n/**\n * Dispatched on successful commit.\n * @event Transaction#commit\n */\n\n/**\n * Dispatched on successful rollback.\n * @event Transaction#rollback\n */\n\n/**\n * Dispatched when metadata for new recordset are parsed.\n * @event Request#recordset\n */\n\n/**\n * Dispatched when new row is parsed.\n * @event Request#row\n */\n\n/**\n * Dispatched when request is complete.\n * @event Request#done\n */\n\n/**\n * Dispatched on error.\n * @event Request#error\n */\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9iYXNlL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLHVCQUF1QixtQkFBTyxDQUFDLGtGQUFtQjtBQUNsRCwwQkFBMEIsbUJBQU8sQ0FBQyx3RkFBc0I7QUFDeEQsZ0JBQWdCLG1CQUFPLENBQUMsa0VBQVc7QUFDbkMsb0JBQW9CLG1CQUFPLENBQUMsMEVBQWU7QUFDM0MsUUFBUSxzRkFBc0YsRUFBRSxtQkFBTyxDQUFDLGdFQUFVO0FBQ2xILGVBQWUsbUJBQU8sQ0FBQyw0REFBVztBQUNsQyxjQUFjLG1CQUFPLENBQUMsMERBQVU7QUFDaEMsd0JBQXdCLG1CQUFPLENBQUMsNEVBQW1CO0FBQ25ELFFBQVEsUUFBUSxFQUFFLG1CQUFPLENBQUMsa0VBQWM7QUFDeEMsUUFBUSx3REFBd0QsRUFBRSxtQkFBTyxDQUFDLGtGQUFzQjs7QUFFaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQzs7QUFFRix1REFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsUUFBUTtBQUNuQjs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsUUFBUTtBQUNuQjs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsWUFBWTtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsWUFBWTtBQUN2QixXQUFXLFFBQVE7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9iYXNlL2luZGV4LmpzP2YyNDIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IENvbm5lY3Rpb25Qb29sID0gcmVxdWlyZSgnLi9jb25uZWN0aW9uLXBvb2wnKVxuY29uc3QgUHJlcGFyZWRTdGF0ZW1lbnQgPSByZXF1aXJlKCcuL3ByZXBhcmVkLXN0YXRlbWVudCcpXG5jb25zdCBSZXF1ZXN0ID0gcmVxdWlyZSgnLi9yZXF1ZXN0JylcbmNvbnN0IFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi90cmFuc2FjdGlvbicpXG5jb25zdCB7IENvbm5lY3Rpb25FcnJvciwgVHJhbnNhY3Rpb25FcnJvciwgUmVxdWVzdEVycm9yLCBQcmVwYXJlZFN0YXRlbWVudEVycm9yLCBNU1NRTEVycm9yIH0gPSByZXF1aXJlKCcuLi9lcnJvcicpXG5jb25zdCBzaGFyZWQgPSByZXF1aXJlKCcuLi9zaGFyZWQnKVxuY29uc3QgVGFibGUgPSByZXF1aXJlKCcuLi90YWJsZScpXG5jb25zdCBJU09MQVRJT05fTEVWRUwgPSByZXF1aXJlKCcuLi9pc29sYXRpb25sZXZlbCcpXG5jb25zdCB7IFRZUEVTIH0gPSByZXF1aXJlKCcuLi9kYXRhdHlwZXMnKVxuY29uc3QgeyBjb25uZWN0LCBjbG9zZSwgb24sIG9mZiwgcmVtb3ZlTGlzdGVuZXIsIHF1ZXJ5LCBiYXRjaCB9ID0gcmVxdWlyZSgnLi4vZ2xvYmFsLWNvbm5lY3Rpb24nKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQ29ubmVjdGlvblBvb2wsXG4gIFRyYW5zYWN0aW9uLFxuICBSZXF1ZXN0LFxuICBQcmVwYXJlZFN0YXRlbWVudCxcbiAgQ29ubmVjdGlvbkVycm9yLFxuICBUcmFuc2FjdGlvbkVycm9yLFxuICBSZXF1ZXN0RXJyb3IsXG4gIFByZXBhcmVkU3RhdGVtZW50RXJyb3IsXG4gIE1TU1FMRXJyb3IsXG4gIGRyaXZlcjogc2hhcmVkLmRyaXZlcixcbiAgZXhwb3J0czoge1xuICAgIENvbm5lY3Rpb25FcnJvcixcbiAgICBUcmFuc2FjdGlvbkVycm9yLFxuICAgIFJlcXVlc3RFcnJvcixcbiAgICBQcmVwYXJlZFN0YXRlbWVudEVycm9yLFxuICAgIE1TU1FMRXJyb3IsXG4gICAgVGFibGUsXG4gICAgSVNPTEFUSU9OX0xFVkVMLFxuICAgIFRZUEVTLFxuICAgIE1BWDogNjU1MzUsIC8vICgxIDw8IDE2KSAtIDFcbiAgICBtYXA6IHNoYXJlZC5tYXAsXG4gICAgZ2V0VHlwZUJ5VmFsdWU6IHNoYXJlZC5nZXRUeXBlQnlWYWx1ZSxcbiAgICBjb25uZWN0LFxuICAgIGNsb3NlLFxuICAgIG9uLFxuICAgIHJlbW92ZUxpc3RlbmVyLFxuICAgIG9mZixcbiAgICBxdWVyeSxcbiAgICBiYXRjaFxuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ1Byb21pc2UnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogKCkgPT4ge1xuICAgIHJldHVybiBzaGFyZWQuUHJvbWlzZVxuICB9LFxuICBzZXQ6ICh2YWx1ZSkgPT4ge1xuICAgIHNoYXJlZC5Qcm9taXNlID0gdmFsdWVcbiAgfVxufSlcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCAndmFsdWVIYW5kbGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogc2hhcmVkLnZhbHVlSGFuZGxlcixcbiAgd3JpdGFibGU6IGZhbHNlLFxuICBjb25maWd1cmFibGU6IGZhbHNlXG59KVxuXG5mb3IgKGNvbnN0IGtleSBpbiBUWVBFUykge1xuICBjb25zdCB2YWx1ZSA9IFRZUEVTW2tleV1cbiAgbW9kdWxlLmV4cG9ydHMuZXhwb3J0c1trZXldID0gdmFsdWVcbiAgbW9kdWxlLmV4cG9ydHMuZXhwb3J0c1trZXkudG9VcHBlckNhc2UoKV0gPSB2YWx1ZVxufVxuXG4vKipcbiAqIEBjYWxsYmFjayBSZXF1ZXN0fnJlcXVlc3RDYWxsYmFja1xuICogQHBhcmFtIHtFcnJvcn0gZXJyIEVycm9yIG9uIGVycm9yLCBvdGhlcndpc2UgbnVsbC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzdWx0XSBSZXF1ZXN0IHJlc3VsdC5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBSZXF1ZXN0fmJ1bGtDYWxsYmFja1xuICogQHBhcmFtIHtFcnJvcn0gZXJyIEVycm9yIG9uIGVycm9yLCBvdGhlcndpc2UgbnVsbC5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbcm93c0FmZmVjdGVkXSBOdW1iZXIgb2YgYWZmZWN0ZWQgcm93cy5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBiYXNpY0NhbGxiYWNrXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnIgRXJyb3Igb24gZXJyb3IsIG90aGVyd2lzZSBudWxsLlxuICogQHBhcmFtIHtDb25uZWN0aW9ufSBbY29ubmVjdGlvbl0gQWNxdWlyZWQgY29ubmVjdGlvbi5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBhY3F1aXJlQ2FsbGJhY2tcbiAqIEBwYXJhbSB7RXJyb3J9IGVyciBFcnJvciBvbiBlcnJvciwgb3RoZXJ3aXNlIG51bGwuXG4gKiBAcGFyYW0ge0Nvbm5lY3Rpb259IFtjb25uZWN0aW9uXSBBY3F1aXJlZCBjb25uZWN0aW9uLlxuICogQHBhcmFtIHtPYmplY3R9IFtjb25maWddIENvbm5lY3Rpb24gY29uZmlnXG4gKi9cblxuLyoqXG4gKiBEaXNwYXRjaGVkIGFmdGVyIGNvbm5lY3Rpb24gaGFzIGVzdGFibGlzaGVkLlxuICogQGV2ZW50IENvbm5lY3Rpb25Qb29sI2Nvbm5lY3RcbiAqL1xuXG4vKipcbiAqIERpc3BhdGNoZWQgYWZ0ZXIgY29ubmVjdGlvbiBoYXMgY2xvc2VkIGEgcG9vbCAoYnkgY2FsbGluZyBjbG9zZSkuXG4gKiBAZXZlbnQgQ29ubmVjdGlvblBvb2wjY2xvc2VcbiAqL1xuXG4vKipcbiAqIERpc3BhdGNoZWQgd2hlbiB0cmFuc2FjdGlvbiBiZWdpbi5cbiAqIEBldmVudCBUcmFuc2FjdGlvbiNiZWdpblxuICovXG5cbi8qKlxuICogRGlzcGF0Y2hlZCBvbiBzdWNjZXNzZnVsIGNvbW1pdC5cbiAqIEBldmVudCBUcmFuc2FjdGlvbiNjb21taXRcbiAqL1xuXG4vKipcbiAqIERpc3BhdGNoZWQgb24gc3VjY2Vzc2Z1bCByb2xsYmFjay5cbiAqIEBldmVudCBUcmFuc2FjdGlvbiNyb2xsYmFja1xuICovXG5cbi8qKlxuICogRGlzcGF0Y2hlZCB3aGVuIG1ldGFkYXRhIGZvciBuZXcgcmVjb3Jkc2V0IGFyZSBwYXJzZWQuXG4gKiBAZXZlbnQgUmVxdWVzdCNyZWNvcmRzZXRcbiAqL1xuXG4vKipcbiAqIERpc3BhdGNoZWQgd2hlbiBuZXcgcm93IGlzIHBhcnNlZC5cbiAqIEBldmVudCBSZXF1ZXN0I3Jvd1xuICovXG5cbi8qKlxuICogRGlzcGF0Y2hlZCB3aGVuIHJlcXVlc3QgaXMgY29tcGxldGUuXG4gKiBAZXZlbnQgUmVxdWVzdCNkb25lXG4gKi9cblxuLyoqXG4gKiBEaXNwYXRjaGVkIG9uIGVycm9yLlxuICogQGV2ZW50IFJlcXVlc3QjZXJyb3JcbiAqL1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/base/index.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/base/prepared-statement.js":
/*!************************************************************!*\
  !*** ../node_modules/mssql/lib/base/prepared-statement.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/../node_modules/debug/src/index.js\")('mssql:base')\nconst { EventEmitter } = __webpack_require__(/*! node:events */ \"node:events\")\nconst { IDS, objectHasProperty } = __webpack_require__(/*! ../utils */ \"(rsc)/../node_modules/mssql/lib/utils.js\")\nconst globalConnection = __webpack_require__(/*! ../global-connection */ \"(rsc)/../node_modules/mssql/lib/global-connection.js\")\nconst { TransactionError, PreparedStatementError } = __webpack_require__(/*! ../error */ \"(rsc)/../node_modules/mssql/lib/error/index.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/../node_modules/mssql/lib/shared.js\")\nconst { TYPES, declare } = __webpack_require__(/*! ../datatypes */ \"(rsc)/../node_modules/mssql/lib/datatypes.js\")\n\n/**\n * Class PreparedStatement.\n *\n * IMPORTANT: Rememeber that each prepared statement means one reserved connection from the pool. Don't forget to unprepare a prepared statement!\n *\n * @property {String} statement Prepared SQL statement.\n */\n\nclass PreparedStatement extends EventEmitter {\n  /**\n   * Creates a new Prepared Statement.\n   *\n   * @param {ConnectionPool|Transaction} [holder]\n   */\n\n  constructor (parent) {\n    super()\n\n    IDS.add(this, 'PreparedStatement')\n    debug('ps(%d): created', IDS.get(this))\n\n    this.parent = parent || globalConnection.pool\n    this._handle = 0\n    this.prepared = false\n    this.parameters = {}\n  }\n\n  get config () {\n    return this.parent.config\n  }\n\n  get connected () {\n    return this.parent.connected\n  }\n\n  /**\n   * Acquire connection from connection pool.\n   *\n   * @param {Request} request Request.\n   * @param {ConnectionPool~acquireCallback} [callback] A callback which is called after connection has established, or an error has occurred. If omited, method returns Promise.\n   * @return {PreparedStatement|Promise}\n   */\n\n  acquire (request, callback) {\n    if (!this._acquiredConnection) {\n      setImmediate(callback, new PreparedStatementError('Statement is not prepared. Call prepare() first.', 'ENOTPREPARED'))\n      return this\n    }\n\n    if (this._activeRequest) {\n      setImmediate(callback, new TransactionError(\"Can't acquire connection for the request. There is another request in progress.\", 'EREQINPROG'))\n      return this\n    }\n\n    this._activeRequest = request\n    setImmediate(callback, null, this._acquiredConnection, this._acquiredConfig)\n    return this\n  }\n\n  /**\n   * Release connection back to the pool.\n   *\n   * @param {Connection} connection Previously acquired connection.\n   * @return {PreparedStatement}\n   */\n\n  release (connection) {\n    if (connection === this._acquiredConnection) {\n      this._activeRequest = null\n    }\n\n    return this\n  }\n\n  /**\n   * Add an input parameter to the prepared statement.\n   *\n   * @param {String} name Name of the input parameter without @ char.\n   * @param {*} type SQL data type of input parameter.\n   * @return {PreparedStatement}\n   */\n\n  input (name, type) {\n    if (/--| |\\/\\*|\\*\\/|'/.test(name)) {\n      throw new PreparedStatementError(`SQL injection warning for param '${name}'`, 'EINJECT')\n    }\n\n    if (arguments.length < 2) {\n      throw new PreparedStatementError('Invalid number of arguments. 2 arguments expected.', 'EARGS')\n    }\n\n    if (type instanceof Function) {\n      type = type()\n    }\n\n    if (objectHasProperty(this.parameters, name)) {\n      throw new PreparedStatementError(`The parameter name ${name} has already been declared. Parameter names must be unique`, 'EDUPEPARAM')\n    }\n\n    this.parameters[name] = {\n      name,\n      type: type.type,\n      io: 1,\n      length: type.length,\n      scale: type.scale,\n      precision: type.precision,\n      tvpType: type.tvpType\n    }\n\n    return this\n  }\n\n  /**\n   * Replace an input parameter on the request.\n   *\n   * @param {String} name Name of the input parameter without @ char.\n   * @param {*} [type] SQL data type of input parameter. If you omit type, module automaticaly decide which SQL data type should be used based on JS data type.\n   * @param {*} value Input parameter value. `undefined` and `NaN` values are automatically converted to `null` values.\n   * @return {Request}\n   */\n\n  replaceInput (name, type, value) {\n    delete this.parameters[name]\n\n    return this.input(name, type, value)\n  }\n\n  /**\n   * Add an output parameter to the prepared statement.\n   *\n   * @param {String} name Name of the output parameter without @ char.\n   * @param {*} type SQL data type of output parameter.\n   * @return {PreparedStatement}\n   */\n\n  output (name, type) {\n    if (/--| |\\/\\*|\\*\\/|'/.test(name)) {\n      throw new PreparedStatementError(`SQL injection warning for param '${name}'`, 'EINJECT')\n    }\n\n    if (arguments.length < 2) {\n      throw new PreparedStatementError('Invalid number of arguments. 2 arguments expected.', 'EARGS')\n    }\n\n    if (type instanceof Function) type = type()\n\n    if (objectHasProperty(this.parameters, name)) {\n      throw new PreparedStatementError(`The parameter name ${name} has already been declared. Parameter names must be unique`, 'EDUPEPARAM')\n    }\n\n    this.parameters[name] = {\n      name,\n      type: type.type,\n      io: 2,\n      length: type.length,\n      scale: type.scale,\n      precision: type.precision\n    }\n\n    return this\n  }\n\n  /**\n   * Replace an output parameter on the request.\n   *\n   * @param {String} name Name of the output parameter without @ char.\n   * @param {*} type SQL data type of output parameter.\n   * @return {PreparedStatement}\n   */\n\n  replaceOutput (name, type) {\n    delete this.parameters[name]\n\n    return this.output(name, type)\n  }\n\n  /**\n   * Prepare a statement.\n   *\n   * @param {String} statement SQL statement to prepare.\n   * @param {basicCallback} [callback] A callback which is called after preparation has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {PreparedStatement|Promise}\n   */\n\n  prepare (statement, callback) {\n    if (typeof callback === 'function') {\n      this._prepare(statement, callback)\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._prepare(statement, err => {\n        if (err) return reject(err)\n        resolve(this)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {String} statement\n   * @param {basicCallback} callback\n   */\n\n  _prepare (statement, callback) {\n    debug('ps(%d): prepare', IDS.get(this))\n\n    if (typeof statement === 'function') {\n      callback = statement\n      statement = undefined\n    }\n\n    if (this.prepared) {\n      return setImmediate(callback, new PreparedStatementError('Statement is already prepared.', 'EALREADYPREPARED'))\n    }\n\n    this.statement = statement || this.statement\n\n    this.parent.acquire(this, (err, connection, config) => {\n      if (err) return callback(err)\n\n      this._acquiredConnection = connection\n      this._acquiredConfig = config\n\n      const req = new shared.driver.Request(this)\n      req.stream = false\n      req.output('handle', TYPES.Int)\n      req.input('params', TYPES.NVarChar, ((() => {\n        const result = []\n        for (const name in this.parameters) {\n          if (!objectHasProperty(this.parameters, name)) {\n            continue\n          }\n          const param = this.parameters[name]\n          result.push(`@${name} ${declare(param.type, param)}${param.io === 2 ? ' output' : ''}`)\n        }\n        return result\n      })()).join(','))\n      req.input('stmt', TYPES.NVarChar, this.statement)\n      req.execute('sp_prepare', (err, result) => {\n        if (err) {\n          this.parent.release(this._acquiredConnection)\n          this._acquiredConnection = null\n          this._acquiredConfig = null\n\n          return callback(err)\n        }\n\n        debug('ps(%d): prepared', IDS.get(this))\n\n        this._handle = result.output.handle\n        this.prepared = true\n\n        callback(null)\n      })\n    })\n  }\n\n  /**\n   * Execute a prepared statement.\n   *\n   * @param {Object} values An object whose names correspond to the names of parameters that were added to the prepared statement before it was prepared.\n   * @param {basicCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  execute (values, callback) {\n    if (this.stream || (typeof callback === 'function')) {\n      return this._execute(values, callback)\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._execute(values, (err, recordset) => {\n        if (err) return reject(err)\n        resolve(recordset)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {Object} values\n   * @param {basicCallback} callback\n   */\n\n  _execute (values, callback) {\n    const req = new shared.driver.Request(this)\n    req.stream = this.stream\n    req.arrayRowMode = this.arrayRowMode\n    req.input('handle', TYPES.Int, this._handle)\n\n    // copy parameters with new values\n    for (const name in this.parameters) {\n      if (!objectHasProperty(this.parameters, name)) {\n        continue\n      }\n      const param = this.parameters[name]\n      req.parameters[name] = {\n        name,\n        type: param.type,\n        io: param.io,\n        value: values[name],\n        length: param.length,\n        scale: param.scale,\n        precision: param.precision\n      }\n    }\n\n    req.execute('sp_execute', (err, result) => {\n      if (err) return callback(err)\n\n      callback(null, result)\n    })\n\n    return req\n  }\n\n  /**\n   * Unprepare a prepared statement.\n   *\n   * @param {basicCallback} [callback] A callback which is called after unpreparation has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {PreparedStatement|Promise}\n   */\n\n  unprepare (callback) {\n    if (typeof callback === 'function') {\n      this._unprepare(callback)\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._unprepare(err => {\n        if (err) return reject(err)\n        resolve()\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} callback\n   */\n\n  _unprepare (callback) {\n    debug('ps(%d): unprepare', IDS.get(this))\n\n    if (!this.prepared) {\n      return setImmediate(callback, new PreparedStatementError('Statement is not prepared. Call prepare() first.', 'ENOTPREPARED'))\n    }\n\n    if (this._activeRequest) {\n      return setImmediate(callback, new TransactionError(\"Can't unprepare the statement. There is a request in progress.\", 'EREQINPROG'))\n    }\n\n    const req = new shared.driver.Request(this)\n    req.stream = false\n    req.input('handle', TYPES.Int, this._handle)\n    req.execute('sp_unprepare', err => {\n      if (err) return callback(err)\n\n      this.parent.release(this._acquiredConnection)\n      this._acquiredConnection = null\n      this._acquiredConfig = null\n      this._handle = 0\n      this.prepared = false\n\n      debug('ps(%d): unprepared', IDS.get(this))\n\n      return callback(null)\n    })\n  }\n}\n\nmodule.exports = PreparedStatement\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9iYXNlL3ByZXBhcmVkLXN0YXRlbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixjQUFjLG1CQUFPLENBQUMsdURBQU87QUFDN0IsUUFBUSxlQUFlLEVBQUUsbUJBQU8sQ0FBQyxnQ0FBYTtBQUM5QyxRQUFRLHlCQUF5QixFQUFFLG1CQUFPLENBQUMsMERBQVU7QUFDckQseUJBQXlCLG1CQUFPLENBQUMsa0ZBQXNCO0FBQ3ZELFFBQVEsMkNBQTJDLEVBQUUsbUJBQU8sQ0FBQyxnRUFBVTtBQUN2RSxlQUFlLG1CQUFPLENBQUMsNERBQVc7QUFDbEMsUUFBUSxpQkFBaUIsRUFBRSxtQkFBTyxDQUFDLGtFQUFjOztBQUVqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw0QkFBNEI7QUFDekM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEIsYUFBYSxnQ0FBZ0M7QUFDN0MsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxZQUFZO0FBQ3pCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLEdBQUc7QUFDaEIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQSwyRUFBMkUsS0FBSztBQUNoRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkRBQTZELE1BQU07QUFDbkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsR0FBRztBQUNoQixhQUFhLEdBQUc7QUFDaEIsY0FBYztBQUNkOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxHQUFHO0FBQ2hCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0EsMkVBQTJFLEtBQUs7QUFDaEY7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsNkRBQTZELE1BQU07QUFDbkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLEdBQUc7QUFDaEIsY0FBYztBQUNkOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsZUFBZTtBQUM1Qjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsTUFBTSxFQUFFLDJCQUEyQixFQUFFLGdDQUFnQztBQUMvRjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLGVBQWU7QUFDNUIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsZUFBZTtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Jhc2UvcHJlcGFyZWQtc3RhdGVtZW50LmpzPzA2YjAiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnbXNzcWw6YmFzZScpXG5jb25zdCB7IEV2ZW50RW1pdHRlciB9ID0gcmVxdWlyZSgnbm9kZTpldmVudHMnKVxuY29uc3QgeyBJRFMsIG9iamVjdEhhc1Byb3BlcnR5IH0gPSByZXF1aXJlKCcuLi91dGlscycpXG5jb25zdCBnbG9iYWxDb25uZWN0aW9uID0gcmVxdWlyZSgnLi4vZ2xvYmFsLWNvbm5lY3Rpb24nKVxuY29uc3QgeyBUcmFuc2FjdGlvbkVycm9yLCBQcmVwYXJlZFN0YXRlbWVudEVycm9yIH0gPSByZXF1aXJlKCcuLi9lcnJvcicpXG5jb25zdCBzaGFyZWQgPSByZXF1aXJlKCcuLi9zaGFyZWQnKVxuY29uc3QgeyBUWVBFUywgZGVjbGFyZSB9ID0gcmVxdWlyZSgnLi4vZGF0YXR5cGVzJylcblxuLyoqXG4gKiBDbGFzcyBQcmVwYXJlZFN0YXRlbWVudC5cbiAqXG4gKiBJTVBPUlRBTlQ6IFJlbWVtZWJlciB0aGF0IGVhY2ggcHJlcGFyZWQgc3RhdGVtZW50IG1lYW5zIG9uZSByZXNlcnZlZCBjb25uZWN0aW9uIGZyb20gdGhlIHBvb2wuIERvbid0IGZvcmdldCB0byB1bnByZXBhcmUgYSBwcmVwYXJlZCBzdGF0ZW1lbnQhXG4gKlxuICogQHByb3BlcnR5IHtTdHJpbmd9IHN0YXRlbWVudCBQcmVwYXJlZCBTUUwgc3RhdGVtZW50LlxuICovXG5cbmNsYXNzIFByZXBhcmVkU3RhdGVtZW50IGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgUHJlcGFyZWQgU3RhdGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0Nvbm5lY3Rpb25Qb29sfFRyYW5zYWN0aW9ufSBbaG9sZGVyXVxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAocGFyZW50KSB7XG4gICAgc3VwZXIoKVxuXG4gICAgSURTLmFkZCh0aGlzLCAnUHJlcGFyZWRTdGF0ZW1lbnQnKVxuICAgIGRlYnVnKCdwcyglZCk6IGNyZWF0ZWQnLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQgfHwgZ2xvYmFsQ29ubmVjdGlvbi5wb29sXG4gICAgdGhpcy5faGFuZGxlID0gMFxuICAgIHRoaXMucHJlcGFyZWQgPSBmYWxzZVxuICAgIHRoaXMucGFyYW1ldGVycyA9IHt9XG4gIH1cblxuICBnZXQgY29uZmlnICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQuY29uZmlnXG4gIH1cblxuICBnZXQgY29ubmVjdGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQuY29ubmVjdGVkXG4gIH1cblxuICAvKipcbiAgICogQWNxdWlyZSBjb25uZWN0aW9uIGZyb20gY29ubmVjdGlvbiBwb29sLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3QgUmVxdWVzdC5cbiAgICogQHBhcmFtIHtDb25uZWN0aW9uUG9vbH5hY3F1aXJlQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgY29ubmVjdGlvbiBoYXMgZXN0YWJsaXNoZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtQcmVwYXJlZFN0YXRlbWVudHxQcm9taXNlfVxuICAgKi9cblxuICBhY3F1aXJlIChyZXF1ZXN0LCBjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uKSB7XG4gICAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBQcmVwYXJlZFN0YXRlbWVudEVycm9yKCdTdGF0ZW1lbnQgaXMgbm90IHByZXBhcmVkLiBDYWxsIHByZXBhcmUoKSBmaXJzdC4nLCAnRU5PVFBSRVBBUkVEJykpXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9hY3RpdmVSZXF1ZXN0KSB7XG4gICAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBUcmFuc2FjdGlvbkVycm9yKFwiQ2FuJ3QgYWNxdWlyZSBjb25uZWN0aW9uIGZvciB0aGUgcmVxdWVzdC4gVGhlcmUgaXMgYW5vdGhlciByZXF1ZXN0IGluIHByb2dyZXNzLlwiLCAnRVJFUUlOUFJPRycpKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICB0aGlzLl9hY3RpdmVSZXF1ZXN0ID0gcmVxdWVzdFxuICAgIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbnVsbCwgdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uLCB0aGlzLl9hY3F1aXJlZENvbmZpZylcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2UgY29ubmVjdGlvbiBiYWNrIHRvIHRoZSBwb29sLlxuICAgKlxuICAgKiBAcGFyYW0ge0Nvbm5lY3Rpb259IGNvbm5lY3Rpb24gUHJldmlvdXNseSBhY3F1aXJlZCBjb25uZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtQcmVwYXJlZFN0YXRlbWVudH1cbiAgICovXG5cbiAgcmVsZWFzZSAoY29ubmVjdGlvbikge1xuICAgIGlmIChjb25uZWN0aW9uID09PSB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24pIHtcbiAgICAgIHRoaXMuX2FjdGl2ZVJlcXVlc3QgPSBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gaW5wdXQgcGFyYW1ldGVyIHRvIHRoZSBwcmVwYXJlZCBzdGF0ZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGlucHV0IHBhcmFtZXRlciB3aXRob3V0IEAgY2hhci5cbiAgICogQHBhcmFtIHsqfSB0eXBlIFNRTCBkYXRhIHR5cGUgb2YgaW5wdXQgcGFyYW1ldGVyLlxuICAgKiBAcmV0dXJuIHtQcmVwYXJlZFN0YXRlbWVudH1cbiAgICovXG5cbiAgaW5wdXQgKG5hbWUsIHR5cGUpIHtcbiAgICBpZiAoLy0tfCB8XFwvXFwqfFxcKlxcL3wnLy50ZXN0KG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcihgU1FMIGluamVjdGlvbiB3YXJuaW5nIGZvciBwYXJhbSAnJHtuYW1lfSdgLCAnRUlOSkVDVCcpXG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICB0aHJvdyBuZXcgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcignSW52YWxpZCBudW1iZXIgb2YgYXJndW1lbnRzLiAyIGFyZ3VtZW50cyBleHBlY3RlZC4nLCAnRUFSR1MnKVxuICAgIH1cblxuICAgIGlmICh0eXBlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgIHR5cGUgPSB0eXBlKClcbiAgICB9XG5cbiAgICBpZiAob2JqZWN0SGFzUHJvcGVydHkodGhpcy5wYXJhbWV0ZXJzLCBuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFByZXBhcmVkU3RhdGVtZW50RXJyb3IoYFRoZSBwYXJhbWV0ZXIgbmFtZSAke25hbWV9IGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQuIFBhcmFtZXRlciBuYW1lcyBtdXN0IGJlIHVuaXF1ZWAsICdFRFVQRVBBUkFNJylcbiAgICB9XG5cbiAgICB0aGlzLnBhcmFtZXRlcnNbbmFtZV0gPSB7XG4gICAgICBuYW1lLFxuICAgICAgdHlwZTogdHlwZS50eXBlLFxuICAgICAgaW86IDEsXG4gICAgICBsZW5ndGg6IHR5cGUubGVuZ3RoLFxuICAgICAgc2NhbGU6IHR5cGUuc2NhbGUsXG4gICAgICBwcmVjaXNpb246IHR5cGUucHJlY2lzaW9uLFxuICAgICAgdHZwVHlwZTogdHlwZS50dnBUeXBlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlIGFuIGlucHV0IHBhcmFtZXRlciBvbiB0aGUgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgaW5wdXQgcGFyYW1ldGVyIHdpdGhvdXQgQCBjaGFyLlxuICAgKiBAcGFyYW0geyp9IFt0eXBlXSBTUUwgZGF0YSB0eXBlIG9mIGlucHV0IHBhcmFtZXRlci4gSWYgeW91IG9taXQgdHlwZSwgbW9kdWxlIGF1dG9tYXRpY2FseSBkZWNpZGUgd2hpY2ggU1FMIGRhdGEgdHlwZSBzaG91bGQgYmUgdXNlZCBiYXNlZCBvbiBKUyBkYXRhIHR5cGUuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgSW5wdXQgcGFyYW1ldGVyIHZhbHVlLiBgdW5kZWZpbmVkYCBhbmQgYE5hTmAgdmFsdWVzIGFyZSBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byBgbnVsbGAgdmFsdWVzLlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICAgKi9cblxuICByZXBsYWNlSW5wdXQgKG5hbWUsIHR5cGUsIHZhbHVlKSB7XG4gICAgZGVsZXRlIHRoaXMucGFyYW1ldGVyc1tuYW1lXVxuXG4gICAgcmV0dXJuIHRoaXMuaW5wdXQobmFtZSwgdHlwZSwgdmFsdWUpXG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIG91dHB1dCBwYXJhbWV0ZXIgdG8gdGhlIHByZXBhcmVkIHN0YXRlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgb3V0cHV0IHBhcmFtZXRlciB3aXRob3V0IEAgY2hhci5cbiAgICogQHBhcmFtIHsqfSB0eXBlIFNRTCBkYXRhIHR5cGUgb2Ygb3V0cHV0IHBhcmFtZXRlci5cbiAgICogQHJldHVybiB7UHJlcGFyZWRTdGF0ZW1lbnR9XG4gICAqL1xuXG4gIG91dHB1dCAobmFtZSwgdHlwZSkge1xuICAgIGlmICgvLS18IHxcXC9cXCp8XFwqXFwvfCcvLnRlc3QobmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBQcmVwYXJlZFN0YXRlbWVudEVycm9yKGBTUUwgaW5qZWN0aW9uIHdhcm5pbmcgZm9yIHBhcmFtICcke25hbWV9J2AsICdFSU5KRUNUJylcbiAgICB9XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHRocm93IG5ldyBQcmVwYXJlZFN0YXRlbWVudEVycm9yKCdJbnZhbGlkIG51bWJlciBvZiBhcmd1bWVudHMuIDIgYXJndW1lbnRzIGV4cGVjdGVkLicsICdFQVJHUycpXG4gICAgfVxuXG4gICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBGdW5jdGlvbikgdHlwZSA9IHR5cGUoKVxuXG4gICAgaWYgKG9iamVjdEhhc1Byb3BlcnR5KHRoaXMucGFyYW1ldGVycywgbmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBQcmVwYXJlZFN0YXRlbWVudEVycm9yKGBUaGUgcGFyYW1ldGVyIG5hbWUgJHtuYW1lfSBoYXMgYWxyZWFkeSBiZWVuIGRlY2xhcmVkLiBQYXJhbWV0ZXIgbmFtZXMgbXVzdCBiZSB1bmlxdWVgLCAnRURVUEVQQVJBTScpXG4gICAgfVxuXG4gICAgdGhpcy5wYXJhbWV0ZXJzW25hbWVdID0ge1xuICAgICAgbmFtZSxcbiAgICAgIHR5cGU6IHR5cGUudHlwZSxcbiAgICAgIGlvOiAyLFxuICAgICAgbGVuZ3RoOiB0eXBlLmxlbmd0aCxcbiAgICAgIHNjYWxlOiB0eXBlLnNjYWxlLFxuICAgICAgcHJlY2lzaW9uOiB0eXBlLnByZWNpc2lvblxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZSBhbiBvdXRwdXQgcGFyYW1ldGVyIG9uIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBvdXRwdXQgcGFyYW1ldGVyIHdpdGhvdXQgQCBjaGFyLlxuICAgKiBAcGFyYW0geyp9IHR5cGUgU1FMIGRhdGEgdHlwZSBvZiBvdXRwdXQgcGFyYW1ldGVyLlxuICAgKiBAcmV0dXJuIHtQcmVwYXJlZFN0YXRlbWVudH1cbiAgICovXG5cbiAgcmVwbGFjZU91dHB1dCAobmFtZSwgdHlwZSkge1xuICAgIGRlbGV0ZSB0aGlzLnBhcmFtZXRlcnNbbmFtZV1cblxuICAgIHJldHVybiB0aGlzLm91dHB1dChuYW1lLCB0eXBlKVxuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgYSBzdGF0ZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdGF0ZW1lbnQgU1FMIHN0YXRlbWVudCB0byBwcmVwYXJlLlxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgcHJlcGFyYXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1ByZXBhcmVkU3RhdGVtZW50fFByb21pc2V9XG4gICAqL1xuXG4gIHByZXBhcmUgKHN0YXRlbWVudCwgY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9wcmVwYXJlKHN0YXRlbWVudCwgY2FsbGJhY2spXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fcHJlcGFyZShzdGF0ZW1lbnQsIGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKVxuICAgICAgICByZXNvbHZlKHRoaXMpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXRlbWVudFxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuXG4gIF9wcmVwYXJlIChzdGF0ZW1lbnQsIGNhbGxiYWNrKSB7XG4gICAgZGVidWcoJ3BzKCVkKTogcHJlcGFyZScsIElEUy5nZXQodGhpcykpXG5cbiAgICBpZiAodHlwZW9mIHN0YXRlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBzdGF0ZW1lbnRcbiAgICAgIHN0YXRlbWVudCA9IHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmICh0aGlzLnByZXBhcmVkKSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcignU3RhdGVtZW50IGlzIGFscmVhZHkgcHJlcGFyZWQuJywgJ0VBTFJFQURZUFJFUEFSRUQnKSlcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlbWVudCA9IHN0YXRlbWVudCB8fCB0aGlzLnN0YXRlbWVudFxuXG4gICAgdGhpcy5wYXJlbnQuYWNxdWlyZSh0aGlzLCAoZXJyLCBjb25uZWN0aW9uLCBjb25maWcpID0+IHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG5cbiAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbiA9IGNvbm5lY3Rpb25cbiAgICAgIHRoaXMuX2FjcXVpcmVkQ29uZmlnID0gY29uZmlnXG5cbiAgICAgIGNvbnN0IHJlcSA9IG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QodGhpcylcbiAgICAgIHJlcS5zdHJlYW0gPSBmYWxzZVxuICAgICAgcmVxLm91dHB1dCgnaGFuZGxlJywgVFlQRVMuSW50KVxuICAgICAgcmVxLmlucHV0KCdwYXJhbXMnLCBUWVBFUy5OVmFyQ2hhciwgKCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB0aGlzLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICBpZiAoIW9iamVjdEhhc1Byb3BlcnR5KHRoaXMucGFyYW1ldGVycywgbmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcmFtID0gdGhpcy5wYXJhbWV0ZXJzW25hbWVdXG4gICAgICAgICAgcmVzdWx0LnB1c2goYEAke25hbWV9ICR7ZGVjbGFyZShwYXJhbS50eXBlLCBwYXJhbSl9JHtwYXJhbS5pbyA9PT0gMiA/ICcgb3V0cHV0JyA6ICcnfWApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfSkoKSkuam9pbignLCcpKVxuICAgICAgcmVxLmlucHV0KCdzdG10JywgVFlQRVMuTlZhckNoYXIsIHRoaXMuc3RhdGVtZW50KVxuICAgICAgcmVxLmV4ZWN1dGUoJ3NwX3ByZXBhcmUnLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHRoaXMucGFyZW50LnJlbGVhc2UodGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uKVxuICAgICAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbiA9IG51bGxcbiAgICAgICAgICB0aGlzLl9hY3F1aXJlZENvbmZpZyA9IG51bGxcblxuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpXG4gICAgICAgIH1cblxuICAgICAgICBkZWJ1ZygncHMoJWQpOiBwcmVwYXJlZCcsIElEUy5nZXQodGhpcykpXG5cbiAgICAgICAgdGhpcy5faGFuZGxlID0gcmVzdWx0Lm91dHB1dC5oYW5kbGVcbiAgICAgICAgdGhpcy5wcmVwYXJlZCA9IHRydWVcblxuICAgICAgICBjYWxsYmFjayhudWxsKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSBwcmVwYXJlZCBzdGF0ZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXMgQW4gb2JqZWN0IHdob3NlIG5hbWVzIGNvcnJlc3BvbmQgdG8gdGhlIG5hbWVzIG9mIHBhcmFtZXRlcnMgdGhhdCB3ZXJlIGFkZGVkIHRvIHRoZSBwcmVwYXJlZCBzdGF0ZW1lbnQgYmVmb3JlIGl0IHdhcyBwcmVwYXJlZC5cbiAgICogQHBhcmFtIHtiYXNpY0NhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGV4ZWN1dGlvbiBoYXMgY29tcGxldGVkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7UmVxdWVzdHxQcm9taXNlfVxuICAgKi9cblxuICBleGVjdXRlICh2YWx1ZXMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc3RyZWFtIHx8ICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXhlY3V0ZSh2YWx1ZXMsIGNhbGxiYWNrKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fZXhlY3V0ZSh2YWx1ZXMsIChlcnIsIHJlY29yZHNldCkgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycilcbiAgICAgICAgcmVzb2x2ZShyZWNvcmRzZXQpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlc1xuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuXG4gIF9leGVjdXRlICh2YWx1ZXMsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgcmVxID0gbmV3IHNoYXJlZC5kcml2ZXIuUmVxdWVzdCh0aGlzKVxuICAgIHJlcS5zdHJlYW0gPSB0aGlzLnN0cmVhbVxuICAgIHJlcS5hcnJheVJvd01vZGUgPSB0aGlzLmFycmF5Um93TW9kZVxuICAgIHJlcS5pbnB1dCgnaGFuZGxlJywgVFlQRVMuSW50LCB0aGlzLl9oYW5kbGUpXG5cbiAgICAvLyBjb3B5IHBhcmFtZXRlcnMgd2l0aCBuZXcgdmFsdWVzXG4gICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMucGFyYW1ldGVycykge1xuICAgICAgaWYgKCFvYmplY3RIYXNQcm9wZXJ0eSh0aGlzLnBhcmFtZXRlcnMsIG5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJhbSA9IHRoaXMucGFyYW1ldGVyc1tuYW1lXVxuICAgICAgcmVxLnBhcmFtZXRlcnNbbmFtZV0gPSB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHR5cGU6IHBhcmFtLnR5cGUsXG4gICAgICAgIGlvOiBwYXJhbS5pbyxcbiAgICAgICAgdmFsdWU6IHZhbHVlc1tuYW1lXSxcbiAgICAgICAgbGVuZ3RoOiBwYXJhbS5sZW5ndGgsXG4gICAgICAgIHNjYWxlOiBwYXJhbS5zY2FsZSxcbiAgICAgICAgcHJlY2lzaW9uOiBwYXJhbS5wcmVjaXNpb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXEuZXhlY3V0ZSgnc3BfZXhlY3V0ZScsIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcblxuICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KVxuICAgIH0pXG5cbiAgICByZXR1cm4gcmVxXG4gIH1cblxuICAvKipcbiAgICogVW5wcmVwYXJlIGEgcHJlcGFyZWQgc3RhdGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgdW5wcmVwYXJhdGlvbiBoYXMgY29tcGxldGVkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7UHJlcGFyZWRTdGF0ZW1lbnR8UHJvbWlzZX1cbiAgICovXG5cbiAgdW5wcmVwYXJlIChjYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX3VucHJlcGFyZShjYWxsYmFjaylcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl91bnByZXBhcmUoZXJyID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpXG4gICAgICAgIHJlc29sdmUoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gY2FsbGJhY2tcbiAgICovXG5cbiAgX3VucHJlcGFyZSAoY2FsbGJhY2spIHtcbiAgICBkZWJ1ZygncHMoJWQpOiB1bnByZXBhcmUnLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgaWYgKCF0aGlzLnByZXBhcmVkKSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcignU3RhdGVtZW50IGlzIG5vdCBwcmVwYXJlZC4gQ2FsbCBwcmVwYXJlKCkgZmlyc3QuJywgJ0VOT1RQUkVQQVJFRCcpKVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9hY3RpdmVSZXF1ZXN0KSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgVHJhbnNhY3Rpb25FcnJvcihcIkNhbid0IHVucHJlcGFyZSB0aGUgc3RhdGVtZW50LiBUaGVyZSBpcyBhIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXCIsICdFUkVRSU5QUk9HJykpXG4gICAgfVxuXG4gICAgY29uc3QgcmVxID0gbmV3IHNoYXJlZC5kcml2ZXIuUmVxdWVzdCh0aGlzKVxuICAgIHJlcS5zdHJlYW0gPSBmYWxzZVxuICAgIHJlcS5pbnB1dCgnaGFuZGxlJywgVFlQRVMuSW50LCB0aGlzLl9oYW5kbGUpXG4gICAgcmVxLmV4ZWN1dGUoJ3NwX3VucHJlcGFyZScsIGVyciA9PiB7XG4gICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuXG4gICAgICB0aGlzLnBhcmVudC5yZWxlYXNlKHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbilcbiAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbiA9IG51bGxcbiAgICAgIHRoaXMuX2FjcXVpcmVkQ29uZmlnID0gbnVsbFxuICAgICAgdGhpcy5faGFuZGxlID0gMFxuICAgICAgdGhpcy5wcmVwYXJlZCA9IGZhbHNlXG5cbiAgICAgIGRlYnVnKCdwcyglZCk6IHVucHJlcGFyZWQnLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbClcbiAgICB9KVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUHJlcGFyZWRTdGF0ZW1lbnRcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/base/prepared-statement.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/base/request.js":
/*!*************************************************!*\
  !*** ../node_modules/mssql/lib/base/request.js ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/../node_modules/debug/src/index.js\")('mssql:base')\nconst { EventEmitter } = __webpack_require__(/*! node:events */ \"node:events\")\nconst { Readable } = __webpack_require__(/*! node:stream */ \"node:stream\")\nconst { IDS, objectHasProperty } = __webpack_require__(/*! ../utils */ \"(rsc)/../node_modules/mssql/lib/utils.js\")\nconst globalConnection = __webpack_require__(/*! ../global-connection */ \"(rsc)/../node_modules/mssql/lib/global-connection.js\")\nconst { RequestError, ConnectionError } = __webpack_require__(/*! ../error */ \"(rsc)/../node_modules/mssql/lib/error/index.js\")\nconst { TYPES } = __webpack_require__(/*! ../datatypes */ \"(rsc)/../node_modules/mssql/lib/datatypes.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/../node_modules/mssql/lib/shared.js\")\n\n/**\n * Class Request.\n *\n * @property {Transaction} transaction Reference to transaction when request was created in transaction.\n * @property {*} parameters Collection of input and output parameters.\n * @property {Boolean} canceled `true` if request was canceled.\n *\n * @fires Request#recordset\n * @fires Request#row\n * @fires Request#done\n * @fires Request#error\n */\n\nclass Request extends EventEmitter {\n  /**\n   * Create new Request.\n   *\n   * @param {Connection|ConnectionPool|Transaction|PreparedStatement} parent If omitted, global connection is used instead.\n   */\n\n  constructor (parent) {\n    super()\n\n    IDS.add(this, 'Request')\n    debug('request(%d): created', IDS.get(this))\n\n    this.canceled = false\n    this._paused = false\n    this.parent = parent || globalConnection.pool\n    this.parameters = {}\n    this.stream = null\n    this.arrayRowMode = null\n  }\n\n  get paused () {\n    return this._paused\n  }\n\n  /**\n   * Generate sql string and set input parameters from tagged template string.\n   *\n   * @param {Template literal} template\n   * @return {String}\n   */\n\n  template () {\n    const values = Array.prototype.slice.call(arguments)\n    const strings = values.shift()\n    return this._template(strings, values)\n  }\n\n  /**\n   * Fetch request from tagged template string.\n   *\n   * @private\n   * @param {Array} strings\n   * @param {Array} values\n   * @param {String} [method] If provided, method is automatically called with serialized command on this object.\n   * @return {Request}\n   */\n\n  _template (strings, values, method) {\n    const command = [strings[0]]\n\n    for (let index = 0; index < values.length; index++) {\n      const value = values[index]\n      // if value is an array, prepare each items as it's own comma separated parameter\n      if (Array.isArray(value)) {\n        for (let parameterIndex = 0; parameterIndex < value.length; parameterIndex++) {\n          this.input(`param${index + 1}_${parameterIndex}`, value[parameterIndex])\n          command.push(`@param${index + 1}_${parameterIndex}`)\n          if (parameterIndex < value.length - 1) {\n            command.push(', ')\n          }\n        }\n        command.push(strings[index + 1])\n      } else {\n        this.input(`param${index + 1}`, value)\n        command.push(`@param${index + 1}`, strings[index + 1])\n      }\n    }\n\n    if (method) {\n      return this[method](command.join(''))\n    } else {\n      return command.join('')\n    }\n  }\n\n  /**\n   * Add an input parameter to the request.\n   *\n   * @param {String} name Name of the input parameter without @ char.\n   * @param {*} [type] SQL data type of input parameter. If you omit type, module automatically decides which SQL data type should be used based on JS data type.\n   * @param {*} value Input parameter value. `undefined` and `NaN` values are automatically converted to `null` values.\n   * @return {Request}\n   */\n\n  input (name, type, value) {\n    if (/--| |\\/\\*|\\*\\/|'/.test(name)) {\n      throw new RequestError(`SQL injection warning for param '${name}'`, 'EINJECT')\n    }\n\n    if (arguments.length < 2) {\n      throw new RequestError('Invalid number of arguments. At least 2 arguments expected.', 'EARGS')\n    } else if (arguments.length === 2) {\n      value = type\n      type = shared.getTypeByValue(value)\n    }\n\n    // support for custom data types\n    if (value && typeof value.valueOf === 'function' && !(value instanceof Date)) value = value.valueOf()\n\n    if (value === undefined) value = null // undefined to null\n    if (typeof value === 'number' && isNaN(value)) value = null // NaN to null\n    if (type instanceof Function) type = type()\n\n    if (objectHasProperty(this.parameters, name)) {\n      throw new RequestError(`The parameter name ${name} has already been declared. Parameter names must be unique`, 'EDUPEPARAM')\n    }\n\n    this.parameters[name] = {\n      name,\n      type: type.type,\n      io: 1,\n      value,\n      length: type.length,\n      scale: type.scale,\n      precision: type.precision,\n      tvpType: type.tvpType\n    }\n\n    return this\n  }\n\n  /**\n   * Replace an input parameter on the request.\n   *\n   * @param {String} name Name of the input parameter without @ char.\n   * @param {*} [type] SQL data type of input parameter. If you omit type, module automatically decides which SQL data type should be used based on JS data type.\n   * @param {*} value Input parameter value. `undefined` and `NaN` values are automatically converted to `null` values.\n   * @return {Request}\n   */\n\n  replaceInput (name, type, value) {\n    delete this.parameters[name]\n\n    return this.input(name, type, value)\n  }\n\n  /**\n   * Add an output parameter to the request.\n   *\n   * @param {String} name Name of the output parameter without @ char.\n   * @param {*} type SQL data type of output parameter.\n   * @param {*} [value] Output parameter value initial value. `undefined` and `NaN` values are automatically converted to `null` values. Optional.\n   * @return {Request}\n   */\n\n  output (name, type, value) {\n    if (!type) { type = TYPES.NVarChar }\n\n    if (/--| |\\/\\*|\\*\\/|'/.test(name)) {\n      throw new RequestError(`SQL injection warning for param '${name}'`, 'EINJECT')\n    }\n\n    if ((type === TYPES.Text) || (type === TYPES.NText) || (type === TYPES.Image)) {\n      throw new RequestError('Deprecated types (Text, NText, Image) are not supported as OUTPUT parameters.', 'EDEPRECATED')\n    }\n\n    // support for custom data types\n    if (value && typeof value.valueOf === 'function' && !(value instanceof Date)) value = value.valueOf()\n\n    if (value === undefined) value = null // undefined to null\n    if (typeof value === 'number' && isNaN(value)) value = null // NaN to null\n    if (type instanceof Function) type = type()\n\n    if (objectHasProperty(this.parameters, name)) {\n      throw new RequestError(`The parameter name ${name} has already been declared. Parameter names must be unique`, 'EDUPEPARAM')\n    }\n\n    this.parameters[name] = {\n      name,\n      type: type.type,\n      io: 2,\n      value,\n      length: type.length,\n      scale: type.scale,\n      precision: type.precision\n    }\n\n    return this\n  }\n\n  /**\n   * Replace an output parameter on the request.\n   *\n   * @param {String} name Name of the output parameter without @ char.\n   * @param {*} type SQL data type of output parameter.\n   * @param {*} [value] Output parameter value initial value. `undefined` and `NaN` values are automatically converted to `null` values. Optional.\n   * @return {Request}\n   */\n\n  replaceOutput (name, type, value) {\n    delete this.parameters[name]\n\n    return this.output(name, type, value)\n  }\n\n  /**\n   * Execute the SQL batch.\n   *\n   * @param {String} batch T-SQL batch to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  batch (batch, callback) {\n    if (this.stream === null && this.parent) this.stream = this.parent.config.stream\n    if (this.arrayRowMode === null && this.parent) this.arrayRowMode = this.parent.config.arrayRowMode\n    this.rowsAffected = 0\n\n    if (typeof callback === 'function') {\n      this._batch(batch, (err, recordsets, output, rowsAffected) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected\n          })\n        }\n\n        if (err) return callback(err)\n        callback(null, {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected\n        })\n      })\n      return this\n    }\n\n    // Check if method was called as tagged template\n    if (typeof batch === 'object') {\n      const values = Array.prototype.slice.call(arguments)\n      const strings = values.shift()\n      batch = this._template(strings, values)\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._batch(batch, (err, recordsets, output, rowsAffected) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected\n          })\n        }\n\n        if (err) return reject(err)\n        resolve({\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected\n        })\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {String} batch\n   * @param {Request~requestCallback} callback\n   */\n\n  _batch (batch, callback) {\n    if (!this.parent) {\n      return setImmediate(callback, new RequestError('No connection is specified for that request.', 'ENOCONN'))\n    }\n\n    if (!this.parent.connected) {\n      return setImmediate(callback, new ConnectionError('Connection is closed.', 'ECONNCLOSED'))\n    }\n\n    this.canceled = false\n    setImmediate(callback)\n  }\n\n  /**\n   * Bulk load.\n   *\n   * @param {Table} table SQL table.\n   * @param {object} [options] Options to be passed to the underlying driver (tedious only).\n   * @param {Request~bulkCallback} [callback] A callback which is called after bulk load has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  bulk (table, options, callback) {\n    if (typeof options === 'function') {\n      callback = options\n      options = {}\n    } else if (typeof options === 'undefined') {\n      options = {}\n    }\n\n    if (this.stream === null && this.parent) this.stream = this.parent.config.stream\n    if (this.arrayRowMode === null && this.parent) this.arrayRowMode = this.parent.config.arrayRowMode\n\n    if (this.stream || typeof callback === 'function') {\n      this._bulk(table, options, (err, rowsAffected) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          return this.emit('done', {\n            rowsAffected\n          })\n        }\n\n        if (err) return callback(err)\n        callback(null, {\n          rowsAffected\n        })\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._bulk(table, options, (err, rowsAffected) => {\n        if (err) return reject(err)\n        resolve({\n          rowsAffected\n        })\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {Table} table\n   * @param {object} options\n   * @param {Request~bulkCallback} callback\n   */\n\n  _bulk (table, options, callback) {\n    if (!this.parent) {\n      return setImmediate(callback, new RequestError('No connection is specified for that request.', 'ENOCONN'))\n    }\n\n    if (!this.parent.connected) {\n      return setImmediate(callback, new ConnectionError('Connection is closed.', 'ECONNCLOSED'))\n    }\n\n    this.canceled = false\n    setImmediate(callback)\n  }\n\n  /**\n   * Wrap original request in a Readable stream that supports back pressure and return.\n   * It also sets request to `stream` mode and pulls all rows from all recordsets to a given stream.\n   *\n   * @param {Object} streamOptions - optional options to configure the readable stream with like highWaterMark\n   * @return {Stream}\n   */\n\n  toReadableStream (streamOptions = {}) {\n    this.stream = true\n    this.pause()\n    const readableStream = new Readable({\n      ...streamOptions,\n      objectMode: true,\n      read: (/* size */) => {\n        this.resume()\n      }\n    })\n    this.on('row', (row) => {\n      if (!readableStream.push(row)) {\n        this.pause()\n      }\n    })\n    this.on('error', (error) => {\n      readableStream.emit('error', error)\n    })\n    this.on('done', () => {\n      readableStream.push(null)\n    })\n    return readableStream\n  }\n\n  /**\n   * Wrap original request in a Readable stream that supports back pressure and pipe to the Writable stream.\n   * It also sets request to `stream` mode and pulls all rows from all recordsets to a given stream.\n   *\n   * @param {Stream} stream Stream to pipe data into.\n   * @return {Stream}\n   */\n\n  pipe (writableStream) {\n    const readableStream = this.toReadableStream()\n    return readableStream.pipe(writableStream)\n  }\n\n  /**\n   * Execute the SQL command.\n   *\n   * @param {String} command T-SQL command to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  query (command, callback) {\n    if (this.stream === null && this.parent) this.stream = this.parent.config.stream\n    if (this.arrayRowMode === null && this.parent) this.arrayRowMode = this.parent.config.arrayRowMode\n    this.rowsAffected = 0\n\n    if (typeof callback === 'function') {\n      this._query(command, (err, recordsets, output, rowsAffected, columns) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected\n          })\n        }\n\n        if (err) return callback(err)\n        const result = {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected\n        }\n        if (this.arrayRowMode) result.columns = columns\n        callback(null, result)\n      })\n      return this\n    }\n\n    // Check if method was called as tagged template\n    if (typeof command === 'object') {\n      const values = Array.prototype.slice.call(arguments)\n      const strings = values.shift()\n      command = this._template(strings, values)\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._query(command, (err, recordsets, output, rowsAffected, columns) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected\n          })\n        }\n\n        if (err) return reject(err)\n        const result = {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected\n        }\n        if (this.arrayRowMode) result.columns = columns\n        resolve(result)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {String} command\n   * @param {Request~bulkCallback} callback\n   */\n\n  _query (command, callback) {\n    if (!this.parent) {\n      return setImmediate(callback, new RequestError('No connection is specified for that request.', 'ENOCONN'))\n    }\n\n    if (!this.parent.connected) {\n      return setImmediate(callback, new ConnectionError('Connection is closed.', 'ECONNCLOSED'))\n    }\n\n    this.canceled = false\n    setImmediate(callback)\n  }\n\n  /**\n   * Call a stored procedure.\n   *\n   * @param {String} procedure Name of the stored procedure to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  execute (command, callback) {\n    if (this.stream === null && this.parent) this.stream = this.parent.config.stream\n    if (this.arrayRowMode === null && this.parent) this.arrayRowMode = this.parent.config.arrayRowMode\n    this.rowsAffected = 0\n\n    if (typeof callback === 'function') {\n      this._execute(command, (err, recordsets, output, returnValue, rowsAffected, columns) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected,\n            returnValue\n          })\n        }\n\n        if (err) return callback(err)\n        const result = {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected,\n          returnValue\n        }\n        if (this.arrayRowMode) result.columns = columns\n        callback(null, result)\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._execute(command, (err, recordsets, output, returnValue, rowsAffected, columns) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected,\n            returnValue\n          })\n        }\n\n        if (err) return reject(err)\n        const result = {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected,\n          returnValue\n        }\n        if (this.arrayRowMode) result.columns = columns\n        resolve(result)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {String} procedure\n   * @param {Request~bulkCallback} callback\n   */\n\n  _execute (procedure, callback) {\n    if (!this.parent) {\n      return setImmediate(callback, new RequestError('No connection is specified for that request.', 'ENOCONN'))\n    }\n\n    if (!this.parent.connected) {\n      return setImmediate(callback, new ConnectionError('Connection is closed.', 'ECONNCLOSED'))\n    }\n\n    this.canceled = false\n    setImmediate(callback)\n  }\n\n  /**\n   * Cancel currently executed request.\n   *\n   * @return {Boolean}\n   */\n\n  cancel () {\n    this._cancel()\n    return true\n  }\n\n  /**\n   * @private\n   */\n\n  _cancel () {\n    this.canceled = true\n  }\n\n  pause () {\n    if (this.stream) {\n      this._pause()\n      return true\n    }\n    return false\n  }\n\n  _pause () {\n    this._paused = true\n  }\n\n  resume () {\n    if (this.stream) {\n      this._resume()\n      return true\n    }\n    return false\n  }\n\n  _resume () {\n    this._paused = false\n  }\n\n  _setCurrentRequest (request) {\n    this._currentRequest = request\n    if (this._paused) {\n      this.pause()\n    }\n    return this\n  }\n}\n\nmodule.exports = Request\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9iYXNlL3JlcXVlc3QuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosY0FBYyxtQkFBTyxDQUFDLHVEQUFPO0FBQzdCLFFBQVEsZUFBZSxFQUFFLG1CQUFPLENBQUMsZ0NBQWE7QUFDOUMsUUFBUSxXQUFXLEVBQUUsbUJBQU8sQ0FBQyxnQ0FBYTtBQUMxQyxRQUFRLHlCQUF5QixFQUFFLG1CQUFPLENBQUMsMERBQVU7QUFDckQseUJBQXlCLG1CQUFPLENBQUMsa0ZBQXNCO0FBQ3ZELFFBQVEsZ0NBQWdDLEVBQUUsbUJBQU8sQ0FBQyxnRUFBVTtBQUM1RCxRQUFRLFFBQVEsRUFBRSxtQkFBTyxDQUFDLGtFQUFjO0FBQ3hDLGVBQWUsbUJBQU8sQ0FBQyw0REFBVzs7QUFFbEM7QUFDQTtBQUNBO0FBQ0EsY0FBYyxhQUFhO0FBQzNCLGNBQWMsR0FBRztBQUNqQixjQUFjLFNBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5REFBeUQ7QUFDdEU7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGtCQUFrQjtBQUMvQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLE9BQU87QUFDcEIsYUFBYSxRQUFRO0FBQ3JCLGNBQWM7QUFDZDs7QUFFQTtBQUNBOztBQUVBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLCtCQUErQjtBQUNwRSw2QkFBNkIsVUFBVSxHQUFHLGVBQWU7QUFDekQsZ0NBQWdDLFVBQVUsR0FBRyxlQUFlO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsMkJBQTJCLFVBQVU7QUFDckMsOEJBQThCLFVBQVU7QUFDeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxHQUFHO0FBQ2hCLGFBQWEsR0FBRztBQUNoQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBLGlFQUFpRSxLQUFLO0FBQ3RFOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbURBQW1ELE1BQU07QUFDekQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxHQUFHO0FBQ2hCLGFBQWEsR0FBRztBQUNoQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLEdBQUc7QUFDaEIsYUFBYSxHQUFHO0FBQ2hCLGNBQWM7QUFDZDs7QUFFQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQSxpRUFBaUUsS0FBSztBQUN0RTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtREFBbUQsTUFBTTtBQUN6RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxHQUFHO0FBQ2hCLGFBQWEsR0FBRztBQUNoQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLHlCQUF5QjtBQUN0QyxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEseUJBQXlCO0FBQ3RDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsUUFBUTtBQUNyQixhQUFhLHNCQUFzQjtBQUNuQyxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsc0JBQXNCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsY0FBYztBQUNkOztBQUVBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSx5QkFBeUI7QUFDdEMsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxzQkFBc0I7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSx5QkFBeUI7QUFDdEMsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsc0JBQXNCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvYmFzZS9yZXF1ZXN0LmpzPzhkMzkiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnbXNzcWw6YmFzZScpXG5jb25zdCB7IEV2ZW50RW1pdHRlciB9ID0gcmVxdWlyZSgnbm9kZTpldmVudHMnKVxuY29uc3QgeyBSZWFkYWJsZSB9ID0gcmVxdWlyZSgnbm9kZTpzdHJlYW0nKVxuY29uc3QgeyBJRFMsIG9iamVjdEhhc1Byb3BlcnR5IH0gPSByZXF1aXJlKCcuLi91dGlscycpXG5jb25zdCBnbG9iYWxDb25uZWN0aW9uID0gcmVxdWlyZSgnLi4vZ2xvYmFsLWNvbm5lY3Rpb24nKVxuY29uc3QgeyBSZXF1ZXN0RXJyb3IsIENvbm5lY3Rpb25FcnJvciB9ID0gcmVxdWlyZSgnLi4vZXJyb3InKVxuY29uc3QgeyBUWVBFUyB9ID0gcmVxdWlyZSgnLi4vZGF0YXR5cGVzJylcbmNvbnN0IHNoYXJlZCA9IHJlcXVpcmUoJy4uL3NoYXJlZCcpXG5cbi8qKlxuICogQ2xhc3MgUmVxdWVzdC5cbiAqXG4gKiBAcHJvcGVydHkge1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvbiBSZWZlcmVuY2UgdG8gdHJhbnNhY3Rpb24gd2hlbiByZXF1ZXN0IHdhcyBjcmVhdGVkIGluIHRyYW5zYWN0aW9uLlxuICogQHByb3BlcnR5IHsqfSBwYXJhbWV0ZXJzIENvbGxlY3Rpb24gb2YgaW5wdXQgYW5kIG91dHB1dCBwYXJhbWV0ZXJzLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBjYW5jZWxlZCBgdHJ1ZWAgaWYgcmVxdWVzdCB3YXMgY2FuY2VsZWQuXG4gKlxuICogQGZpcmVzIFJlcXVlc3QjcmVjb3Jkc2V0XG4gKiBAZmlyZXMgUmVxdWVzdCNyb3dcbiAqIEBmaXJlcyBSZXF1ZXN0I2RvbmVcbiAqIEBmaXJlcyBSZXF1ZXN0I2Vycm9yXG4gKi9cblxuY2xhc3MgUmVxdWVzdCBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGUgbmV3IFJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29ubmVjdGlvbnxDb25uZWN0aW9uUG9vbHxUcmFuc2FjdGlvbnxQcmVwYXJlZFN0YXRlbWVudH0gcGFyZW50IElmIG9taXR0ZWQsIGdsb2JhbCBjb25uZWN0aW9uIGlzIHVzZWQgaW5zdGVhZC5cbiAgICovXG5cbiAgY29uc3RydWN0b3IgKHBhcmVudCkge1xuICAgIHN1cGVyKClcblxuICAgIElEUy5hZGQodGhpcywgJ1JlcXVlc3QnKVxuICAgIGRlYnVnKCdyZXF1ZXN0KCVkKTogY3JlYXRlZCcsIElEUy5nZXQodGhpcykpXG5cbiAgICB0aGlzLmNhbmNlbGVkID0gZmFsc2VcbiAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZVxuICAgIHRoaXMucGFyZW50ID0gcGFyZW50IHx8IGdsb2JhbENvbm5lY3Rpb24ucG9vbFxuICAgIHRoaXMucGFyYW1ldGVycyA9IHt9XG4gICAgdGhpcy5zdHJlYW0gPSBudWxsXG4gICAgdGhpcy5hcnJheVJvd01vZGUgPSBudWxsXG4gIH1cblxuICBnZXQgcGF1c2VkICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGF1c2VkXG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgc3FsIHN0cmluZyBhbmQgc2V0IGlucHV0IHBhcmFtZXRlcnMgZnJvbSB0YWdnZWQgdGVtcGxhdGUgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge1RlbXBsYXRlIGxpdGVyYWx9IHRlbXBsYXRlXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgdGVtcGxhdGUgKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICBjb25zdCBzdHJpbmdzID0gdmFsdWVzLnNoaWZ0KClcbiAgICByZXR1cm4gdGhpcy5fdGVtcGxhdGUoc3RyaW5ncywgdmFsdWVzKVxuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIHJlcXVlc3QgZnJvbSB0YWdnZWQgdGVtcGxhdGUgc3RyaW5nLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBzdHJpbmdzXG4gICAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW21ldGhvZF0gSWYgcHJvdmlkZWQsIG1ldGhvZCBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCB3aXRoIHNlcmlhbGl6ZWQgY29tbWFuZCBvbiB0aGlzIG9iamVjdC5cbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgX3RlbXBsYXRlIChzdHJpbmdzLCB2YWx1ZXMsIG1ldGhvZCkge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBbc3RyaW5nc1swXV1cblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB2YWx1ZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpbmRleF1cbiAgICAgIC8vIGlmIHZhbHVlIGlzIGFuIGFycmF5LCBwcmVwYXJlIGVhY2ggaXRlbXMgYXMgaXQncyBvd24gY29tbWEgc2VwYXJhdGVkIHBhcmFtZXRlclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGZvciAobGV0IHBhcmFtZXRlckluZGV4ID0gMDsgcGFyYW1ldGVySW5kZXggPCB2YWx1ZS5sZW5ndGg7IHBhcmFtZXRlckluZGV4KyspIHtcbiAgICAgICAgICB0aGlzLmlucHV0KGBwYXJhbSR7aW5kZXggKyAxfV8ke3BhcmFtZXRlckluZGV4fWAsIHZhbHVlW3BhcmFtZXRlckluZGV4XSlcbiAgICAgICAgICBjb21tYW5kLnB1c2goYEBwYXJhbSR7aW5kZXggKyAxfV8ke3BhcmFtZXRlckluZGV4fWApXG4gICAgICAgICAgaWYgKHBhcmFtZXRlckluZGV4IDwgdmFsdWUubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgY29tbWFuZC5wdXNoKCcsICcpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbW1hbmQucHVzaChzdHJpbmdzW2luZGV4ICsgMV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmlucHV0KGBwYXJhbSR7aW5kZXggKyAxfWAsIHZhbHVlKVxuICAgICAgICBjb21tYW5kLnB1c2goYEBwYXJhbSR7aW5kZXggKyAxfWAsIHN0cmluZ3NbaW5kZXggKyAxXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWV0aG9kKSB7XG4gICAgICByZXR1cm4gdGhpc1ttZXRob2RdKGNvbW1hbmQuam9pbignJykpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb21tYW5kLmpvaW4oJycpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBpbnB1dCBwYXJhbWV0ZXIgdG8gdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGlucHV0IHBhcmFtZXRlciB3aXRob3V0IEAgY2hhci5cbiAgICogQHBhcmFtIHsqfSBbdHlwZV0gU1FMIGRhdGEgdHlwZSBvZiBpbnB1dCBwYXJhbWV0ZXIuIElmIHlvdSBvbWl0IHR5cGUsIG1vZHVsZSBhdXRvbWF0aWNhbGx5IGRlY2lkZXMgd2hpY2ggU1FMIGRhdGEgdHlwZSBzaG91bGQgYmUgdXNlZCBiYXNlZCBvbiBKUyBkYXRhIHR5cGUuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgSW5wdXQgcGFyYW1ldGVyIHZhbHVlLiBgdW5kZWZpbmVkYCBhbmQgYE5hTmAgdmFsdWVzIGFyZSBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byBgbnVsbGAgdmFsdWVzLlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICAgKi9cblxuICBpbnB1dCAobmFtZSwgdHlwZSwgdmFsdWUpIHtcbiAgICBpZiAoLy0tfCB8XFwvXFwqfFxcKlxcL3wnLy50ZXN0KG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgUmVxdWVzdEVycm9yKGBTUUwgaW5qZWN0aW9uIHdhcm5pbmcgZm9yIHBhcmFtICcke25hbWV9J2AsICdFSU5KRUNUJylcbiAgICB9XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoJ0ludmFsaWQgbnVtYmVyIG9mIGFyZ3VtZW50cy4gQXQgbGVhc3QgMiBhcmd1bWVudHMgZXhwZWN0ZWQuJywgJ0VBUkdTJylcbiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICAgIHZhbHVlID0gdHlwZVxuICAgICAgdHlwZSA9IHNoYXJlZC5nZXRUeXBlQnlWYWx1ZSh2YWx1ZSlcbiAgICB9XG5cbiAgICAvLyBzdXBwb3J0IGZvciBjdXN0b20gZGF0YSB0eXBlc1xuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PT0gJ2Z1bmN0aW9uJyAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpIHZhbHVlID0gdmFsdWUudmFsdWVPZigpXG5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgdmFsdWUgPSBudWxsIC8vIHVuZGVmaW5lZCB0byBudWxsXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNOYU4odmFsdWUpKSB2YWx1ZSA9IG51bGwgLy8gTmFOIHRvIG51bGxcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB0eXBlID0gdHlwZSgpXG5cbiAgICBpZiAob2JqZWN0SGFzUHJvcGVydHkodGhpcy5wYXJhbWV0ZXJzLCBuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcihgVGhlIHBhcmFtZXRlciBuYW1lICR7bmFtZX0gaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZC4gUGFyYW1ldGVyIG5hbWVzIG11c3QgYmUgdW5pcXVlYCwgJ0VEVVBFUEFSQU0nKVxuICAgIH1cblxuICAgIHRoaXMucGFyYW1ldGVyc1tuYW1lXSA9IHtcbiAgICAgIG5hbWUsXG4gICAgICB0eXBlOiB0eXBlLnR5cGUsXG4gICAgICBpbzogMSxcbiAgICAgIHZhbHVlLFxuICAgICAgbGVuZ3RoOiB0eXBlLmxlbmd0aCxcbiAgICAgIHNjYWxlOiB0eXBlLnNjYWxlLFxuICAgICAgcHJlY2lzaW9uOiB0eXBlLnByZWNpc2lvbixcbiAgICAgIHR2cFR5cGU6IHR5cGUudHZwVHlwZVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZSBhbiBpbnB1dCBwYXJhbWV0ZXIgb24gdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGlucHV0IHBhcmFtZXRlciB3aXRob3V0IEAgY2hhci5cbiAgICogQHBhcmFtIHsqfSBbdHlwZV0gU1FMIGRhdGEgdHlwZSBvZiBpbnB1dCBwYXJhbWV0ZXIuIElmIHlvdSBvbWl0IHR5cGUsIG1vZHVsZSBhdXRvbWF0aWNhbGx5IGRlY2lkZXMgd2hpY2ggU1FMIGRhdGEgdHlwZSBzaG91bGQgYmUgdXNlZCBiYXNlZCBvbiBKUyBkYXRhIHR5cGUuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgSW5wdXQgcGFyYW1ldGVyIHZhbHVlLiBgdW5kZWZpbmVkYCBhbmQgYE5hTmAgdmFsdWVzIGFyZSBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byBgbnVsbGAgdmFsdWVzLlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICAgKi9cblxuICByZXBsYWNlSW5wdXQgKG5hbWUsIHR5cGUsIHZhbHVlKSB7XG4gICAgZGVsZXRlIHRoaXMucGFyYW1ldGVyc1tuYW1lXVxuXG4gICAgcmV0dXJuIHRoaXMuaW5wdXQobmFtZSwgdHlwZSwgdmFsdWUpXG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIG91dHB1dCBwYXJhbWV0ZXIgdG8gdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIG91dHB1dCBwYXJhbWV0ZXIgd2l0aG91dCBAIGNoYXIuXG4gICAqIEBwYXJhbSB7Kn0gdHlwZSBTUUwgZGF0YSB0eXBlIG9mIG91dHB1dCBwYXJhbWV0ZXIuXG4gICAqIEBwYXJhbSB7Kn0gW3ZhbHVlXSBPdXRwdXQgcGFyYW1ldGVyIHZhbHVlIGluaXRpYWwgdmFsdWUuIGB1bmRlZmluZWRgIGFuZCBgTmFOYCB2YWx1ZXMgYXJlIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIHRvIGBudWxsYCB2YWx1ZXMuIE9wdGlvbmFsLlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICAgKi9cblxuICBvdXRwdXQgKG5hbWUsIHR5cGUsIHZhbHVlKSB7XG4gICAgaWYgKCF0eXBlKSB7IHR5cGUgPSBUWVBFUy5OVmFyQ2hhciB9XG5cbiAgICBpZiAoLy0tfCB8XFwvXFwqfFxcKlxcL3wnLy50ZXN0KG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgUmVxdWVzdEVycm9yKGBTUUwgaW5qZWN0aW9uIHdhcm5pbmcgZm9yIHBhcmFtICcke25hbWV9J2AsICdFSU5KRUNUJylcbiAgICB9XG5cbiAgICBpZiAoKHR5cGUgPT09IFRZUEVTLlRleHQpIHx8ICh0eXBlID09PSBUWVBFUy5OVGV4dCkgfHwgKHR5cGUgPT09IFRZUEVTLkltYWdlKSkge1xuICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcignRGVwcmVjYXRlZCB0eXBlcyAoVGV4dCwgTlRleHQsIEltYWdlKSBhcmUgbm90IHN1cHBvcnRlZCBhcyBPVVRQVVQgcGFyYW1ldGVycy4nLCAnRURFUFJFQ0FURUQnKVxuICAgIH1cblxuICAgIC8vIHN1cHBvcnQgZm9yIGN1c3RvbSBkYXRhIHR5cGVzXG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09PSAnZnVuY3Rpb24nICYmICEodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSkgdmFsdWUgPSB2YWx1ZS52YWx1ZU9mKClcblxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB2YWx1ZSA9IG51bGwgLy8gdW5kZWZpbmVkIHRvIG51bGxcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiBpc05hTih2YWx1ZSkpIHZhbHVlID0gbnVsbCAvLyBOYU4gdG8gbnVsbFxuICAgIGlmICh0eXBlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHR5cGUgPSB0eXBlKClcblxuICAgIGlmIChvYmplY3RIYXNQcm9wZXJ0eSh0aGlzLnBhcmFtZXRlcnMsIG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgUmVxdWVzdEVycm9yKGBUaGUgcGFyYW1ldGVyIG5hbWUgJHtuYW1lfSBoYXMgYWxyZWFkeSBiZWVuIGRlY2xhcmVkLiBQYXJhbWV0ZXIgbmFtZXMgbXVzdCBiZSB1bmlxdWVgLCAnRURVUEVQQVJBTScpXG4gICAgfVxuXG4gICAgdGhpcy5wYXJhbWV0ZXJzW25hbWVdID0ge1xuICAgICAgbmFtZSxcbiAgICAgIHR5cGU6IHR5cGUudHlwZSxcbiAgICAgIGlvOiAyLFxuICAgICAgdmFsdWUsXG4gICAgICBsZW5ndGg6IHR5cGUubGVuZ3RoLFxuICAgICAgc2NhbGU6IHR5cGUuc2NhbGUsXG4gICAgICBwcmVjaXNpb246IHR5cGUucHJlY2lzaW9uXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlIGFuIG91dHB1dCBwYXJhbWV0ZXIgb24gdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIG91dHB1dCBwYXJhbWV0ZXIgd2l0aG91dCBAIGNoYXIuXG4gICAqIEBwYXJhbSB7Kn0gdHlwZSBTUUwgZGF0YSB0eXBlIG9mIG91dHB1dCBwYXJhbWV0ZXIuXG4gICAqIEBwYXJhbSB7Kn0gW3ZhbHVlXSBPdXRwdXQgcGFyYW1ldGVyIHZhbHVlIGluaXRpYWwgdmFsdWUuIGB1bmRlZmluZWRgIGFuZCBgTmFOYCB2YWx1ZXMgYXJlIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIHRvIGBudWxsYCB2YWx1ZXMuIE9wdGlvbmFsLlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICAgKi9cblxuICByZXBsYWNlT3V0cHV0IChuYW1lLCB0eXBlLCB2YWx1ZSkge1xuICAgIGRlbGV0ZSB0aGlzLnBhcmFtZXRlcnNbbmFtZV1cblxuICAgIHJldHVybiB0aGlzLm91dHB1dChuYW1lLCB0eXBlLCB2YWx1ZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIHRoZSBTUUwgYmF0Y2guXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXRjaCBULVNRTCBiYXRjaCB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHtSZXF1ZXN0fnJlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBleGVjdXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1JlcXVlc3R8UHJvbWlzZX1cbiAgICovXG5cbiAgYmF0Y2ggKGJhdGNoLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnN0cmVhbSA9PT0gbnVsbCAmJiB0aGlzLnBhcmVudCkgdGhpcy5zdHJlYW0gPSB0aGlzLnBhcmVudC5jb25maWcuc3RyZWFtXG4gICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlID09PSBudWxsICYmIHRoaXMucGFyZW50KSB0aGlzLmFycmF5Um93TW9kZSA9IHRoaXMucGFyZW50LmNvbmZpZy5hcnJheVJvd01vZGVcbiAgICB0aGlzLnJvd3NBZmZlY3RlZCA9IDBcblxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX2JhdGNoKGJhdGNoLCAoZXJyLCByZWNvcmRzZXRzLCBvdXRwdXQsIHJvd3NBZmZlY3RlZCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICBpZiAoZXJyKSB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICAgIGVyciA9IG51bGxcblxuICAgICAgICAgIHRoaXMuZW1pdCgnZG9uZScsIHtcbiAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIHJvd3NBZmZlY3RlZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuICAgICAgICBjYWxsYmFjayhudWxsLCB7XG4gICAgICAgICAgcmVjb3Jkc2V0cyxcbiAgICAgICAgICByZWNvcmRzZXQ6IHJlY29yZHNldHMgJiYgcmVjb3Jkc2V0c1swXSxcbiAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgcm93c0FmZmVjdGVkXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBtZXRob2Qgd2FzIGNhbGxlZCBhcyB0YWdnZWQgdGVtcGxhdGVcbiAgICBpZiAodHlwZW9mIGJhdGNoID09PSAnb2JqZWN0Jykge1xuICAgICAgY29uc3QgdmFsdWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuICAgICAgY29uc3Qgc3RyaW5ncyA9IHZhbHVlcy5zaGlmdCgpXG4gICAgICBiYXRjaCA9IHRoaXMuX3RlbXBsYXRlKHN0cmluZ3MsIHZhbHVlcylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX2JhdGNoKGJhdGNoLCAoZXJyLCByZWNvcmRzZXRzLCBvdXRwdXQsIHJvd3NBZmZlY3RlZCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICBpZiAoZXJyKSB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICAgIGVyciA9IG51bGxcblxuICAgICAgICAgIHRoaXMuZW1pdCgnZG9uZScsIHtcbiAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIHJvd3NBZmZlY3RlZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycilcbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgcmVjb3Jkc2V0cyxcbiAgICAgICAgICByZWNvcmRzZXQ6IHJlY29yZHNldHMgJiYgcmVjb3Jkc2V0c1swXSxcbiAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgcm93c0FmZmVjdGVkXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGJhdGNoXG4gICAqIEBwYXJhbSB7UmVxdWVzdH5yZXF1ZXN0Q2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuXG4gIF9iYXRjaCAoYmF0Y2gsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFJlcXVlc3RFcnJvcignTm8gY29ubmVjdGlvbiBpcyBzcGVjaWZpZWQgZm9yIHRoYXQgcmVxdWVzdC4nLCAnRU5PQ09OTicpKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5wYXJlbnQuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgQ29ubmVjdGlvbkVycm9yKCdDb25uZWN0aW9uIGlzIGNsb3NlZC4nLCAnRUNPTk5DTE9TRUQnKSlcbiAgICB9XG5cbiAgICB0aGlzLmNhbmNlbGVkID0gZmFsc2VcbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogQnVsayBsb2FkLlxuICAgKlxuICAgKiBAcGFyYW0ge1RhYmxlfSB0YWJsZSBTUUwgdGFibGUuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucyB0byBiZSBwYXNzZWQgdG8gdGhlIHVuZGVybHlpbmcgZHJpdmVyICh0ZWRpb3VzIG9ubHkpLlxuICAgKiBAcGFyYW0ge1JlcXVlc3R+YnVsa0NhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGJ1bGsgbG9hZCBoYXMgY29tcGxldGVkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7UmVxdWVzdHxQcm9taXNlfVxuICAgKi9cblxuICBidWxrICh0YWJsZSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gb3B0aW9uc1xuICAgICAgb3B0aW9ucyA9IHt9XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG9wdGlvbnMgPSB7fVxuICAgIH1cblxuICAgIGlmICh0aGlzLnN0cmVhbSA9PT0gbnVsbCAmJiB0aGlzLnBhcmVudCkgdGhpcy5zdHJlYW0gPSB0aGlzLnBhcmVudC5jb25maWcuc3RyZWFtXG4gICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlID09PSBudWxsICYmIHRoaXMucGFyZW50KSB0aGlzLmFycmF5Um93TW9kZSA9IHRoaXMucGFyZW50LmNvbmZpZy5hcnJheVJvd01vZGVcblxuICAgIGlmICh0aGlzLnN0cmVhbSB8fCB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX2J1bGsodGFibGUsIG9wdGlvbnMsIChlcnIsIHJvd3NBZmZlY3RlZCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICBpZiAoZXJyKSB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoJ2RvbmUnLCB7XG4gICAgICAgICAgICByb3dzQWZmZWN0ZWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcbiAgICAgICAgY2FsbGJhY2sobnVsbCwge1xuICAgICAgICAgIHJvd3NBZmZlY3RlZFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl9idWxrKHRhYmxlLCBvcHRpb25zLCAoZXJyLCByb3dzQWZmZWN0ZWQpID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpXG4gICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgIHJvd3NBZmZlY3RlZFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VGFibGV9IHRhYmxlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gICAqIEBwYXJhbSB7UmVxdWVzdH5idWxrQ2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuXG4gIF9idWxrICh0YWJsZSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBpZiAoIXRoaXMucGFyZW50KSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgUmVxdWVzdEVycm9yKCdObyBjb25uZWN0aW9uIGlzIHNwZWNpZmllZCBmb3IgdGhhdCByZXF1ZXN0LicsICdFTk9DT05OJykpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBhcmVudC5jb25uZWN0ZWQpIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBDb25uZWN0aW9uRXJyb3IoJ0Nvbm5lY3Rpb24gaXMgY2xvc2VkLicsICdFQ09OTkNMT1NFRCcpKVxuICAgIH1cblxuICAgIHRoaXMuY2FuY2VsZWQgPSBmYWxzZVxuICAgIHNldEltbWVkaWF0ZShjYWxsYmFjaylcbiAgfVxuXG4gIC8qKlxuICAgKiBXcmFwIG9yaWdpbmFsIHJlcXVlc3QgaW4gYSBSZWFkYWJsZSBzdHJlYW0gdGhhdCBzdXBwb3J0cyBiYWNrIHByZXNzdXJlIGFuZCByZXR1cm4uXG4gICAqIEl0IGFsc28gc2V0cyByZXF1ZXN0IHRvIGBzdHJlYW1gIG1vZGUgYW5kIHB1bGxzIGFsbCByb3dzIGZyb20gYWxsIHJlY29yZHNldHMgdG8gYSBnaXZlbiBzdHJlYW0uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzdHJlYW1PcHRpb25zIC0gb3B0aW9uYWwgb3B0aW9ucyB0byBjb25maWd1cmUgdGhlIHJlYWRhYmxlIHN0cmVhbSB3aXRoIGxpa2UgaGlnaFdhdGVyTWFya1xuICAgKiBAcmV0dXJuIHtTdHJlYW19XG4gICAqL1xuXG4gIHRvUmVhZGFibGVTdHJlYW0gKHN0cmVhbU9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuc3RyZWFtID0gdHJ1ZVxuICAgIHRoaXMucGF1c2UoKVxuICAgIGNvbnN0IHJlYWRhYmxlU3RyZWFtID0gbmV3IFJlYWRhYmxlKHtcbiAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICBvYmplY3RNb2RlOiB0cnVlLFxuICAgICAgcmVhZDogKC8qIHNpemUgKi8pID0+IHtcbiAgICAgICAgdGhpcy5yZXN1bWUoKVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5vbigncm93JywgKHJvdykgPT4ge1xuICAgICAgaWYgKCFyZWFkYWJsZVN0cmVhbS5wdXNoKHJvdykpIHtcbiAgICAgICAgdGhpcy5wYXVzZSgpXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgcmVhZGFibGVTdHJlYW0uZW1pdCgnZXJyb3InLCBlcnJvcilcbiAgICB9KVxuICAgIHRoaXMub24oJ2RvbmUnLCAoKSA9PiB7XG4gICAgICByZWFkYWJsZVN0cmVhbS5wdXNoKG51bGwpXG4gICAgfSlcbiAgICByZXR1cm4gcmVhZGFibGVTdHJlYW1cbiAgfVxuXG4gIC8qKlxuICAgKiBXcmFwIG9yaWdpbmFsIHJlcXVlc3QgaW4gYSBSZWFkYWJsZSBzdHJlYW0gdGhhdCBzdXBwb3J0cyBiYWNrIHByZXNzdXJlIGFuZCBwaXBlIHRvIHRoZSBXcml0YWJsZSBzdHJlYW0uXG4gICAqIEl0IGFsc28gc2V0cyByZXF1ZXN0IHRvIGBzdHJlYW1gIG1vZGUgYW5kIHB1bGxzIGFsbCByb3dzIGZyb20gYWxsIHJlY29yZHNldHMgdG8gYSBnaXZlbiBzdHJlYW0uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyZWFtfSBzdHJlYW0gU3RyZWFtIHRvIHBpcGUgZGF0YSBpbnRvLlxuICAgKiBAcmV0dXJuIHtTdHJlYW19XG4gICAqL1xuXG4gIHBpcGUgKHdyaXRhYmxlU3RyZWFtKSB7XG4gICAgY29uc3QgcmVhZGFibGVTdHJlYW0gPSB0aGlzLnRvUmVhZGFibGVTdHJlYW0oKVxuICAgIHJldHVybiByZWFkYWJsZVN0cmVhbS5waXBlKHdyaXRhYmxlU3RyZWFtKVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgdGhlIFNRTCBjb21tYW5kLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29tbWFuZCBULVNRTCBjb21tYW5kIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0ge1JlcXVlc3R+cmVxdWVzdENhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGV4ZWN1dGlvbiBoYXMgY29tcGxldGVkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7UmVxdWVzdHxQcm9taXNlfVxuICAgKi9cblxuICBxdWVyeSAoY29tbWFuZCwgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zdHJlYW0gPT09IG51bGwgJiYgdGhpcy5wYXJlbnQpIHRoaXMuc3RyZWFtID0gdGhpcy5wYXJlbnQuY29uZmlnLnN0cmVhbVxuICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSA9PT0gbnVsbCAmJiB0aGlzLnBhcmVudCkgdGhpcy5hcnJheVJvd01vZGUgPSB0aGlzLnBhcmVudC5jb25maWcuYXJyYXlSb3dNb2RlXG4gICAgdGhpcy5yb3dzQWZmZWN0ZWQgPSAwXG5cbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9xdWVyeShjb21tYW5kLCAoZXJyLCByZWNvcmRzZXRzLCBvdXRwdXQsIHJvd3NBZmZlY3RlZCwgY29sdW1ucykgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICBpZiAoZXJyKSB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICAgIGVyciA9IG51bGxcblxuICAgICAgICAgIHRoaXMuZW1pdCgnZG9uZScsIHtcbiAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIHJvd3NBZmZlY3RlZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgcmVjb3Jkc2V0cyxcbiAgICAgICAgICByZWNvcmRzZXQ6IHJlY29yZHNldHMgJiYgcmVjb3Jkc2V0c1swXSxcbiAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgcm93c0FmZmVjdGVkXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlKSByZXN1bHQuY29sdW1ucyA9IGNvbHVtbnNcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KVxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgbWV0aG9kIHdhcyBjYWxsZWQgYXMgdGFnZ2VkIHRlbXBsYXRlXG4gICAgaWYgKHR5cGVvZiBjb21tYW5kID09PSAnb2JqZWN0Jykge1xuICAgICAgY29uc3QgdmFsdWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuICAgICAgY29uc3Qgc3RyaW5ncyA9IHZhbHVlcy5zaGlmdCgpXG4gICAgICBjb21tYW5kID0gdGhpcy5fdGVtcGxhdGUoc3RyaW5ncywgdmFsdWVzKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fcXVlcnkoY29tbWFuZCwgKGVyciwgcmVjb3Jkc2V0cywgb3V0cHV0LCByb3dzQWZmZWN0ZWQsIGNvbHVtbnMpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKGVycikgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgICBlcnIgPSBudWxsXG5cbiAgICAgICAgICB0aGlzLmVtaXQoJ2RvbmUnLCB7XG4gICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICByb3dzQWZmZWN0ZWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICByZWNvcmRzZXRzLFxuICAgICAgICAgIHJlY29yZHNldDogcmVjb3Jkc2V0cyAmJiByZWNvcmRzZXRzWzBdLFxuICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICByb3dzQWZmZWN0ZWRcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hcnJheVJvd01vZGUpIHJlc3VsdC5jb2x1bW5zID0gY29sdW1uc1xuICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29tbWFuZFxuICAgKiBAcGFyYW0ge1JlcXVlc3R+YnVsa0NhbGxiYWNrfSBjYWxsYmFja1xuICAgKi9cblxuICBfcXVlcnkgKGNvbW1hbmQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFJlcXVlc3RFcnJvcignTm8gY29ubmVjdGlvbiBpcyBzcGVjaWZpZWQgZm9yIHRoYXQgcmVxdWVzdC4nLCAnRU5PQ09OTicpKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5wYXJlbnQuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgQ29ubmVjdGlvbkVycm9yKCdDb25uZWN0aW9uIGlzIGNsb3NlZC4nLCAnRUNPTk5DTE9TRUQnKSlcbiAgICB9XG5cbiAgICB0aGlzLmNhbmNlbGVkID0gZmFsc2VcbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogQ2FsbCBhIHN0b3JlZCBwcm9jZWR1cmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9jZWR1cmUgTmFtZSBvZiB0aGUgc3RvcmVkIHByb2NlZHVyZSB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHtSZXF1ZXN0fnJlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBleGVjdXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1JlcXVlc3R8UHJvbWlzZX1cbiAgICovXG5cbiAgZXhlY3V0ZSAoY29tbWFuZCwgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zdHJlYW0gPT09IG51bGwgJiYgdGhpcy5wYXJlbnQpIHRoaXMuc3RyZWFtID0gdGhpcy5wYXJlbnQuY29uZmlnLnN0cmVhbVxuICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSA9PT0gbnVsbCAmJiB0aGlzLnBhcmVudCkgdGhpcy5hcnJheVJvd01vZGUgPSB0aGlzLnBhcmVudC5jb25maWcuYXJyYXlSb3dNb2RlXG4gICAgdGhpcy5yb3dzQWZmZWN0ZWQgPSAwXG5cbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9leGVjdXRlKGNvbW1hbmQsIChlcnIsIHJlY29yZHNldHMsIG91dHB1dCwgcmV0dXJuVmFsdWUsIHJvd3NBZmZlY3RlZCwgY29sdW1ucykgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICBpZiAoZXJyKSB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICAgIGVyciA9IG51bGxcblxuICAgICAgICAgIHRoaXMuZW1pdCgnZG9uZScsIHtcbiAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIHJvd3NBZmZlY3RlZCxcbiAgICAgICAgICAgIHJldHVyblZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICByZWNvcmRzZXRzLFxuICAgICAgICAgIHJlY29yZHNldDogcmVjb3Jkc2V0cyAmJiByZWNvcmRzZXRzWzBdLFxuICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICByb3dzQWZmZWN0ZWQsXG4gICAgICAgICAgcmV0dXJuVmFsdWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hcnJheVJvd01vZGUpIHJlc3VsdC5jb2x1bW5zID0gY29sdW1uc1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX2V4ZWN1dGUoY29tbWFuZCwgKGVyciwgcmVjb3Jkc2V0cywgb3V0cHV0LCByZXR1cm5WYWx1ZSwgcm93c0FmZmVjdGVkLCBjb2x1bW5zKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgIGlmIChlcnIpIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpXG4gICAgICAgICAgZXJyID0gbnVsbFxuXG4gICAgICAgICAgdGhpcy5lbWl0KCdkb25lJywge1xuICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgcm93c0FmZmVjdGVkLFxuICAgICAgICAgICAgcmV0dXJuVmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICByZWNvcmRzZXRzLFxuICAgICAgICAgIHJlY29yZHNldDogcmVjb3Jkc2V0cyAmJiByZWNvcmRzZXRzWzBdLFxuICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICByb3dzQWZmZWN0ZWQsXG4gICAgICAgICAgcmV0dXJuVmFsdWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hcnJheVJvd01vZGUpIHJlc3VsdC5jb2x1bW5zID0gY29sdW1uc1xuICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvY2VkdXJlXG4gICAqIEBwYXJhbSB7UmVxdWVzdH5idWxrQ2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuXG4gIF9leGVjdXRlIChwcm9jZWR1cmUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFJlcXVlc3RFcnJvcignTm8gY29ubmVjdGlvbiBpcyBzcGVjaWZpZWQgZm9yIHRoYXQgcmVxdWVzdC4nLCAnRU5PQ09OTicpKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5wYXJlbnQuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgQ29ubmVjdGlvbkVycm9yKCdDb25uZWN0aW9uIGlzIGNsb3NlZC4nLCAnRUNPTk5DTE9TRUQnKSlcbiAgICB9XG5cbiAgICB0aGlzLmNhbmNlbGVkID0gZmFsc2VcbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VsIGN1cnJlbnRseSBleGVjdXRlZCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cblxuICBjYW5jZWwgKCkge1xuICAgIHRoaXMuX2NhbmNlbCgpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBfY2FuY2VsICgpIHtcbiAgICB0aGlzLmNhbmNlbGVkID0gdHJ1ZVxuICB9XG5cbiAgcGF1c2UgKCkge1xuICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgdGhpcy5fcGF1c2UoKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBfcGF1c2UgKCkge1xuICAgIHRoaXMuX3BhdXNlZCA9IHRydWVcbiAgfVxuXG4gIHJlc3VtZSAoKSB7XG4gICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICB0aGlzLl9yZXN1bWUoKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBfcmVzdW1lICgpIHtcbiAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZVxuICB9XG5cbiAgX3NldEN1cnJlbnRSZXF1ZXN0IChyZXF1ZXN0KSB7XG4gICAgdGhpcy5fY3VycmVudFJlcXVlc3QgPSByZXF1ZXN0XG4gICAgaWYgKHRoaXMuX3BhdXNlZCkge1xuICAgICAgdGhpcy5wYXVzZSgpXG4gICAgfVxuICAgIHJldHVybiB0aGlzXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZXF1ZXN0XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/base/request.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/base/transaction.js":
/*!*****************************************************!*\
  !*** ../node_modules/mssql/lib/base/transaction.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/../node_modules/debug/src/index.js\")('mssql:base')\nconst { EventEmitter } = __webpack_require__(/*! node:events */ \"node:events\")\nconst { IDS } = __webpack_require__(/*! ../utils */ \"(rsc)/../node_modules/mssql/lib/utils.js\")\nconst globalConnection = __webpack_require__(/*! ../global-connection */ \"(rsc)/../node_modules/mssql/lib/global-connection.js\")\nconst { TransactionError } = __webpack_require__(/*! ../error */ \"(rsc)/../node_modules/mssql/lib/error/index.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/../node_modules/mssql/lib/shared.js\")\nconst ISOLATION_LEVEL = __webpack_require__(/*! ../isolationlevel */ \"(rsc)/../node_modules/mssql/lib/isolationlevel.js\")\n\n/**\n * Class Transaction.\n *\n * @property {Number} isolationLevel Controls the locking and row versioning behavior of TSQL statements issued by a connection. READ_COMMITTED by default.\n * @property {String} name Transaction name. Empty string by default.\n *\n * @fires Transaction#begin\n * @fires Transaction#commit\n * @fires Transaction#rollback\n */\n\nclass Transaction extends EventEmitter {\n  /**\n   * Create new Transaction.\n   *\n   * @param {Connection} [parent] If ommited, global connection is used instead.\n   */\n\n  constructor (parent) {\n    super()\n\n    IDS.add(this, 'Transaction')\n    debug('transaction(%d): created', IDS.get(this))\n\n    this.parent = parent || globalConnection.pool\n    this.isolationLevel = Transaction.defaultIsolationLevel\n    this.name = ''\n  }\n\n  get config () {\n    return this.parent.config\n  }\n\n  get connected () {\n    return this.parent.connected\n  }\n\n  /**\n   * Acquire connection from connection pool.\n   *\n   * @param {Request} request Request.\n   * @param {ConnectionPool~acquireCallback} [callback] A callback which is called after connection has established, or an error has occurred. If omited, method returns Promise.\n   * @return {Transaction|Promise}\n   */\n\n  acquire (request, callback) {\n    if (!this._acquiredConnection) {\n      setImmediate(callback, new TransactionError('Transaction has not begun. Call begin() first.', 'ENOTBEGUN'))\n      return this\n    }\n\n    if (this._activeRequest) {\n      setImmediate(callback, new TransactionError(\"Can't acquire connection for the request. There is another request in progress.\", 'EREQINPROG'))\n      return this\n    }\n\n    this._activeRequest = request\n    setImmediate(callback, null, this._acquiredConnection, this._acquiredConfig)\n    return this\n  }\n\n  /**\n   * Release connection back to the pool.\n   *\n   * @param {Connection} connection Previously acquired connection.\n   * @return {Transaction}\n   */\n\n  release (connection) {\n    if (connection === this._acquiredConnection) {\n      this._activeRequest = null\n    }\n\n    return this\n  }\n\n  /**\n   * Begin a transaction.\n   *\n   * @param {Number} [isolationLevel] Controls the locking and row versioning behavior of TSQL statements issued by a connection.\n   * @param {basicCallback} [callback] A callback which is called after transaction has began, or an error has occurred. If omited, method returns Promise.\n   * @return {Transaction|Promise}\n   */\n\n  begin (isolationLevel, callback) {\n    if (isolationLevel instanceof Function) {\n      callback = isolationLevel\n      isolationLevel = undefined\n    }\n\n    if (typeof callback === 'function') {\n      this._begin(isolationLevel, err => {\n        if (!err) {\n          this.emit('begin')\n        }\n        callback(err)\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._begin(isolationLevel, err => {\n        if (err) return reject(err)\n        this.emit('begin')\n        resolve(this)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {Number} [isolationLevel]\n   * @param {basicCallback} [callback]\n   * @return {Transaction}\n   */\n\n  _begin (isolationLevel, callback) {\n    if (this._acquiredConnection) {\n      return setImmediate(callback, new TransactionError('Transaction has already begun.', 'EALREADYBEGUN'))\n    }\n\n    this._aborted = false\n    this._rollbackRequested = false\n    if (isolationLevel) {\n      if (Object.keys(ISOLATION_LEVEL).some(key => {\n        return ISOLATION_LEVEL[key] === isolationLevel\n      })) {\n        this.isolationLevel = isolationLevel\n      } else {\n        throw new TransactionError('Invalid isolation level.')\n      }\n    }\n\n    setImmediate(callback)\n  }\n\n  /**\n   * Commit a transaction.\n   *\n   * @param {basicCallback} [callback] A callback which is called after transaction has commited, or an error has occurred. If omited, method returns Promise.\n   * @return {Transaction|Promise}\n   */\n\n  commit (callback) {\n    if (typeof callback === 'function') {\n      this._commit(err => {\n        if (!err) {\n          this.emit('commit')\n        }\n        callback(err)\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._commit(err => {\n        if (err) return reject(err)\n        this.emit('commit')\n        resolve()\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} [callback]\n   * @return {Transaction}\n   */\n\n  _commit (callback) {\n    if (this._aborted) {\n      return setImmediate(callback, new TransactionError('Transaction has been aborted.', 'EABORT'))\n    }\n\n    if (!this._acquiredConnection) {\n      return setImmediate(callback, new TransactionError('Transaction has not begun. Call begin() first.', 'ENOTBEGUN'))\n    }\n\n    if (this._activeRequest) {\n      return setImmediate(callback, new TransactionError(\"Can't commit transaction. There is a request in progress.\", 'EREQINPROG'))\n    }\n\n    setImmediate(callback)\n  }\n\n  /**\n   * Returns new request using this transaction.\n   *\n   * @return {Request}\n   */\n\n  request () {\n    return new shared.driver.Request(this)\n  }\n\n  /**\n   * Rollback a transaction.\n   *\n   * @param {basicCallback} [callback] A callback which is called after transaction has rolled back, or an error has occurred. If omited, method returns Promise.\n   * @return {Transaction|Promise}\n   */\n\n  rollback (callback) {\n    if (typeof callback === 'function') {\n      this._rollback(err => {\n        if (!err) {\n          this.emit('rollback', this._aborted)\n        }\n        callback(err)\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      return this._rollback(err => {\n        if (err) return reject(err)\n        this.emit('rollback', this._aborted)\n        resolve()\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} [callback]\n   * @return {Transaction}\n   */\n\n  _rollback (callback) {\n    if (this._aborted) {\n      return setImmediate(callback, new TransactionError('Transaction has been aborted.', 'EABORT'))\n    }\n\n    if (!this._acquiredConnection) {\n      return setImmediate(callback, new TransactionError('Transaction has not begun. Call begin() first.', 'ENOTBEGUN'))\n    }\n\n    if (this._activeRequest) {\n      return setImmediate(callback, new TransactionError(\"Can't rollback transaction. There is a request in progress.\", 'EREQINPROG'))\n    }\n\n    this._rollbackRequested = true\n\n    setImmediate(callback)\n  }\n}\n\n/**\n * Default isolation level used for any transactions that don't explicitly specify an isolation level.\n *\n * @type {number}\n */\nTransaction.defaultIsolationLevel = ISOLATION_LEVEL.READ_COMMITTED\n\nmodule.exports = Transaction\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9iYXNlL3RyYW5zYWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLGNBQWMsbUJBQU8sQ0FBQyx1REFBTztBQUM3QixRQUFRLGVBQWUsRUFBRSxtQkFBTyxDQUFDLGdDQUFhO0FBQzlDLFFBQVEsTUFBTSxFQUFFLG1CQUFPLENBQUMsMERBQVU7QUFDbEMseUJBQXlCLG1CQUFPLENBQUMsa0ZBQXNCO0FBQ3ZELFFBQVEsbUJBQW1CLEVBQUUsbUJBQU8sQ0FBQyxnRUFBVTtBQUMvQyxlQUFlLG1CQUFPLENBQUMsNERBQVc7QUFDbEMsd0JBQXdCLG1CQUFPLENBQUMsNEVBQW1COztBQUVuRDtBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFlBQVk7QUFDekI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsZ0NBQWdDO0FBQzdDLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsWUFBWTtBQUN6QixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZUFBZTtBQUM1QixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsZUFBZTtBQUM1QixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9iYXNlL3RyYW5zYWN0aW9uLmpzPzI3NzQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnbXNzcWw6YmFzZScpXG5jb25zdCB7IEV2ZW50RW1pdHRlciB9ID0gcmVxdWlyZSgnbm9kZTpldmVudHMnKVxuY29uc3QgeyBJRFMgfSA9IHJlcXVpcmUoJy4uL3V0aWxzJylcbmNvbnN0IGdsb2JhbENvbm5lY3Rpb24gPSByZXF1aXJlKCcuLi9nbG9iYWwtY29ubmVjdGlvbicpXG5jb25zdCB7IFRyYW5zYWN0aW9uRXJyb3IgfSA9IHJlcXVpcmUoJy4uL2Vycm9yJylcbmNvbnN0IHNoYXJlZCA9IHJlcXVpcmUoJy4uL3NoYXJlZCcpXG5jb25zdCBJU09MQVRJT05fTEVWRUwgPSByZXF1aXJlKCcuLi9pc29sYXRpb25sZXZlbCcpXG5cbi8qKlxuICogQ2xhc3MgVHJhbnNhY3Rpb24uXG4gKlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IGlzb2xhdGlvbkxldmVsIENvbnRyb2xzIHRoZSBsb2NraW5nIGFuZCByb3cgdmVyc2lvbmluZyBiZWhhdmlvciBvZiBUU1FMIHN0YXRlbWVudHMgaXNzdWVkIGJ5IGEgY29ubmVjdGlvbi4gUkVBRF9DT01NSVRURUQgYnkgZGVmYXVsdC5cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBuYW1lIFRyYW5zYWN0aW9uIG5hbWUuIEVtcHR5IHN0cmluZyBieSBkZWZhdWx0LlxuICpcbiAqIEBmaXJlcyBUcmFuc2FjdGlvbiNiZWdpblxuICogQGZpcmVzIFRyYW5zYWN0aW9uI2NvbW1pdFxuICogQGZpcmVzIFRyYW5zYWN0aW9uI3JvbGxiYWNrXG4gKi9cblxuY2xhc3MgVHJhbnNhY3Rpb24gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAvKipcbiAgICogQ3JlYXRlIG5ldyBUcmFuc2FjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtDb25uZWN0aW9ufSBbcGFyZW50XSBJZiBvbW1pdGVkLCBnbG9iYWwgY29ubmVjdGlvbiBpcyB1c2VkIGluc3RlYWQuXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yIChwYXJlbnQpIHtcbiAgICBzdXBlcigpXG5cbiAgICBJRFMuYWRkKHRoaXMsICdUcmFuc2FjdGlvbicpXG4gICAgZGVidWcoJ3RyYW5zYWN0aW9uKCVkKTogY3JlYXRlZCcsIElEUy5nZXQodGhpcykpXG5cbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudCB8fCBnbG9iYWxDb25uZWN0aW9uLnBvb2xcbiAgICB0aGlzLmlzb2xhdGlvbkxldmVsID0gVHJhbnNhY3Rpb24uZGVmYXVsdElzb2xhdGlvbkxldmVsXG4gICAgdGhpcy5uYW1lID0gJydcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcmVudC5jb25maWdcbiAgfVxuXG4gIGdldCBjb25uZWN0ZWQgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcmVudC5jb25uZWN0ZWRcbiAgfVxuXG4gIC8qKlxuICAgKiBBY3F1aXJlIGNvbm5lY3Rpb24gZnJvbSBjb25uZWN0aW9uIHBvb2wuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdCBSZXF1ZXN0LlxuICAgKiBAcGFyYW0ge0Nvbm5lY3Rpb25Qb29sfmFjcXVpcmVDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBjb25uZWN0aW9uIGhhcyBlc3RhYmxpc2hlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1RyYW5zYWN0aW9ufFByb21pc2V9XG4gICAqL1xuXG4gIGFjcXVpcmUgKHJlcXVlc3QsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24pIHtcbiAgICAgIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFRyYW5zYWN0aW9uRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBub3QgYmVndW4uIENhbGwgYmVnaW4oKSBmaXJzdC4nLCAnRU5PVEJFR1VOJykpXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9hY3RpdmVSZXF1ZXN0KSB7XG4gICAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBUcmFuc2FjdGlvbkVycm9yKFwiQ2FuJ3QgYWNxdWlyZSBjb25uZWN0aW9uIGZvciB0aGUgcmVxdWVzdC4gVGhlcmUgaXMgYW5vdGhlciByZXF1ZXN0IGluIHByb2dyZXNzLlwiLCAnRVJFUUlOUFJPRycpKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICB0aGlzLl9hY3RpdmVSZXF1ZXN0ID0gcmVxdWVzdFxuICAgIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbnVsbCwgdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uLCB0aGlzLl9hY3F1aXJlZENvbmZpZylcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2UgY29ubmVjdGlvbiBiYWNrIHRvIHRoZSBwb29sLlxuICAgKlxuICAgKiBAcGFyYW0ge0Nvbm5lY3Rpb259IGNvbm5lY3Rpb24gUHJldmlvdXNseSBhY3F1aXJlZCBjb25uZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbn1cbiAgICovXG5cbiAgcmVsZWFzZSAoY29ubmVjdGlvbikge1xuICAgIGlmIChjb25uZWN0aW9uID09PSB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24pIHtcbiAgICAgIHRoaXMuX2FjdGl2ZVJlcXVlc3QgPSBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBCZWdpbiBhIHRyYW5zYWN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2lzb2xhdGlvbkxldmVsXSBDb250cm9scyB0aGUgbG9ja2luZyBhbmQgcm93IHZlcnNpb25pbmcgYmVoYXZpb3Igb2YgVFNRTCBzdGF0ZW1lbnRzIGlzc3VlZCBieSBhIGNvbm5lY3Rpb24uXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciB0cmFuc2FjdGlvbiBoYXMgYmVnYW4sIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbnxQcm9taXNlfVxuICAgKi9cblxuICBiZWdpbiAoaXNvbGF0aW9uTGV2ZWwsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGlzb2xhdGlvbkxldmVsIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgIGNhbGxiYWNrID0gaXNvbGF0aW9uTGV2ZWxcbiAgICAgIGlzb2xhdGlvbkxldmVsID0gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fYmVnaW4oaXNvbGF0aW9uTGV2ZWwsIGVyciA9PiB7XG4gICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KCdiZWdpbicpXG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soZXJyKVxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl9iZWdpbihpc29sYXRpb25MZXZlbCwgZXJyID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpXG4gICAgICAgIHRoaXMuZW1pdCgnYmVnaW4nKVxuICAgICAgICByZXNvbHZlKHRoaXMpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtpc29sYXRpb25MZXZlbF1cbiAgICogQHBhcmFtIHtiYXNpY0NhbGxiYWNrfSBbY2FsbGJhY2tdXG4gICAqIEByZXR1cm4ge1RyYW5zYWN0aW9ufVxuICAgKi9cblxuICBfYmVnaW4gKGlzb2xhdGlvbkxldmVsLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24pIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBUcmFuc2FjdGlvbkVycm9yKCdUcmFuc2FjdGlvbiBoYXMgYWxyZWFkeSBiZWd1bi4nLCAnRUFMUkVBRFlCRUdVTicpKVxuICAgIH1cblxuICAgIHRoaXMuX2Fib3J0ZWQgPSBmYWxzZVxuICAgIHRoaXMuX3JvbGxiYWNrUmVxdWVzdGVkID0gZmFsc2VcbiAgICBpZiAoaXNvbGF0aW9uTGV2ZWwpIHtcbiAgICAgIGlmIChPYmplY3Qua2V5cyhJU09MQVRJT05fTEVWRUwpLnNvbWUoa2V5ID0+IHtcbiAgICAgICAgcmV0dXJuIElTT0xBVElPTl9MRVZFTFtrZXldID09PSBpc29sYXRpb25MZXZlbFxuICAgICAgfSkpIHtcbiAgICAgICAgdGhpcy5pc29sYXRpb25MZXZlbCA9IGlzb2xhdGlvbkxldmVsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgVHJhbnNhY3Rpb25FcnJvcignSW52YWxpZCBpc29sYXRpb24gbGV2ZWwuJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogQ29tbWl0IGEgdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciB0cmFuc2FjdGlvbiBoYXMgY29tbWl0ZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbnxQcm9taXNlfVxuICAgKi9cblxuICBjb21taXQgKGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fY29tbWl0KGVyciA9PiB7XG4gICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KCdjb21taXQnKVxuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKGVycilcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fY29tbWl0KGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKVxuICAgICAgICB0aGlzLmVtaXQoJ2NvbW1pdCcpXG4gICAgICAgIHJlc29sdmUoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXVxuICAgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbn1cbiAgICovXG5cbiAgX2NvbW1pdCAoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5fYWJvcnRlZCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFRyYW5zYWN0aW9uRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBiZWVuIGFib3J0ZWQuJywgJ0VBQk9SVCcpKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uKSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgVHJhbnNhY3Rpb25FcnJvcignVHJhbnNhY3Rpb24gaGFzIG5vdCBiZWd1bi4gQ2FsbCBiZWdpbigpIGZpcnN0LicsICdFTk9UQkVHVU4nKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlUmVxdWVzdCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFRyYW5zYWN0aW9uRXJyb3IoXCJDYW4ndCBjb21taXQgdHJhbnNhY3Rpb24uIFRoZXJlIGlzIGEgcmVxdWVzdCBpbiBwcm9ncmVzcy5cIiwgJ0VSRVFJTlBST0cnKSlcbiAgICB9XG5cbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBuZXcgcmVxdWVzdCB1c2luZyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICAgKi9cblxuICByZXF1ZXN0ICgpIHtcbiAgICByZXR1cm4gbmV3IHNoYXJlZC5kcml2ZXIuUmVxdWVzdCh0aGlzKVxuICB9XG5cbiAgLyoqXG4gICAqIFJvbGxiYWNrIGEgdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciB0cmFuc2FjdGlvbiBoYXMgcm9sbGVkIGJhY2ssIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbnxQcm9taXNlfVxuICAgKi9cblxuICByb2xsYmFjayAoY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9yb2xsYmFjayhlcnIgPT4ge1xuICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgIHRoaXMuZW1pdCgncm9sbGJhY2snLCB0aGlzLl9hYm9ydGVkKVxuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKGVycilcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX3JvbGxiYWNrKGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKVxuICAgICAgICB0aGlzLmVtaXQoJ3JvbGxiYWNrJywgdGhpcy5fYWJvcnRlZClcbiAgICAgICAgcmVzb2x2ZSgpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtiYXNpY0NhbGxiYWNrfSBbY2FsbGJhY2tdXG4gICAqIEByZXR1cm4ge1RyYW5zYWN0aW9ufVxuICAgKi9cblxuICBfcm9sbGJhY2sgKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuX2Fib3J0ZWQpIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBUcmFuc2FjdGlvbkVycm9yKCdUcmFuc2FjdGlvbiBoYXMgYmVlbiBhYm9ydGVkLicsICdFQUJPUlQnKSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbikge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFRyYW5zYWN0aW9uRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBub3QgYmVndW4uIENhbGwgYmVnaW4oKSBmaXJzdC4nLCAnRU5PVEJFR1VOJykpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZVJlcXVlc3QpIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBUcmFuc2FjdGlvbkVycm9yKFwiQ2FuJ3Qgcm9sbGJhY2sgdHJhbnNhY3Rpb24uIFRoZXJlIGlzIGEgcmVxdWVzdCBpbiBwcm9ncmVzcy5cIiwgJ0VSRVFJTlBST0cnKSlcbiAgICB9XG5cbiAgICB0aGlzLl9yb2xsYmFja1JlcXVlc3RlZCA9IHRydWVcblxuICAgIHNldEltbWVkaWF0ZShjYWxsYmFjaylcbiAgfVxufVxuXG4vKipcbiAqIERlZmF1bHQgaXNvbGF0aW9uIGxldmVsIHVzZWQgZm9yIGFueSB0cmFuc2FjdGlvbnMgdGhhdCBkb24ndCBleHBsaWNpdGx5IHNwZWNpZnkgYW4gaXNvbGF0aW9uIGxldmVsLlxuICpcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRyYW5zYWN0aW9uLmRlZmF1bHRJc29sYXRpb25MZXZlbCA9IElTT0xBVElPTl9MRVZFTC5SRUFEX0NPTU1JVFRFRFxuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zYWN0aW9uXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/base/transaction.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/datatypes.js":
/*!**********************************************!*\
  !*** ../node_modules/mssql/lib/datatypes.js ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst objectHasProperty = (__webpack_require__(/*! ./utils */ \"(rsc)/../node_modules/mssql/lib/utils.js\").objectHasProperty)\nconst inspect = Symbol.for('nodejs.util.inspect.custom')\n\nconst TYPES = {\n  VarChar (length) {\n    return { type: TYPES.VarChar, length }\n  },\n  NVarChar (length) {\n    return { type: TYPES.NVarChar, length }\n  },\n  Text () {\n    return { type: TYPES.Text }\n  },\n  Int () {\n    return { type: TYPES.Int }\n  },\n  BigInt () {\n    return { type: TYPES.BigInt }\n  },\n  TinyInt () {\n    return { type: TYPES.TinyInt }\n  },\n  SmallInt () {\n    return { type: TYPES.SmallInt }\n  },\n  Bit () {\n    return { type: TYPES.Bit }\n  },\n  Float () {\n    return { type: TYPES.Float }\n  },\n  Numeric (precision, scale) {\n    return { type: TYPES.Numeric, precision, scale }\n  },\n  Decimal (precision, scale) {\n    return { type: TYPES.Decimal, precision, scale }\n  },\n  Real () {\n    return { type: TYPES.Real }\n  },\n  Date () {\n    return { type: TYPES.Date }\n  },\n  DateTime () {\n    return { type: TYPES.DateTime }\n  },\n  DateTime2 (scale) {\n    return { type: TYPES.DateTime2, scale }\n  },\n  DateTimeOffset (scale) {\n    return { type: TYPES.DateTimeOffset, scale }\n  },\n  SmallDateTime () {\n    return { type: TYPES.SmallDateTime }\n  },\n  Time (scale) {\n    return { type: TYPES.Time, scale }\n  },\n  UniqueIdentifier () {\n    return { type: TYPES.UniqueIdentifier }\n  },\n  SmallMoney () {\n    return { type: TYPES.SmallMoney }\n  },\n  Money () {\n    return { type: TYPES.Money }\n  },\n  Binary (length) {\n    return { type: TYPES.Binary, length }\n  },\n  VarBinary (length) {\n    return { type: TYPES.VarBinary, length }\n  },\n  Image () {\n    return { type: TYPES.Image }\n  },\n  Xml () {\n    return { type: TYPES.Xml }\n  },\n  Char (length) {\n    return { type: TYPES.Char, length }\n  },\n  NChar (length) {\n    return { type: TYPES.NChar, length }\n  },\n  NText () {\n    return { type: TYPES.NText }\n  },\n  TVP (tvpType) {\n    return { type: TYPES.TVP, tvpType }\n  },\n  UDT () {\n    return { type: TYPES.UDT }\n  },\n  Geography () {\n    return { type: TYPES.Geography }\n  },\n  Geometry () {\n    return { type: TYPES.Geometry }\n  },\n  Variant () {\n    return { type: TYPES.Variant }\n  }\n}\n\nmodule.exports.TYPES = TYPES\nmodule.exports.DECLARATIONS = {}\n\nconst zero = function (value, length) {\n  if (length == null) length = 2\n\n  value = String(value)\n  if (value.length < length) {\n    for (let i = 1; i <= length - value.length; i++) {\n      value = `0${value}`\n    }\n  }\n  return value\n}\n\nfor (const key in TYPES) {\n  if (objectHasProperty(TYPES, key)) {\n    const value = TYPES[key]\n    value.declaration = key.toLowerCase()\n    module.exports.DECLARATIONS[value.declaration] = value;\n\n    ((key, value) => {\n      value[inspect] = () => `[sql.${key}]`\n    })(key, value)\n  }\n}\n\nmodule.exports.declare = (type, options) => {\n  switch (type) {\n    case TYPES.VarChar: case TYPES.VarBinary:\n      return `${type.declaration} (${options.length > 8000 ? 'MAX' : (options.length == null ? 'MAX' : options.length)})`\n    case TYPES.NVarChar:\n      return `${type.declaration} (${options.length > 4000 ? 'MAX' : (options.length == null ? 'MAX' : options.length)})`\n    case TYPES.Char: case TYPES.NChar: case TYPES.Binary:\n      return `${type.declaration} (${options.length == null ? 1 : options.length})`\n    case TYPES.Decimal: case TYPES.Numeric:\n      return `${type.declaration} (${options.precision == null ? 18 : options.precision}, ${options.scale == null ? 0 : options.scale})`\n    case TYPES.Time: case TYPES.DateTime2: case TYPES.DateTimeOffset:\n      return `${type.declaration} (${options.scale == null ? 7 : options.scale})`\n    case TYPES.TVP:\n      return `${options.tvpType} readonly`\n    default:\n      return type.declaration\n  }\n}\n\nmodule.exports.cast = (value, type, options) => {\n  if (value == null) {\n    return null\n  }\n\n  switch (typeof value) {\n    case 'string':\n      return `N'${value.replace(/'/g, '\\'\\'')}'`\n\n    case 'number':\n    case 'bigint':\n      return value\n\n    case 'boolean':\n      return value ? 1 : 0\n\n    case 'object':\n      if (value instanceof Date) {\n        let ns = value.getUTCMilliseconds() / 1000\n        if (value.nanosecondDelta != null) {\n          ns += value.nanosecondDelta\n        }\n        const scale = options.scale == null ? 7 : options.scale\n\n        if (scale > 0) {\n          ns = String(ns).substr(1, scale + 1)\n        } else {\n          ns = ''\n        }\n\n        return `N'${value.getUTCFullYear()}-${zero(value.getUTCMonth() + 1)}-${zero(value.getUTCDate())} ${zero(value.getUTCHours())}:${zero(value.getUTCMinutes())}:${zero(value.getUTCSeconds())}${ns}'`\n      } else if (Buffer.isBuffer(value)) {\n        return `0x${value.toString('hex')}`\n      }\n\n      return null\n\n    default:\n      return null\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9kYXRhdHlwZXMuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosMEJBQTBCLGtHQUFvQztBQUM5RDs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQSxvQkFBb0I7QUFDcEIsMkJBQTJCOztBQUUzQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IsNEJBQTRCO0FBQ2hELGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxQ0FBcUMsSUFBSTtBQUN6QyxLQUFLO0FBQ0w7QUFDQTs7QUFFQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLGdCQUFnQixrQkFBa0IsR0FBRyxrRkFBa0Y7QUFDdkg7QUFDQSxnQkFBZ0Isa0JBQWtCLEdBQUcsa0ZBQWtGO0FBQ3ZIO0FBQ0EsZ0JBQWdCLGtCQUFrQixHQUFHLDRDQUE0QztBQUNqRjtBQUNBLGdCQUFnQixrQkFBa0IsR0FBRyxtREFBbUQsSUFBSSwwQ0FBMEM7QUFDdEk7QUFDQSxnQkFBZ0Isa0JBQWtCLEdBQUcsMENBQTBDO0FBQy9FO0FBQ0EsZ0JBQWdCLGlCQUFpQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsNEJBQTRCOztBQUU5QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUEsb0JBQW9CLHVCQUF1QixHQUFHLDhCQUE4QixHQUFHLDBCQUEwQixFQUFFLDBCQUEwQixHQUFHLDRCQUE0QixHQUFHLDRCQUE0QixFQUFFLEdBQUc7QUFDeE0sUUFBUTtBQUNSLG9CQUFvQixzQkFBc0I7QUFDMUM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9kYXRhdHlwZXMuanM/NzQ5MiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3Qgb2JqZWN0SGFzUHJvcGVydHkgPSByZXF1aXJlKCcuL3V0aWxzJykub2JqZWN0SGFzUHJvcGVydHlcbmNvbnN0IGluc3BlY3QgPSBTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXG5cbmNvbnN0IFRZUEVTID0ge1xuICBWYXJDaGFyIChsZW5ndGgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5WYXJDaGFyLCBsZW5ndGggfVxuICB9LFxuICBOVmFyQ2hhciAobGVuZ3RoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuTlZhckNoYXIsIGxlbmd0aCB9XG4gIH0sXG4gIFRleHQgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLlRleHQgfVxuICB9LFxuICBJbnQgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkludCB9XG4gIH0sXG4gIEJpZ0ludCAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuQmlnSW50IH1cbiAgfSxcbiAgVGlueUludCAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuVGlueUludCB9XG4gIH0sXG4gIFNtYWxsSW50ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5TbWFsbEludCB9XG4gIH0sXG4gIEJpdCAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuQml0IH1cbiAgfSxcbiAgRmxvYXQgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkZsb2F0IH1cbiAgfSxcbiAgTnVtZXJpYyAocHJlY2lzaW9uLCBzY2FsZSkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLk51bWVyaWMsIHByZWNpc2lvbiwgc2NhbGUgfVxuICB9LFxuICBEZWNpbWFsIChwcmVjaXNpb24sIHNjYWxlKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuRGVjaW1hbCwgcHJlY2lzaW9uLCBzY2FsZSB9XG4gIH0sXG4gIFJlYWwgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLlJlYWwgfVxuICB9LFxuICBEYXRlICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5EYXRlIH1cbiAgfSxcbiAgRGF0ZVRpbWUgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkRhdGVUaW1lIH1cbiAgfSxcbiAgRGF0ZVRpbWUyIChzY2FsZSkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkRhdGVUaW1lMiwgc2NhbGUgfVxuICB9LFxuICBEYXRlVGltZU9mZnNldCAoc2NhbGUpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5EYXRlVGltZU9mZnNldCwgc2NhbGUgfVxuICB9LFxuICBTbWFsbERhdGVUaW1lICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5TbWFsbERhdGVUaW1lIH1cbiAgfSxcbiAgVGltZSAoc2NhbGUpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5UaW1lLCBzY2FsZSB9XG4gIH0sXG4gIFVuaXF1ZUlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLlVuaXF1ZUlkZW50aWZpZXIgfVxuICB9LFxuICBTbWFsbE1vbmV5ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5TbWFsbE1vbmV5IH1cbiAgfSxcbiAgTW9uZXkgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLk1vbmV5IH1cbiAgfSxcbiAgQmluYXJ5IChsZW5ndGgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5CaW5hcnksIGxlbmd0aCB9XG4gIH0sXG4gIFZhckJpbmFyeSAobGVuZ3RoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuVmFyQmluYXJ5LCBsZW5ndGggfVxuICB9LFxuICBJbWFnZSAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuSW1hZ2UgfVxuICB9LFxuICBYbWwgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLlhtbCB9XG4gIH0sXG4gIENoYXIgKGxlbmd0aCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkNoYXIsIGxlbmd0aCB9XG4gIH0sXG4gIE5DaGFyIChsZW5ndGgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5OQ2hhciwgbGVuZ3RoIH1cbiAgfSxcbiAgTlRleHQgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLk5UZXh0IH1cbiAgfSxcbiAgVFZQICh0dnBUeXBlKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuVFZQLCB0dnBUeXBlIH1cbiAgfSxcbiAgVURUICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5VRFQgfVxuICB9LFxuICBHZW9ncmFwaHkgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkdlb2dyYXBoeSB9XG4gIH0sXG4gIEdlb21ldHJ5ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5HZW9tZXRyeSB9XG4gIH0sXG4gIFZhcmlhbnQgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLlZhcmlhbnQgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzLlRZUEVTID0gVFlQRVNcbm1vZHVsZS5leHBvcnRzLkRFQ0xBUkFUSU9OUyA9IHt9XG5cbmNvbnN0IHplcm8gPSBmdW5jdGlvbiAodmFsdWUsIGxlbmd0aCkge1xuICBpZiAobGVuZ3RoID09IG51bGwpIGxlbmd0aCA9IDJcblxuICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcbiAgaWYgKHZhbHVlLmxlbmd0aCA8IGxlbmd0aCkge1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGxlbmd0aCAtIHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWx1ZSA9IGAwJHt2YWx1ZX1gXG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZVxufVxuXG5mb3IgKGNvbnN0IGtleSBpbiBUWVBFUykge1xuICBpZiAob2JqZWN0SGFzUHJvcGVydHkoVFlQRVMsIGtleSkpIHtcbiAgICBjb25zdCB2YWx1ZSA9IFRZUEVTW2tleV1cbiAgICB2YWx1ZS5kZWNsYXJhdGlvbiA9IGtleS50b0xvd2VyQ2FzZSgpXG4gICAgbW9kdWxlLmV4cG9ydHMuREVDTEFSQVRJT05TW3ZhbHVlLmRlY2xhcmF0aW9uXSA9IHZhbHVlO1xuXG4gICAgKChrZXksIHZhbHVlKSA9PiB7XG4gICAgICB2YWx1ZVtpbnNwZWN0XSA9ICgpID0+IGBbc3FsLiR7a2V5fV1gXG4gICAgfSkoa2V5LCB2YWx1ZSlcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cy5kZWNsYXJlID0gKHR5cGUsIG9wdGlvbnMpID0+IHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBUWVBFUy5WYXJDaGFyOiBjYXNlIFRZUEVTLlZhckJpbmFyeTpcbiAgICAgIHJldHVybiBgJHt0eXBlLmRlY2xhcmF0aW9ufSAoJHtvcHRpb25zLmxlbmd0aCA+IDgwMDAgPyAnTUFYJyA6IChvcHRpb25zLmxlbmd0aCA9PSBudWxsID8gJ01BWCcgOiBvcHRpb25zLmxlbmd0aCl9KWBcbiAgICBjYXNlIFRZUEVTLk5WYXJDaGFyOlxuICAgICAgcmV0dXJuIGAke3R5cGUuZGVjbGFyYXRpb259ICgke29wdGlvbnMubGVuZ3RoID4gNDAwMCA/ICdNQVgnIDogKG9wdGlvbnMubGVuZ3RoID09IG51bGwgPyAnTUFYJyA6IG9wdGlvbnMubGVuZ3RoKX0pYFxuICAgIGNhc2UgVFlQRVMuQ2hhcjogY2FzZSBUWVBFUy5OQ2hhcjogY2FzZSBUWVBFUy5CaW5hcnk6XG4gICAgICByZXR1cm4gYCR7dHlwZS5kZWNsYXJhdGlvbn0gKCR7b3B0aW9ucy5sZW5ndGggPT0gbnVsbCA/IDEgOiBvcHRpb25zLmxlbmd0aH0pYFxuICAgIGNhc2UgVFlQRVMuRGVjaW1hbDogY2FzZSBUWVBFUy5OdW1lcmljOlxuICAgICAgcmV0dXJuIGAke3R5cGUuZGVjbGFyYXRpb259ICgke29wdGlvbnMucHJlY2lzaW9uID09IG51bGwgPyAxOCA6IG9wdGlvbnMucHJlY2lzaW9ufSwgJHtvcHRpb25zLnNjYWxlID09IG51bGwgPyAwIDogb3B0aW9ucy5zY2FsZX0pYFxuICAgIGNhc2UgVFlQRVMuVGltZTogY2FzZSBUWVBFUy5EYXRlVGltZTI6IGNhc2UgVFlQRVMuRGF0ZVRpbWVPZmZzZXQ6XG4gICAgICByZXR1cm4gYCR7dHlwZS5kZWNsYXJhdGlvbn0gKCR7b3B0aW9ucy5zY2FsZSA9PSBudWxsID8gNyA6IG9wdGlvbnMuc2NhbGV9KWBcbiAgICBjYXNlIFRZUEVTLlRWUDpcbiAgICAgIHJldHVybiBgJHtvcHRpb25zLnR2cFR5cGV9IHJlYWRvbmx5YFxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdHlwZS5kZWNsYXJhdGlvblxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzLmNhc3QgPSAodmFsdWUsIHR5cGUsIG9wdGlvbnMpID0+IHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgcmV0dXJuIGBOJyR7dmFsdWUucmVwbGFjZSgvJy9nLCAnXFwnXFwnJyl9J2BcblxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgY2FzZSAnYmlnaW50JzpcbiAgICAgIHJldHVybiB2YWx1ZVxuXG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gdmFsdWUgPyAxIDogMFxuXG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgbGV0IG5zID0gdmFsdWUuZ2V0VVRDTWlsbGlzZWNvbmRzKCkgLyAxMDAwXG4gICAgICAgIGlmICh2YWx1ZS5uYW5vc2Vjb25kRGVsdGEgIT0gbnVsbCkge1xuICAgICAgICAgIG5zICs9IHZhbHVlLm5hbm9zZWNvbmREZWx0YVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjYWxlID0gb3B0aW9ucy5zY2FsZSA9PSBudWxsID8gNyA6IG9wdGlvbnMuc2NhbGVcblxuICAgICAgICBpZiAoc2NhbGUgPiAwKSB7XG4gICAgICAgICAgbnMgPSBTdHJpbmcobnMpLnN1YnN0cigxLCBzY2FsZSArIDEpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbnMgPSAnJ1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGBOJyR7dmFsdWUuZ2V0VVRDRnVsbFllYXIoKX0tJHt6ZXJvKHZhbHVlLmdldFVUQ01vbnRoKCkgKyAxKX0tJHt6ZXJvKHZhbHVlLmdldFVUQ0RhdGUoKSl9ICR7emVybyh2YWx1ZS5nZXRVVENIb3VycygpKX06JHt6ZXJvKHZhbHVlLmdldFVUQ01pbnV0ZXMoKSl9OiR7emVybyh2YWx1ZS5nZXRVVENTZWNvbmRzKCkpfSR7bnN9J2BcbiAgICAgIH0gZWxzZSBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gYDB4JHt2YWx1ZS50b1N0cmluZygnaGV4Jyl9YFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbFxuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsXG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/datatypes.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/error/connection-error.js":
/*!***********************************************************!*\
  !*** ../node_modules/mssql/lib/error/connection-error.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/../node_modules/mssql/lib/error/mssql-error.js\")\n\n/**\n * Class ConnectionError.\n */\n\nclass ConnectionError extends MSSQLError {\n  /**\n   * Creates a new ConnectionError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    super(message, code)\n\n    this.name = 'ConnectionError'\n\n    let err = message?.details\n    if (err instanceof Array && (err = err.at(-1))) {\n      this.message = err.message\n      this.originalError = err\n    }\n  }\n}\n\nmodule.exports = ConnectionError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9lcnJvci9jb25uZWN0aW9uLWVycm9yLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLG1CQUFtQixtQkFBTyxDQUFDLDJFQUFlOztBQUUxQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9lcnJvci9jb25uZWN0aW9uLWVycm9yLmpzP2JiYjEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IE1TU1FMRXJyb3IgPSByZXF1aXJlKCcuL21zc3FsLWVycm9yJylcblxuLyoqXG4gKiBDbGFzcyBDb25uZWN0aW9uRXJyb3IuXG4gKi9cblxuY2xhc3MgQ29ubmVjdGlvbkVycm9yIGV4dGVuZHMgTVNTUUxFcnJvciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IENvbm5lY3Rpb25FcnJvci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgRXJyb3IgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IFtjb2RlXSBFcnJvciBjb2RlLlxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAobWVzc2FnZSwgY29kZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGUpXG5cbiAgICB0aGlzLm5hbWUgPSAnQ29ubmVjdGlvbkVycm9yJ1xuXG4gICAgbGV0IGVyciA9IG1lc3NhZ2U/LmRldGFpbHNcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgQXJyYXkgJiYgKGVyciA9IGVyci5hdCgtMSkpKSB7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBlcnIubWVzc2FnZVxuICAgICAgdGhpcy5vcmlnaW5hbEVycm9yID0gZXJyXG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29ubmVjdGlvbkVycm9yXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/error/connection-error.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/error/index.js":
/*!************************************************!*\
  !*** ../node_modules/mssql/lib/error/index.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst ConnectionError = __webpack_require__(/*! ./connection-error */ \"(rsc)/../node_modules/mssql/lib/error/connection-error.js\")\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/../node_modules/mssql/lib/error/mssql-error.js\")\nconst PreparedStatementError = __webpack_require__(/*! ./prepared-statement-error */ \"(rsc)/../node_modules/mssql/lib/error/prepared-statement-error.js\")\nconst RequestError = __webpack_require__(/*! ./request-error */ \"(rsc)/../node_modules/mssql/lib/error/request-error.js\")\nconst TransactionError = __webpack_require__(/*! ./transaction-error */ \"(rsc)/../node_modules/mssql/lib/error/transaction-error.js\")\n\nmodule.exports = {\n  ConnectionError,\n  MSSQLError,\n  PreparedStatementError,\n  RequestError,\n  TransactionError\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9lcnJvci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWix3QkFBd0IsbUJBQU8sQ0FBQyxxRkFBb0I7QUFDcEQsbUJBQW1CLG1CQUFPLENBQUMsMkVBQWU7QUFDMUMsK0JBQStCLG1CQUFPLENBQUMscUdBQTRCO0FBQ25FLHFCQUFxQixtQkFBTyxDQUFDLCtFQUFpQjtBQUM5Qyx5QkFBeUIsbUJBQU8sQ0FBQyx1RkFBcUI7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvZXJyb3IvaW5kZXguanM/NDZkYyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgQ29ubmVjdGlvbkVycm9yID0gcmVxdWlyZSgnLi9jb25uZWN0aW9uLWVycm9yJylcbmNvbnN0IE1TU1FMRXJyb3IgPSByZXF1aXJlKCcuL21zc3FsLWVycm9yJylcbmNvbnN0IFByZXBhcmVkU3RhdGVtZW50RXJyb3IgPSByZXF1aXJlKCcuL3ByZXBhcmVkLXN0YXRlbWVudC1lcnJvcicpXG5jb25zdCBSZXF1ZXN0RXJyb3IgPSByZXF1aXJlKCcuL3JlcXVlc3QtZXJyb3InKVxuY29uc3QgVHJhbnNhY3Rpb25FcnJvciA9IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb24tZXJyb3InKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQ29ubmVjdGlvbkVycm9yLFxuICBNU1NRTEVycm9yLFxuICBQcmVwYXJlZFN0YXRlbWVudEVycm9yLFxuICBSZXF1ZXN0RXJyb3IsXG4gIFRyYW5zYWN0aW9uRXJyb3Jcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/error/index.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/error/mssql-error.js":
/*!******************************************************!*\
  !*** ../node_modules/mssql/lib/error/mssql-error.js ***!
  \******************************************************/
/***/ ((module) => {

eval("\n\nclass MSSQLError extends Error {\n  /**\n   * Creates a new ConnectionError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    if (message instanceof Error) {\n      super(message.message)\n      this.code = message.code || code\n\n      Error.captureStackTrace(this, this.constructor)\n      Object.defineProperty(this, 'originalError', { enumerable: true, value: message })\n    } else {\n      super(message)\n      this.code = code\n    }\n\n    this.name = 'MSSQLError'\n  }\n}\n\nmodule.exports = MSSQLError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9lcnJvci9tc3NxbC1lcnJvci5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxREFBcUQsa0NBQWtDO0FBQ3ZGLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvZXJyb3IvbXNzcWwtZXJyb3IuanM/ZmQ0MyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY2xhc3MgTVNTUUxFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQ29ubmVjdGlvbkVycm9yLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBFcnJvciBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2NvZGVdIEVycm9yIGNvZGUuXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yIChtZXNzYWdlLCBjb2RlKSB7XG4gICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgc3VwZXIobWVzc2FnZS5tZXNzYWdlKVxuICAgICAgdGhpcy5jb2RlID0gbWVzc2FnZS5jb2RlIHx8IGNvZGVcblxuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3RvcilcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnb3JpZ2luYWxFcnJvcicsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IG1lc3NhZ2UgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIobWVzc2FnZSlcbiAgICAgIHRoaXMuY29kZSA9IGNvZGVcbiAgICB9XG5cbiAgICB0aGlzLm5hbWUgPSAnTVNTUUxFcnJvcidcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE1TU1FMRXJyb3JcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/error/mssql-error.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/error/prepared-statement-error.js":
/*!*******************************************************************!*\
  !*** ../node_modules/mssql/lib/error/prepared-statement-error.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/../node_modules/mssql/lib/error/mssql-error.js\")\n\n/**\n * Class PreparedStatementError.\n */\n\nclass PreparedStatementError extends MSSQLError {\n  /**\n   * Creates a new PreparedStatementError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    super(message, code)\n\n    this.name = 'PreparedStatementError'\n  }\n}\n\nmodule.exports = PreparedStatementError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9lcnJvci9wcmVwYXJlZC1zdGF0ZW1lbnQtZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosbUJBQW1CLG1CQUFPLENBQUMsMkVBQWU7O0FBRTFDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9lcnJvci9wcmVwYXJlZC1zdGF0ZW1lbnQtZXJyb3IuanM/OTkyNSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgTVNTUUxFcnJvciA9IHJlcXVpcmUoJy4vbXNzcWwtZXJyb3InKVxuXG4vKipcbiAqIENsYXNzIFByZXBhcmVkU3RhdGVtZW50RXJyb3IuXG4gKi9cblxuY2xhc3MgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvciBleHRlbmRzIE1TU1FMRXJyb3Ige1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBQcmVwYXJlZFN0YXRlbWVudEVycm9yLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBFcnJvciBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2NvZGVdIEVycm9yIGNvZGUuXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yIChtZXNzYWdlLCBjb2RlKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgY29kZSlcblxuICAgIHRoaXMubmFtZSA9ICdQcmVwYXJlZFN0YXRlbWVudEVycm9yJ1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUHJlcGFyZWRTdGF0ZW1lbnRFcnJvclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/error/prepared-statement-error.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/error/request-error.js":
/*!********************************************************!*\
  !*** ../node_modules/mssql/lib/error/request-error.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/../node_modules/mssql/lib/error/mssql-error.js\")\n\n/**\n * Class RequestError.\n *\n * @property {String} number Error number.\n * @property {Number} lineNumber Line number.\n * @property {String} state Error state.\n * @property {String} class Error class.\n * @property {String} serverName Server name.\n * @property {String} procName Procedure name.\n */\n\nclass RequestError extends MSSQLError {\n  /**\n   * Creates a new RequestError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    super(message, code)\n    if (message instanceof Error) {\n      if (message.info) {\n        this.number = message.info.number || message.code // err.code is returned by msnodesql driver\n        this.lineNumber = message.info.lineNumber\n        this.state = message.info.state || message.sqlstate // err.sqlstate is returned by msnodesql driver\n        this.class = message.info.class\n        this.serverName = message.info.serverName\n        this.procName = message.info.procName\n      } else {\n        // Use err attributes returned by msnodesql driver\n        this.number = message.code\n        this.lineNumber = message.lineNumber\n        this.state = message.sqlstate\n        this.class = message.severity\n        this.serverName = message.serverName\n        this.procName = message.procName\n      }\n    }\n\n    this.name = 'RequestError'\n    const parsedMessage = (/^\\[Microsoft\\]\\[SQL Server Native Client 11\\.0\\](?:\\[SQL Server\\])?([\\s\\S]*)$/).exec(this.message)\n    if (parsedMessage) {\n      this.message = parsedMessage[1]\n    }\n  }\n}\n\nmodule.exports = RequestError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9lcnJvci9yZXF1ZXN0LWVycm9yLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLG1CQUFtQixtQkFBTyxDQUFDLDJFQUFlOztBQUUxQztBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsUUFBUTtBQUN0QixjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsUUFBUTtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvZXJyb3IvcmVxdWVzdC1lcnJvci5qcz8wODJlIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBNU1NRTEVycm9yID0gcmVxdWlyZSgnLi9tc3NxbC1lcnJvcicpXG5cbi8qKlxuICogQ2xhc3MgUmVxdWVzdEVycm9yLlxuICpcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBudW1iZXIgRXJyb3IgbnVtYmVyLlxuICogQHByb3BlcnR5IHtOdW1iZXJ9IGxpbmVOdW1iZXIgTGluZSBudW1iZXIuXG4gKiBAcHJvcGVydHkge1N0cmluZ30gc3RhdGUgRXJyb3Igc3RhdGUuXG4gKiBAcHJvcGVydHkge1N0cmluZ30gY2xhc3MgRXJyb3IgY2xhc3MuXG4gKiBAcHJvcGVydHkge1N0cmluZ30gc2VydmVyTmFtZSBTZXJ2ZXIgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBwcm9jTmFtZSBQcm9jZWR1cmUgbmFtZS5cbiAqL1xuXG5jbGFzcyBSZXF1ZXN0RXJyb3IgZXh0ZW5kcyBNU1NRTEVycm9yIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgUmVxdWVzdEVycm9yLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBFcnJvciBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2NvZGVdIEVycm9yIGNvZGUuXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yIChtZXNzYWdlLCBjb2RlKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgY29kZSlcbiAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBpZiAobWVzc2FnZS5pbmZvKSB7XG4gICAgICAgIHRoaXMubnVtYmVyID0gbWVzc2FnZS5pbmZvLm51bWJlciB8fCBtZXNzYWdlLmNvZGUgLy8gZXJyLmNvZGUgaXMgcmV0dXJuZWQgYnkgbXNub2Rlc3FsIGRyaXZlclxuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBtZXNzYWdlLmluZm8ubGluZU51bWJlclxuICAgICAgICB0aGlzLnN0YXRlID0gbWVzc2FnZS5pbmZvLnN0YXRlIHx8IG1lc3NhZ2Uuc3Fsc3RhdGUgLy8gZXJyLnNxbHN0YXRlIGlzIHJldHVybmVkIGJ5IG1zbm9kZXNxbCBkcml2ZXJcbiAgICAgICAgdGhpcy5jbGFzcyA9IG1lc3NhZ2UuaW5mby5jbGFzc1xuICAgICAgICB0aGlzLnNlcnZlck5hbWUgPSBtZXNzYWdlLmluZm8uc2VydmVyTmFtZVxuICAgICAgICB0aGlzLnByb2NOYW1lID0gbWVzc2FnZS5pbmZvLnByb2NOYW1lXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVc2UgZXJyIGF0dHJpYnV0ZXMgcmV0dXJuZWQgYnkgbXNub2Rlc3FsIGRyaXZlclxuICAgICAgICB0aGlzLm51bWJlciA9IG1lc3NhZ2UuY29kZVxuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBtZXNzYWdlLmxpbmVOdW1iZXJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IG1lc3NhZ2Uuc3Fsc3RhdGVcbiAgICAgICAgdGhpcy5jbGFzcyA9IG1lc3NhZ2Uuc2V2ZXJpdHlcbiAgICAgICAgdGhpcy5zZXJ2ZXJOYW1lID0gbWVzc2FnZS5zZXJ2ZXJOYW1lXG4gICAgICAgIHRoaXMucHJvY05hbWUgPSBtZXNzYWdlLnByb2NOYW1lXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5uYW1lID0gJ1JlcXVlc3RFcnJvcidcbiAgICBjb25zdCBwYXJzZWRNZXNzYWdlID0gKC9eXFxbTWljcm9zb2Z0XFxdXFxbU1FMIFNlcnZlciBOYXRpdmUgQ2xpZW50IDExXFwuMFxcXSg/OlxcW1NRTCBTZXJ2ZXJcXF0pPyhbXFxzXFxTXSopJC8pLmV4ZWModGhpcy5tZXNzYWdlKVxuICAgIGlmIChwYXJzZWRNZXNzYWdlKSB7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBwYXJzZWRNZXNzYWdlWzFdXG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVxdWVzdEVycm9yXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/error/request-error.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/error/transaction-error.js":
/*!************************************************************!*\
  !*** ../node_modules/mssql/lib/error/transaction-error.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/../node_modules/mssql/lib/error/mssql-error.js\")\n\n/**\n * Class TransactionError.\n */\n\nclass TransactionError extends MSSQLError {\n  /**\n   * Creates a new TransactionError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    super(message, code)\n\n    this.name = 'TransactionError'\n  }\n}\n\nmodule.exports = TransactionError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9lcnJvci90cmFuc2FjdGlvbi1lcnJvci5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixtQkFBbUIsbUJBQU8sQ0FBQywyRUFBZTs7QUFFMUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL3RyYW5zYWN0aW9uLWVycm9yLmpzPzM5ZjQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IE1TU1FMRXJyb3IgPSByZXF1aXJlKCcuL21zc3FsLWVycm9yJylcblxuLyoqXG4gKiBDbGFzcyBUcmFuc2FjdGlvbkVycm9yLlxuICovXG5cbmNsYXNzIFRyYW5zYWN0aW9uRXJyb3IgZXh0ZW5kcyBNU1NRTEVycm9yIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNhY3Rpb25FcnJvci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgRXJyb3IgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IFtjb2RlXSBFcnJvciBjb2RlLlxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAobWVzc2FnZSwgY29kZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGUpXG5cbiAgICB0aGlzLm5hbWUgPSAnVHJhbnNhY3Rpb25FcnJvcidcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zYWN0aW9uRXJyb3JcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/error/transaction-error.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/global-connection.js":
/*!******************************************************!*\
  !*** ../node_modules/mssql/lib/global-connection.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst shared = __webpack_require__(/*! ./shared */ \"(rsc)/../node_modules/mssql/lib/shared.js\")\n\nlet globalConnection = null\nconst globalConnectionHandlers = {}\n\n/**\n * Open global connection pool.\n *\n * @param {Object|String} config Connection configuration object or connection string.\n * @param {basicCallback} [callback] A callback which is called after connection has established, or an error has occurred. If omited, method returns Promise.\n * @return {Promise.<ConnectionPool>}\n */\n\nfunction connect (config, callback) {\n  if (!globalConnection) {\n    globalConnection = new shared.driver.ConnectionPool(config)\n\n    for (const event in globalConnectionHandlers) {\n      for (let i = 0, l = globalConnectionHandlers[event].length; i < l; i++) {\n        globalConnection.on(event, globalConnectionHandlers[event][i])\n      }\n    }\n\n    const ogClose = globalConnection.close\n\n    const globalClose = function (callback) {\n      // remove event handlers from the global connection\n      for (const event in globalConnectionHandlers) {\n        for (let i = 0, l = globalConnectionHandlers[event].length; i < l; i++) {\n          this.removeListener(event, globalConnectionHandlers[event][i])\n        }\n      }\n\n      // attach error handler to prevent process crash in case of error\n      this.on('error', err => {\n        if (globalConnectionHandlers.error) {\n          for (let i = 0, l = globalConnectionHandlers.error.length; i < l; i++) {\n            globalConnectionHandlers.error[i].call(this, err)\n          }\n        }\n      })\n\n      globalConnection = null\n      return ogClose.call(this, callback)\n    }\n\n    globalConnection.close = globalClose.bind(globalConnection)\n  }\n  if (typeof callback === 'function') {\n    return globalConnection.connect((err, connection) => {\n      if (err) {\n        globalConnection = null\n      }\n      callback(err, connection)\n    })\n  }\n  return globalConnection.connect().catch((err) => {\n    globalConnection = null\n    return shared.Promise.reject(err)\n  })\n}\n\n/**\n * Close all active connections in the global pool.\n *\n * @param {basicCallback} [callback] A callback which is called after connection has closed, or an error has occurred. If omited, method returns Promise.\n * @return {ConnectionPool|Promise}\n */\n\nfunction close (callback) {\n  if (globalConnection) {\n    const gc = globalConnection\n    globalConnection = null\n    return gc.close(callback)\n  }\n\n  if (typeof callback === 'function') {\n    setImmediate(callback)\n    return null\n  }\n\n  return new shared.Promise((resolve) => {\n    resolve(globalConnection)\n  })\n}\n\n/**\n * Attach event handler to global connection pool.\n *\n * @param {String} event Event name.\n * @param {Function} handler Event handler.\n * @return {ConnectionPool}\n */\n\nfunction on (event, handler) {\n  if (!globalConnectionHandlers[event]) globalConnectionHandlers[event] = []\n  globalConnectionHandlers[event].push(handler)\n\n  if (globalConnection) globalConnection.on(event, handler)\n  return globalConnection\n}\n\n/**\n * Detach event handler from global connection.\n *\n * @param {String} event Event name.\n * @param {Function} handler Event handler.\n * @return {ConnectionPool}\n */\n\nfunction removeListener (event, handler) {\n  if (!globalConnectionHandlers[event]) return globalConnection\n  const index = globalConnectionHandlers[event].indexOf(handler)\n  if (index === -1) return globalConnection\n  globalConnectionHandlers[event].splice(index, 1)\n  if (globalConnectionHandlers[event].length === 0) globalConnectionHandlers[event] = undefined\n\n  if (globalConnection) globalConnection.removeListener(event, handler)\n  return globalConnection\n}\n\n/**\n * Creates a new query using global connection from a tagged template string.\n *\n * @variation 1\n * @param {Array|String} strings Array of string literals or sql command.\n * @param {...*} keys Values.\n * @return {Request}\n */\n\n/**\n * Execute the SQL command.\n *\n * @variation 2\n * @param {String} command T-SQL command to be executed.\n * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n * @return {Request|Promise}\n */\n\nfunction query () {\n  if (typeof arguments[0] === 'string') { return new shared.driver.Request().query(arguments[0], arguments[1]) }\n\n  const values = Array.prototype.slice.call(arguments)\n  const strings = values.shift()\n\n  return new shared.driver.Request()._template(strings, values, 'query')\n}\n\n/**\n * Creates a new batch using global connection from a tagged template string.\n *\n * @variation 1\n * @param {Array} strings Array of string literals.\n * @param {...*} keys Values.\n * @return {Request}\n */\n\n/**\n * Execute the SQL command.\n *\n * @variation 2\n * @param {String} command T-SQL command to be executed.\n * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n * @return {Request|Promise}\n */\n\nfunction batch () {\n  if (typeof arguments[0] === 'string') { return new shared.driver.Request().batch(arguments[0], arguments[1]) }\n\n  const values = Array.prototype.slice.call(arguments)\n  const strings = values.shift()\n\n  return new shared.driver.Request()._template(strings, values, 'batch')\n}\n\nmodule.exports = {\n  batch,\n  close,\n  connect,\n  off: removeListener,\n  on,\n  query,\n  removeListener\n}\n\nObject.defineProperty(module.exports, \"pool\", ({\n  get: () => {\n    return globalConnection\n  },\n  set: () => {}\n}))\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9nbG9iYWwtY29ubmVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixlQUFlLG1CQUFPLENBQUMsMkRBQVU7O0FBRWpDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxlQUFlO0FBQzFCLFdBQVcsZUFBZTtBQUMxQixZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0VBQWtFLE9BQU87QUFDekU7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxPQUFPO0FBQzNFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsT0FBTztBQUM1RTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQixZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCLFdBQVcsTUFBTTtBQUNqQixZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyx5QkFBeUI7QUFDcEMsWUFBWTtBQUNaOztBQUVBO0FBQ0EsMENBQTBDOztBQUUxQztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxNQUFNO0FBQ2pCLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLHlCQUF5QjtBQUNwQyxZQUFZO0FBQ1o7O0FBRUE7QUFDQSwwQ0FBMEM7O0FBRTFDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0NBQThDO0FBQzlDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9nbG9iYWwtY29ubmVjdGlvbi5qcz84MWQ1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBzaGFyZWQgPSByZXF1aXJlKCcuL3NoYXJlZCcpXG5cbmxldCBnbG9iYWxDb25uZWN0aW9uID0gbnVsbFxuY29uc3QgZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzID0ge31cblxuLyoqXG4gKiBPcGVuIGdsb2JhbCBjb25uZWN0aW9uIHBvb2wuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBjb25maWcgQ29ubmVjdGlvbiBjb25maWd1cmF0aW9uIG9iamVjdCBvciBjb25uZWN0aW9uIHN0cmluZy5cbiAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBjb25uZWN0aW9uIGhhcyBlc3RhYmxpc2hlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gKiBAcmV0dXJuIHtQcm9taXNlLjxDb25uZWN0aW9uUG9vbD59XG4gKi9cblxuZnVuY3Rpb24gY29ubmVjdCAoY29uZmlnLCBjYWxsYmFjaykge1xuICBpZiAoIWdsb2JhbENvbm5lY3Rpb24pIHtcbiAgICBnbG9iYWxDb25uZWN0aW9uID0gbmV3IHNoYXJlZC5kcml2ZXIuQ29ubmVjdGlvblBvb2woY29uZmlnKVxuXG4gICAgZm9yIChjb25zdCBldmVudCBpbiBnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzW2V2ZW50XS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgZ2xvYmFsQ29ubmVjdGlvbi5vbihldmVudCwgZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzW2V2ZW50XVtpXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvZ0Nsb3NlID0gZ2xvYmFsQ29ubmVjdGlvbi5jbG9zZVxuXG4gICAgY29uc3QgZ2xvYmFsQ2xvc2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIC8vIHJlbW92ZSBldmVudCBoYW5kbGVycyBmcm9tIHRoZSBnbG9iYWwgY29ubmVjdGlvblxuICAgICAgZm9yIChjb25zdCBldmVudCBpbiBnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnNbZXZlbnRdLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGdsb2JhbENvbm5lY3Rpb25IYW5kbGVyc1tldmVudF1baV0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gYXR0YWNoIGVycm9yIGhhbmRsZXIgdG8gcHJldmVudCBwcm9jZXNzIGNyYXNoIGluIGNhc2Ugb2YgZXJyb3JcbiAgICAgIHRoaXMub24oJ2Vycm9yJywgZXJyID0+IHtcbiAgICAgICAgaWYgKGdsb2JhbENvbm5lY3Rpb25IYW5kbGVycy5lcnJvcikge1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzLmVycm9yLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzLmVycm9yW2ldLmNhbGwodGhpcywgZXJyKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgZ2xvYmFsQ29ubmVjdGlvbiA9IG51bGxcbiAgICAgIHJldHVybiBvZ0Nsb3NlLmNhbGwodGhpcywgY2FsbGJhY2spXG4gICAgfVxuXG4gICAgZ2xvYmFsQ29ubmVjdGlvbi5jbG9zZSA9IGdsb2JhbENsb3NlLmJpbmQoZ2xvYmFsQ29ubmVjdGlvbilcbiAgfVxuICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGdsb2JhbENvbm5lY3Rpb24uY29ubmVjdCgoZXJyLCBjb25uZWN0aW9uKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGdsb2JhbENvbm5lY3Rpb24gPSBudWxsXG4gICAgICB9XG4gICAgICBjYWxsYmFjayhlcnIsIGNvbm5lY3Rpb24pXG4gICAgfSlcbiAgfVxuICByZXR1cm4gZ2xvYmFsQ29ubmVjdGlvbi5jb25uZWN0KCkuY2F0Y2goKGVycikgPT4ge1xuICAgIGdsb2JhbENvbm5lY3Rpb24gPSBudWxsXG4gICAgcmV0dXJuIHNoYXJlZC5Qcm9taXNlLnJlamVjdChlcnIpXG4gIH0pXG59XG5cbi8qKlxuICogQ2xvc2UgYWxsIGFjdGl2ZSBjb25uZWN0aW9ucyBpbiB0aGUgZ2xvYmFsIHBvb2wuXG4gKlxuICogQHBhcmFtIHtiYXNpY0NhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGNvbm5lY3Rpb24gaGFzIGNsb3NlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gKiBAcmV0dXJuIHtDb25uZWN0aW9uUG9vbHxQcm9taXNlfVxuICovXG5cbmZ1bmN0aW9uIGNsb3NlIChjYWxsYmFjaykge1xuICBpZiAoZ2xvYmFsQ29ubmVjdGlvbikge1xuICAgIGNvbnN0IGdjID0gZ2xvYmFsQ29ubmVjdGlvblxuICAgIGdsb2JhbENvbm5lY3Rpb24gPSBudWxsXG4gICAgcmV0dXJuIGdjLmNsb3NlKGNhbGxiYWNrKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHNldEltbWVkaWF0ZShjYWxsYmFjaylcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHJlc29sdmUoZ2xvYmFsQ29ubmVjdGlvbilcbiAgfSlcbn1cblxuLyoqXG4gKiBBdHRhY2ggZXZlbnQgaGFuZGxlciB0byBnbG9iYWwgY29ubmVjdGlvbiBwb29sLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBFdmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBFdmVudCBoYW5kbGVyLlxuICogQHJldHVybiB7Q29ubmVjdGlvblBvb2x9XG4gKi9cblxuZnVuY3Rpb24gb24gKGV2ZW50LCBoYW5kbGVyKSB7XG4gIGlmICghZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzW2V2ZW50XSkgZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzW2V2ZW50XSA9IFtdXG4gIGdsb2JhbENvbm5lY3Rpb25IYW5kbGVyc1tldmVudF0ucHVzaChoYW5kbGVyKVxuXG4gIGlmIChnbG9iYWxDb25uZWN0aW9uKSBnbG9iYWxDb25uZWN0aW9uLm9uKGV2ZW50LCBoYW5kbGVyKVxuICByZXR1cm4gZ2xvYmFsQ29ubmVjdGlvblxufVxuXG4vKipcbiAqIERldGFjaCBldmVudCBoYW5kbGVyIGZyb20gZ2xvYmFsIGNvbm5lY3Rpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IEV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIEV2ZW50IGhhbmRsZXIuXG4gKiBAcmV0dXJuIHtDb25uZWN0aW9uUG9vbH1cbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVMaXN0ZW5lciAoZXZlbnQsIGhhbmRsZXIpIHtcbiAgaWYgKCFnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnNbZXZlbnRdKSByZXR1cm4gZ2xvYmFsQ29ubmVjdGlvblxuICBjb25zdCBpbmRleCA9IGdsb2JhbENvbm5lY3Rpb25IYW5kbGVyc1tldmVudF0uaW5kZXhPZihoYW5kbGVyKVxuICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gZ2xvYmFsQ29ubmVjdGlvblxuICBnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnNbZXZlbnRdLnNwbGljZShpbmRleCwgMSlcbiAgaWYgKGdsb2JhbENvbm5lY3Rpb25IYW5kbGVyc1tldmVudF0ubGVuZ3RoID09PSAwKSBnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnNbZXZlbnRdID0gdW5kZWZpbmVkXG5cbiAgaWYgKGdsb2JhbENvbm5lY3Rpb24pIGdsb2JhbENvbm5lY3Rpb24ucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIpXG4gIHJldHVybiBnbG9iYWxDb25uZWN0aW9uXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWVyeSB1c2luZyBnbG9iYWwgY29ubmVjdGlvbiBmcm9tIGEgdGFnZ2VkIHRlbXBsYXRlIHN0cmluZy5cbiAqXG4gKiBAdmFyaWF0aW9uIDFcbiAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBzdHJpbmdzIEFycmF5IG9mIHN0cmluZyBsaXRlcmFscyBvciBzcWwgY29tbWFuZC5cbiAqIEBwYXJhbSB7Li4uKn0ga2V5cyBWYWx1ZXMuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICovXG5cbi8qKlxuICogRXhlY3V0ZSB0aGUgU1FMIGNvbW1hbmQuXG4gKlxuICogQHZhcmlhdGlvbiAyXG4gKiBAcGFyYW0ge1N0cmluZ30gY29tbWFuZCBULVNRTCBjb21tYW5kIHRvIGJlIGV4ZWN1dGVkLlxuICogQHBhcmFtIHtSZXF1ZXN0fnJlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBleGVjdXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fFByb21pc2V9XG4gKi9cblxuZnVuY3Rpb24gcXVlcnkgKCkge1xuICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHsgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QoKS5xdWVyeShhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSkgfVxuXG4gIGNvbnN0IHZhbHVlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgY29uc3Qgc3RyaW5ncyA9IHZhbHVlcy5zaGlmdCgpXG5cbiAgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QoKS5fdGVtcGxhdGUoc3RyaW5ncywgdmFsdWVzLCAncXVlcnknKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYmF0Y2ggdXNpbmcgZ2xvYmFsIGNvbm5lY3Rpb24gZnJvbSBhIHRhZ2dlZCB0ZW1wbGF0ZSBzdHJpbmcuXG4gKlxuICogQHZhcmlhdGlvbiAxXG4gKiBAcGFyYW0ge0FycmF5fSBzdHJpbmdzIEFycmF5IG9mIHN0cmluZyBsaXRlcmFscy5cbiAqIEBwYXJhbSB7Li4uKn0ga2V5cyBWYWx1ZXMuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICovXG5cbi8qKlxuICogRXhlY3V0ZSB0aGUgU1FMIGNvbW1hbmQuXG4gKlxuICogQHZhcmlhdGlvbiAyXG4gKiBAcGFyYW0ge1N0cmluZ30gY29tbWFuZCBULVNRTCBjb21tYW5kIHRvIGJlIGV4ZWN1dGVkLlxuICogQHBhcmFtIHtSZXF1ZXN0fnJlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBleGVjdXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fFByb21pc2V9XG4gKi9cblxuZnVuY3Rpb24gYmF0Y2ggKCkge1xuICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHsgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QoKS5iYXRjaChhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSkgfVxuXG4gIGNvbnN0IHZhbHVlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgY29uc3Qgc3RyaW5ncyA9IHZhbHVlcy5zaGlmdCgpXG5cbiAgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QoKS5fdGVtcGxhdGUoc3RyaW5ncywgdmFsdWVzLCAnYmF0Y2gnKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYmF0Y2gsXG4gIGNsb3NlLFxuICBjb25uZWN0LFxuICBvZmY6IHJlbW92ZUxpc3RlbmVyLFxuICBvbixcbiAgcXVlcnksXG4gIHJlbW92ZUxpc3RlbmVyXG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ3Bvb2wnLCB7XG4gIGdldDogKCkgPT4ge1xuICAgIHJldHVybiBnbG9iYWxDb25uZWN0aW9uXG4gIH0sXG4gIHNldDogKCkgPT4ge31cbn0pXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/global-connection.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/isolationlevel.js":
/*!***************************************************!*\
  !*** ../node_modules/mssql/lib/isolationlevel.js ***!
  \***************************************************/
/***/ ((module) => {

eval("\n\nmodule.exports = {\n  READ_UNCOMMITTED: 0x01,\n  READ_COMMITTED: 0x02,\n  REPEATABLE_READ: 0x03,\n  SERIALIZABLE: 0x04,\n  SNAPSHOT: 0x05\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9pc29sYXRpb25sZXZlbC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2lzb2xhdGlvbmxldmVsLmpzPzk4OTUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBSRUFEX1VOQ09NTUlUVEVEOiAweDAxLFxuICBSRUFEX0NPTU1JVFRFRDogMHgwMixcbiAgUkVQRUFUQUJMRV9SRUFEOiAweDAzLFxuICBTRVJJQUxJWkFCTEU6IDB4MDQsXG4gIFNOQVBTSE9UOiAweDA1XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/isolationlevel.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/shared.js":
/*!*******************************************!*\
  !*** ../node_modules/mssql/lib/shared.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst { TYPES } = __webpack_require__(/*! ./datatypes */ \"(rsc)/../node_modules/mssql/lib/datatypes.js\")\nconst Table = __webpack_require__(/*! ./table */ \"(rsc)/../node_modules/mssql/lib/table.js\")\n\nlet PromiseLibrary = Promise\nconst driver = {}\nconst map = []\n\n/**\n * Register you own type map.\n *\n * @path module.exports.map\n * @param {*} jstype JS data type.\n * @param {*} sqltype SQL data type.\n */\n\nmap.register = function (jstype, sqltype) {\n  for (let index = 0; index < this.length; index++) {\n    const item = this[index]\n    if (item.js === jstype) {\n      this.splice(index, 1)\n      break\n    }\n  }\n\n  this.push({\n    js: jstype,\n    sql: sqltype\n  })\n\n  return null\n}\n\nmap.register(String, TYPES.NVarChar)\nmap.register(Number, TYPES.Int)\nmap.register(Boolean, TYPES.Bit)\nmap.register(Date, TYPES.DateTime)\nmap.register(Buffer, TYPES.VarBinary)\nmap.register(Table, TYPES.TVP)\n\n/**\n * @ignore\n */\n\nconst getTypeByValue = function (value) {\n  if ((value === null) || (value === undefined)) { return TYPES.NVarChar }\n\n  switch (typeof value) {\n    case 'string':\n      for (const item of Array.from(map)) {\n        if (item.js === String) {\n          return item.sql\n        }\n      }\n\n      return TYPES.NVarChar\n\n    case 'number':\n      if (value % 1 === 0) {\n        if (value < -2147483648 || value > 2147483647) {\n          return TYPES.BigInt\n        } else {\n          return TYPES.Int\n        }\n      } else {\n        return TYPES.Float\n      }\n\n    case 'bigint':\n      if (value < -2147483648n || value > 2147483647n) {\n        return TYPES.BigInt\n      } else {\n        return TYPES.Int\n      }\n\n    case 'boolean':\n      for (const item of Array.from(map)) {\n        if (item.js === Boolean) {\n          return item.sql\n        }\n      }\n\n      return TYPES.Bit\n\n    case 'object':\n      for (const item of Array.from(map)) {\n        if (value instanceof item.js) {\n          return item.sql\n        }\n      }\n\n      return TYPES.NVarChar\n\n    default:\n      return TYPES.NVarChar\n  }\n}\n\nmodule.exports = {\n  driver,\n  getTypeByValue,\n  map\n}\n\nObject.defineProperty(module.exports, \"Promise\", ({\n  get: () => {\n    return PromiseLibrary\n  },\n  set: (value) => {\n    PromiseLibrary = value\n  }\n}))\n\nObject.defineProperty(module.exports, \"valueHandler\", ({\n  enumerable: true,\n  value: new Map(),\n  writable: false,\n  configurable: false\n}))\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9zaGFyZWQuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosUUFBUSxRQUFRLEVBQUUsbUJBQU8sQ0FBQyxpRUFBYTtBQUN2QyxjQUFjLG1CQUFPLENBQUMseURBQVM7O0FBRS9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkLFdBQVcsR0FBRztBQUNkOztBQUVBO0FBQ0Esc0JBQXNCLHFCQUFxQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtREFBbUQ7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0RBQWlEO0FBQ2pEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDOztBQUVGLHVEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3NoYXJlZC5qcz83YjE2Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCB7IFRZUEVTIH0gPSByZXF1aXJlKCcuL2RhdGF0eXBlcycpXG5jb25zdCBUYWJsZSA9IHJlcXVpcmUoJy4vdGFibGUnKVxuXG5sZXQgUHJvbWlzZUxpYnJhcnkgPSBQcm9taXNlXG5jb25zdCBkcml2ZXIgPSB7fVxuY29uc3QgbWFwID0gW11cblxuLyoqXG4gKiBSZWdpc3RlciB5b3Ugb3duIHR5cGUgbWFwLlxuICpcbiAqIEBwYXRoIG1vZHVsZS5leHBvcnRzLm1hcFxuICogQHBhcmFtIHsqfSBqc3R5cGUgSlMgZGF0YSB0eXBlLlxuICogQHBhcmFtIHsqfSBzcWx0eXBlIFNRTCBkYXRhIHR5cGUuXG4gKi9cblxubWFwLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGpzdHlwZSwgc3FsdHlwZSkge1xuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCBpdGVtID0gdGhpc1tpbmRleF1cbiAgICBpZiAoaXRlbS5qcyA9PT0ganN0eXBlKSB7XG4gICAgICB0aGlzLnNwbGljZShpbmRleCwgMSlcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgdGhpcy5wdXNoKHtcbiAgICBqczoganN0eXBlLFxuICAgIHNxbDogc3FsdHlwZVxuICB9KVxuXG4gIHJldHVybiBudWxsXG59XG5cbm1hcC5yZWdpc3RlcihTdHJpbmcsIFRZUEVTLk5WYXJDaGFyKVxubWFwLnJlZ2lzdGVyKE51bWJlciwgVFlQRVMuSW50KVxubWFwLnJlZ2lzdGVyKEJvb2xlYW4sIFRZUEVTLkJpdClcbm1hcC5yZWdpc3RlcihEYXRlLCBUWVBFUy5EYXRlVGltZSlcbm1hcC5yZWdpc3RlcihCdWZmZXIsIFRZUEVTLlZhckJpbmFyeSlcbm1hcC5yZWdpc3RlcihUYWJsZSwgVFlQRVMuVFZQKVxuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuXG5jb25zdCBnZXRUeXBlQnlWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBpZiAoKHZhbHVlID09PSBudWxsKSB8fCAodmFsdWUgPT09IHVuZGVmaW5lZCkpIHsgcmV0dXJuIFRZUEVTLk5WYXJDaGFyIH1cblxuICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgQXJyYXkuZnJvbShtYXApKSB7XG4gICAgICAgIGlmIChpdGVtLmpzID09PSBTdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gaXRlbS5zcWxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gVFlQRVMuTlZhckNoYXJcblxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICBpZiAodmFsdWUgJSAxID09PSAwKSB7XG4gICAgICAgIGlmICh2YWx1ZSA8IC0yMTQ3NDgzNjQ4IHx8IHZhbHVlID4gMjE0NzQ4MzY0Nykge1xuICAgICAgICAgIHJldHVybiBUWVBFUy5CaWdJbnRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gVFlQRVMuSW50XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBUWVBFUy5GbG9hdFxuICAgICAgfVxuXG4gICAgY2FzZSAnYmlnaW50JzpcbiAgICAgIGlmICh2YWx1ZSA8IC0yMTQ3NDgzNjQ4biB8fCB2YWx1ZSA+IDIxNDc0ODM2NDduKSB7XG4gICAgICAgIHJldHVybiBUWVBFUy5CaWdJbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBUWVBFUy5JbnRcbiAgICAgIH1cblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIEFycmF5LmZyb20obWFwKSkge1xuICAgICAgICBpZiAoaXRlbS5qcyA9PT0gQm9vbGVhbikge1xuICAgICAgICAgIHJldHVybiBpdGVtLnNxbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBUWVBFUy5CaXRcblxuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgQXJyYXkuZnJvbShtYXApKSB7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIGl0ZW0uanMpIHtcbiAgICAgICAgICByZXR1cm4gaXRlbS5zcWxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gVFlQRVMuTlZhckNoYXJcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gVFlQRVMuTlZhckNoYXJcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZHJpdmVyLFxuICBnZXRUeXBlQnlWYWx1ZSxcbiAgbWFwXG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ1Byb21pc2UnLCB7XG4gIGdldDogKCkgPT4ge1xuICAgIHJldHVybiBQcm9taXNlTGlicmFyeVxuICB9LFxuICBzZXQ6ICh2YWx1ZSkgPT4ge1xuICAgIFByb21pc2VMaWJyYXJ5ID0gdmFsdWVcbiAgfVxufSlcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCAndmFsdWVIYW5kbGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogbmV3IE1hcCgpLFxuICB3cml0YWJsZTogZmFsc2UsXG4gIGNvbmZpZ3VyYWJsZTogZmFsc2Vcbn0pXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/shared.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/table.js":
/*!******************************************!*\
  !*** ../node_modules/mssql/lib/table.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst TYPES = (__webpack_require__(/*! ./datatypes */ \"(rsc)/../node_modules/mssql/lib/datatypes.js\").TYPES)\nconst declareType = (__webpack_require__(/*! ./datatypes */ \"(rsc)/../node_modules/mssql/lib/datatypes.js\").declare)\nconst objectHasProperty = (__webpack_require__(/*! ./utils */ \"(rsc)/../node_modules/mssql/lib/utils.js\").objectHasProperty)\n\nconst MAX = 65535 // (1 << 16) - 1\nconst JSON_COLUMN_ID = 'JSON_F52E2B61-18A1-11d1-B105-00805F49916B'\n\nfunction Table (name) {\n  if (name) {\n    const parsed = Table.parseName(name)\n    this.name = parsed.name\n    this.schema = parsed.schema\n    this.database = parsed.database\n    this.path = (this.database ? `[${this.database}].` : '') + (this.schema ? `[${this.schema}].` : '') + `[${this.name}]`\n    this.temporary = this.name.charAt(0) === '#'\n  }\n\n  this.columns = []\n  this.rows = []\n\n  Object.defineProperty(this.columns, 'add', {\n    value (name, column, options) {\n      if (column == null) {\n        throw new Error('Column data type is not defined.')\n      }\n      if (column instanceof Function) {\n        column = column()\n      }\n\n      options = options || {}\n      column.name = name;\n\n      ['nullable', 'primary', 'identity', 'readOnly', 'length'].forEach(prop => {\n        if (objectHasProperty(options, prop)) {\n          column[prop] = options[prop]\n        }\n      })\n\n      return this.push(column)\n    }\n  })\n\n  Object.defineProperty(this.rows, 'add', {\n    value () {\n      return this.push(Array.prototype.slice.call(arguments))\n    }\n  }\n  )\n\n  Object.defineProperty(this.rows, 'clear', {\n    value () {\n      return this.splice(0, this.length)\n    }\n  }\n  )\n}\n\n/*\n@private\n*/\n\nTable.prototype._makeBulk = function _makeBulk () {\n  for (let i = 0; i < this.columns.length; i++) {\n    const col = this.columns[i]\n    switch (col.type) {\n      case TYPES.Date:\n      case TYPES.DateTime:\n      case TYPES.DateTime2:\n        for (let j = 0; j < this.rows.length; j++) {\n          const dateValue = this.rows[j][i]\n          if (typeof dateValue === 'string' || typeof dateValue === 'number') {\n            const date = new Date(dateValue)\n            if (isNaN(date.getDate())) {\n              throw new TypeError('Invalid date value passed to bulk rows')\n            }\n            this.rows[j][i] = date\n          }\n        }\n        break\n\n      case TYPES.Xml:\n        col.type = TYPES.NVarChar(MAX).type\n        break\n\n      case TYPES.UDT:\n      case TYPES.Geography:\n      case TYPES.Geometry:\n        col.type = TYPES.VarBinary(MAX).type\n        break\n\n      default:\n        break\n    }\n  }\n\n  return this\n}\n\nTable.prototype.declare = function declare () {\n  const pkey = this.columns.filter(col => col.primary === true).map(col => `[${col.name}]`)\n  const cols = this.columns.map(col => {\n    const def = [`[${col.name}] ${declareType(col.type, col)}`]\n\n    if (col.nullable === true) {\n      def.push('null')\n    } else if (col.nullable === false) {\n      def.push('not null')\n    }\n\n    if (col.primary === true && pkey.length === 1) {\n      def.push('primary key')\n    }\n\n    return def.join(' ')\n  })\n\n  const constraint = pkey.length > 1 ? `, constraint [PK_${this.temporary ? this.name.substr(1) : this.name}] primary key (${pkey.join(', ')})` : ''\n  return `create table ${this.path} (${cols.join(', ')}${constraint})`\n}\n\nTable.fromRecordset = function fromRecordset (recordset, name) {\n  const t = new this(name)\n\n  for (const colName in recordset.columns) {\n    if (objectHasProperty(recordset.columns, colName)) {\n      const col = recordset.columns[colName]\n\n      t.columns.add(colName, {\n        type: col.type,\n        length: col.length,\n        scale: col.scale,\n        precision: col.precision\n      }, {\n        nullable: col.nullable,\n        identity: col.identity,\n        readOnly: col.readOnly\n      })\n    }\n  }\n\n  if (t.columns.length === 1 && t.columns[0].name === JSON_COLUMN_ID) {\n    for (let i = 0; i < recordset.length; i++) {\n      t.rows.add(JSON.stringify(recordset[i]))\n    }\n  } else {\n    for (let i = 0; i < recordset.length; i++) {\n      t.rows.add.apply(t.rows, t.columns.map(col => recordset[i][col.name]))\n    }\n  }\n\n  return t\n}\n\nTable.parseName = function parseName (name) {\n  const length = name.length\n  let cursor = -1\n  let buffer = ''\n  let escaped = false\n  const path = []\n\n  while (++cursor < length) {\n    const char = name.charAt(cursor)\n    if (char === '[') {\n      if (escaped) {\n        buffer += char\n      } else {\n        escaped = true\n      }\n    } else if (char === ']') {\n      if (escaped) {\n        escaped = false\n      } else {\n        throw new Error('Invalid table name.')\n      }\n    } else if (char === '.') {\n      if (escaped) {\n        buffer += char\n      } else {\n        path.push(buffer)\n        buffer = ''\n      }\n    } else {\n      buffer += char\n    }\n  }\n\n  if (buffer) {\n    path.push(buffer)\n  }\n\n  switch (path.length) {\n    case 1:\n      return {\n        name: path[0],\n        schema: null,\n        database: null\n      }\n\n    case 2:\n      return {\n        name: path[1],\n        schema: path[0],\n        database: null\n      }\n\n    case 3:\n      return {\n        name: path[2],\n        schema: path[1],\n        database: path[0]\n      }\n\n    default:\n      throw new Error('Invalid table name.')\n  }\n}\n\nmodule.exports = Table\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi90YWJsZS5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixjQUFjLDhGQUE0QjtBQUMxQyxvQkFBb0IsZ0dBQThCO0FBQ2xELDBCQUEwQixrR0FBb0M7O0FBRTlEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGNBQWMsK0JBQStCLFlBQVksZ0JBQWdCLFVBQVU7QUFDeEg7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQix5QkFBeUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzQkFBc0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLCtFQUErRSxTQUFTO0FBQ3hGO0FBQ0EscUJBQXFCLFNBQVMsSUFBSSwyQkFBMkI7O0FBRTdEO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVILDJEQUEyRCxpREFBaUQsaUJBQWlCLGdCQUFnQjtBQUM3SSx5QkFBeUIsV0FBVyxHQUFHLGdCQUFnQixFQUFFLFdBQVc7QUFDcEU7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBLElBQUk7QUFDSixvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3RhYmxlLmpzPzgzZWUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IFRZUEVTID0gcmVxdWlyZSgnLi9kYXRhdHlwZXMnKS5UWVBFU1xuY29uc3QgZGVjbGFyZVR5cGUgPSByZXF1aXJlKCcuL2RhdGF0eXBlcycpLmRlY2xhcmVcbmNvbnN0IG9iamVjdEhhc1Byb3BlcnR5ID0gcmVxdWlyZSgnLi91dGlscycpLm9iamVjdEhhc1Byb3BlcnR5XG5cbmNvbnN0IE1BWCA9IDY1NTM1IC8vICgxIDw8IDE2KSAtIDFcbmNvbnN0IEpTT05fQ09MVU1OX0lEID0gJ0pTT05fRjUyRTJCNjEtMThBMS0xMWQxLUIxMDUtMDA4MDVGNDk5MTZCJ1xuXG5mdW5jdGlvbiBUYWJsZSAobmFtZSkge1xuICBpZiAobmFtZSkge1xuICAgIGNvbnN0IHBhcnNlZCA9IFRhYmxlLnBhcnNlTmFtZShuYW1lKVxuICAgIHRoaXMubmFtZSA9IHBhcnNlZC5uYW1lXG4gICAgdGhpcy5zY2hlbWEgPSBwYXJzZWQuc2NoZW1hXG4gICAgdGhpcy5kYXRhYmFzZSA9IHBhcnNlZC5kYXRhYmFzZVxuICAgIHRoaXMucGF0aCA9ICh0aGlzLmRhdGFiYXNlID8gYFske3RoaXMuZGF0YWJhc2V9XS5gIDogJycpICsgKHRoaXMuc2NoZW1hID8gYFske3RoaXMuc2NoZW1hfV0uYCA6ICcnKSArIGBbJHt0aGlzLm5hbWV9XWBcbiAgICB0aGlzLnRlbXBvcmFyeSA9IHRoaXMubmFtZS5jaGFyQXQoMCkgPT09ICcjJ1xuICB9XG5cbiAgdGhpcy5jb2x1bW5zID0gW11cbiAgdGhpcy5yb3dzID0gW11cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jb2x1bW5zLCAnYWRkJywge1xuICAgIHZhbHVlIChuYW1lLCBjb2x1bW4sIG9wdGlvbnMpIHtcbiAgICAgIGlmIChjb2x1bW4gPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbHVtbiBkYXRhIHR5cGUgaXMgbm90IGRlZmluZWQuJylcbiAgICAgIH1cbiAgICAgIGlmIChjb2x1bW4gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICBjb2x1bW4gPSBjb2x1bW4oKVxuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgICAgY29sdW1uLm5hbWUgPSBuYW1lO1xuXG4gICAgICBbJ251bGxhYmxlJywgJ3ByaW1hcnknLCAnaWRlbnRpdHknLCAncmVhZE9ubHknLCAnbGVuZ3RoJ10uZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgaWYgKG9iamVjdEhhc1Byb3BlcnR5KG9wdGlvbnMsIHByb3ApKSB7XG4gICAgICAgICAgY29sdW1uW3Byb3BdID0gb3B0aW9uc1twcm9wXVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gdGhpcy5wdXNoKGNvbHVtbilcbiAgICB9XG4gIH0pXG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMucm93cywgJ2FkZCcsIHtcbiAgICB2YWx1ZSAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wdXNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpXG4gICAgfVxuICB9XG4gIClcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5yb3dzLCAnY2xlYXInLCB7XG4gICAgdmFsdWUgKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3BsaWNlKDAsIHRoaXMubGVuZ3RoKVxuICAgIH1cbiAgfVxuICApXG59XG5cbi8qXG5AcHJpdmF0ZVxuKi9cblxuVGFibGUucHJvdG90eXBlLl9tYWtlQnVsayA9IGZ1bmN0aW9uIF9tYWtlQnVsayAoKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY29sID0gdGhpcy5jb2x1bW5zW2ldXG4gICAgc3dpdGNoIChjb2wudHlwZSkge1xuICAgICAgY2FzZSBUWVBFUy5EYXRlOlxuICAgICAgY2FzZSBUWVBFUy5EYXRlVGltZTpcbiAgICAgIGNhc2UgVFlQRVMuRGF0ZVRpbWUyOlxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMucm93cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHRoaXMucm93c1tqXVtpXVxuICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZVZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgZGF0ZVZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSlcbiAgICAgICAgICAgIGlmIChpc05hTihkYXRlLmdldERhdGUoKSkpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBkYXRlIHZhbHVlIHBhc3NlZCB0byBidWxrIHJvd3MnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3dzW2pdW2ldID0gZGF0ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIFRZUEVTLlhtbDpcbiAgICAgICAgY29sLnR5cGUgPSBUWVBFUy5OVmFyQ2hhcihNQVgpLnR5cGVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBUWVBFUy5VRFQ6XG4gICAgICBjYXNlIFRZUEVTLkdlb2dyYXBoeTpcbiAgICAgIGNhc2UgVFlQRVMuR2VvbWV0cnk6XG4gICAgICAgIGNvbC50eXBlID0gVFlQRVMuVmFyQmluYXJ5KE1BWCkudHlwZVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cblRhYmxlLnByb3RvdHlwZS5kZWNsYXJlID0gZnVuY3Rpb24gZGVjbGFyZSAoKSB7XG4gIGNvbnN0IHBrZXkgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiBjb2wucHJpbWFyeSA9PT0gdHJ1ZSkubWFwKGNvbCA9PiBgWyR7Y29sLm5hbWV9XWApXG4gIGNvbnN0IGNvbHMgPSB0aGlzLmNvbHVtbnMubWFwKGNvbCA9PiB7XG4gICAgY29uc3QgZGVmID0gW2BbJHtjb2wubmFtZX1dICR7ZGVjbGFyZVR5cGUoY29sLnR5cGUsIGNvbCl9YF1cblxuICAgIGlmIChjb2wubnVsbGFibGUgPT09IHRydWUpIHtcbiAgICAgIGRlZi5wdXNoKCdudWxsJylcbiAgICB9IGVsc2UgaWYgKGNvbC5udWxsYWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgIGRlZi5wdXNoKCdub3QgbnVsbCcpXG4gICAgfVxuXG4gICAgaWYgKGNvbC5wcmltYXJ5ID09PSB0cnVlICYmIHBrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICBkZWYucHVzaCgncHJpbWFyeSBrZXknKVxuICAgIH1cblxuICAgIHJldHVybiBkZWYuam9pbignICcpXG4gIH0pXG5cbiAgY29uc3QgY29uc3RyYWludCA9IHBrZXkubGVuZ3RoID4gMSA/IGAsIGNvbnN0cmFpbnQgW1BLXyR7dGhpcy50ZW1wb3JhcnkgPyB0aGlzLm5hbWUuc3Vic3RyKDEpIDogdGhpcy5uYW1lfV0gcHJpbWFyeSBrZXkgKCR7cGtleS5qb2luKCcsICcpfSlgIDogJydcbiAgcmV0dXJuIGBjcmVhdGUgdGFibGUgJHt0aGlzLnBhdGh9ICgke2NvbHMuam9pbignLCAnKX0ke2NvbnN0cmFpbnR9KWBcbn1cblxuVGFibGUuZnJvbVJlY29yZHNldCA9IGZ1bmN0aW9uIGZyb21SZWNvcmRzZXQgKHJlY29yZHNldCwgbmFtZSkge1xuICBjb25zdCB0ID0gbmV3IHRoaXMobmFtZSlcblxuICBmb3IgKGNvbnN0IGNvbE5hbWUgaW4gcmVjb3Jkc2V0LmNvbHVtbnMpIHtcbiAgICBpZiAob2JqZWN0SGFzUHJvcGVydHkocmVjb3Jkc2V0LmNvbHVtbnMsIGNvbE5hbWUpKSB7XG4gICAgICBjb25zdCBjb2wgPSByZWNvcmRzZXQuY29sdW1uc1tjb2xOYW1lXVxuXG4gICAgICB0LmNvbHVtbnMuYWRkKGNvbE5hbWUsIHtcbiAgICAgICAgdHlwZTogY29sLnR5cGUsXG4gICAgICAgIGxlbmd0aDogY29sLmxlbmd0aCxcbiAgICAgICAgc2NhbGU6IGNvbC5zY2FsZSxcbiAgICAgICAgcHJlY2lzaW9uOiBjb2wucHJlY2lzaW9uXG4gICAgICB9LCB7XG4gICAgICAgIG51bGxhYmxlOiBjb2wubnVsbGFibGUsXG4gICAgICAgIGlkZW50aXR5OiBjb2wuaWRlbnRpdHksXG4gICAgICAgIHJlYWRPbmx5OiBjb2wucmVhZE9ubHlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgaWYgKHQuY29sdW1ucy5sZW5ndGggPT09IDEgJiYgdC5jb2x1bW5zWzBdLm5hbWUgPT09IEpTT05fQ09MVU1OX0lEKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNvcmRzZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHQucm93cy5hZGQoSlNPTi5zdHJpbmdpZnkocmVjb3Jkc2V0W2ldKSlcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNvcmRzZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHQucm93cy5hZGQuYXBwbHkodC5yb3dzLCB0LmNvbHVtbnMubWFwKGNvbCA9PiByZWNvcmRzZXRbaV1bY29sLm5hbWVdKSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdFxufVxuXG5UYWJsZS5wYXJzZU5hbWUgPSBmdW5jdGlvbiBwYXJzZU5hbWUgKG5hbWUpIHtcbiAgY29uc3QgbGVuZ3RoID0gbmFtZS5sZW5ndGhcbiAgbGV0IGN1cnNvciA9IC0xXG4gIGxldCBidWZmZXIgPSAnJ1xuICBsZXQgZXNjYXBlZCA9IGZhbHNlXG4gIGNvbnN0IHBhdGggPSBbXVxuXG4gIHdoaWxlICgrK2N1cnNvciA8IGxlbmd0aCkge1xuICAgIGNvbnN0IGNoYXIgPSBuYW1lLmNoYXJBdChjdXJzb3IpXG4gICAgaWYgKGNoYXIgPT09ICdbJykge1xuICAgICAgaWYgKGVzY2FwZWQpIHtcbiAgICAgICAgYnVmZmVyICs9IGNoYXJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVzY2FwZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGFyID09PSAnXScpIHtcbiAgICAgIGlmIChlc2NhcGVkKSB7XG4gICAgICAgIGVzY2FwZWQgPSBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRhYmxlIG5hbWUuJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICcuJykge1xuICAgICAgaWYgKGVzY2FwZWQpIHtcbiAgICAgICAgYnVmZmVyICs9IGNoYXJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGgucHVzaChidWZmZXIpXG4gICAgICAgIGJ1ZmZlciA9ICcnXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1ZmZlciArPSBjaGFyXG4gICAgfVxuICB9XG5cbiAgaWYgKGJ1ZmZlcikge1xuICAgIHBhdGgucHVzaChidWZmZXIpXG4gIH1cblxuICBzd2l0Y2ggKHBhdGgubGVuZ3RoKSB7XG4gICAgY2FzZSAxOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogcGF0aFswXSxcbiAgICAgICAgc2NoZW1hOiBudWxsLFxuICAgICAgICBkYXRhYmFzZTogbnVsbFxuICAgICAgfVxuXG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogcGF0aFsxXSxcbiAgICAgICAgc2NoZW1hOiBwYXRoWzBdLFxuICAgICAgICBkYXRhYmFzZTogbnVsbFxuICAgICAgfVxuXG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogcGF0aFsyXSxcbiAgICAgICAgc2NoZW1hOiBwYXRoWzFdLFxuICAgICAgICBkYXRhYmFzZTogcGF0aFswXVxuICAgICAgfVxuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0YWJsZSBuYW1lLicpXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUYWJsZVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/table.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/tedious/connection-pool.js":
/*!************************************************************!*\
  !*** ../node_modules/mssql/lib/tedious/connection-pool.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst tds = __webpack_require__(/*! tedious */ \"(rsc)/../node_modules/tedious/lib/tedious.js\")\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/../node_modules/debug/src/index.js\")('mssql:tedi')\nconst BaseConnectionPool = __webpack_require__(/*! ../base/connection-pool */ \"(rsc)/../node_modules/mssql/lib/base/connection-pool.js\")\nconst { IDS } = __webpack_require__(/*! ../utils */ \"(rsc)/../node_modules/mssql/lib/utils.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/../node_modules/mssql/lib/shared.js\")\nconst ConnectionError = __webpack_require__(/*! ../error/connection-error */ \"(rsc)/../node_modules/mssql/lib/error/connection-error.js\")\n\nclass ConnectionPool extends BaseConnectionPool {\n  _config () {\n    const cfg = {\n      server: this.config.server,\n      options: Object.assign({\n        encrypt: typeof this.config.encrypt === 'boolean' ? this.config.encrypt : true,\n        trustServerCertificate: typeof this.config.trustServerCertificate === 'boolean' ? this.config.trustServerCertificate : false\n      }, this.config.options),\n      authentication: Object.assign({\n        type: this.config.domain !== undefined ? 'ntlm' : this.config.authentication_type !== undefined ? this.config.authentication_type : 'default',\n        options: Object.entries({\n          userName: this.config.user,\n          password: this.config.password,\n          domain: this.config.domain,\n          clientId: this.config.clientId,\n          clientSecret: this.config.clientSecret,\n          tenantId: this.config.tenantId,\n          token: this.config.token,\n          msiEndpoint: this.config.msiEndpoint,\n          msiSecret: this.config.msiSecret\n        }).reduce((acc, [key, val]) => {\n          if (typeof val !== 'undefined') {\n            return { ...acc, [key]: val }\n          }\n          return acc\n        }, {})\n      }, this.config.authentication)\n    }\n\n    cfg.options.database = cfg.options.database || this.config.database\n    cfg.options.port = cfg.options.port || this.config.port\n    cfg.options.connectTimeout = cfg.options.connectTimeout ?? this.config.connectionTimeout ?? this.config.timeout ?? 15000\n    cfg.options.requestTimeout = cfg.options.requestTimeout ?? this.config.requestTimeout ?? this.config.timeout ?? 15000\n    cfg.options.tdsVersion = cfg.options.tdsVersion || '7_4'\n    cfg.options.rowCollectionOnDone = cfg.options.rowCollectionOnDone || false\n    cfg.options.rowCollectionOnRequestCompletion = cfg.options.rowCollectionOnRequestCompletion || false\n    cfg.options.useColumnNames = cfg.options.useColumnNames || false\n    cfg.options.appName = cfg.options.appName || 'node-mssql'\n\n    // tedious always connect via tcp when port is specified\n    if (cfg.options.instanceName) delete cfg.options.port\n\n    if (isNaN(cfg.options.requestTimeout)) cfg.options.requestTimeout = 15000\n    if (cfg.options.requestTimeout === Infinity || cfg.options.requestTimeout < 0) cfg.options.requestTimeout = 0\n\n    if (!cfg.options.debug && this.config.debug) {\n      cfg.options.debug = {\n        packet: true,\n        token: true,\n        data: true,\n        payload: true\n      }\n    }\n    return cfg\n  }\n\n  _poolCreate () {\n    return new shared.Promise((resolve, reject) => {\n      const resolveOnce = (v) => {\n        resolve(v)\n        resolve = reject = () => {}\n      }\n      const rejectOnce = (e) => {\n        reject(e)\n        resolve = reject = () => {}\n      }\n      let tedious\n      try {\n        tedious = new tds.Connection(this._config())\n      } catch (err) {\n        rejectOnce(err)\n        return\n      }\n      tedious.connect(err => {\n        if (err) {\n          err = new ConnectionError(err)\n          return rejectOnce(err)\n        }\n\n        debug('connection(%d): established', IDS.get(tedious))\n        this.collation = tedious.databaseCollation\n        resolveOnce(tedious)\n      })\n      IDS.add(tedious, 'Connection')\n      debug('pool(%d): connection #%d created', IDS.get(this), IDS.get(tedious))\n      debug('connection(%d): establishing', IDS.get(tedious))\n\n      tedious.on('end', () => {\n        const err = new ConnectionError('The connection ended without ever completing the connection')\n        rejectOnce(err)\n      })\n      tedious.on('error', err => {\n        if (err.code === 'ESOCKET') {\n          tedious.hasError = true\n        } else {\n          this.emit('error', err)\n        }\n        rejectOnce(err)\n      })\n\n      if (this.config.debug) {\n        tedious.on('debug', this.emit.bind(this, 'debug', tedious))\n      }\n      if (typeof this.config.beforeConnect === 'function') {\n        this.config.beforeConnect(tedious)\n      }\n    })\n  }\n\n  _poolValidate (tedious) {\n    if (tedious && !tedious.closed && !tedious.hasError) {\n      return !this.config.validateConnection || new shared.Promise((resolve) => {\n        const req = new tds.Request('SELECT 1;', (err) => {\n          resolve(!err)\n        })\n        tedious.execSql(req)\n      })\n    }\n    return false\n  }\n\n  _poolDestroy (tedious) {\n    return new shared.Promise((resolve, reject) => {\n      if (!tedious) {\n        resolve()\n        return\n      }\n      debug('connection(%d): destroying', IDS.get(tedious))\n\n      if (tedious.closed) {\n        debug('connection(%d): already closed', IDS.get(tedious))\n        resolve()\n      } else {\n        tedious.once('end', () => {\n          debug('connection(%d): destroyed', IDS.get(tedious))\n          resolve()\n        })\n\n        tedious.close()\n      }\n    })\n  }\n}\n\nmodule.exports = ConnectionPool\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi90ZWRpb3VzL2Nvbm5lY3Rpb24tcG9vbC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixZQUFZLG1CQUFPLENBQUMsNkRBQVM7QUFDN0IsY0FBYyxtQkFBTyxDQUFDLHVEQUFPO0FBQzdCLDJCQUEyQixtQkFBTyxDQUFDLHdGQUF5QjtBQUM1RCxRQUFRLE1BQU0sRUFBRSxtQkFBTyxDQUFDLDBEQUFVO0FBQ2xDLGVBQWUsbUJBQU8sQ0FBQyw0REFBVztBQUNsQyx3QkFBd0IsbUJBQU8sQ0FBQyw0RkFBMkI7O0FBRTNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsU0FBUyxJQUFJO0FBQ2IsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi90ZWRpb3VzL2Nvbm5lY3Rpb24tcG9vbC5qcz9iYTZhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCB0ZHMgPSByZXF1aXJlKCd0ZWRpb3VzJylcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnbXNzcWw6dGVkaScpXG5jb25zdCBCYXNlQ29ubmVjdGlvblBvb2wgPSByZXF1aXJlKCcuLi9iYXNlL2Nvbm5lY3Rpb24tcG9vbCcpXG5jb25zdCB7IElEUyB9ID0gcmVxdWlyZSgnLi4vdXRpbHMnKVxuY29uc3Qgc2hhcmVkID0gcmVxdWlyZSgnLi4vc2hhcmVkJylcbmNvbnN0IENvbm5lY3Rpb25FcnJvciA9IHJlcXVpcmUoJy4uL2Vycm9yL2Nvbm5lY3Rpb24tZXJyb3InKVxuXG5jbGFzcyBDb25uZWN0aW9uUG9vbCBleHRlbmRzIEJhc2VDb25uZWN0aW9uUG9vbCB7XG4gIF9jb25maWcgKCkge1xuICAgIGNvbnN0IGNmZyA9IHtcbiAgICAgIHNlcnZlcjogdGhpcy5jb25maWcuc2VydmVyLFxuICAgICAgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIGVuY3J5cHQ6IHR5cGVvZiB0aGlzLmNvbmZpZy5lbmNyeXB0ID09PSAnYm9vbGVhbicgPyB0aGlzLmNvbmZpZy5lbmNyeXB0IDogdHJ1ZSxcbiAgICAgICAgdHJ1c3RTZXJ2ZXJDZXJ0aWZpY2F0ZTogdHlwZW9mIHRoaXMuY29uZmlnLnRydXN0U2VydmVyQ2VydGlmaWNhdGUgPT09ICdib29sZWFuJyA/IHRoaXMuY29uZmlnLnRydXN0U2VydmVyQ2VydGlmaWNhdGUgOiBmYWxzZVxuICAgICAgfSwgdGhpcy5jb25maWcub3B0aW9ucyksXG4gICAgICBhdXRoZW50aWNhdGlvbjogT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIHR5cGU6IHRoaXMuY29uZmlnLmRvbWFpbiAhPT0gdW5kZWZpbmVkID8gJ250bG0nIDogdGhpcy5jb25maWcuYXV0aGVudGljYXRpb25fdHlwZSAhPT0gdW5kZWZpbmVkID8gdGhpcy5jb25maWcuYXV0aGVudGljYXRpb25fdHlwZSA6ICdkZWZhdWx0JyxcbiAgICAgICAgb3B0aW9uczogT2JqZWN0LmVudHJpZXMoe1xuICAgICAgICAgIHVzZXJOYW1lOiB0aGlzLmNvbmZpZy51c2VyLFxuICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLmNvbmZpZy5wYXNzd29yZCxcbiAgICAgICAgICBkb21haW46IHRoaXMuY29uZmlnLmRvbWFpbixcbiAgICAgICAgICBjbGllbnRJZDogdGhpcy5jb25maWcuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiB0aGlzLmNvbmZpZy5jbGllbnRTZWNyZXQsXG4gICAgICAgICAgdGVuYW50SWQ6IHRoaXMuY29uZmlnLnRlbmFudElkLFxuICAgICAgICAgIHRva2VuOiB0aGlzLmNvbmZpZy50b2tlbixcbiAgICAgICAgICBtc2lFbmRwb2ludDogdGhpcy5jb25maWcubXNpRW5kcG9pbnQsXG4gICAgICAgICAgbXNpU2VjcmV0OiB0aGlzLmNvbmZpZy5tc2lTZWNyZXRcbiAgICAgICAgfSkucmVkdWNlKChhY2MsIFtrZXksIHZhbF0pID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmFjYywgW2tleV06IHZhbCB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBhY2NcbiAgICAgICAgfSwge30pXG4gICAgICB9LCB0aGlzLmNvbmZpZy5hdXRoZW50aWNhdGlvbilcbiAgICB9XG5cbiAgICBjZmcub3B0aW9ucy5kYXRhYmFzZSA9IGNmZy5vcHRpb25zLmRhdGFiYXNlIHx8IHRoaXMuY29uZmlnLmRhdGFiYXNlXG4gICAgY2ZnLm9wdGlvbnMucG9ydCA9IGNmZy5vcHRpb25zLnBvcnQgfHwgdGhpcy5jb25maWcucG9ydFxuICAgIGNmZy5vcHRpb25zLmNvbm5lY3RUaW1lb3V0ID0gY2ZnLm9wdGlvbnMuY29ubmVjdFRpbWVvdXQgPz8gdGhpcy5jb25maWcuY29ubmVjdGlvblRpbWVvdXQgPz8gdGhpcy5jb25maWcudGltZW91dCA/PyAxNTAwMFxuICAgIGNmZy5vcHRpb25zLnJlcXVlc3RUaW1lb3V0ID0gY2ZnLm9wdGlvbnMucmVxdWVzdFRpbWVvdXQgPz8gdGhpcy5jb25maWcucmVxdWVzdFRpbWVvdXQgPz8gdGhpcy5jb25maWcudGltZW91dCA/PyAxNTAwMFxuICAgIGNmZy5vcHRpb25zLnRkc1ZlcnNpb24gPSBjZmcub3B0aW9ucy50ZHNWZXJzaW9uIHx8ICc3XzQnXG4gICAgY2ZnLm9wdGlvbnMucm93Q29sbGVjdGlvbk9uRG9uZSA9IGNmZy5vcHRpb25zLnJvd0NvbGxlY3Rpb25PbkRvbmUgfHwgZmFsc2VcbiAgICBjZmcub3B0aW9ucy5yb3dDb2xsZWN0aW9uT25SZXF1ZXN0Q29tcGxldGlvbiA9IGNmZy5vcHRpb25zLnJvd0NvbGxlY3Rpb25PblJlcXVlc3RDb21wbGV0aW9uIHx8IGZhbHNlXG4gICAgY2ZnLm9wdGlvbnMudXNlQ29sdW1uTmFtZXMgPSBjZmcub3B0aW9ucy51c2VDb2x1bW5OYW1lcyB8fCBmYWxzZVxuICAgIGNmZy5vcHRpb25zLmFwcE5hbWUgPSBjZmcub3B0aW9ucy5hcHBOYW1lIHx8ICdub2RlLW1zc3FsJ1xuXG4gICAgLy8gdGVkaW91cyBhbHdheXMgY29ubmVjdCB2aWEgdGNwIHdoZW4gcG9ydCBpcyBzcGVjaWZpZWRcbiAgICBpZiAoY2ZnLm9wdGlvbnMuaW5zdGFuY2VOYW1lKSBkZWxldGUgY2ZnLm9wdGlvbnMucG9ydFxuXG4gICAgaWYgKGlzTmFOKGNmZy5vcHRpb25zLnJlcXVlc3RUaW1lb3V0KSkgY2ZnLm9wdGlvbnMucmVxdWVzdFRpbWVvdXQgPSAxNTAwMFxuICAgIGlmIChjZmcub3B0aW9ucy5yZXF1ZXN0VGltZW91dCA9PT0gSW5maW5pdHkgfHwgY2ZnLm9wdGlvbnMucmVxdWVzdFRpbWVvdXQgPCAwKSBjZmcub3B0aW9ucy5yZXF1ZXN0VGltZW91dCA9IDBcblxuICAgIGlmICghY2ZnLm9wdGlvbnMuZGVidWcgJiYgdGhpcy5jb25maWcuZGVidWcpIHtcbiAgICAgIGNmZy5vcHRpb25zLmRlYnVnID0ge1xuICAgICAgICBwYWNrZXQ6IHRydWUsXG4gICAgICAgIHRva2VuOiB0cnVlLFxuICAgICAgICBkYXRhOiB0cnVlLFxuICAgICAgICBwYXlsb2FkOiB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjZmdcbiAgfVxuXG4gIF9wb29sQ3JlYXRlICgpIHtcbiAgICByZXR1cm4gbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlc29sdmVPbmNlID0gKHYpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh2KVxuICAgICAgICByZXNvbHZlID0gcmVqZWN0ID0gKCkgPT4ge31cbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlamVjdE9uY2UgPSAoZSkgPT4ge1xuICAgICAgICByZWplY3QoZSlcbiAgICAgICAgcmVzb2x2ZSA9IHJlamVjdCA9ICgpID0+IHt9XG4gICAgICB9XG4gICAgICBsZXQgdGVkaW91c1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGVkaW91cyA9IG5ldyB0ZHMuQ29ubmVjdGlvbih0aGlzLl9jb25maWcoKSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZWplY3RPbmNlKGVycilcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB0ZWRpb3VzLmNvbm5lY3QoZXJyID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGVyciA9IG5ldyBDb25uZWN0aW9uRXJyb3IoZXJyKVxuICAgICAgICAgIHJldHVybiByZWplY3RPbmNlKGVycilcbiAgICAgICAgfVxuXG4gICAgICAgIGRlYnVnKCdjb25uZWN0aW9uKCVkKTogZXN0YWJsaXNoZWQnLCBJRFMuZ2V0KHRlZGlvdXMpKVxuICAgICAgICB0aGlzLmNvbGxhdGlvbiA9IHRlZGlvdXMuZGF0YWJhc2VDb2xsYXRpb25cbiAgICAgICAgcmVzb2x2ZU9uY2UodGVkaW91cylcbiAgICAgIH0pXG4gICAgICBJRFMuYWRkKHRlZGlvdXMsICdDb25uZWN0aW9uJylcbiAgICAgIGRlYnVnKCdwb29sKCVkKTogY29ubmVjdGlvbiAjJWQgY3JlYXRlZCcsIElEUy5nZXQodGhpcyksIElEUy5nZXQodGVkaW91cykpXG4gICAgICBkZWJ1ZygnY29ubmVjdGlvbiglZCk6IGVzdGFibGlzaGluZycsIElEUy5nZXQodGVkaW91cykpXG5cbiAgICAgIHRlZGlvdXMub24oJ2VuZCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgZXJyID0gbmV3IENvbm5lY3Rpb25FcnJvcignVGhlIGNvbm5lY3Rpb24gZW5kZWQgd2l0aG91dCBldmVyIGNvbXBsZXRpbmcgdGhlIGNvbm5lY3Rpb24nKVxuICAgICAgICByZWplY3RPbmNlKGVycilcbiAgICAgIH0pXG4gICAgICB0ZWRpb3VzLm9uKCdlcnJvcicsIGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIuY29kZSA9PT0gJ0VTT0NLRVQnKSB7XG4gICAgICAgICAgdGVkaW91cy5oYXNFcnJvciA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICB9XG4gICAgICAgIHJlamVjdE9uY2UoZXJyKVxuICAgICAgfSlcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnKSB7XG4gICAgICAgIHRlZGlvdXMub24oJ2RlYnVnJywgdGhpcy5lbWl0LmJpbmQodGhpcywgJ2RlYnVnJywgdGVkaW91cykpXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlnLmJlZm9yZUNvbm5lY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5jb25maWcuYmVmb3JlQ29ubmVjdCh0ZWRpb3VzKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBfcG9vbFZhbGlkYXRlICh0ZWRpb3VzKSB7XG4gICAgaWYgKHRlZGlvdXMgJiYgIXRlZGlvdXMuY2xvc2VkICYmICF0ZWRpb3VzLmhhc0Vycm9yKSB7XG4gICAgICByZXR1cm4gIXRoaXMuY29uZmlnLnZhbGlkYXRlQ29ubmVjdGlvbiB8fCBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY29uc3QgcmVxID0gbmV3IHRkcy5SZXF1ZXN0KCdTRUxFQ1QgMTsnLCAoZXJyKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSghZXJyKVxuICAgICAgICB9KVxuICAgICAgICB0ZWRpb3VzLmV4ZWNTcWwocmVxKVxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBfcG9vbERlc3Ryb3kgKHRlZGlvdXMpIHtcbiAgICByZXR1cm4gbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICghdGVkaW91cykge1xuICAgICAgICByZXNvbHZlKClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBkZWJ1ZygnY29ubmVjdGlvbiglZCk6IGRlc3Ryb3lpbmcnLCBJRFMuZ2V0KHRlZGlvdXMpKVxuXG4gICAgICBpZiAodGVkaW91cy5jbG9zZWQpIHtcbiAgICAgICAgZGVidWcoJ2Nvbm5lY3Rpb24oJWQpOiBhbHJlYWR5IGNsb3NlZCcsIElEUy5nZXQodGVkaW91cykpXG4gICAgICAgIHJlc29sdmUoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGVkaW91cy5vbmNlKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgZGVidWcoJ2Nvbm5lY3Rpb24oJWQpOiBkZXN0cm95ZWQnLCBJRFMuZ2V0KHRlZGlvdXMpKVxuICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICB9KVxuXG4gICAgICAgIHRlZGlvdXMuY2xvc2UoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb25uZWN0aW9uUG9vbFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/tedious/connection-pool.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/tedious/index.js":
/*!**************************************************!*\
  !*** ../node_modules/mssql/lib/tedious/index.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst base = __webpack_require__(/*! ../base */ \"(rsc)/../node_modules/mssql/lib/base/index.js\")\nconst ConnectionPool = __webpack_require__(/*! ./connection-pool */ \"(rsc)/../node_modules/mssql/lib/tedious/connection-pool.js\")\nconst Transaction = __webpack_require__(/*! ./transaction */ \"(rsc)/../node_modules/mssql/lib/tedious/transaction.js\")\nconst Request = __webpack_require__(/*! ./request */ \"(rsc)/../node_modules/mssql/lib/tedious/request.js\")\n\nmodule.exports = Object.assign({\n  ConnectionPool,\n  Transaction,\n  Request,\n  PreparedStatement: base.PreparedStatement\n}, base.exports)\n\nObject.defineProperty(module.exports, \"Promise\", ({\n  enumerable: true,\n  get: () => {\n    return base.Promise\n  },\n  set: (value) => {\n    base.Promise = value\n  }\n}))\n\nObject.defineProperty(module.exports, \"valueHandler\", ({\n  enumerable: true,\n  value: base.valueHandler,\n  writable: false,\n  configurable: false\n}))\n\nbase.driver.name = 'tedious'\nbase.driver.ConnectionPool = ConnectionPool\nbase.driver.Transaction = Transaction\nbase.driver.Request = Request\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi90ZWRpb3VzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLGFBQWEsbUJBQU8sQ0FBQyw4REFBUztBQUM5Qix1QkFBdUIsbUJBQU8sQ0FBQyxxRkFBbUI7QUFDbEQsb0JBQW9CLG1CQUFPLENBQUMsNkVBQWU7QUFDM0MsZ0JBQWdCLG1CQUFPLENBQUMscUVBQVc7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELGtEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDOztBQUVGLHVEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQzs7QUFFRjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3RlZGlvdXMvaW5kZXguanM/ZmEzNiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgYmFzZSA9IHJlcXVpcmUoJy4uL2Jhc2UnKVxuY29uc3QgQ29ubmVjdGlvblBvb2wgPSByZXF1aXJlKCcuL2Nvbm5lY3Rpb24tcG9vbCcpXG5jb25zdCBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb24nKVxuY29uc3QgUmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpXG5cbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmFzc2lnbih7XG4gIENvbm5lY3Rpb25Qb29sLFxuICBUcmFuc2FjdGlvbixcbiAgUmVxdWVzdCxcbiAgUHJlcGFyZWRTdGF0ZW1lbnQ6IGJhc2UuUHJlcGFyZWRTdGF0ZW1lbnRcbn0sIGJhc2UuZXhwb3J0cylcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCAnUHJvbWlzZScsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiAoKSA9PiB7XG4gICAgcmV0dXJuIGJhc2UuUHJvbWlzZVxuICB9LFxuICBzZXQ6ICh2YWx1ZSkgPT4ge1xuICAgIGJhc2UuUHJvbWlzZSA9IHZhbHVlXG4gIH1cbn0pXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ3ZhbHVlSGFuZGxlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IGJhc2UudmFsdWVIYW5kbGVyLFxuICB3cml0YWJsZTogZmFsc2UsXG4gIGNvbmZpZ3VyYWJsZTogZmFsc2Vcbn0pXG5cbmJhc2UuZHJpdmVyLm5hbWUgPSAndGVkaW91cydcbmJhc2UuZHJpdmVyLkNvbm5lY3Rpb25Qb29sID0gQ29ubmVjdGlvblBvb2xcbmJhc2UuZHJpdmVyLlRyYW5zYWN0aW9uID0gVHJhbnNhY3Rpb25cbmJhc2UuZHJpdmVyLlJlcXVlc3QgPSBSZXF1ZXN0XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/tedious/index.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/tedious/request.js":
/*!****************************************************!*\
  !*** ../node_modules/mssql/lib/tedious/request.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst tds = __webpack_require__(/*! tedious */ \"(rsc)/../node_modules/tedious/lib/tedious.js\")\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/../node_modules/debug/src/index.js\")('mssql:tedi')\nconst BaseRequest = __webpack_require__(/*! ../base/request */ \"(rsc)/../node_modules/mssql/lib/base/request.js\")\nconst RequestError = __webpack_require__(/*! ../error/request-error */ \"(rsc)/../node_modules/mssql/lib/error/request-error.js\")\nconst { IDS, objectHasProperty } = __webpack_require__(/*! ../utils */ \"(rsc)/../node_modules/mssql/lib/utils.js\")\nconst { TYPES, DECLARATIONS, declare, cast } = __webpack_require__(/*! ../datatypes */ \"(rsc)/../node_modules/mssql/lib/datatypes.js\")\nconst Table = __webpack_require__(/*! ../table */ \"(rsc)/../node_modules/mssql/lib/table.js\")\nconst { PARSERS: UDT } = __webpack_require__(/*! ../udt */ \"(rsc)/../node_modules/mssql/lib/udt.js\")\nconst { valueHandler } = __webpack_require__(/*! ../shared */ \"(rsc)/../node_modules/mssql/lib/shared.js\")\n\nconst JSON_COLUMN_ID = 'JSON_F52E2B61-18A1-11d1-B105-00805F49916B'\nconst XML_COLUMN_ID = 'XML_F52E2B61-18A1-11d1-B105-00805F49916B'\n\nconst N_TYPES = {\n  BitN: 0x68,\n  DateTimeN: 0x6F,\n  DecimalN: 0x6A,\n  FloatN: 0x6D,\n  IntN: 0x26,\n  MoneyN: 0x6E,\n  NumericN: 0x6C\n}\n\nconst getTediousType = function (type) {\n  switch (type) {\n    case TYPES.VarChar: return tds.TYPES.VarChar\n    case TYPES.NVarChar: return tds.TYPES.NVarChar\n    case TYPES.Text: return tds.TYPES.Text\n    case TYPES.Int: return tds.TYPES.Int\n    case TYPES.BigInt: return tds.TYPES.BigInt\n    case TYPES.TinyInt: return tds.TYPES.TinyInt\n    case TYPES.SmallInt: return tds.TYPES.SmallInt\n    case TYPES.Bit: return tds.TYPES.Bit\n    case TYPES.Float: return tds.TYPES.Float\n    case TYPES.Decimal: return tds.TYPES.Decimal\n    case TYPES.Numeric: return tds.TYPES.Numeric\n    case TYPES.Real: return tds.TYPES.Real\n    case TYPES.Money: return tds.TYPES.Money\n    case TYPES.SmallMoney: return tds.TYPES.SmallMoney\n    case TYPES.Time: return tds.TYPES.Time\n    case TYPES.Date: return tds.TYPES.Date\n    case TYPES.DateTime: return tds.TYPES.DateTime\n    case TYPES.DateTime2: return tds.TYPES.DateTime2\n    case TYPES.DateTimeOffset: return tds.TYPES.DateTimeOffset\n    case TYPES.SmallDateTime: return tds.TYPES.SmallDateTime\n    case TYPES.UniqueIdentifier: return tds.TYPES.UniqueIdentifier\n    case TYPES.Xml: return tds.TYPES.NVarChar\n    case TYPES.Char: return tds.TYPES.Char\n    case TYPES.NChar: return tds.TYPES.NChar\n    case TYPES.NText: return tds.TYPES.NVarChar\n    case TYPES.Image: return tds.TYPES.Image\n    case TYPES.Binary: return tds.TYPES.Binary\n    case TYPES.VarBinary: return tds.TYPES.VarBinary\n    case TYPES.UDT: case TYPES.Geography: case TYPES.Geometry: return tds.TYPES.UDT\n    case TYPES.TVP: return tds.TYPES.TVP\n    case TYPES.Variant: return tds.TYPES.Variant\n    default: return type\n  }\n}\n\nconst getMssqlType = function (type, length) {\n  if (typeof type !== 'object') return undefined\n\n  switch (type) {\n    case tds.TYPES.Char: return TYPES.Char\n    case tds.TYPES.NChar: return TYPES.NChar\n    case tds.TYPES.VarChar: return TYPES.VarChar\n    case tds.TYPES.NVarChar: return TYPES.NVarChar\n    case tds.TYPES.Text: return TYPES.Text\n    case tds.TYPES.NText: return TYPES.NText\n    case tds.TYPES.Int: return TYPES.Int\n    case tds.TYPES.BigInt: return TYPES.BigInt\n    case tds.TYPES.TinyInt: return TYPES.TinyInt\n    case tds.TYPES.SmallInt: return TYPES.SmallInt\n    case tds.TYPES.Bit: return TYPES.Bit\n    case tds.TYPES.Float: return TYPES.Float\n    case tds.TYPES.Real: return TYPES.Real\n    case tds.TYPES.Money: return TYPES.Money\n    case tds.TYPES.SmallMoney: return TYPES.SmallMoney\n    case tds.TYPES.Numeric: return TYPES.Numeric\n    case tds.TYPES.Decimal: return TYPES.Decimal\n    case tds.TYPES.DateTime: return TYPES.DateTime\n    case tds.TYPES.Time: return TYPES.Time\n    case tds.TYPES.Date: return TYPES.Date\n    case tds.TYPES.DateTime2: return TYPES.DateTime2\n    case tds.TYPES.DateTimeOffset: return TYPES.DateTimeOffset\n    case tds.TYPES.SmallDateTime: return TYPES.SmallDateTime\n    case tds.TYPES.UniqueIdentifier: return TYPES.UniqueIdentifier\n    case tds.TYPES.Image: return TYPES.Image\n    case tds.TYPES.Binary: return TYPES.Binary\n    case tds.TYPES.VarBinary: return TYPES.VarBinary\n    case tds.TYPES.Xml: return TYPES.Xml\n    case tds.TYPES.UDT: return TYPES.UDT\n    case tds.TYPES.TVP: return TYPES.TVP\n    case tds.TYPES.Variant: return TYPES.Variant\n    default:\n      switch (type.id) {\n        case N_TYPES.BitN: return TYPES.Bit\n        case N_TYPES.NumericN: return TYPES.Numeric\n        case N_TYPES.DecimalN: return TYPES.Decimal\n        case N_TYPES.IntN:\n          if (length === 8) return TYPES.BigInt\n          if (length === 4) return TYPES.Int\n          if (length === 2) return TYPES.SmallInt\n          return TYPES.TinyInt\n        case N_TYPES.FloatN:\n          if (length === 8) return TYPES.Float\n          return TYPES.Real\n        case N_TYPES.MoneyN:\n          if (length === 8) return TYPES.Money\n          return TYPES.SmallMoney\n        case N_TYPES.DateTimeN:\n          if (length === 8) return TYPES.DateTime\n          return TYPES.SmallDateTime\n      }\n  }\n}\n\nconst createColumns = function (metadata, arrayRowMode) {\n  let out = {}\n  if (arrayRowMode) out = []\n  for (let index = 0, length = metadata.length; index < length; index++) {\n    const column = metadata[index]\n    const outColumn = {\n      index,\n      name: column.colName,\n      length: column.dataLength,\n      type: getMssqlType(column.type, column.dataLength),\n      scale: column.scale,\n      precision: column.precision,\n      nullable: !!(column.flags & 0x01),\n      caseSensitive: !!(column.flags & 0x02),\n      identity: !!(column.flags & 0x10),\n      readOnly: !(column.flags & 0x0C)\n    }\n\n    if (column.udtInfo) {\n      outColumn.udt = {\n        name: column.udtInfo.typeName,\n        database: column.udtInfo.dbname,\n        schema: column.udtInfo.owningSchema,\n        assembly: column.udtInfo.assemblyName\n      }\n\n      if (DECLARATIONS[column.udtInfo.typeName]) {\n        outColumn.type = DECLARATIONS[column.udtInfo.typeName]\n      }\n    }\n\n    if (arrayRowMode) {\n      out.push(outColumn)\n    } else {\n      out[column.colName] = outColumn\n    }\n  }\n\n  return out\n}\n\nconst valueCorrection = function (value, metadata) {\n  const type = getMssqlType(metadata.type)\n  if (valueHandler.has(type)) {\n    return valueHandler.get(type)(value)\n  } else if ((metadata.type === tds.TYPES.UDT) && (value != null)) {\n    if (UDT[metadata.udtInfo.typeName]) {\n      return UDT[metadata.udtInfo.typeName](value)\n    } else {\n      return value\n    }\n  } else {\n    return value\n  }\n}\n\nconst parameterCorrection = function (value) {\n  if (value instanceof Table) {\n    const tvp = {\n      name: value.name,\n      schema: value.schema,\n      columns: [],\n      rows: value.rows\n    }\n\n    for (const col of value.columns) {\n      tvp.columns.push({\n        name: col.name,\n        type: getTediousType(col.type),\n        length: col.length,\n        scale: col.scale,\n        precision: col.precision\n      })\n    }\n\n    return tvp\n  } else {\n    return value\n  }\n}\n\nclass Request extends BaseRequest {\n  /*\n  Execute specified sql batch.\n  */\n\n  _batch (batch, callback) {\n    this._isBatch = true\n    this._query(batch, callback)\n  }\n\n  /*\n  Bulk load.\n  */\n\n  _bulk (table, options, callback) {\n    super._bulk(table, options, err => {\n      if (err) return callback(err)\n\n      try {\n        table._makeBulk()\n      } catch (e) {\n        return callback(new RequestError(e, 'EREQUEST'))\n      }\n\n      if (!table.name) {\n        return callback(new RequestError('Table name must be specified for bulk insert.', 'ENAME'))\n      }\n\n      if (table.name.charAt(0) === '@') {\n        return callback(new RequestError(\"You can't use table variables for bulk insert.\", 'ENAME'))\n      }\n\n      const errors = []\n      const errorHandlers = {}\n      let hasReturned = false\n\n      const handleError = (doReturn, connection, info) => {\n        let err = new Error(info.message)\n        err.info = info\n        err = new RequestError(err, 'EREQUEST')\n\n        if (this.stream) {\n          this.emit('error', err)\n        } else {\n          if (doReturn && !hasReturned) {\n            if (connection) {\n              for (const event in errorHandlers) {\n                connection.removeListener(event, errorHandlers[event])\n              }\n\n              this.parent.release(connection)\n            }\n\n            hasReturned = true\n            callback(err)\n          }\n        }\n\n        // we must collect errors even in stream mode\n        errors.push(err)\n      }\n\n      const handleInfo = msg => {\n        this.emit('info', {\n          message: msg.message,\n          number: msg.number,\n          state: msg.state,\n          class: msg.class,\n          lineNumber: msg.lineNumber,\n          serverName: msg.serverName,\n          procName: msg.procName\n        })\n      }\n\n      this.parent.acquire(this, (err, connection) => {\n        const callbackWithRelease = (err, ...args) => {\n          try {\n            this.parent.release(connection)\n          } catch (e) {\n            // noop\n          }\n          callback(err, ...args)\n        }\n        if (err) return callbackWithRelease(err)\n\n        debug('connection(%d): borrowed to request #%d', IDS.get(connection), IDS.get(this))\n\n        if (this.canceled) {\n          debug('request(%d): canceled', IDS.get(this))\n          return callbackWithRelease(new RequestError('Canceled.', 'ECANCEL'))\n        }\n\n        this._cancel = () => {\n          debug('request(%d): cancel', IDS.get(this))\n          connection.cancel()\n        }\n\n        // attach handler to handle multiple error messages\n        connection.on('infoMessage', errorHandlers.infoMessage = handleInfo)\n        connection.on('errorMessage', errorHandlers.errorMessage = handleError.bind(null, false, connection))\n        connection.on('error', errorHandlers.error = handleError.bind(null, true, connection))\n\n        const done = (err, rowCount) => {\n          // to make sure we handle no-sql errors as well\n          if (err && (!errors.length || (errors.length && err.message !== errors[errors.length - 1].message))) {\n            err = new RequestError(err, 'EREQUEST')\n            if (this.stream) this.emit('error', err)\n            errors.push(err)\n          }\n\n          delete this._cancel\n\n          let error\n          if (errors.length && !this.stream) {\n            error = errors.pop()\n            error.precedingErrors = errors\n          }\n\n          if (!hasReturned) {\n            for (const event in errorHandlers) {\n              connection.removeListener(event, errorHandlers[event])\n            }\n\n            hasReturned = true\n\n            if (this.stream) {\n              callbackWithRelease(null, rowCount)\n            } else {\n              callbackWithRelease(error, rowCount)\n            }\n          }\n        }\n\n        const bulk = connection.newBulkLoad(table.path, options, done)\n\n        for (const col of table.columns) {\n          bulk.addColumn(col.name, getTediousType(col.type), { nullable: col.nullable, length: col.length, scale: col.scale, precision: col.precision })\n        }\n\n        if (table.create) {\n          const objectid = table.temporary ? `tempdb..[${table.name}]` : table.path\n          const req = new tds.Request(`if object_id('${objectid.replace(/'/g, '\\'\\'')}') is null ${table.declare()}`, err => {\n            if (err) return done(err)\n\n            connection.execBulkLoad(bulk, table.rows)\n          })\n          this._setCurrentRequest(req)\n\n          connection.execSqlBatch(req)\n        } else {\n          connection.execBulkLoad(bulk, table.rows)\n        }\n      })\n    })\n  }\n\n  /*\n  Execute specified sql command.\n  */\n\n  _query (command, callback) {\n    super._query(command, err => {\n      if (err) return callback(err)\n\n      const recordsets = []\n      const recordsetcolumns = []\n      const errors = []\n      const errorHandlers = {}\n      const output = {}\n      const rowsAffected = []\n\n      let columns = {}\n      let recordset = []\n      let batchLastRow = null\n      let batchHasOutput = false\n      let isChunkedRecordset = false\n      let chunksBuffer = null\n      let hasReturned = false\n\n      const handleError = (doReturn, connection, info) => {\n        let err = new Error(info.message)\n        err.info = info\n        err = new RequestError(err, 'EREQUEST')\n\n        if (this.stream) {\n          this.emit('error', err)\n        } else {\n          if (doReturn && !hasReturned) {\n            if (connection) {\n              for (const event in errorHandlers) {\n                connection.removeListener(event, errorHandlers[event])\n              }\n\n              this.parent.release(connection)\n            }\n\n            hasReturned = true\n            callback(err)\n          }\n        }\n\n        // we must collect errors even in stream mode\n        errors.push(err)\n      }\n\n      const handleInfo = msg => {\n        this.emit('info', {\n          message: msg.message,\n          number: msg.number,\n          state: msg.state,\n          class: msg.class,\n          lineNumber: msg.lineNumber,\n          serverName: msg.serverName,\n          procName: msg.procName\n        })\n      }\n\n      this.parent.acquire(this, (err, connection, config) => {\n        if (err) return callback(err)\n\n        debug('connection(%d): borrowed to request #%d', IDS.get(connection), IDS.get(this))\n\n        let row\n\n        if (this.canceled) {\n          debug('request(%d): canceled', IDS.get(this))\n          this.parent.release(connection)\n          return callback(new RequestError('Canceled.', 'ECANCEL'))\n        }\n\n        this._cancel = () => {\n          debug('request(%d): cancel', IDS.get(this))\n          connection.cancel()\n        }\n\n        // attach handler to handle multiple error messages\n        connection.on('infoMessage', errorHandlers.infoMessage = handleInfo)\n        connection.on('errorMessage', errorHandlers.errorMessage = handleError.bind(null, false, connection))\n        connection.on('error', errorHandlers.error = handleError.bind(null, true, connection))\n\n        debug('request(%d): query', IDS.get(this), command)\n\n        const req = new tds.Request(command, err => {\n          // tedious v15 has started using AggregateErrors to wrap multiple errors into single error objects\n          (err?.errors ? err.errors : [err]).forEach((e, i, { length }) => {\n            // to make sure we handle no-sql errors as well\n            if (e && (!errors.length || (errors.length && errors.length >= length && e.message !== errors[errors.length - length + i].message))) {\n              e = new RequestError(e, 'EREQUEST')\n              if (this.stream) this.emit('error', e)\n              errors.push(e)\n            }\n          })\n\n          // process batch outputs\n          if (batchHasOutput) {\n            if (!this.stream) batchLastRow = recordsets.pop()[0]\n\n            for (const name in batchLastRow) {\n              const value = batchLastRow[name]\n              if (name !== '___return___') {\n                output[name] = value\n              }\n            }\n          }\n\n          delete this._cancel\n\n          let error\n          if (errors.length && !this.stream) {\n            error = errors.pop()\n            error.precedingErrors = errors\n          }\n\n          if (!hasReturned) {\n            for (const event in errorHandlers) {\n              connection.removeListener(event, errorHandlers[event])\n            }\n\n            this.parent.release(connection)\n            hasReturned = true\n\n            if (error) {\n              debug('request(%d): failed', IDS.get(this), error)\n            } else {\n              debug('request(%d): completed', IDS.get(this))\n            }\n\n            if (this.stream) {\n              callback(null, null, output, rowsAffected, recordsetcolumns)\n            } else {\n              callback(error, recordsets, output, rowsAffected, recordsetcolumns)\n            }\n          }\n        })\n\n        this._setCurrentRequest(req)\n\n        req.on('columnMetadata', metadata => {\n          columns = createColumns(metadata, this.arrayRowMode)\n\n          isChunkedRecordset = false\n          if (metadata.length === 1 && (metadata[0].colName === JSON_COLUMN_ID || metadata[0].colName === XML_COLUMN_ID)) {\n            isChunkedRecordset = true\n            chunksBuffer = []\n          }\n\n          if (this.stream) {\n            if (this._isBatch) {\n              // don't stream recordset with output values in batches\n              if (!columns.___return___) {\n                this.emit('recordset', columns)\n              }\n            } else {\n              this.emit('recordset', columns)\n            }\n          }\n          if (this.arrayRowMode) recordsetcolumns.push(columns)\n        })\n\n        const doneHandler = (rowCount, more) => {\n          if (rowCount != null) {\n            rowsAffected.push(rowCount)\n            if (this.stream) {\n              this.emit('rowsaffected', rowCount)\n            }\n          }\n          // this function is called even when select only set variables so we should skip adding a new recordset\n          if (Object.keys(columns).length === 0) return\n\n          if (isChunkedRecordset) {\n            const concatenatedChunks = chunksBuffer.join('')\n            if (columns[JSON_COLUMN_ID] && config.parseJSON === true) {\n              try {\n                if (concatenatedChunks === '') {\n                  row = null\n                } else {\n                  row = JSON.parse(concatenatedChunks)\n                }\n              } catch (ex) {\n                row = null\n                const ex2 = new RequestError(new Error(`Failed to parse incoming JSON. ${ex.message}`), 'EJSON')\n\n                if (this.stream) this.emit('error', ex2)\n\n                // we must collect errors even in stream mode\n                errors.push(ex2)\n              }\n            } else {\n              row = {}\n              row[Object.keys(columns)[0]] = concatenatedChunks\n            }\n\n            chunksBuffer = null\n\n            if (this.stream) {\n              this.emit('row', row)\n            } else {\n              recordset.push(row)\n            }\n          }\n\n          if (!this.stream) {\n            // all rows of current recordset loaded\n            Object.defineProperty(recordset, 'columns', {\n              enumerable: false,\n              configurable: true,\n              value: columns\n            })\n\n            Object.defineProperty(recordset, 'toTable', {\n              enumerable: false,\n              configurable: true,\n              value (name) { return Table.fromRecordset(this, name) }\n            })\n\n            recordsets.push(recordset)\n          }\n\n          recordset = []\n          columns = {}\n        }\n\n        req.on('doneInProc', doneHandler) // doneInProc handlers are used in both queries and batches\n        req.on('done', doneHandler) // done handlers are used in batches\n\n        req.on('returnValue', (parameterName, value, metadata) => {\n          output[parameterName] = value\n        })\n\n        req.on('row', columns => {\n          if (!recordset) recordset = []\n\n          if (isChunkedRecordset) {\n            return chunksBuffer.push(columns[0].value)\n          }\n\n          if (this.arrayRowMode) {\n            row = []\n          } else {\n            row = {}\n          }\n          for (const col of columns) {\n            col.value = valueCorrection(col.value, col.metadata)\n\n            if (this.arrayRowMode) {\n              row.push(col.value)\n            } else {\n              const exi = row[col.metadata.colName]\n              if (exi !== undefined) {\n                if (exi instanceof Array) {\n                  exi.push(col.value)\n                } else {\n                  row[col.metadata.colName] = [exi, col.value]\n                }\n              } else {\n                row[col.metadata.colName] = col.value\n              }\n            }\n          }\n\n          if (this.stream) {\n            if (this._isBatch) {\n              // dont stream recordset with output values in batches\n              if (row.___return___) {\n                batchLastRow = row\n              } else {\n                this.emit('row', row)\n              }\n            } else {\n              this.emit('row', row)\n            }\n          } else {\n            recordset.push(row)\n          }\n        })\n\n        if (this._isBatch) {\n          if (Object.keys(this.parameters).length) {\n            for (const name in this.parameters) {\n              if (!objectHasProperty(this.parameters, name)) {\n                continue\n              }\n              const param = this.parameters[name]\n\n              try {\n                param.value = getTediousType(param.type).validate(param.value, this.parent.collation)\n              } catch (e) {\n                e.message = `Validation failed for parameter '${name}'. ${e.message}`\n                const err = new RequestError(e, 'EPARAM')\n\n                this.parent.release(connection)\n                return callback(err)\n              }\n            }\n\n            const declarations = []\n            for (const name in this.parameters) {\n              if (!objectHasProperty(this.parameters, name)) {\n                continue\n              }\n              const param = this.parameters[name]\n              declarations.push(`@${name} ${declare(param.type, param)}`)\n            }\n\n            const assigns = []\n            for (const name in this.parameters) {\n              if (!objectHasProperty(this.parameters, name)) {\n                continue\n              }\n              const param = this.parameters[name]\n              assigns.push(`@${name} = ${cast(param.value, param.type, param)}`)\n            }\n\n            const selects = []\n            for (const name in this.parameters) {\n              if (!objectHasProperty(this.parameters, name)) {\n                continue\n              }\n              const param = this.parameters[name]\n              if (param.io === 2) {\n                selects.push(`@${name} as [${name}]`)\n              }\n            }\n\n            batchHasOutput = selects.length > 0\n\n            req.sqlTextOrProcedure = `declare ${declarations.join(', ')};select ${assigns.join(', ')};${req.sqlTextOrProcedure};${batchHasOutput ? (`select 1 as [___return___], ${selects.join(', ')}`) : ''}`\n          }\n        } else {\n          for (const name in this.parameters) {\n            if (!objectHasProperty(this.parameters, name)) {\n              continue\n            }\n            const param = this.parameters[name]\n            if (param.io === 1) {\n              req.addParameter(param.name, getTediousType(param.type), parameterCorrection(param.value), { length: param.length, scale: param.scale, precision: param.precision })\n            } else {\n              req.addOutputParameter(param.name, getTediousType(param.type), parameterCorrection(param.value), { length: param.length, scale: param.scale, precision: param.precision })\n            }\n          }\n        }\n\n        try {\n          connection[this._isBatch ? 'execSqlBatch' : 'execSql'](req)\n        } catch (error) {\n          handleError(true, connection, error)\n        }\n      })\n    })\n  }\n\n  /*\n  Execute stored procedure with specified parameters.\n  */\n\n  _execute (procedure, callback) {\n    super._execute(procedure, err => {\n      if (err) return callback(err)\n\n      const recordsets = []\n      const recordsetcolumns = []\n      const errors = []\n      const errorHandlers = {}\n      const output = {}\n      const rowsAffected = []\n\n      let columns = {}\n      let recordset = []\n      let returnValue = 0\n      let isChunkedRecordset = false\n      let chunksBuffer = null\n      let hasReturned = false\n\n      const handleError = (doReturn, connection, info) => {\n        let err = new Error(info.message)\n        err.info = info\n        err = new RequestError(err, 'EREQUEST')\n\n        if (this.stream) {\n          this.emit('error', err)\n        } else {\n          if (doReturn && !hasReturned) {\n            if (connection) {\n              for (const event in errorHandlers) {\n                connection.removeListener(event, errorHandlers[event])\n              }\n\n              this.parent.release(connection)\n            }\n\n            hasReturned = true\n            callback(err)\n          }\n        }\n\n        // we must collect errors even in stream mode\n        errors.push(err)\n      }\n\n      const handleInfo = msg => {\n        this.emit('info', {\n          message: msg.message,\n          number: msg.number,\n          state: msg.state,\n          class: msg.class,\n          lineNumber: msg.lineNumber,\n          serverName: msg.serverName,\n          procName: msg.procName\n        })\n      }\n\n      this.parent.acquire(this, (err, connection, config) => {\n        if (err) return callback(err)\n\n        debug('connection(%d): borrowed to request #%d', IDS.get(connection), IDS.get(this))\n\n        let row\n\n        if (this.canceled) {\n          debug('request(%d): canceled', IDS.get(this))\n          this.parent.release(connection)\n          return callback(new RequestError('Canceled.', 'ECANCEL'))\n        }\n\n        this._cancel = () => {\n          debug('request(%d): cancel', IDS.get(this))\n          connection.cancel()\n        }\n\n        // attach handler to handle multiple error messages\n        connection.on('infoMessage', errorHandlers.infoMessage = handleInfo)\n        connection.on('errorMessage', errorHandlers.errorMessage = handleError.bind(null, false, connection))\n        connection.on('error', errorHandlers.error = handleError.bind(null, true, connection))\n\n        if (debug.enabled) {\n          // log stored procedure executions and provided parameters\n          const params = Object.keys(this.parameters).map(k => this.parameters[k])\n          // cut long string parameters short to keep log somewhat clean\n          const logValue = s => typeof s === 'string' && s.length > 50 ? s.substring(0, 47) + '...' : s\n          // format parameter names as 'my_parameter [sql.Int]'\n          const logName = param => param.name + ' [sql.' + param.type.name + ']'\n          const logParams = {}\n          params.forEach(p => { logParams[logName(p)] = logValue(p.value) })\n          debug('request(%d): execute %s %O', IDS.get(this), procedure, logParams)\n        }\n\n        const req = new tds.Request(procedure, err => {\n          // to make sure we handle no-sql errors as well\n          if (err && (!errors.length || (errors.length && err.message !== errors[errors.length - 1].message))) {\n            err = new RequestError(err, 'EREQUEST')\n            if (this.stream) this.emit('error', err)\n            errors.push(err)\n          }\n\n          delete this._cancel\n\n          let error\n          if (errors.length && !this.stream) {\n            error = errors.pop()\n            error.precedingErrors = errors\n          }\n\n          if (!hasReturned) {\n            for (const event in errorHandlers) {\n              connection.removeListener(event, errorHandlers[event])\n            }\n\n            this.parent.release(connection)\n            hasReturned = true\n\n            if (error) {\n              debug('request(%d): failed', IDS.get(this), error)\n            } else {\n              debug('request(%d): complete', IDS.get(this))\n            }\n\n            if (this.stream) {\n              callback(null, null, output, returnValue, rowsAffected, recordsetcolumns)\n            } else {\n              callback(error, recordsets, output, returnValue, rowsAffected, recordsetcolumns)\n            }\n          }\n        })\n\n        this._setCurrentRequest(req)\n\n        req.on('columnMetadata', metadata => {\n          columns = createColumns(metadata, this.arrayRowMode)\n\n          isChunkedRecordset = false\n          if ((metadata.length === 1) && (metadata[0].colName === JSON_COLUMN_ID || metadata[0].colName === XML_COLUMN_ID)) {\n            isChunkedRecordset = true\n            chunksBuffer = []\n          }\n\n          if (this.stream) this.emit('recordset', columns)\n          if (this.arrayRowMode) recordsetcolumns.push(columns)\n        })\n\n        req.on('row', columns => {\n          if (!recordset) recordset = []\n\n          if (isChunkedRecordset) {\n            return chunksBuffer.push(columns[0].value)\n          }\n\n          if (this.arrayRowMode) {\n            row = []\n          } else {\n            row = {}\n          }\n          for (const col of columns) {\n            col.value = valueCorrection(col.value, col.metadata)\n\n            if (this.arrayRowMode) {\n              row.push(col.value)\n            } else {\n              const exi = row[col.metadata.colName]\n              if (exi != null) {\n                if (exi instanceof Array) {\n                  exi.push(col.value)\n                } else {\n                  row[col.metadata.colName] = [exi, col.value]\n                }\n              } else {\n                row[col.metadata.colName] = col.value\n              }\n            }\n          }\n\n          if (this.stream) {\n            this.emit('row', row)\n          } else {\n            recordset.push(row)\n          }\n        })\n\n        req.on('doneInProc', (rowCount, more) => {\n          if (rowCount != null) {\n            rowsAffected.push(rowCount)\n            if (this.stream) {\n              this.emit('rowsaffected', rowCount)\n            }\n          }\n\n          // filter empty recordsets when NOCOUNT is OFF\n          if (Object.keys(columns).length === 0) return\n\n          if (isChunkedRecordset) {\n            if (columns[JSON_COLUMN_ID] && config.parseJSON === true) {\n              try {\n                if (chunksBuffer.length === 0) {\n                  row = null\n                } else {\n                  row = JSON.parse(chunksBuffer.join(''))\n                }\n              } catch (ex) {\n                row = null\n                const ex2 = new RequestError(new Error(`Failed to parse incoming JSON. ${ex.message}`), 'EJSON')\n\n                if (this.stream) this.emit('error', ex2)\n\n                // we must collect errors even in stream mode\n                errors.push(ex2)\n              }\n            } else {\n              row = {}\n              row[Object.keys(columns)[0]] = chunksBuffer.join('')\n            }\n\n            chunksBuffer = null\n\n            if (this.stream) {\n              this.emit('row', row)\n            } else {\n              recordset.push(row)\n            }\n          }\n\n          if (!this.stream) {\n            // all rows of current recordset loaded\n            Object.defineProperty(recordset, 'columns', {\n              enumerable: false,\n              configurable: true,\n              value: columns\n            })\n\n            Object.defineProperty(recordset, 'toTable', {\n              enumerable: false,\n              configurable: true,\n              value (name) { return Table.fromRecordset(this, name) }\n            })\n\n            recordsets.push(recordset)\n          }\n\n          recordset = []\n          columns = {}\n        })\n\n        req.on('doneProc', (rowCount, more, returnStatus) => {\n          returnValue = returnStatus\n        })\n\n        req.on('returnValue', (parameterName, value, metadata) => {\n          output[parameterName] = value\n        })\n\n        for (const name in this.parameters) {\n          if (!objectHasProperty(this.parameters, name)) {\n            continue\n          }\n          const param = this.parameters[name]\n          if (param.io === 1) {\n            req.addParameter(param.name, getTediousType(param.type), parameterCorrection(param.value), { length: param.length, scale: param.scale, precision: param.precision })\n          } else {\n            req.addOutputParameter(param.name, getTediousType(param.type), parameterCorrection(param.value), { length: param.length, scale: param.scale, precision: param.precision })\n          }\n        }\n\n        connection.callProcedure(req)\n      })\n    })\n  }\n\n  _pause () {\n    super._pause()\n    if (this._currentRequest) {\n      this._currentRequest.pause()\n    }\n  }\n\n  _resume () {\n    super._resume()\n    if (this._currentRequest) {\n      this._currentRequest.resume()\n    }\n  }\n}\n\nmodule.exports = Request\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi90ZWRpb3VzL3JlcXVlc3QuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosWUFBWSxtQkFBTyxDQUFDLDZEQUFTO0FBQzdCLGNBQWMsbUJBQU8sQ0FBQyx1REFBTztBQUM3QixvQkFBb0IsbUJBQU8sQ0FBQyx3RUFBaUI7QUFDN0MscUJBQXFCLG1CQUFPLENBQUMsc0ZBQXdCO0FBQ3JELFFBQVEseUJBQXlCLEVBQUUsbUJBQU8sQ0FBQywwREFBVTtBQUNyRCxRQUFRLHFDQUFxQyxFQUFFLG1CQUFPLENBQUMsa0VBQWM7QUFDckUsY0FBYyxtQkFBTyxDQUFDLDBEQUFVO0FBQ2hDLFFBQVEsZUFBZSxFQUFFLG1CQUFPLENBQUMsc0RBQVE7QUFDekMsUUFBUSxlQUFlLEVBQUUsbUJBQU8sQ0FBQyw0REFBVzs7QUFFNUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxnQkFBZ0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSwrREFBK0Qsd0ZBQXdGO0FBQ3ZKOztBQUVBO0FBQ0EseURBQXlELFdBQVc7QUFDcEUsdURBQXVELCtCQUErQixhQUFhLGdCQUFnQjtBQUNuSDs7QUFFQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsOERBQThELFFBQVE7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EseUZBQXlGLFdBQVc7O0FBRXBHOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIsZ0VBQWdFLEtBQUssS0FBSyxVQUFVO0FBQ3BGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxNQUFNLEVBQUUsMkJBQTJCO0FBQ3ZFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixNQUFNLElBQUkscUNBQXFDO0FBQzlFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLE1BQU0sTUFBTSxLQUFLO0FBQ2xEO0FBQ0E7O0FBRUE7O0FBRUEsZ0RBQWdELHlCQUF5QixTQUFTLG9CQUFvQixFQUFFLHdCQUF3QixFQUFFLGlEQUFpRCxtQkFBbUIsUUFBUTtBQUM5TTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkcsc0VBQXNFO0FBQ2pMLGNBQWM7QUFDZCxpSEFBaUgsc0VBQXNFO0FBQ3ZMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDJDQUEyQztBQUMzRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EseUZBQXlGLFdBQVc7O0FBRXBHOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlHQUF5RyxzRUFBc0U7QUFDL0ssWUFBWTtBQUNaLCtHQUErRyxzRUFBc0U7QUFDckw7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvdGVkaW91cy9yZXF1ZXN0LmpzPzYxMGYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IHRkcyA9IHJlcXVpcmUoJ3RlZGlvdXMnKVxuY29uc3QgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdtc3NxbDp0ZWRpJylcbmNvbnN0IEJhc2VSZXF1ZXN0ID0gcmVxdWlyZSgnLi4vYmFzZS9yZXF1ZXN0JylcbmNvbnN0IFJlcXVlc3RFcnJvciA9IHJlcXVpcmUoJy4uL2Vycm9yL3JlcXVlc3QtZXJyb3InKVxuY29uc3QgeyBJRFMsIG9iamVjdEhhc1Byb3BlcnR5IH0gPSByZXF1aXJlKCcuLi91dGlscycpXG5jb25zdCB7IFRZUEVTLCBERUNMQVJBVElPTlMsIGRlY2xhcmUsIGNhc3QgfSA9IHJlcXVpcmUoJy4uL2RhdGF0eXBlcycpXG5jb25zdCBUYWJsZSA9IHJlcXVpcmUoJy4uL3RhYmxlJylcbmNvbnN0IHsgUEFSU0VSUzogVURUIH0gPSByZXF1aXJlKCcuLi91ZHQnKVxuY29uc3QgeyB2YWx1ZUhhbmRsZXIgfSA9IHJlcXVpcmUoJy4uL3NoYXJlZCcpXG5cbmNvbnN0IEpTT05fQ09MVU1OX0lEID0gJ0pTT05fRjUyRTJCNjEtMThBMS0xMWQxLUIxMDUtMDA4MDVGNDk5MTZCJ1xuY29uc3QgWE1MX0NPTFVNTl9JRCA9ICdYTUxfRjUyRTJCNjEtMThBMS0xMWQxLUIxMDUtMDA4MDVGNDk5MTZCJ1xuXG5jb25zdCBOX1RZUEVTID0ge1xuICBCaXROOiAweDY4LFxuICBEYXRlVGltZU46IDB4NkYsXG4gIERlY2ltYWxOOiAweDZBLFxuICBGbG9hdE46IDB4NkQsXG4gIEludE46IDB4MjYsXG4gIE1vbmV5TjogMHg2RSxcbiAgTnVtZXJpY046IDB4NkNcbn1cblxuY29uc3QgZ2V0VGVkaW91c1R5cGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFRZUEVTLlZhckNoYXI6IHJldHVybiB0ZHMuVFlQRVMuVmFyQ2hhclxuICAgIGNhc2UgVFlQRVMuTlZhckNoYXI6IHJldHVybiB0ZHMuVFlQRVMuTlZhckNoYXJcbiAgICBjYXNlIFRZUEVTLlRleHQ6IHJldHVybiB0ZHMuVFlQRVMuVGV4dFxuICAgIGNhc2UgVFlQRVMuSW50OiByZXR1cm4gdGRzLlRZUEVTLkludFxuICAgIGNhc2UgVFlQRVMuQmlnSW50OiByZXR1cm4gdGRzLlRZUEVTLkJpZ0ludFxuICAgIGNhc2UgVFlQRVMuVGlueUludDogcmV0dXJuIHRkcy5UWVBFUy5UaW55SW50XG4gICAgY2FzZSBUWVBFUy5TbWFsbEludDogcmV0dXJuIHRkcy5UWVBFUy5TbWFsbEludFxuICAgIGNhc2UgVFlQRVMuQml0OiByZXR1cm4gdGRzLlRZUEVTLkJpdFxuICAgIGNhc2UgVFlQRVMuRmxvYXQ6IHJldHVybiB0ZHMuVFlQRVMuRmxvYXRcbiAgICBjYXNlIFRZUEVTLkRlY2ltYWw6IHJldHVybiB0ZHMuVFlQRVMuRGVjaW1hbFxuICAgIGNhc2UgVFlQRVMuTnVtZXJpYzogcmV0dXJuIHRkcy5UWVBFUy5OdW1lcmljXG4gICAgY2FzZSBUWVBFUy5SZWFsOiByZXR1cm4gdGRzLlRZUEVTLlJlYWxcbiAgICBjYXNlIFRZUEVTLk1vbmV5OiByZXR1cm4gdGRzLlRZUEVTLk1vbmV5XG4gICAgY2FzZSBUWVBFUy5TbWFsbE1vbmV5OiByZXR1cm4gdGRzLlRZUEVTLlNtYWxsTW9uZXlcbiAgICBjYXNlIFRZUEVTLlRpbWU6IHJldHVybiB0ZHMuVFlQRVMuVGltZVxuICAgIGNhc2UgVFlQRVMuRGF0ZTogcmV0dXJuIHRkcy5UWVBFUy5EYXRlXG4gICAgY2FzZSBUWVBFUy5EYXRlVGltZTogcmV0dXJuIHRkcy5UWVBFUy5EYXRlVGltZVxuICAgIGNhc2UgVFlQRVMuRGF0ZVRpbWUyOiByZXR1cm4gdGRzLlRZUEVTLkRhdGVUaW1lMlxuICAgIGNhc2UgVFlQRVMuRGF0ZVRpbWVPZmZzZXQ6IHJldHVybiB0ZHMuVFlQRVMuRGF0ZVRpbWVPZmZzZXRcbiAgICBjYXNlIFRZUEVTLlNtYWxsRGF0ZVRpbWU6IHJldHVybiB0ZHMuVFlQRVMuU21hbGxEYXRlVGltZVxuICAgIGNhc2UgVFlQRVMuVW5pcXVlSWRlbnRpZmllcjogcmV0dXJuIHRkcy5UWVBFUy5VbmlxdWVJZGVudGlmaWVyXG4gICAgY2FzZSBUWVBFUy5YbWw6IHJldHVybiB0ZHMuVFlQRVMuTlZhckNoYXJcbiAgICBjYXNlIFRZUEVTLkNoYXI6IHJldHVybiB0ZHMuVFlQRVMuQ2hhclxuICAgIGNhc2UgVFlQRVMuTkNoYXI6IHJldHVybiB0ZHMuVFlQRVMuTkNoYXJcbiAgICBjYXNlIFRZUEVTLk5UZXh0OiByZXR1cm4gdGRzLlRZUEVTLk5WYXJDaGFyXG4gICAgY2FzZSBUWVBFUy5JbWFnZTogcmV0dXJuIHRkcy5UWVBFUy5JbWFnZVxuICAgIGNhc2UgVFlQRVMuQmluYXJ5OiByZXR1cm4gdGRzLlRZUEVTLkJpbmFyeVxuICAgIGNhc2UgVFlQRVMuVmFyQmluYXJ5OiByZXR1cm4gdGRzLlRZUEVTLlZhckJpbmFyeVxuICAgIGNhc2UgVFlQRVMuVURUOiBjYXNlIFRZUEVTLkdlb2dyYXBoeTogY2FzZSBUWVBFUy5HZW9tZXRyeTogcmV0dXJuIHRkcy5UWVBFUy5VRFRcbiAgICBjYXNlIFRZUEVTLlRWUDogcmV0dXJuIHRkcy5UWVBFUy5UVlBcbiAgICBjYXNlIFRZUEVTLlZhcmlhbnQ6IHJldHVybiB0ZHMuVFlQRVMuVmFyaWFudFxuICAgIGRlZmF1bHQ6IHJldHVybiB0eXBlXG4gIH1cbn1cblxuY29uc3QgZ2V0TXNzcWxUeXBlID0gZnVuY3Rpb24gKHR5cGUsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIHR5cGUgIT09ICdvYmplY3QnKSByZXR1cm4gdW5kZWZpbmVkXG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSB0ZHMuVFlQRVMuQ2hhcjogcmV0dXJuIFRZUEVTLkNoYXJcbiAgICBjYXNlIHRkcy5UWVBFUy5OQ2hhcjogcmV0dXJuIFRZUEVTLk5DaGFyXG4gICAgY2FzZSB0ZHMuVFlQRVMuVmFyQ2hhcjogcmV0dXJuIFRZUEVTLlZhckNoYXJcbiAgICBjYXNlIHRkcy5UWVBFUy5OVmFyQ2hhcjogcmV0dXJuIFRZUEVTLk5WYXJDaGFyXG4gICAgY2FzZSB0ZHMuVFlQRVMuVGV4dDogcmV0dXJuIFRZUEVTLlRleHRcbiAgICBjYXNlIHRkcy5UWVBFUy5OVGV4dDogcmV0dXJuIFRZUEVTLk5UZXh0XG4gICAgY2FzZSB0ZHMuVFlQRVMuSW50OiByZXR1cm4gVFlQRVMuSW50XG4gICAgY2FzZSB0ZHMuVFlQRVMuQmlnSW50OiByZXR1cm4gVFlQRVMuQmlnSW50XG4gICAgY2FzZSB0ZHMuVFlQRVMuVGlueUludDogcmV0dXJuIFRZUEVTLlRpbnlJbnRcbiAgICBjYXNlIHRkcy5UWVBFUy5TbWFsbEludDogcmV0dXJuIFRZUEVTLlNtYWxsSW50XG4gICAgY2FzZSB0ZHMuVFlQRVMuQml0OiByZXR1cm4gVFlQRVMuQml0XG4gICAgY2FzZSB0ZHMuVFlQRVMuRmxvYXQ6IHJldHVybiBUWVBFUy5GbG9hdFxuICAgIGNhc2UgdGRzLlRZUEVTLlJlYWw6IHJldHVybiBUWVBFUy5SZWFsXG4gICAgY2FzZSB0ZHMuVFlQRVMuTW9uZXk6IHJldHVybiBUWVBFUy5Nb25leVxuICAgIGNhc2UgdGRzLlRZUEVTLlNtYWxsTW9uZXk6IHJldHVybiBUWVBFUy5TbWFsbE1vbmV5XG4gICAgY2FzZSB0ZHMuVFlQRVMuTnVtZXJpYzogcmV0dXJuIFRZUEVTLk51bWVyaWNcbiAgICBjYXNlIHRkcy5UWVBFUy5EZWNpbWFsOiByZXR1cm4gVFlQRVMuRGVjaW1hbFxuICAgIGNhc2UgdGRzLlRZUEVTLkRhdGVUaW1lOiByZXR1cm4gVFlQRVMuRGF0ZVRpbWVcbiAgICBjYXNlIHRkcy5UWVBFUy5UaW1lOiByZXR1cm4gVFlQRVMuVGltZVxuICAgIGNhc2UgdGRzLlRZUEVTLkRhdGU6IHJldHVybiBUWVBFUy5EYXRlXG4gICAgY2FzZSB0ZHMuVFlQRVMuRGF0ZVRpbWUyOiByZXR1cm4gVFlQRVMuRGF0ZVRpbWUyXG4gICAgY2FzZSB0ZHMuVFlQRVMuRGF0ZVRpbWVPZmZzZXQ6IHJldHVybiBUWVBFUy5EYXRlVGltZU9mZnNldFxuICAgIGNhc2UgdGRzLlRZUEVTLlNtYWxsRGF0ZVRpbWU6IHJldHVybiBUWVBFUy5TbWFsbERhdGVUaW1lXG4gICAgY2FzZSB0ZHMuVFlQRVMuVW5pcXVlSWRlbnRpZmllcjogcmV0dXJuIFRZUEVTLlVuaXF1ZUlkZW50aWZpZXJcbiAgICBjYXNlIHRkcy5UWVBFUy5JbWFnZTogcmV0dXJuIFRZUEVTLkltYWdlXG4gICAgY2FzZSB0ZHMuVFlQRVMuQmluYXJ5OiByZXR1cm4gVFlQRVMuQmluYXJ5XG4gICAgY2FzZSB0ZHMuVFlQRVMuVmFyQmluYXJ5OiByZXR1cm4gVFlQRVMuVmFyQmluYXJ5XG4gICAgY2FzZSB0ZHMuVFlQRVMuWG1sOiByZXR1cm4gVFlQRVMuWG1sXG4gICAgY2FzZSB0ZHMuVFlQRVMuVURUOiByZXR1cm4gVFlQRVMuVURUXG4gICAgY2FzZSB0ZHMuVFlQRVMuVFZQOiByZXR1cm4gVFlQRVMuVFZQXG4gICAgY2FzZSB0ZHMuVFlQRVMuVmFyaWFudDogcmV0dXJuIFRZUEVTLlZhcmlhbnRcbiAgICBkZWZhdWx0OlxuICAgICAgc3dpdGNoICh0eXBlLmlkKSB7XG4gICAgICAgIGNhc2UgTl9UWVBFUy5CaXROOiByZXR1cm4gVFlQRVMuQml0XG4gICAgICAgIGNhc2UgTl9UWVBFUy5OdW1lcmljTjogcmV0dXJuIFRZUEVTLk51bWVyaWNcbiAgICAgICAgY2FzZSBOX1RZUEVTLkRlY2ltYWxOOiByZXR1cm4gVFlQRVMuRGVjaW1hbFxuICAgICAgICBjYXNlIE5fVFlQRVMuSW50TjpcbiAgICAgICAgICBpZiAobGVuZ3RoID09PSA4KSByZXR1cm4gVFlQRVMuQmlnSW50XG4gICAgICAgICAgaWYgKGxlbmd0aCA9PT0gNCkgcmV0dXJuIFRZUEVTLkludFxuICAgICAgICAgIGlmIChsZW5ndGggPT09IDIpIHJldHVybiBUWVBFUy5TbWFsbEludFxuICAgICAgICAgIHJldHVybiBUWVBFUy5UaW55SW50XG4gICAgICAgIGNhc2UgTl9UWVBFUy5GbG9hdE46XG4gICAgICAgICAgaWYgKGxlbmd0aCA9PT0gOCkgcmV0dXJuIFRZUEVTLkZsb2F0XG4gICAgICAgICAgcmV0dXJuIFRZUEVTLlJlYWxcbiAgICAgICAgY2FzZSBOX1RZUEVTLk1vbmV5TjpcbiAgICAgICAgICBpZiAobGVuZ3RoID09PSA4KSByZXR1cm4gVFlQRVMuTW9uZXlcbiAgICAgICAgICByZXR1cm4gVFlQRVMuU21hbGxNb25leVxuICAgICAgICBjYXNlIE5fVFlQRVMuRGF0ZVRpbWVOOlxuICAgICAgICAgIGlmIChsZW5ndGggPT09IDgpIHJldHVybiBUWVBFUy5EYXRlVGltZVxuICAgICAgICAgIHJldHVybiBUWVBFUy5TbWFsbERhdGVUaW1lXG4gICAgICB9XG4gIH1cbn1cblxuY29uc3QgY3JlYXRlQ29sdW1ucyA9IGZ1bmN0aW9uIChtZXRhZGF0YSwgYXJyYXlSb3dNb2RlKSB7XG4gIGxldCBvdXQgPSB7fVxuICBpZiAoYXJyYXlSb3dNb2RlKSBvdXQgPSBbXVxuICBmb3IgKGxldCBpbmRleCA9IDAsIGxlbmd0aCA9IG1ldGFkYXRhLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCBjb2x1bW4gPSBtZXRhZGF0YVtpbmRleF1cbiAgICBjb25zdCBvdXRDb2x1bW4gPSB7XG4gICAgICBpbmRleCxcbiAgICAgIG5hbWU6IGNvbHVtbi5jb2xOYW1lLFxuICAgICAgbGVuZ3RoOiBjb2x1bW4uZGF0YUxlbmd0aCxcbiAgICAgIHR5cGU6IGdldE1zc3FsVHlwZShjb2x1bW4udHlwZSwgY29sdW1uLmRhdGFMZW5ndGgpLFxuICAgICAgc2NhbGU6IGNvbHVtbi5zY2FsZSxcbiAgICAgIHByZWNpc2lvbjogY29sdW1uLnByZWNpc2lvbixcbiAgICAgIG51bGxhYmxlOiAhIShjb2x1bW4uZmxhZ3MgJiAweDAxKSxcbiAgICAgIGNhc2VTZW5zaXRpdmU6ICEhKGNvbHVtbi5mbGFncyAmIDB4MDIpLFxuICAgICAgaWRlbnRpdHk6ICEhKGNvbHVtbi5mbGFncyAmIDB4MTApLFxuICAgICAgcmVhZE9ubHk6ICEoY29sdW1uLmZsYWdzICYgMHgwQylcbiAgICB9XG5cbiAgICBpZiAoY29sdW1uLnVkdEluZm8pIHtcbiAgICAgIG91dENvbHVtbi51ZHQgPSB7XG4gICAgICAgIG5hbWU6IGNvbHVtbi51ZHRJbmZvLnR5cGVOYW1lLFxuICAgICAgICBkYXRhYmFzZTogY29sdW1uLnVkdEluZm8uZGJuYW1lLFxuICAgICAgICBzY2hlbWE6IGNvbHVtbi51ZHRJbmZvLm93bmluZ1NjaGVtYSxcbiAgICAgICAgYXNzZW1ibHk6IGNvbHVtbi51ZHRJbmZvLmFzc2VtYmx5TmFtZVxuICAgICAgfVxuXG4gICAgICBpZiAoREVDTEFSQVRJT05TW2NvbHVtbi51ZHRJbmZvLnR5cGVOYW1lXSkge1xuICAgICAgICBvdXRDb2x1bW4udHlwZSA9IERFQ0xBUkFUSU9OU1tjb2x1bW4udWR0SW5mby50eXBlTmFtZV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYXJyYXlSb3dNb2RlKSB7XG4gICAgICBvdXQucHVzaChvdXRDb2x1bW4pXG4gICAgfSBlbHNlIHtcbiAgICAgIG91dFtjb2x1bW4uY29sTmFtZV0gPSBvdXRDb2x1bW5cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3V0XG59XG5cbmNvbnN0IHZhbHVlQ29ycmVjdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSwgbWV0YWRhdGEpIHtcbiAgY29uc3QgdHlwZSA9IGdldE1zc3FsVHlwZShtZXRhZGF0YS50eXBlKVxuICBpZiAodmFsdWVIYW5kbGVyLmhhcyh0eXBlKSkge1xuICAgIHJldHVybiB2YWx1ZUhhbmRsZXIuZ2V0KHR5cGUpKHZhbHVlKVxuICB9IGVsc2UgaWYgKChtZXRhZGF0YS50eXBlID09PSB0ZHMuVFlQRVMuVURUKSAmJiAodmFsdWUgIT0gbnVsbCkpIHtcbiAgICBpZiAoVURUW21ldGFkYXRhLnVkdEluZm8udHlwZU5hbWVdKSB7XG4gICAgICByZXR1cm4gVURUW21ldGFkYXRhLnVkdEluZm8udHlwZU5hbWVdKHZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cbn1cblxuY29uc3QgcGFyYW1ldGVyQ29ycmVjdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBUYWJsZSkge1xuICAgIGNvbnN0IHR2cCA9IHtcbiAgICAgIG5hbWU6IHZhbHVlLm5hbWUsXG4gICAgICBzY2hlbWE6IHZhbHVlLnNjaGVtYSxcbiAgICAgIGNvbHVtbnM6IFtdLFxuICAgICAgcm93czogdmFsdWUucm93c1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgY29sIG9mIHZhbHVlLmNvbHVtbnMpIHtcbiAgICAgIHR2cC5jb2x1bW5zLnB1c2goe1xuICAgICAgICBuYW1lOiBjb2wubmFtZSxcbiAgICAgICAgdHlwZTogZ2V0VGVkaW91c1R5cGUoY29sLnR5cGUpLFxuICAgICAgICBsZW5ndGg6IGNvbC5sZW5ndGgsXG4gICAgICAgIHNjYWxlOiBjb2wuc2NhbGUsXG4gICAgICAgIHByZWNpc2lvbjogY29sLnByZWNpc2lvblxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gdHZwXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cbn1cblxuY2xhc3MgUmVxdWVzdCBleHRlbmRzIEJhc2VSZXF1ZXN0IHtcbiAgLypcbiAgRXhlY3V0ZSBzcGVjaWZpZWQgc3FsIGJhdGNoLlxuICAqL1xuXG4gIF9iYXRjaCAoYmF0Y2gsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5faXNCYXRjaCA9IHRydWVcbiAgICB0aGlzLl9xdWVyeShiYXRjaCwgY2FsbGJhY2spXG4gIH1cblxuICAvKlxuICBCdWxrIGxvYWQuXG4gICovXG5cbiAgX2J1bGsgKHRhYmxlLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHN1cGVyLl9idWxrKHRhYmxlLCBvcHRpb25zLCBlcnIgPT4ge1xuICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcblxuICAgICAgdHJ5IHtcbiAgICAgICAgdGFibGUuX21ha2VCdWxrKClcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBSZXF1ZXN0RXJyb3IoZSwgJ0VSRVFVRVNUJykpXG4gICAgICB9XG5cbiAgICAgIGlmICghdGFibGUubmFtZSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IFJlcXVlc3RFcnJvcignVGFibGUgbmFtZSBtdXN0IGJlIHNwZWNpZmllZCBmb3IgYnVsayBpbnNlcnQuJywgJ0VOQU1FJykpXG4gICAgICB9XG5cbiAgICAgIGlmICh0YWJsZS5uYW1lLmNoYXJBdCgwKSA9PT0gJ0AnKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgUmVxdWVzdEVycm9yKFwiWW91IGNhbid0IHVzZSB0YWJsZSB2YXJpYWJsZXMgZm9yIGJ1bGsgaW5zZXJ0LlwiLCAnRU5BTUUnKSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXJyb3JzID0gW11cbiAgICAgIGNvbnN0IGVycm9ySGFuZGxlcnMgPSB7fVxuICAgICAgbGV0IGhhc1JldHVybmVkID0gZmFsc2VcblxuICAgICAgY29uc3QgaGFuZGxlRXJyb3IgPSAoZG9SZXR1cm4sIGNvbm5lY3Rpb24sIGluZm8pID0+IHtcbiAgICAgICAgbGV0IGVyciA9IG5ldyBFcnJvcihpbmZvLm1lc3NhZ2UpXG4gICAgICAgIGVyci5pbmZvID0gaW5mb1xuICAgICAgICBlcnIgPSBuZXcgUmVxdWVzdEVycm9yKGVyciwgJ0VSRVFVRVNUJylcblxuICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChkb1JldHVybiAmJiAhaGFzUmV0dXJuZWQpIHtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgZXZlbnQgaW4gZXJyb3JIYW5kbGVycykge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGVycm9ySGFuZGxlcnNbZXZlbnRdKVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZShjb25uZWN0aW9uKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoYXNSZXR1cm5lZCA9IHRydWVcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycilcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3ZSBtdXN0IGNvbGxlY3QgZXJyb3JzIGV2ZW4gaW4gc3RyZWFtIG1vZGVcbiAgICAgICAgZXJyb3JzLnB1c2goZXJyKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBoYW5kbGVJbmZvID0gbXNnID0+IHtcbiAgICAgICAgdGhpcy5lbWl0KCdpbmZvJywge1xuICAgICAgICAgIG1lc3NhZ2U6IG1zZy5tZXNzYWdlLFxuICAgICAgICAgIG51bWJlcjogbXNnLm51bWJlcixcbiAgICAgICAgICBzdGF0ZTogbXNnLnN0YXRlLFxuICAgICAgICAgIGNsYXNzOiBtc2cuY2xhc3MsXG4gICAgICAgICAgbGluZU51bWJlcjogbXNnLmxpbmVOdW1iZXIsXG4gICAgICAgICAgc2VydmVyTmFtZTogbXNnLnNlcnZlck5hbWUsXG4gICAgICAgICAgcHJvY05hbWU6IG1zZy5wcm9jTmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICB0aGlzLnBhcmVudC5hY3F1aXJlKHRoaXMsIChlcnIsIGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tXaXRoUmVsZWFzZSA9IChlcnIsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZShjb25uZWN0aW9uKVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FsbGJhY2soZXJyLCAuLi5hcmdzKVxuICAgICAgICB9XG4gICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFja1dpdGhSZWxlYXNlKGVycilcblxuICAgICAgICBkZWJ1ZygnY29ubmVjdGlvbiglZCk6IGJvcnJvd2VkIHRvIHJlcXVlc3QgIyVkJywgSURTLmdldChjb25uZWN0aW9uKSwgSURTLmdldCh0aGlzKSlcblxuICAgICAgICBpZiAodGhpcy5jYW5jZWxlZCkge1xuICAgICAgICAgIGRlYnVnKCdyZXF1ZXN0KCVkKTogY2FuY2VsZWQnLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgICAgIHJldHVybiBjYWxsYmFja1dpdGhSZWxlYXNlKG5ldyBSZXF1ZXN0RXJyb3IoJ0NhbmNlbGVkLicsICdFQ0FOQ0VMJykpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jYW5jZWwgPSAoKSA9PiB7XG4gICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBjYW5jZWwnLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgICAgIGNvbm5lY3Rpb24uY2FuY2VsKClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGF0dGFjaCBoYW5kbGVyIHRvIGhhbmRsZSBtdWx0aXBsZSBlcnJvciBtZXNzYWdlc1xuICAgICAgICBjb25uZWN0aW9uLm9uKCdpbmZvTWVzc2FnZScsIGVycm9ySGFuZGxlcnMuaW5mb01lc3NhZ2UgPSBoYW5kbGVJbmZvKVxuICAgICAgICBjb25uZWN0aW9uLm9uKCdlcnJvck1lc3NhZ2UnLCBlcnJvckhhbmRsZXJzLmVycm9yTWVzc2FnZSA9IGhhbmRsZUVycm9yLmJpbmQobnVsbCwgZmFsc2UsIGNvbm5lY3Rpb24pKVxuICAgICAgICBjb25uZWN0aW9uLm9uKCdlcnJvcicsIGVycm9ySGFuZGxlcnMuZXJyb3IgPSBoYW5kbGVFcnJvci5iaW5kKG51bGwsIHRydWUsIGNvbm5lY3Rpb24pKVxuXG4gICAgICAgIGNvbnN0IGRvbmUgPSAoZXJyLCByb3dDb3VudCkgPT4ge1xuICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSB3ZSBoYW5kbGUgbm8tc3FsIGVycm9ycyBhcyB3ZWxsXG4gICAgICAgICAgaWYgKGVyciAmJiAoIWVycm9ycy5sZW5ndGggfHwgKGVycm9ycy5sZW5ndGggJiYgZXJyLm1lc3NhZ2UgIT09IGVycm9yc1tlcnJvcnMubGVuZ3RoIC0gMV0ubWVzc2FnZSkpKSB7XG4gICAgICAgICAgICBlcnIgPSBuZXcgUmVxdWVzdEVycm9yKGVyciwgJ0VSRVFVRVNUJylcbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGVycilcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkZWxldGUgdGhpcy5fY2FuY2VsXG5cbiAgICAgICAgICBsZXQgZXJyb3JcbiAgICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCAmJiAhdGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgIGVycm9yID0gZXJyb3JzLnBvcCgpXG4gICAgICAgICAgICBlcnJvci5wcmVjZWRpbmdFcnJvcnMgPSBlcnJvcnNcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWhhc1JldHVybmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IGluIGVycm9ySGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgY29ubmVjdGlvbi5yZW1vdmVMaXN0ZW5lcihldmVudCwgZXJyb3JIYW5kbGVyc1tldmVudF0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGhhc1JldHVybmVkID0gdHJ1ZVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2tXaXRoUmVsZWFzZShudWxsLCByb3dDb3VudClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrV2l0aFJlbGVhc2UoZXJyb3IsIHJvd0NvdW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ1bGsgPSBjb25uZWN0aW9uLm5ld0J1bGtMb2FkKHRhYmxlLnBhdGgsIG9wdGlvbnMsIGRvbmUpXG5cbiAgICAgICAgZm9yIChjb25zdCBjb2wgb2YgdGFibGUuY29sdW1ucykge1xuICAgICAgICAgIGJ1bGsuYWRkQ29sdW1uKGNvbC5uYW1lLCBnZXRUZWRpb3VzVHlwZShjb2wudHlwZSksIHsgbnVsbGFibGU6IGNvbC5udWxsYWJsZSwgbGVuZ3RoOiBjb2wubGVuZ3RoLCBzY2FsZTogY29sLnNjYWxlLCBwcmVjaXNpb246IGNvbC5wcmVjaXNpb24gfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YWJsZS5jcmVhdGUpIHtcbiAgICAgICAgICBjb25zdCBvYmplY3RpZCA9IHRhYmxlLnRlbXBvcmFyeSA/IGB0ZW1wZGIuLlske3RhYmxlLm5hbWV9XWAgOiB0YWJsZS5wYXRoXG4gICAgICAgICAgY29uc3QgcmVxID0gbmV3IHRkcy5SZXF1ZXN0KGBpZiBvYmplY3RfaWQoJyR7b2JqZWN0aWQucmVwbGFjZSgvJy9nLCAnXFwnXFwnJyl9JykgaXMgbnVsbCAke3RhYmxlLmRlY2xhcmUoKX1gLCBlcnIgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGRvbmUoZXJyKVxuXG4gICAgICAgICAgICBjb25uZWN0aW9uLmV4ZWNCdWxrTG9hZChidWxrLCB0YWJsZS5yb3dzKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5fc2V0Q3VycmVudFJlcXVlc3QocmVxKVxuXG4gICAgICAgICAgY29ubmVjdGlvbi5leGVjU3FsQmF0Y2gocmVxKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbm5lY3Rpb24uZXhlY0J1bGtMb2FkKGJ1bGssIHRhYmxlLnJvd3MpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qXG4gIEV4ZWN1dGUgc3BlY2lmaWVkIHNxbCBjb21tYW5kLlxuICAqL1xuXG4gIF9xdWVyeSAoY29tbWFuZCwgY2FsbGJhY2spIHtcbiAgICBzdXBlci5fcXVlcnkoY29tbWFuZCwgZXJyID0+IHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG5cbiAgICAgIGNvbnN0IHJlY29yZHNldHMgPSBbXVxuICAgICAgY29uc3QgcmVjb3Jkc2V0Y29sdW1ucyA9IFtdXG4gICAgICBjb25zdCBlcnJvcnMgPSBbXVxuICAgICAgY29uc3QgZXJyb3JIYW5kbGVycyA9IHt9XG4gICAgICBjb25zdCBvdXRwdXQgPSB7fVxuICAgICAgY29uc3Qgcm93c0FmZmVjdGVkID0gW11cblxuICAgICAgbGV0IGNvbHVtbnMgPSB7fVxuICAgICAgbGV0IHJlY29yZHNldCA9IFtdXG4gICAgICBsZXQgYmF0Y2hMYXN0Um93ID0gbnVsbFxuICAgICAgbGV0IGJhdGNoSGFzT3V0cHV0ID0gZmFsc2VcbiAgICAgIGxldCBpc0NodW5rZWRSZWNvcmRzZXQgPSBmYWxzZVxuICAgICAgbGV0IGNodW5rc0J1ZmZlciA9IG51bGxcbiAgICAgIGxldCBoYXNSZXR1cm5lZCA9IGZhbHNlXG5cbiAgICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGRvUmV0dXJuLCBjb25uZWN0aW9uLCBpbmZvKSA9PiB7XG4gICAgICAgIGxldCBlcnIgPSBuZXcgRXJyb3IoaW5mby5tZXNzYWdlKVxuICAgICAgICBlcnIuaW5mbyA9IGluZm9cbiAgICAgICAgZXJyID0gbmV3IFJlcXVlc3RFcnJvcihlcnIsICdFUkVRVUVTVCcpXG5cbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZG9SZXR1cm4gJiYgIWhhc1JldHVybmVkKSB7XG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IGluIGVycm9ySGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBlcnJvckhhbmRsZXJzW2V2ZW50XSlcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbGVhc2UoY29ubmVjdGlvbilcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaGFzUmV0dXJuZWQgPSB0cnVlXG4gICAgICAgICAgICBjYWxsYmFjayhlcnIpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2UgbXVzdCBjb2xsZWN0IGVycm9ycyBldmVuIGluIHN0cmVhbSBtb2RlXG4gICAgICAgIGVycm9ycy5wdXNoKGVycilcbiAgICAgIH1cblxuICAgICAgY29uc3QgaGFuZGxlSW5mbyA9IG1zZyA9PiB7XG4gICAgICAgIHRoaXMuZW1pdCgnaW5mbycsIHtcbiAgICAgICAgICBtZXNzYWdlOiBtc2cubWVzc2FnZSxcbiAgICAgICAgICBudW1iZXI6IG1zZy5udW1iZXIsXG4gICAgICAgICAgc3RhdGU6IG1zZy5zdGF0ZSxcbiAgICAgICAgICBjbGFzczogbXNnLmNsYXNzLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IG1zZy5saW5lTnVtYmVyLFxuICAgICAgICAgIHNlcnZlck5hbWU6IG1zZy5zZXJ2ZXJOYW1lLFxuICAgICAgICAgIHByb2NOYW1lOiBtc2cucHJvY05hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgdGhpcy5wYXJlbnQuYWNxdWlyZSh0aGlzLCAoZXJyLCBjb25uZWN0aW9uLCBjb25maWcpID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcblxuICAgICAgICBkZWJ1ZygnY29ubmVjdGlvbiglZCk6IGJvcnJvd2VkIHRvIHJlcXVlc3QgIyVkJywgSURTLmdldChjb25uZWN0aW9uKSwgSURTLmdldCh0aGlzKSlcblxuICAgICAgICBsZXQgcm93XG5cbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsZWQpIHtcbiAgICAgICAgICBkZWJ1ZygncmVxdWVzdCglZCk6IGNhbmNlbGVkJywgSURTLmdldCh0aGlzKSlcbiAgICAgICAgICB0aGlzLnBhcmVudC5yZWxlYXNlKGNvbm5lY3Rpb24pXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBSZXF1ZXN0RXJyb3IoJ0NhbmNlbGVkLicsICdFQ0FOQ0VMJykpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jYW5jZWwgPSAoKSA9PiB7XG4gICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBjYW5jZWwnLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgICAgIGNvbm5lY3Rpb24uY2FuY2VsKClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGF0dGFjaCBoYW5kbGVyIHRvIGhhbmRsZSBtdWx0aXBsZSBlcnJvciBtZXNzYWdlc1xuICAgICAgICBjb25uZWN0aW9uLm9uKCdpbmZvTWVzc2FnZScsIGVycm9ySGFuZGxlcnMuaW5mb01lc3NhZ2UgPSBoYW5kbGVJbmZvKVxuICAgICAgICBjb25uZWN0aW9uLm9uKCdlcnJvck1lc3NhZ2UnLCBlcnJvckhhbmRsZXJzLmVycm9yTWVzc2FnZSA9IGhhbmRsZUVycm9yLmJpbmQobnVsbCwgZmFsc2UsIGNvbm5lY3Rpb24pKVxuICAgICAgICBjb25uZWN0aW9uLm9uKCdlcnJvcicsIGVycm9ySGFuZGxlcnMuZXJyb3IgPSBoYW5kbGVFcnJvci5iaW5kKG51bGwsIHRydWUsIGNvbm5lY3Rpb24pKVxuXG4gICAgICAgIGRlYnVnKCdyZXF1ZXN0KCVkKTogcXVlcnknLCBJRFMuZ2V0KHRoaXMpLCBjb21tYW5kKVxuXG4gICAgICAgIGNvbnN0IHJlcSA9IG5ldyB0ZHMuUmVxdWVzdChjb21tYW5kLCBlcnIgPT4ge1xuICAgICAgICAgIC8vIHRlZGlvdXMgdjE1IGhhcyBzdGFydGVkIHVzaW5nIEFnZ3JlZ2F0ZUVycm9ycyB0byB3cmFwIG11bHRpcGxlIGVycm9ycyBpbnRvIHNpbmdsZSBlcnJvciBvYmplY3RzXG4gICAgICAgICAgKGVycj8uZXJyb3JzID8gZXJyLmVycm9ycyA6IFtlcnJdKS5mb3JFYWNoKChlLCBpLCB7IGxlbmd0aCB9KSA9PiB7XG4gICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgd2UgaGFuZGxlIG5vLXNxbCBlcnJvcnMgYXMgd2VsbFxuICAgICAgICAgICAgaWYgKGUgJiYgKCFlcnJvcnMubGVuZ3RoIHx8IChlcnJvcnMubGVuZ3RoICYmIGVycm9ycy5sZW5ndGggPj0gbGVuZ3RoICYmIGUubWVzc2FnZSAhPT0gZXJyb3JzW2Vycm9ycy5sZW5ndGggLSBsZW5ndGggKyBpXS5tZXNzYWdlKSkpIHtcbiAgICAgICAgICAgICAgZSA9IG5ldyBSZXF1ZXN0RXJyb3IoZSwgJ0VSRVFVRVNUJylcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB0aGlzLmVtaXQoJ2Vycm9yJywgZSlcbiAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgLy8gcHJvY2VzcyBiYXRjaCBvdXRwdXRzXG4gICAgICAgICAgaWYgKGJhdGNoSGFzT3V0cHV0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RyZWFtKSBiYXRjaExhc3RSb3cgPSByZWNvcmRzZXRzLnBvcCgpWzBdXG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBiYXRjaExhc3RSb3cpIHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBiYXRjaExhc3RSb3dbbmFtZV1cbiAgICAgICAgICAgICAgaWYgKG5hbWUgIT09ICdfX19yZXR1cm5fX18nKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W25hbWVdID0gdmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jYW5jZWxcblxuICAgICAgICAgIGxldCBlcnJvclxuICAgICAgICAgIGlmIChlcnJvcnMubGVuZ3RoICYmICF0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgZXJyb3IgPSBlcnJvcnMucG9wKClcbiAgICAgICAgICAgIGVycm9yLnByZWNlZGluZ0Vycm9ycyA9IGVycm9yc1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaGFzUmV0dXJuZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXZlbnQgaW4gZXJyb3JIYW5kbGVycykge1xuICAgICAgICAgICAgICBjb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBlcnJvckhhbmRsZXJzW2V2ZW50XSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZShjb25uZWN0aW9uKVxuICAgICAgICAgICAgaGFzUmV0dXJuZWQgPSB0cnVlXG5cbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICBkZWJ1ZygncmVxdWVzdCglZCk6IGZhaWxlZCcsIElEUy5nZXQodGhpcyksIGVycm9yKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBjb21wbGV0ZWQnLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgbnVsbCwgb3V0cHV0LCByb3dzQWZmZWN0ZWQsIHJlY29yZHNldGNvbHVtbnMpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgcmVjb3Jkc2V0cywgb3V0cHV0LCByb3dzQWZmZWN0ZWQsIHJlY29yZHNldGNvbHVtbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMuX3NldEN1cnJlbnRSZXF1ZXN0KHJlcSlcblxuICAgICAgICByZXEub24oJ2NvbHVtbk1ldGFkYXRhJywgbWV0YWRhdGEgPT4ge1xuICAgICAgICAgIGNvbHVtbnMgPSBjcmVhdGVDb2x1bW5zKG1ldGFkYXRhLCB0aGlzLmFycmF5Um93TW9kZSlcblxuICAgICAgICAgIGlzQ2h1bmtlZFJlY29yZHNldCA9IGZhbHNlXG4gICAgICAgICAgaWYgKG1ldGFkYXRhLmxlbmd0aCA9PT0gMSAmJiAobWV0YWRhdGFbMF0uY29sTmFtZSA9PT0gSlNPTl9DT0xVTU5fSUQgfHwgbWV0YWRhdGFbMF0uY29sTmFtZSA9PT0gWE1MX0NPTFVNTl9JRCkpIHtcbiAgICAgICAgICAgIGlzQ2h1bmtlZFJlY29yZHNldCA9IHRydWVcbiAgICAgICAgICAgIGNodW5rc0J1ZmZlciA9IFtdXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNCYXRjaCkge1xuICAgICAgICAgICAgICAvLyBkb24ndCBzdHJlYW0gcmVjb3Jkc2V0IHdpdGggb3V0cHV0IHZhbHVlcyBpbiBiYXRjaGVzXG4gICAgICAgICAgICAgIGlmICghY29sdW1ucy5fX19yZXR1cm5fX18pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3JlY29yZHNldCcsIGNvbHVtbnMpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuZW1pdCgncmVjb3Jkc2V0JywgY29sdW1ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlKSByZWNvcmRzZXRjb2x1bW5zLnB1c2goY29sdW1ucylcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBkb25lSGFuZGxlciA9IChyb3dDb3VudCwgbW9yZSkgPT4ge1xuICAgICAgICAgIGlmIChyb3dDb3VudCAhPSBudWxsKSB7XG4gICAgICAgICAgICByb3dzQWZmZWN0ZWQucHVzaChyb3dDb3VudClcbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Jvd3NhZmZlY3RlZCcsIHJvd0NvdW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBldmVuIHdoZW4gc2VsZWN0IG9ubHkgc2V0IHZhcmlhYmxlcyBzbyB3ZSBzaG91bGQgc2tpcCBhZGRpbmcgYSBuZXcgcmVjb3Jkc2V0XG4gICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNvbHVtbnMpLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgICAgICAgICBpZiAoaXNDaHVua2VkUmVjb3Jkc2V0KSB7XG4gICAgICAgICAgICBjb25zdCBjb25jYXRlbmF0ZWRDaHVua3MgPSBjaHVua3NCdWZmZXIuam9pbignJylcbiAgICAgICAgICAgIGlmIChjb2x1bW5zW0pTT05fQ09MVU1OX0lEXSAmJiBjb25maWcucGFyc2VKU09OID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmNhdGVuYXRlZENodW5rcyA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgIHJvdyA9IG51bGxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcm93ID0gSlNPTi5wYXJzZShjb25jYXRlbmF0ZWRDaHVua3MpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIHJvdyA9IG51bGxcbiAgICAgICAgICAgICAgICBjb25zdCBleDIgPSBuZXcgUmVxdWVzdEVycm9yKG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIGluY29taW5nIEpTT04uICR7ZXgubWVzc2FnZX1gKSwgJ0VKU09OJylcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkgdGhpcy5lbWl0KCdlcnJvcicsIGV4MilcblxuICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgY29sbGVjdCBlcnJvcnMgZXZlbiBpbiBzdHJlYW0gbW9kZVxuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGV4MilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcm93ID0ge31cbiAgICAgICAgICAgICAgcm93W09iamVjdC5rZXlzKGNvbHVtbnMpWzBdXSA9IGNvbmNhdGVuYXRlZENodW5rc1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaHVua3NCdWZmZXIgPSBudWxsXG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3JvdycsIHJvdylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlY29yZHNldC5wdXNoKHJvdylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICAvLyBhbGwgcm93cyBvZiBjdXJyZW50IHJlY29yZHNldCBsb2FkZWRcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWNvcmRzZXQsICdjb2x1bW5zJywge1xuICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICB2YWx1ZTogY29sdW1uc1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlY29yZHNldCwgJ3RvVGFibGUnLCB7XG4gICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgIHZhbHVlIChuYW1lKSB7IHJldHVybiBUYWJsZS5mcm9tUmVjb3Jkc2V0KHRoaXMsIG5hbWUpIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJlY29yZHNldHMucHVzaChyZWNvcmRzZXQpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVjb3Jkc2V0ID0gW11cbiAgICAgICAgICBjb2x1bW5zID0ge31cbiAgICAgICAgfVxuXG4gICAgICAgIHJlcS5vbignZG9uZUluUHJvYycsIGRvbmVIYW5kbGVyKSAvLyBkb25lSW5Qcm9jIGhhbmRsZXJzIGFyZSB1c2VkIGluIGJvdGggcXVlcmllcyBhbmQgYmF0Y2hlc1xuICAgICAgICByZXEub24oJ2RvbmUnLCBkb25lSGFuZGxlcikgLy8gZG9uZSBoYW5kbGVycyBhcmUgdXNlZCBpbiBiYXRjaGVzXG5cbiAgICAgICAgcmVxLm9uKCdyZXR1cm5WYWx1ZScsIChwYXJhbWV0ZXJOYW1lLCB2YWx1ZSwgbWV0YWRhdGEpID0+IHtcbiAgICAgICAgICBvdXRwdXRbcGFyYW1ldGVyTmFtZV0gPSB2YWx1ZVxuICAgICAgICB9KVxuXG4gICAgICAgIHJlcS5vbigncm93JywgY29sdW1ucyA9PiB7XG4gICAgICAgICAgaWYgKCFyZWNvcmRzZXQpIHJlY29yZHNldCA9IFtdXG5cbiAgICAgICAgICBpZiAoaXNDaHVua2VkUmVjb3Jkc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gY2h1bmtzQnVmZmVyLnB1c2goY29sdW1uc1swXS52YWx1ZSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5hcnJheVJvd01vZGUpIHtcbiAgICAgICAgICAgIHJvdyA9IFtdXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJvdyA9IHt9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgY29sIG9mIGNvbHVtbnMpIHtcbiAgICAgICAgICAgIGNvbC52YWx1ZSA9IHZhbHVlQ29ycmVjdGlvbihjb2wudmFsdWUsIGNvbC5tZXRhZGF0YSlcblxuICAgICAgICAgICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlKSB7XG4gICAgICAgICAgICAgIHJvdy5wdXNoKGNvbC52YWx1ZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IGV4aSA9IHJvd1tjb2wubWV0YWRhdGEuY29sTmFtZV1cbiAgICAgICAgICAgICAgaWYgKGV4aSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4aSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICBleGkucHVzaChjb2wudmFsdWUpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJvd1tjb2wubWV0YWRhdGEuY29sTmFtZV0gPSBbZXhpLCBjb2wudmFsdWVdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJvd1tjb2wubWV0YWRhdGEuY29sTmFtZV0gPSBjb2wudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzQmF0Y2gpIHtcbiAgICAgICAgICAgICAgLy8gZG9udCBzdHJlYW0gcmVjb3Jkc2V0IHdpdGggb3V0cHV0IHZhbHVlcyBpbiBiYXRjaGVzXG4gICAgICAgICAgICAgIGlmIChyb3cuX19fcmV0dXJuX19fKSB7XG4gICAgICAgICAgICAgICAgYmF0Y2hMYXN0Um93ID0gcm93XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdyb3cnLCByb3cpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuZW1pdCgncm93Jywgcm93KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWNvcmRzZXQucHVzaChyb3cpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICh0aGlzLl9pc0JhdGNoKSB7XG4gICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMucGFyYW1ldGVycykubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgIGlmICghb2JqZWN0SGFzUHJvcGVydHkodGhpcy5wYXJhbWV0ZXJzLCBuYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLnBhcmFtZXRlcnNbbmFtZV1cblxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHBhcmFtLnZhbHVlID0gZ2V0VGVkaW91c1R5cGUocGFyYW0udHlwZSkudmFsaWRhdGUocGFyYW0udmFsdWUsIHRoaXMucGFyZW50LmNvbGxhdGlvbilcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGUubWVzc2FnZSA9IGBWYWxpZGF0aW9uIGZhaWxlZCBmb3IgcGFyYW1ldGVyICcke25hbWV9Jy4gJHtlLm1lc3NhZ2V9YFxuICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBSZXF1ZXN0RXJyb3IoZSwgJ0VQQVJBTScpXG5cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZWxlYXNlKGNvbm5lY3Rpb24pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBbXVxuICAgICAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMucGFyYW1ldGVycykge1xuICAgICAgICAgICAgICBpZiAoIW9iamVjdEhhc1Byb3BlcnR5KHRoaXMucGFyYW1ldGVycywgbmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gdGhpcy5wYXJhbWV0ZXJzW25hbWVdXG4gICAgICAgICAgICAgIGRlY2xhcmF0aW9ucy5wdXNoKGBAJHtuYW1lfSAke2RlY2xhcmUocGFyYW0udHlwZSwgcGFyYW0pfWApXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGFzc2lnbnMgPSBbXVxuICAgICAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMucGFyYW1ldGVycykge1xuICAgICAgICAgICAgICBpZiAoIW9iamVjdEhhc1Byb3BlcnR5KHRoaXMucGFyYW1ldGVycywgbmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gdGhpcy5wYXJhbWV0ZXJzW25hbWVdXG4gICAgICAgICAgICAgIGFzc2lnbnMucHVzaChgQCR7bmFtZX0gPSAke2Nhc3QocGFyYW0udmFsdWUsIHBhcmFtLnR5cGUsIHBhcmFtKX1gKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RzID0gW11cbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB0aGlzLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgaWYgKCFvYmplY3RIYXNQcm9wZXJ0eSh0aGlzLnBhcmFtZXRlcnMsIG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMucGFyYW1ldGVyc1tuYW1lXVxuICAgICAgICAgICAgICBpZiAocGFyYW0uaW8gPT09IDIpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RzLnB1c2goYEAke25hbWV9IGFzIFske25hbWV9XWApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYmF0Y2hIYXNPdXRwdXQgPSBzZWxlY3RzLmxlbmd0aCA+IDBcblxuICAgICAgICAgICAgcmVxLnNxbFRleHRPclByb2NlZHVyZSA9IGBkZWNsYXJlICR7ZGVjbGFyYXRpb25zLmpvaW4oJywgJyl9O3NlbGVjdCAke2Fzc2lnbnMuam9pbignLCAnKX07JHtyZXEuc3FsVGV4dE9yUHJvY2VkdXJlfTske2JhdGNoSGFzT3V0cHV0ID8gKGBzZWxlY3QgMSBhcyBbX19fcmV0dXJuX19fXSwgJHtzZWxlY3RzLmpvaW4oJywgJyl9YCkgOiAnJ31gXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB0aGlzLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmICghb2JqZWN0SGFzUHJvcGVydHkodGhpcy5wYXJhbWV0ZXJzLCBuYW1lKSkge1xuICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLnBhcmFtZXRlcnNbbmFtZV1cbiAgICAgICAgICAgIGlmIChwYXJhbS5pbyA9PT0gMSkge1xuICAgICAgICAgICAgICByZXEuYWRkUGFyYW1ldGVyKHBhcmFtLm5hbWUsIGdldFRlZGlvdXNUeXBlKHBhcmFtLnR5cGUpLCBwYXJhbWV0ZXJDb3JyZWN0aW9uKHBhcmFtLnZhbHVlKSwgeyBsZW5ndGg6IHBhcmFtLmxlbmd0aCwgc2NhbGU6IHBhcmFtLnNjYWxlLCBwcmVjaXNpb246IHBhcmFtLnByZWNpc2lvbiB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVxLmFkZE91dHB1dFBhcmFtZXRlcihwYXJhbS5uYW1lLCBnZXRUZWRpb3VzVHlwZShwYXJhbS50eXBlKSwgcGFyYW1ldGVyQ29ycmVjdGlvbihwYXJhbS52YWx1ZSksIHsgbGVuZ3RoOiBwYXJhbS5sZW5ndGgsIHNjYWxlOiBwYXJhbS5zY2FsZSwgcHJlY2lzaW9uOiBwYXJhbS5wcmVjaXNpb24gfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbm5lY3Rpb25bdGhpcy5faXNCYXRjaCA/ICdleGVjU3FsQmF0Y2gnIDogJ2V4ZWNTcWwnXShyZXEpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaGFuZGxlRXJyb3IodHJ1ZSwgY29ubmVjdGlvbiwgZXJyb3IpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qXG4gIEV4ZWN1dGUgc3RvcmVkIHByb2NlZHVyZSB3aXRoIHNwZWNpZmllZCBwYXJhbWV0ZXJzLlxuICAqL1xuXG4gIF9leGVjdXRlIChwcm9jZWR1cmUsIGNhbGxiYWNrKSB7XG4gICAgc3VwZXIuX2V4ZWN1dGUocHJvY2VkdXJlLCBlcnIgPT4ge1xuICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcblxuICAgICAgY29uc3QgcmVjb3Jkc2V0cyA9IFtdXG4gICAgICBjb25zdCByZWNvcmRzZXRjb2x1bW5zID0gW11cbiAgICAgIGNvbnN0IGVycm9ycyA9IFtdXG4gICAgICBjb25zdCBlcnJvckhhbmRsZXJzID0ge31cbiAgICAgIGNvbnN0IG91dHB1dCA9IHt9XG4gICAgICBjb25zdCByb3dzQWZmZWN0ZWQgPSBbXVxuXG4gICAgICBsZXQgY29sdW1ucyA9IHt9XG4gICAgICBsZXQgcmVjb3Jkc2V0ID0gW11cbiAgICAgIGxldCByZXR1cm5WYWx1ZSA9IDBcbiAgICAgIGxldCBpc0NodW5rZWRSZWNvcmRzZXQgPSBmYWxzZVxuICAgICAgbGV0IGNodW5rc0J1ZmZlciA9IG51bGxcbiAgICAgIGxldCBoYXNSZXR1cm5lZCA9IGZhbHNlXG5cbiAgICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGRvUmV0dXJuLCBjb25uZWN0aW9uLCBpbmZvKSA9PiB7XG4gICAgICAgIGxldCBlcnIgPSBuZXcgRXJyb3IoaW5mby5tZXNzYWdlKVxuICAgICAgICBlcnIuaW5mbyA9IGluZm9cbiAgICAgICAgZXJyID0gbmV3IFJlcXVlc3RFcnJvcihlcnIsICdFUkVRVUVTVCcpXG5cbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZG9SZXR1cm4gJiYgIWhhc1JldHVybmVkKSB7XG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IGluIGVycm9ySGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBlcnJvckhhbmRsZXJzW2V2ZW50XSlcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbGVhc2UoY29ubmVjdGlvbilcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaGFzUmV0dXJuZWQgPSB0cnVlXG4gICAgICAgICAgICBjYWxsYmFjayhlcnIpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2UgbXVzdCBjb2xsZWN0IGVycm9ycyBldmVuIGluIHN0cmVhbSBtb2RlXG4gICAgICAgIGVycm9ycy5wdXNoKGVycilcbiAgICAgIH1cblxuICAgICAgY29uc3QgaGFuZGxlSW5mbyA9IG1zZyA9PiB7XG4gICAgICAgIHRoaXMuZW1pdCgnaW5mbycsIHtcbiAgICAgICAgICBtZXNzYWdlOiBtc2cubWVzc2FnZSxcbiAgICAgICAgICBudW1iZXI6IG1zZy5udW1iZXIsXG4gICAgICAgICAgc3RhdGU6IG1zZy5zdGF0ZSxcbiAgICAgICAgICBjbGFzczogbXNnLmNsYXNzLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IG1zZy5saW5lTnVtYmVyLFxuICAgICAgICAgIHNlcnZlck5hbWU6IG1zZy5zZXJ2ZXJOYW1lLFxuICAgICAgICAgIHByb2NOYW1lOiBtc2cucHJvY05hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgdGhpcy5wYXJlbnQuYWNxdWlyZSh0aGlzLCAoZXJyLCBjb25uZWN0aW9uLCBjb25maWcpID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcblxuICAgICAgICBkZWJ1ZygnY29ubmVjdGlvbiglZCk6IGJvcnJvd2VkIHRvIHJlcXVlc3QgIyVkJywgSURTLmdldChjb25uZWN0aW9uKSwgSURTLmdldCh0aGlzKSlcblxuICAgICAgICBsZXQgcm93XG5cbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsZWQpIHtcbiAgICAgICAgICBkZWJ1ZygncmVxdWVzdCglZCk6IGNhbmNlbGVkJywgSURTLmdldCh0aGlzKSlcbiAgICAgICAgICB0aGlzLnBhcmVudC5yZWxlYXNlKGNvbm5lY3Rpb24pXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBSZXF1ZXN0RXJyb3IoJ0NhbmNlbGVkLicsICdFQ0FOQ0VMJykpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jYW5jZWwgPSAoKSA9PiB7XG4gICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBjYW5jZWwnLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgICAgIGNvbm5lY3Rpb24uY2FuY2VsKClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGF0dGFjaCBoYW5kbGVyIHRvIGhhbmRsZSBtdWx0aXBsZSBlcnJvciBtZXNzYWdlc1xuICAgICAgICBjb25uZWN0aW9uLm9uKCdpbmZvTWVzc2FnZScsIGVycm9ySGFuZGxlcnMuaW5mb01lc3NhZ2UgPSBoYW5kbGVJbmZvKVxuICAgICAgICBjb25uZWN0aW9uLm9uKCdlcnJvck1lc3NhZ2UnLCBlcnJvckhhbmRsZXJzLmVycm9yTWVzc2FnZSA9IGhhbmRsZUVycm9yLmJpbmQobnVsbCwgZmFsc2UsIGNvbm5lY3Rpb24pKVxuICAgICAgICBjb25uZWN0aW9uLm9uKCdlcnJvcicsIGVycm9ySGFuZGxlcnMuZXJyb3IgPSBoYW5kbGVFcnJvci5iaW5kKG51bGwsIHRydWUsIGNvbm5lY3Rpb24pKVxuXG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKSB7XG4gICAgICAgICAgLy8gbG9nIHN0b3JlZCBwcm9jZWR1cmUgZXhlY3V0aW9ucyBhbmQgcHJvdmlkZWQgcGFyYW1ldGVyc1xuICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1ldGVycykubWFwKGsgPT4gdGhpcy5wYXJhbWV0ZXJzW2tdKVxuICAgICAgICAgIC8vIGN1dCBsb25nIHN0cmluZyBwYXJhbWV0ZXJzIHNob3J0IHRvIGtlZXAgbG9nIHNvbWV3aGF0IGNsZWFuXG4gICAgICAgICAgY29uc3QgbG9nVmFsdWUgPSBzID0+IHR5cGVvZiBzID09PSAnc3RyaW5nJyAmJiBzLmxlbmd0aCA+IDUwID8gcy5zdWJzdHJpbmcoMCwgNDcpICsgJy4uLicgOiBzXG4gICAgICAgICAgLy8gZm9ybWF0IHBhcmFtZXRlciBuYW1lcyBhcyAnbXlfcGFyYW1ldGVyIFtzcWwuSW50XSdcbiAgICAgICAgICBjb25zdCBsb2dOYW1lID0gcGFyYW0gPT4gcGFyYW0ubmFtZSArICcgW3NxbC4nICsgcGFyYW0udHlwZS5uYW1lICsgJ10nXG4gICAgICAgICAgY29uc3QgbG9nUGFyYW1zID0ge31cbiAgICAgICAgICBwYXJhbXMuZm9yRWFjaChwID0+IHsgbG9nUGFyYW1zW2xvZ05hbWUocCldID0gbG9nVmFsdWUocC52YWx1ZSkgfSlcbiAgICAgICAgICBkZWJ1ZygncmVxdWVzdCglZCk6IGV4ZWN1dGUgJXMgJU8nLCBJRFMuZ2V0KHRoaXMpLCBwcm9jZWR1cmUsIGxvZ1BhcmFtcylcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlcSA9IG5ldyB0ZHMuUmVxdWVzdChwcm9jZWR1cmUsIGVyciA9PiB7XG4gICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIHdlIGhhbmRsZSBuby1zcWwgZXJyb3JzIGFzIHdlbGxcbiAgICAgICAgICBpZiAoZXJyICYmICghZXJyb3JzLmxlbmd0aCB8fCAoZXJyb3JzLmxlbmd0aCAmJiBlcnIubWVzc2FnZSAhPT0gZXJyb3JzW2Vycm9ycy5sZW5ndGggLSAxXS5tZXNzYWdlKSkpIHtcbiAgICAgICAgICAgIGVyciA9IG5ldyBSZXF1ZXN0RXJyb3IoZXJyLCAnRVJFUVVFU1QnKVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICAgICAgZXJyb3JzLnB1c2goZXJyKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jYW5jZWxcblxuICAgICAgICAgIGxldCBlcnJvclxuICAgICAgICAgIGlmIChlcnJvcnMubGVuZ3RoICYmICF0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgZXJyb3IgPSBlcnJvcnMucG9wKClcbiAgICAgICAgICAgIGVycm9yLnByZWNlZGluZ0Vycm9ycyA9IGVycm9yc1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaGFzUmV0dXJuZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXZlbnQgaW4gZXJyb3JIYW5kbGVycykge1xuICAgICAgICAgICAgICBjb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBlcnJvckhhbmRsZXJzW2V2ZW50XSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZShjb25uZWN0aW9uKVxuICAgICAgICAgICAgaGFzUmV0dXJuZWQgPSB0cnVlXG5cbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICBkZWJ1ZygncmVxdWVzdCglZCk6IGZhaWxlZCcsIElEUy5nZXQodGhpcyksIGVycm9yKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBjb21wbGV0ZScsIElEUy5nZXQodGhpcykpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBudWxsLCBvdXRwdXQsIHJldHVyblZhbHVlLCByb3dzQWZmZWN0ZWQsIHJlY29yZHNldGNvbHVtbnMpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgcmVjb3Jkc2V0cywgb3V0cHV0LCByZXR1cm5WYWx1ZSwgcm93c0FmZmVjdGVkLCByZWNvcmRzZXRjb2x1bW5zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLl9zZXRDdXJyZW50UmVxdWVzdChyZXEpXG5cbiAgICAgICAgcmVxLm9uKCdjb2x1bW5NZXRhZGF0YScsIG1ldGFkYXRhID0+IHtcbiAgICAgICAgICBjb2x1bW5zID0gY3JlYXRlQ29sdW1ucyhtZXRhZGF0YSwgdGhpcy5hcnJheVJvd01vZGUpXG5cbiAgICAgICAgICBpc0NodW5rZWRSZWNvcmRzZXQgPSBmYWxzZVxuICAgICAgICAgIGlmICgobWV0YWRhdGEubGVuZ3RoID09PSAxKSAmJiAobWV0YWRhdGFbMF0uY29sTmFtZSA9PT0gSlNPTl9DT0xVTU5fSUQgfHwgbWV0YWRhdGFbMF0uY29sTmFtZSA9PT0gWE1MX0NPTFVNTl9JRCkpIHtcbiAgICAgICAgICAgIGlzQ2h1bmtlZFJlY29yZHNldCA9IHRydWVcbiAgICAgICAgICAgIGNodW5rc0J1ZmZlciA9IFtdXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB0aGlzLmVtaXQoJ3JlY29yZHNldCcsIGNvbHVtbnMpXG4gICAgICAgICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlKSByZWNvcmRzZXRjb2x1bW5zLnB1c2goY29sdW1ucylcbiAgICAgICAgfSlcblxuICAgICAgICByZXEub24oJ3JvdycsIGNvbHVtbnMgPT4ge1xuICAgICAgICAgIGlmICghcmVjb3Jkc2V0KSByZWNvcmRzZXQgPSBbXVxuXG4gICAgICAgICAgaWYgKGlzQ2h1bmtlZFJlY29yZHNldCkge1xuICAgICAgICAgICAgcmV0dXJuIGNodW5rc0J1ZmZlci5wdXNoKGNvbHVtbnNbMF0udmFsdWUpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlKSB7XG4gICAgICAgICAgICByb3cgPSBbXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByb3cgPSB7fVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IGNvbCBvZiBjb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2wudmFsdWUgPSB2YWx1ZUNvcnJlY3Rpb24oY29sLnZhbHVlLCBjb2wubWV0YWRhdGEpXG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSkge1xuICAgICAgICAgICAgICByb3cucHVzaChjb2wudmFsdWUpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBleGkgPSByb3dbY29sLm1ldGFkYXRhLmNvbE5hbWVdXG4gICAgICAgICAgICAgIGlmIChleGkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChleGkgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgICAgZXhpLnB1c2goY29sLnZhbHVlKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByb3dbY29sLm1ldGFkYXRhLmNvbE5hbWVdID0gW2V4aSwgY29sLnZhbHVlXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByb3dbY29sLm1ldGFkYXRhLmNvbE5hbWVdID0gY29sLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgncm93Jywgcm93KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWNvcmRzZXQucHVzaChyb3cpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIHJlcS5vbignZG9uZUluUHJvYycsIChyb3dDb3VudCwgbW9yZSkgPT4ge1xuICAgICAgICAgIGlmIChyb3dDb3VudCAhPSBudWxsKSB7XG4gICAgICAgICAgICByb3dzQWZmZWN0ZWQucHVzaChyb3dDb3VudClcbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Jvd3NhZmZlY3RlZCcsIHJvd0NvdW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGZpbHRlciBlbXB0eSByZWNvcmRzZXRzIHdoZW4gTk9DT1VOVCBpcyBPRkZcbiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY29sdW1ucykubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICAgICAgICAgIGlmIChpc0NodW5rZWRSZWNvcmRzZXQpIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW5zW0pTT05fQ09MVU1OX0lEXSAmJiBjb25maWcucGFyc2VKU09OID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNodW5rc0J1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIHJvdyA9IG51bGxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcm93ID0gSlNPTi5wYXJzZShjaHVua3NCdWZmZXIuam9pbignJykpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIHJvdyA9IG51bGxcbiAgICAgICAgICAgICAgICBjb25zdCBleDIgPSBuZXcgUmVxdWVzdEVycm9yKG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIGluY29taW5nIEpTT04uICR7ZXgubWVzc2FnZX1gKSwgJ0VKU09OJylcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkgdGhpcy5lbWl0KCdlcnJvcicsIGV4MilcblxuICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgY29sbGVjdCBlcnJvcnMgZXZlbiBpbiBzdHJlYW0gbW9kZVxuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGV4MilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcm93ID0ge31cbiAgICAgICAgICAgICAgcm93W09iamVjdC5rZXlzKGNvbHVtbnMpWzBdXSA9IGNodW5rc0J1ZmZlci5qb2luKCcnKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaHVua3NCdWZmZXIgPSBudWxsXG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3JvdycsIHJvdylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlY29yZHNldC5wdXNoKHJvdylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICAvLyBhbGwgcm93cyBvZiBjdXJyZW50IHJlY29yZHNldCBsb2FkZWRcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWNvcmRzZXQsICdjb2x1bW5zJywge1xuICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICB2YWx1ZTogY29sdW1uc1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlY29yZHNldCwgJ3RvVGFibGUnLCB7XG4gICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgIHZhbHVlIChuYW1lKSB7IHJldHVybiBUYWJsZS5mcm9tUmVjb3Jkc2V0KHRoaXMsIG5hbWUpIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJlY29yZHNldHMucHVzaChyZWNvcmRzZXQpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVjb3Jkc2V0ID0gW11cbiAgICAgICAgICBjb2x1bW5zID0ge31cbiAgICAgICAgfSlcblxuICAgICAgICByZXEub24oJ2RvbmVQcm9jJywgKHJvd0NvdW50LCBtb3JlLCByZXR1cm5TdGF0dXMpID0+IHtcbiAgICAgICAgICByZXR1cm5WYWx1ZSA9IHJldHVyblN0YXR1c1xuICAgICAgICB9KVxuXG4gICAgICAgIHJlcS5vbigncmV0dXJuVmFsdWUnLCAocGFyYW1ldGVyTmFtZSwgdmFsdWUsIG1ldGFkYXRhKSA9PiB7XG4gICAgICAgICAgb3V0cHV0W3BhcmFtZXRlck5hbWVdID0gdmFsdWVcbiAgICAgICAgfSlcblxuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgaWYgKCFvYmplY3RIYXNQcm9wZXJ0eSh0aGlzLnBhcmFtZXRlcnMsIG5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMucGFyYW1ldGVyc1tuYW1lXVxuICAgICAgICAgIGlmIChwYXJhbS5pbyA9PT0gMSkge1xuICAgICAgICAgICAgcmVxLmFkZFBhcmFtZXRlcihwYXJhbS5uYW1lLCBnZXRUZWRpb3VzVHlwZShwYXJhbS50eXBlKSwgcGFyYW1ldGVyQ29ycmVjdGlvbihwYXJhbS52YWx1ZSksIHsgbGVuZ3RoOiBwYXJhbS5sZW5ndGgsIHNjYWxlOiBwYXJhbS5zY2FsZSwgcHJlY2lzaW9uOiBwYXJhbS5wcmVjaXNpb24gfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVxLmFkZE91dHB1dFBhcmFtZXRlcihwYXJhbS5uYW1lLCBnZXRUZWRpb3VzVHlwZShwYXJhbS50eXBlKSwgcGFyYW1ldGVyQ29ycmVjdGlvbihwYXJhbS52YWx1ZSksIHsgbGVuZ3RoOiBwYXJhbS5sZW5ndGgsIHNjYWxlOiBwYXJhbS5zY2FsZSwgcHJlY2lzaW9uOiBwYXJhbS5wcmVjaXNpb24gfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25uZWN0aW9uLmNhbGxQcm9jZWR1cmUocmVxKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgX3BhdXNlICgpIHtcbiAgICBzdXBlci5fcGF1c2UoKVxuICAgIGlmICh0aGlzLl9jdXJyZW50UmVxdWVzdCkge1xuICAgICAgdGhpcy5fY3VycmVudFJlcXVlc3QucGF1c2UoKVxuICAgIH1cbiAgfVxuXG4gIF9yZXN1bWUgKCkge1xuICAgIHN1cGVyLl9yZXN1bWUoKVxuICAgIGlmICh0aGlzLl9jdXJyZW50UmVxdWVzdCkge1xuICAgICAgdGhpcy5fY3VycmVudFJlcXVlc3QucmVzdW1lKClcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZXF1ZXN0XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/tedious/request.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/tedious/transaction.js":
/*!********************************************************!*\
  !*** ../node_modules/mssql/lib/tedious/transaction.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/../node_modules/debug/src/index.js\")('mssql:tedi')\nconst BaseTransaction = __webpack_require__(/*! ../base/transaction */ \"(rsc)/../node_modules/mssql/lib/base/transaction.js\")\nconst { IDS } = __webpack_require__(/*! ../utils */ \"(rsc)/../node_modules/mssql/lib/utils.js\")\nconst TransactionError = __webpack_require__(/*! ../error/transaction-error */ \"(rsc)/../node_modules/mssql/lib/error/transaction-error.js\")\n\nclass Transaction extends BaseTransaction {\n  constructor (parent) {\n    super(parent)\n\n    this._abort = () => {\n      if (!this._rollbackRequested) {\n        // transaction interrupted because of XACT_ABORT\n\n        const pc = this._acquiredConnection\n\n        // defer releasing so connection can switch from SentClientRequest to LoggedIn state\n        setImmediate(this.parent.release.bind(this.parent), pc)\n\n        this._acquiredConnection.removeListener('rollbackTransaction', this._abort)\n        this._acquiredConnection = null\n        this._acquiredConfig = null\n        this._aborted = true\n\n        this.emit('rollback', true)\n      }\n    }\n  }\n\n  _begin (isolationLevel, callback) {\n    super._begin(isolationLevel, err => {\n      if (err) return callback(err)\n\n      debug('transaction(%d): begin', IDS.get(this))\n\n      this.parent.acquire(this, (err, connection, config) => {\n        if (err) return callback(err)\n\n        this._acquiredConnection = connection\n        this._acquiredConnection.on('rollbackTransaction', this._abort)\n        this._acquiredConfig = config\n\n        connection.beginTransaction(err => {\n          if (err) err = new TransactionError(err)\n\n          debug('transaction(%d): begun', IDS.get(this))\n\n          callback(err)\n        }, this.name, this.isolationLevel)\n      })\n    })\n  }\n\n  _commit (callback) {\n    super._commit(err => {\n      if (err) return callback(err)\n\n      debug('transaction(%d): commit', IDS.get(this))\n\n      this._acquiredConnection.commitTransaction(err => {\n        if (err) err = new TransactionError(err)\n\n        this._acquiredConnection.removeListener('rollbackTransaction', this._abort)\n        this.parent.release(this._acquiredConnection)\n        this._acquiredConnection = null\n        this._acquiredConfig = null\n\n        if (!err) debug('transaction(%d): commited', IDS.get(this))\n\n        callback(err)\n      })\n    })\n  }\n\n  _rollback (callback) {\n    super._rollback(err => {\n      if (err) return callback(err)\n\n      debug('transaction(%d): rollback', IDS.get(this))\n\n      this._acquiredConnection.rollbackTransaction(err => {\n        if (err) err = new TransactionError(err)\n\n        this._acquiredConnection.removeListener('rollbackTransaction', this._abort)\n        this.parent.release(this._acquiredConnection)\n        this._acquiredConnection = null\n        this._acquiredConfig = null\n\n        if (!err) debug('transaction(%d): rolled back', IDS.get(this))\n\n        callback(err)\n      })\n    })\n  }\n}\n\nmodule.exports = Transaction\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi90ZWRpb3VzL3RyYW5zYWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLGNBQWMsbUJBQU8sQ0FBQyx1REFBTztBQUM3Qix3QkFBd0IsbUJBQU8sQ0FBQyxnRkFBcUI7QUFDckQsUUFBUSxNQUFNLEVBQUUsbUJBQU8sQ0FBQywwREFBVTtBQUNsQyx5QkFBeUIsbUJBQU8sQ0FBQyw4RkFBNEI7O0FBRTdEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3RlZGlvdXMvdHJhbnNhY3Rpb24uanM/NGVjYyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdtc3NxbDp0ZWRpJylcbmNvbnN0IEJhc2VUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4uL2Jhc2UvdHJhbnNhY3Rpb24nKVxuY29uc3QgeyBJRFMgfSA9IHJlcXVpcmUoJy4uL3V0aWxzJylcbmNvbnN0IFRyYW5zYWN0aW9uRXJyb3IgPSByZXF1aXJlKCcuLi9lcnJvci90cmFuc2FjdGlvbi1lcnJvcicpXG5cbmNsYXNzIFRyYW5zYWN0aW9uIGV4dGVuZHMgQmFzZVRyYW5zYWN0aW9uIHtcbiAgY29uc3RydWN0b3IgKHBhcmVudCkge1xuICAgIHN1cGVyKHBhcmVudClcblxuICAgIHRoaXMuX2Fib3J0ID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9yb2xsYmFja1JlcXVlc3RlZCkge1xuICAgICAgICAvLyB0cmFuc2FjdGlvbiBpbnRlcnJ1cHRlZCBiZWNhdXNlIG9mIFhBQ1RfQUJPUlRcblxuICAgICAgICBjb25zdCBwYyA9IHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvblxuXG4gICAgICAgIC8vIGRlZmVyIHJlbGVhc2luZyBzbyBjb25uZWN0aW9uIGNhbiBzd2l0Y2ggZnJvbSBTZW50Q2xpZW50UmVxdWVzdCB0byBMb2dnZWRJbiBzdGF0ZVxuICAgICAgICBzZXRJbW1lZGlhdGUodGhpcy5wYXJlbnQucmVsZWFzZS5iaW5kKHRoaXMucGFyZW50KSwgcGMpXG5cbiAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKCdyb2xsYmFja1RyYW5zYWN0aW9uJywgdGhpcy5fYWJvcnQpXG4gICAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbiA9IG51bGxcbiAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25maWcgPSBudWxsXG4gICAgICAgIHRoaXMuX2Fib3J0ZWQgPSB0cnVlXG5cbiAgICAgICAgdGhpcy5lbWl0KCdyb2xsYmFjaycsIHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX2JlZ2luIChpc29sYXRpb25MZXZlbCwgY2FsbGJhY2spIHtcbiAgICBzdXBlci5fYmVnaW4oaXNvbGF0aW9uTGV2ZWwsIGVyciA9PiB7XG4gICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuXG4gICAgICBkZWJ1ZygndHJhbnNhY3Rpb24oJWQpOiBiZWdpbicsIElEUy5nZXQodGhpcykpXG5cbiAgICAgIHRoaXMucGFyZW50LmFjcXVpcmUodGhpcywgKGVyciwgY29ubmVjdGlvbiwgY29uZmlnKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG5cbiAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uID0gY29ubmVjdGlvblxuICAgICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24ub24oJ3JvbGxiYWNrVHJhbnNhY3Rpb24nLCB0aGlzLl9hYm9ydClcbiAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25maWcgPSBjb25maWdcblxuICAgICAgICBjb25uZWN0aW9uLmJlZ2luVHJhbnNhY3Rpb24oZXJyID0+IHtcbiAgICAgICAgICBpZiAoZXJyKSBlcnIgPSBuZXcgVHJhbnNhY3Rpb25FcnJvcihlcnIpXG5cbiAgICAgICAgICBkZWJ1ZygndHJhbnNhY3Rpb24oJWQpOiBiZWd1bicsIElEUy5nZXQodGhpcykpXG5cbiAgICAgICAgICBjYWxsYmFjayhlcnIpXG4gICAgICAgIH0sIHRoaXMubmFtZSwgdGhpcy5pc29sYXRpb25MZXZlbClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIF9jb21taXQgKGNhbGxiYWNrKSB7XG4gICAgc3VwZXIuX2NvbW1pdChlcnIgPT4ge1xuICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcblxuICAgICAgZGVidWcoJ3RyYW5zYWN0aW9uKCVkKTogY29tbWl0JywgSURTLmdldCh0aGlzKSlcblxuICAgICAgdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uLmNvbW1pdFRyYW5zYWN0aW9uKGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIpIGVyciA9IG5ldyBUcmFuc2FjdGlvbkVycm9yKGVycilcblxuICAgICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24ucmVtb3ZlTGlzdGVuZXIoJ3JvbGxiYWNrVHJhbnNhY3Rpb24nLCB0aGlzLl9hYm9ydClcbiAgICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZSh0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24pXG4gICAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbiA9IG51bGxcbiAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25maWcgPSBudWxsXG5cbiAgICAgICAgaWYgKCFlcnIpIGRlYnVnKCd0cmFuc2FjdGlvbiglZCk6IGNvbW1pdGVkJywgSURTLmdldCh0aGlzKSlcblxuICAgICAgICBjYWxsYmFjayhlcnIpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBfcm9sbGJhY2sgKGNhbGxiYWNrKSB7XG4gICAgc3VwZXIuX3JvbGxiYWNrKGVyciA9PiB7XG4gICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuXG4gICAgICBkZWJ1ZygndHJhbnNhY3Rpb24oJWQpOiByb2xsYmFjaycsIElEUy5nZXQodGhpcykpXG5cbiAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbi5yb2xsYmFja1RyYW5zYWN0aW9uKGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIpIGVyciA9IG5ldyBUcmFuc2FjdGlvbkVycm9yKGVycilcblxuICAgICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24ucmVtb3ZlTGlzdGVuZXIoJ3JvbGxiYWNrVHJhbnNhY3Rpb24nLCB0aGlzLl9hYm9ydClcbiAgICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZSh0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24pXG4gICAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbiA9IG51bGxcbiAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25maWcgPSBudWxsXG5cbiAgICAgICAgaWYgKCFlcnIpIGRlYnVnKCd0cmFuc2FjdGlvbiglZCk6IHJvbGxlZCBiYWNrJywgSURTLmdldCh0aGlzKSlcblxuICAgICAgICBjYWxsYmFjayhlcnIpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2FjdGlvblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/tedious/transaction.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/udt.js":
/*!****************************************!*\
  !*** ../node_modules/mssql/lib/udt.js ***!
  \****************************************/
/***/ ((module) => {

eval("\n\n/* const FIGURE = {\n  INTERIOR_RING: 0x00,\n  STROKE: 0x01,\n  EXTERIOR_RING: 0x02\n};\n\nconst FIGURE_V2 = {\n  POINT: 0x00,\n  LINE: 0x01,\n  ARC: 0x02,\n  COMPOSITE_CURVE: 0x03\n};\n\nconst SHAPE = {\n  POINT: 0x01,\n  LINESTRING: 0x02,\n  POLYGON: 0x03,\n  MULTIPOINT: 0x04,\n  MULTILINESTRING: 0x05,\n  MULTIPOLYGON: 0x06,\n  GEOMETRY_COLLECTION: 0x07\n};\n\nconst SHAPE_V2 = {\n  POINT: 0x01,\n  LINESTRING: 0x02,\n  POLYGON: 0x03,\n  MULTIPOINT: 0x04,\n  MULTILINESTRING: 0x05,\n  MULTIPOLYGON: 0x06,\n  GEOMETRY_COLLECTION: 0x07,\n  CIRCULAR_STRING: 0x08,\n  COMPOUND_CURVE: 0x09,\n  CURVE_POLYGON: 0x0A,\n  FULL_GLOBE: 0x0B\n};\n\nconst SEGMENT = {\n  LINE: 0x00,\n  ARC: 0x01,\n  FIRST_LINE: 0x02,\n  FIRST_ARC: 0x03\n}; */\n\nclass Point {\n  constructor () {\n    this.x = 0\n    this.y = 0\n    this.z = null\n    this.m = null\n  }\n}\n\nconst parsePoints = (buffer, count, isGeometryPoint) => {\n  // s2.1.5 + s2.1.6\n  // The key distinction for parsing is that a GEOGRAPHY POINT is ordered Lat (y) then Long (x),\n  // while a GEOMETRY POINT is ordered x then y.\n  // Further, there are additional range constraints on GEOGRAPHY POINT that are useful for testing that the coordinate order has not been flipped, such as that Lat must be in the range [-90, +90].\n\n  const points = []\n  if (count < 1) {\n    return points\n  }\n\n  if (isGeometryPoint) {\n    // GEOMETRY POINT (s2.1.6): x then y.\n    for (let i = 1; i <= count; i++) {\n      const point = new Point()\n      points.push(point)\n      point.x = buffer.readDoubleLE(buffer.position)\n      point.y = buffer.readDoubleLE(buffer.position + 8)\n      buffer.position += 16\n    }\n  } else {\n    // GEOGRAPHY POINT (s2.1.5): Lat (y) then Long (x).\n    for (let i = 1; i <= count; i++) {\n      const point = new Point()\n      points.push(point)\n      point.lat = buffer.readDoubleLE(buffer.position)\n      point.lng = buffer.readDoubleLE(buffer.position + 8)\n\n      // For backwards compatibility, preserve the coordinate inversion in x and y.\n      // A future breaking change likely eliminate x and y for geography points in favor of just the lat and lng fields, as they've proven marvelously confusing.\n      // See discussion at: https://github.com/tediousjs/node-mssql/pull/1282#discussion_r677769531\n      point.x = point.lat\n      point.y = point.lng\n\n      buffer.position += 16\n    }\n  }\n\n  return points\n}\n\nconst parseZ = (buffer, points) => {\n  // s2.1.1 + s.2.1.2\n\n  if (points < 1) {\n    return\n  }\n\n  points.forEach(point => {\n    point.z = buffer.readDoubleLE(buffer.position)\n    buffer.position += 8\n  })\n}\n\nconst parseM = (buffer, points) => {\n  // s2.1.1 + s.2.1.2\n\n  if (points < 1) {\n    return\n  }\n\n  points.forEach(point => {\n    point.m = buffer.readDoubleLE(buffer.position)\n    buffer.position += 8\n  })\n}\n\nconst parseFigures = (buffer, count, properties) => {\n  // s2.1.3\n\n  const figures = []\n  if (count < 1) {\n    return figures\n  }\n\n  if (properties.P) {\n    figures.push({\n      attribute: 0x01,\n      pointOffset: 0\n    })\n  } else if (properties.L) {\n    figures.push({\n      attribute: 0x01,\n      pointOffset: 0\n    })\n  } else {\n    for (let i = 1; i <= count; i++) {\n      figures.push({\n        attribute: buffer.readUInt8(buffer.position),\n        pointOffset: buffer.readInt32LE(buffer.position + 1)\n      })\n\n      buffer.position += 5\n    }\n  }\n\n  return figures\n}\n\nconst parseShapes = (buffer, count, properties) => {\n  // s2.1.4\n\n  const shapes = []\n  if (count < 1) {\n    return shapes\n  }\n\n  if (properties.P) {\n    shapes.push({\n      parentOffset: -1,\n      figureOffset: 0,\n      type: 0x01\n    })\n  } else if (properties.L) {\n    shapes.push({\n      parentOffset: -1,\n      figureOffset: 0,\n      type: 0x02\n    })\n  } else {\n    for (let i = 1; i <= count; i++) {\n      shapes.push({\n        parentOffset: buffer.readInt32LE(buffer.position),\n        figureOffset: buffer.readInt32LE(buffer.position + 4),\n        type: buffer.readUInt8(buffer.position + 8)\n      })\n\n      buffer.position += 9\n    }\n  }\n\n  return shapes\n}\n\nconst parseSegments = (buffer, count) => {\n  // s2.1.7\n\n  const segments = []\n  if (count < 1) {\n    return segments\n  }\n\n  for (let i = 1; i <= count; i++) {\n    segments.push({ type: buffer.readUInt8(buffer.position) })\n\n    buffer.position++\n  }\n\n  return segments\n}\n\nconst parseGeography = (buffer, isUsingGeometryPoints) => {\n  // s2.1.1 + s.2.1.2\n\n  const srid = buffer.readInt32LE(0)\n  if (srid === -1) {\n    return null\n  }\n\n  const value = {\n    srid,\n    version: buffer.readUInt8(4)\n  }\n\n  const flags = buffer.readUInt8(5)\n  buffer.position = 6\n\n  // console.log(\"srid\", srid)\n  // console.log(\"version\", version)\n\n  const properties = {\n    Z: (flags & (1 << 0)) > 0,\n    M: (flags & (1 << 1)) > 0,\n    V: (flags & (1 << 2)) > 0,\n    P: (flags & (1 << 3)) > 0,\n    L: (flags & (1 << 4)) > 0\n  }\n\n  if (value.version === 2) {\n    properties.H = (flags & (1 << 3)) > 0\n  }\n\n  // console.log(\"properties\", properties);\n\n  let numberOfPoints\n  if (properties.P) {\n    numberOfPoints = 1\n  } else if (properties.L) {\n    numberOfPoints = 2\n  } else {\n    numberOfPoints = buffer.readUInt32LE(buffer.position)\n    buffer.position += 4\n  }\n\n  // console.log(\"numberOfPoints\", numberOfPoints)\n\n  value.points = parsePoints(buffer, numberOfPoints, isUsingGeometryPoints)\n\n  if (properties.Z) {\n    parseZ(buffer, value.points)\n  }\n\n  if (properties.M) {\n    parseM(buffer, value.points)\n  }\n\n  // console.log(\"points\", points)\n\n  let numberOfFigures\n  if (properties.P) {\n    numberOfFigures = 1\n  } else if (properties.L) {\n    numberOfFigures = 1\n  } else {\n    numberOfFigures = buffer.readUInt32LE(buffer.position)\n    buffer.position += 4\n  }\n\n  // console.log(\"numberOfFigures\", numberOfFigures)\n\n  value.figures = parseFigures(buffer, numberOfFigures, properties)\n\n  // console.log(\"figures\", figures)\n\n  let numberOfShapes\n  if (properties.P) {\n    numberOfShapes = 1\n  } else if (properties.L) {\n    numberOfShapes = 1\n  } else {\n    numberOfShapes = buffer.readUInt32LE(buffer.position)\n    buffer.position += 4\n  }\n\n  // console.log(\"numberOfShapes\", numberOfShapes)\n\n  value.shapes = parseShapes(buffer, numberOfShapes, properties)\n\n  // console.log( \"shapes\", shapes)\n\n  if (value.version === 2 && buffer.position < buffer.length) {\n    const numberOfSegments = buffer.readUInt32LE(buffer.position)\n    buffer.position += 4\n\n    // console.log(\"numberOfSegments\", numberOfSegments)\n\n    value.segments = parseSegments(buffer, numberOfSegments)\n\n    // console.log(\"segments\", segments)\n  } else {\n    value.segments = []\n  }\n\n  return value\n}\n\nmodule.exports.PARSERS = {\n  geography (buffer) {\n    return parseGeography(buffer, /* isUsingGeometryPoints: */false)\n  },\n\n  geometry (buffer) {\n    return parseGeography(buffer, /* isUsingGeometryPoints: */true)\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi91ZHQuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsWUFBWTtBQUM5QixvQkFBb0IseUNBQXlDOztBQUU3RDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi91ZHQuanM/ODhhZiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuLyogY29uc3QgRklHVVJFID0ge1xuICBJTlRFUklPUl9SSU5HOiAweDAwLFxuICBTVFJPS0U6IDB4MDEsXG4gIEVYVEVSSU9SX1JJTkc6IDB4MDJcbn07XG5cbmNvbnN0IEZJR1VSRV9WMiA9IHtcbiAgUE9JTlQ6IDB4MDAsXG4gIExJTkU6IDB4MDEsXG4gIEFSQzogMHgwMixcbiAgQ09NUE9TSVRFX0NVUlZFOiAweDAzXG59O1xuXG5jb25zdCBTSEFQRSA9IHtcbiAgUE9JTlQ6IDB4MDEsXG4gIExJTkVTVFJJTkc6IDB4MDIsXG4gIFBPTFlHT046IDB4MDMsXG4gIE1VTFRJUE9JTlQ6IDB4MDQsXG4gIE1VTFRJTElORVNUUklORzogMHgwNSxcbiAgTVVMVElQT0xZR09OOiAweDA2LFxuICBHRU9NRVRSWV9DT0xMRUNUSU9OOiAweDA3XG59O1xuXG5jb25zdCBTSEFQRV9WMiA9IHtcbiAgUE9JTlQ6IDB4MDEsXG4gIExJTkVTVFJJTkc6IDB4MDIsXG4gIFBPTFlHT046IDB4MDMsXG4gIE1VTFRJUE9JTlQ6IDB4MDQsXG4gIE1VTFRJTElORVNUUklORzogMHgwNSxcbiAgTVVMVElQT0xZR09OOiAweDA2LFxuICBHRU9NRVRSWV9DT0xMRUNUSU9OOiAweDA3LFxuICBDSVJDVUxBUl9TVFJJTkc6IDB4MDgsXG4gIENPTVBPVU5EX0NVUlZFOiAweDA5LFxuICBDVVJWRV9QT0xZR09OOiAweDBBLFxuICBGVUxMX0dMT0JFOiAweDBCXG59O1xuXG5jb25zdCBTRUdNRU5UID0ge1xuICBMSU5FOiAweDAwLFxuICBBUkM6IDB4MDEsXG4gIEZJUlNUX0xJTkU6IDB4MDIsXG4gIEZJUlNUX0FSQzogMHgwM1xufTsgKi9cblxuY2xhc3MgUG9pbnQge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy54ID0gMFxuICAgIHRoaXMueSA9IDBcbiAgICB0aGlzLnogPSBudWxsXG4gICAgdGhpcy5tID0gbnVsbFxuICB9XG59XG5cbmNvbnN0IHBhcnNlUG9pbnRzID0gKGJ1ZmZlciwgY291bnQsIGlzR2VvbWV0cnlQb2ludCkgPT4ge1xuICAvLyBzMi4xLjUgKyBzMi4xLjZcbiAgLy8gVGhlIGtleSBkaXN0aW5jdGlvbiBmb3IgcGFyc2luZyBpcyB0aGF0IGEgR0VPR1JBUEhZIFBPSU5UIGlzIG9yZGVyZWQgTGF0ICh5KSB0aGVuIExvbmcgKHgpLFxuICAvLyB3aGlsZSBhIEdFT01FVFJZIFBPSU5UIGlzIG9yZGVyZWQgeCB0aGVuIHkuXG4gIC8vIEZ1cnRoZXIsIHRoZXJlIGFyZSBhZGRpdGlvbmFsIHJhbmdlIGNvbnN0cmFpbnRzIG9uIEdFT0dSQVBIWSBQT0lOVCB0aGF0IGFyZSB1c2VmdWwgZm9yIHRlc3RpbmcgdGhhdCB0aGUgY29vcmRpbmF0ZSBvcmRlciBoYXMgbm90IGJlZW4gZmxpcHBlZCwgc3VjaCBhcyB0aGF0IExhdCBtdXN0IGJlIGluIHRoZSByYW5nZSBbLTkwLCArOTBdLlxuXG4gIGNvbnN0IHBvaW50cyA9IFtdXG4gIGlmIChjb3VudCA8IDEpIHtcbiAgICByZXR1cm4gcG9pbnRzXG4gIH1cblxuICBpZiAoaXNHZW9tZXRyeVBvaW50KSB7XG4gICAgLy8gR0VPTUVUUlkgUE9JTlQgKHMyLjEuNik6IHggdGhlbiB5LlxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KClcbiAgICAgIHBvaW50cy5wdXNoKHBvaW50KVxuICAgICAgcG9pbnQueCA9IGJ1ZmZlci5yZWFkRG91YmxlTEUoYnVmZmVyLnBvc2l0aW9uKVxuICAgICAgcG9pbnQueSA9IGJ1ZmZlci5yZWFkRG91YmxlTEUoYnVmZmVyLnBvc2l0aW9uICsgOClcbiAgICAgIGJ1ZmZlci5wb3NpdGlvbiArPSAxNlxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBHRU9HUkFQSFkgUE9JTlQgKHMyLjEuNSk6IExhdCAoeSkgdGhlbiBMb25nICh4KS5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBwb2ludCA9IG5ldyBQb2ludCgpXG4gICAgICBwb2ludHMucHVzaChwb2ludClcbiAgICAgIHBvaW50LmxhdCA9IGJ1ZmZlci5yZWFkRG91YmxlTEUoYnVmZmVyLnBvc2l0aW9uKVxuICAgICAgcG9pbnQubG5nID0gYnVmZmVyLnJlYWREb3VibGVMRShidWZmZXIucG9zaXRpb24gKyA4KVxuXG4gICAgICAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIHByZXNlcnZlIHRoZSBjb29yZGluYXRlIGludmVyc2lvbiBpbiB4IGFuZCB5LlxuICAgICAgLy8gQSBmdXR1cmUgYnJlYWtpbmcgY2hhbmdlIGxpa2VseSBlbGltaW5hdGUgeCBhbmQgeSBmb3IgZ2VvZ3JhcGh5IHBvaW50cyBpbiBmYXZvciBvZiBqdXN0IHRoZSBsYXQgYW5kIGxuZyBmaWVsZHMsIGFzIHRoZXkndmUgcHJvdmVuIG1hcnZlbG91c2x5IGNvbmZ1c2luZy5cbiAgICAgIC8vIFNlZSBkaXNjdXNzaW9uIGF0OiBodHRwczovL2dpdGh1Yi5jb20vdGVkaW91c2pzL25vZGUtbXNzcWwvcHVsbC8xMjgyI2Rpc2N1c3Npb25fcjY3Nzc2OTUzMVxuICAgICAgcG9pbnQueCA9IHBvaW50LmxhdFxuICAgICAgcG9pbnQueSA9IHBvaW50LmxuZ1xuXG4gICAgICBidWZmZXIucG9zaXRpb24gKz0gMTZcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcG9pbnRzXG59XG5cbmNvbnN0IHBhcnNlWiA9IChidWZmZXIsIHBvaW50cykgPT4ge1xuICAvLyBzMi4xLjEgKyBzLjIuMS4yXG5cbiAgaWYgKHBvaW50cyA8IDEpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHBvaW50cy5mb3JFYWNoKHBvaW50ID0+IHtcbiAgICBwb2ludC56ID0gYnVmZmVyLnJlYWREb3VibGVMRShidWZmZXIucG9zaXRpb24pXG4gICAgYnVmZmVyLnBvc2l0aW9uICs9IDhcbiAgfSlcbn1cblxuY29uc3QgcGFyc2VNID0gKGJ1ZmZlciwgcG9pbnRzKSA9PiB7XG4gIC8vIHMyLjEuMSArIHMuMi4xLjJcblxuICBpZiAocG9pbnRzIDwgMSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgcG9pbnRzLmZvckVhY2gocG9pbnQgPT4ge1xuICAgIHBvaW50Lm0gPSBidWZmZXIucmVhZERvdWJsZUxFKGJ1ZmZlci5wb3NpdGlvbilcbiAgICBidWZmZXIucG9zaXRpb24gKz0gOFxuICB9KVxufVxuXG5jb25zdCBwYXJzZUZpZ3VyZXMgPSAoYnVmZmVyLCBjb3VudCwgcHJvcGVydGllcykgPT4ge1xuICAvLyBzMi4xLjNcblxuICBjb25zdCBmaWd1cmVzID0gW11cbiAgaWYgKGNvdW50IDwgMSkge1xuICAgIHJldHVybiBmaWd1cmVzXG4gIH1cblxuICBpZiAocHJvcGVydGllcy5QKSB7XG4gICAgZmlndXJlcy5wdXNoKHtcbiAgICAgIGF0dHJpYnV0ZTogMHgwMSxcbiAgICAgIHBvaW50T2Zmc2V0OiAwXG4gICAgfSlcbiAgfSBlbHNlIGlmIChwcm9wZXJ0aWVzLkwpIHtcbiAgICBmaWd1cmVzLnB1c2goe1xuICAgICAgYXR0cmlidXRlOiAweDAxLFxuICAgICAgcG9pbnRPZmZzZXQ6IDBcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGNvdW50OyBpKyspIHtcbiAgICAgIGZpZ3VyZXMucHVzaCh7XG4gICAgICAgIGF0dHJpYnV0ZTogYnVmZmVyLnJlYWRVSW50OChidWZmZXIucG9zaXRpb24pLFxuICAgICAgICBwb2ludE9mZnNldDogYnVmZmVyLnJlYWRJbnQzMkxFKGJ1ZmZlci5wb3NpdGlvbiArIDEpXG4gICAgICB9KVxuXG4gICAgICBidWZmZXIucG9zaXRpb24gKz0gNVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmaWd1cmVzXG59XG5cbmNvbnN0IHBhcnNlU2hhcGVzID0gKGJ1ZmZlciwgY291bnQsIHByb3BlcnRpZXMpID0+IHtcbiAgLy8gczIuMS40XG5cbiAgY29uc3Qgc2hhcGVzID0gW11cbiAgaWYgKGNvdW50IDwgMSkge1xuICAgIHJldHVybiBzaGFwZXNcbiAgfVxuXG4gIGlmIChwcm9wZXJ0aWVzLlApIHtcbiAgICBzaGFwZXMucHVzaCh7XG4gICAgICBwYXJlbnRPZmZzZXQ6IC0xLFxuICAgICAgZmlndXJlT2Zmc2V0OiAwLFxuICAgICAgdHlwZTogMHgwMVxuICAgIH0pXG4gIH0gZWxzZSBpZiAocHJvcGVydGllcy5MKSB7XG4gICAgc2hhcGVzLnB1c2goe1xuICAgICAgcGFyZW50T2Zmc2V0OiAtMSxcbiAgICAgIGZpZ3VyZU9mZnNldDogMCxcbiAgICAgIHR5cGU6IDB4MDJcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGNvdW50OyBpKyspIHtcbiAgICAgIHNoYXBlcy5wdXNoKHtcbiAgICAgICAgcGFyZW50T2Zmc2V0OiBidWZmZXIucmVhZEludDMyTEUoYnVmZmVyLnBvc2l0aW9uKSxcbiAgICAgICAgZmlndXJlT2Zmc2V0OiBidWZmZXIucmVhZEludDMyTEUoYnVmZmVyLnBvc2l0aW9uICsgNCksXG4gICAgICAgIHR5cGU6IGJ1ZmZlci5yZWFkVUludDgoYnVmZmVyLnBvc2l0aW9uICsgOClcbiAgICAgIH0pXG5cbiAgICAgIGJ1ZmZlci5wb3NpdGlvbiArPSA5XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHNoYXBlc1xufVxuXG5jb25zdCBwYXJzZVNlZ21lbnRzID0gKGJ1ZmZlciwgY291bnQpID0+IHtcbiAgLy8gczIuMS43XG5cbiAgY29uc3Qgc2VnbWVudHMgPSBbXVxuICBpZiAoY291bnQgPCAxKSB7XG4gICAgcmV0dXJuIHNlZ21lbnRzXG4gIH1cblxuICBmb3IgKGxldCBpID0gMTsgaSA8PSBjb3VudDsgaSsrKSB7XG4gICAgc2VnbWVudHMucHVzaCh7IHR5cGU6IGJ1ZmZlci5yZWFkVUludDgoYnVmZmVyLnBvc2l0aW9uKSB9KVxuXG4gICAgYnVmZmVyLnBvc2l0aW9uKytcbiAgfVxuXG4gIHJldHVybiBzZWdtZW50c1xufVxuXG5jb25zdCBwYXJzZUdlb2dyYXBoeSA9IChidWZmZXIsIGlzVXNpbmdHZW9tZXRyeVBvaW50cykgPT4ge1xuICAvLyBzMi4xLjEgKyBzLjIuMS4yXG5cbiAgY29uc3Qgc3JpZCA9IGJ1ZmZlci5yZWFkSW50MzJMRSgwKVxuICBpZiAoc3JpZCA9PT0gLTEpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgY29uc3QgdmFsdWUgPSB7XG4gICAgc3JpZCxcbiAgICB2ZXJzaW9uOiBidWZmZXIucmVhZFVJbnQ4KDQpXG4gIH1cblxuICBjb25zdCBmbGFncyA9IGJ1ZmZlci5yZWFkVUludDgoNSlcbiAgYnVmZmVyLnBvc2l0aW9uID0gNlxuXG4gIC8vIGNvbnNvbGUubG9nKFwic3JpZFwiLCBzcmlkKVxuICAvLyBjb25zb2xlLmxvZyhcInZlcnNpb25cIiwgdmVyc2lvbilcblxuICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgIFo6IChmbGFncyAmICgxIDw8IDApKSA+IDAsXG4gICAgTTogKGZsYWdzICYgKDEgPDwgMSkpID4gMCxcbiAgICBWOiAoZmxhZ3MgJiAoMSA8PCAyKSkgPiAwLFxuICAgIFA6IChmbGFncyAmICgxIDw8IDMpKSA+IDAsXG4gICAgTDogKGZsYWdzICYgKDEgPDwgNCkpID4gMFxuICB9XG5cbiAgaWYgKHZhbHVlLnZlcnNpb24gPT09IDIpIHtcbiAgICBwcm9wZXJ0aWVzLkggPSAoZmxhZ3MgJiAoMSA8PCAzKSkgPiAwXG4gIH1cblxuICAvLyBjb25zb2xlLmxvZyhcInByb3BlcnRpZXNcIiwgcHJvcGVydGllcyk7XG5cbiAgbGV0IG51bWJlck9mUG9pbnRzXG4gIGlmIChwcm9wZXJ0aWVzLlApIHtcbiAgICBudW1iZXJPZlBvaW50cyA9IDFcbiAgfSBlbHNlIGlmIChwcm9wZXJ0aWVzLkwpIHtcbiAgICBudW1iZXJPZlBvaW50cyA9IDJcbiAgfSBlbHNlIHtcbiAgICBudW1iZXJPZlBvaW50cyA9IGJ1ZmZlci5yZWFkVUludDMyTEUoYnVmZmVyLnBvc2l0aW9uKVxuICAgIGJ1ZmZlci5wb3NpdGlvbiArPSA0XG4gIH1cblxuICAvLyBjb25zb2xlLmxvZyhcIm51bWJlck9mUG9pbnRzXCIsIG51bWJlck9mUG9pbnRzKVxuXG4gIHZhbHVlLnBvaW50cyA9IHBhcnNlUG9pbnRzKGJ1ZmZlciwgbnVtYmVyT2ZQb2ludHMsIGlzVXNpbmdHZW9tZXRyeVBvaW50cylcblxuICBpZiAocHJvcGVydGllcy5aKSB7XG4gICAgcGFyc2VaKGJ1ZmZlciwgdmFsdWUucG9pbnRzKVxuICB9XG5cbiAgaWYgKHByb3BlcnRpZXMuTSkge1xuICAgIHBhcnNlTShidWZmZXIsIHZhbHVlLnBvaW50cylcbiAgfVxuXG4gIC8vIGNvbnNvbGUubG9nKFwicG9pbnRzXCIsIHBvaW50cylcblxuICBsZXQgbnVtYmVyT2ZGaWd1cmVzXG4gIGlmIChwcm9wZXJ0aWVzLlApIHtcbiAgICBudW1iZXJPZkZpZ3VyZXMgPSAxXG4gIH0gZWxzZSBpZiAocHJvcGVydGllcy5MKSB7XG4gICAgbnVtYmVyT2ZGaWd1cmVzID0gMVxuICB9IGVsc2Uge1xuICAgIG51bWJlck9mRmlndXJlcyA9IGJ1ZmZlci5yZWFkVUludDMyTEUoYnVmZmVyLnBvc2l0aW9uKVxuICAgIGJ1ZmZlci5wb3NpdGlvbiArPSA0XG4gIH1cblxuICAvLyBjb25zb2xlLmxvZyhcIm51bWJlck9mRmlndXJlc1wiLCBudW1iZXJPZkZpZ3VyZXMpXG5cbiAgdmFsdWUuZmlndXJlcyA9IHBhcnNlRmlndXJlcyhidWZmZXIsIG51bWJlck9mRmlndXJlcywgcHJvcGVydGllcylcblxuICAvLyBjb25zb2xlLmxvZyhcImZpZ3VyZXNcIiwgZmlndXJlcylcblxuICBsZXQgbnVtYmVyT2ZTaGFwZXNcbiAgaWYgKHByb3BlcnRpZXMuUCkge1xuICAgIG51bWJlck9mU2hhcGVzID0gMVxuICB9IGVsc2UgaWYgKHByb3BlcnRpZXMuTCkge1xuICAgIG51bWJlck9mU2hhcGVzID0gMVxuICB9IGVsc2Uge1xuICAgIG51bWJlck9mU2hhcGVzID0gYnVmZmVyLnJlYWRVSW50MzJMRShidWZmZXIucG9zaXRpb24pXG4gICAgYnVmZmVyLnBvc2l0aW9uICs9IDRcbiAgfVxuXG4gIC8vIGNvbnNvbGUubG9nKFwibnVtYmVyT2ZTaGFwZXNcIiwgbnVtYmVyT2ZTaGFwZXMpXG5cbiAgdmFsdWUuc2hhcGVzID0gcGFyc2VTaGFwZXMoYnVmZmVyLCBudW1iZXJPZlNoYXBlcywgcHJvcGVydGllcylcblxuICAvLyBjb25zb2xlLmxvZyggXCJzaGFwZXNcIiwgc2hhcGVzKVxuXG4gIGlmICh2YWx1ZS52ZXJzaW9uID09PSAyICYmIGJ1ZmZlci5wb3NpdGlvbiA8IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBjb25zdCBudW1iZXJPZlNlZ21lbnRzID0gYnVmZmVyLnJlYWRVSW50MzJMRShidWZmZXIucG9zaXRpb24pXG4gICAgYnVmZmVyLnBvc2l0aW9uICs9IDRcblxuICAgIC8vIGNvbnNvbGUubG9nKFwibnVtYmVyT2ZTZWdtZW50c1wiLCBudW1iZXJPZlNlZ21lbnRzKVxuXG4gICAgdmFsdWUuc2VnbWVudHMgPSBwYXJzZVNlZ21lbnRzKGJ1ZmZlciwgbnVtYmVyT2ZTZWdtZW50cylcblxuICAgIC8vIGNvbnNvbGUubG9nKFwic2VnbWVudHNcIiwgc2VnbWVudHMpXG4gIH0gZWxzZSB7XG4gICAgdmFsdWUuc2VnbWVudHMgPSBbXVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlXG59XG5cbm1vZHVsZS5leHBvcnRzLlBBUlNFUlMgPSB7XG4gIGdlb2dyYXBoeSAoYnVmZmVyKSB7XG4gICAgcmV0dXJuIHBhcnNlR2VvZ3JhcGh5KGJ1ZmZlciwgLyogaXNVc2luZ0dlb21ldHJ5UG9pbnRzOiAqL2ZhbHNlKVxuICB9LFxuXG4gIGdlb21ldHJ5IChidWZmZXIpIHtcbiAgICByZXR1cm4gcGFyc2VHZW9ncmFwaHkoYnVmZmVyLCAvKiBpc1VzaW5nR2VvbWV0cnlQb2ludHM6ICovdHJ1ZSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/udt.js\n");

/***/ }),

/***/ "(rsc)/../node_modules/mssql/lib/utils.js":
/*!******************************************!*\
  !*** ../node_modules/mssql/lib/utils.js ***!
  \******************************************/
/***/ ((module) => {

eval("\n\nconst IDS = new WeakMap()\nconst INCREMENT = {\n  Connection: 1,\n  ConnectionPool: 1,\n  Request: 1,\n  Transaction: 1,\n  PreparedStatement: 1\n}\n\nmodule.exports = {\n  objectHasProperty: (object, property) => Object.prototype.hasOwnProperty.call(object, property),\n  INCREMENT,\n  IDS: {\n    get: IDS.get.bind(IDS),\n    add: (object, type, id) => {\n      if (id) return IDS.set(object, id)\n      IDS.set(object, INCREMENT[type]++)\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi91dGlscy5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi91dGlscy5qcz8yOGNmIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBJRFMgPSBuZXcgV2Vha01hcCgpXG5jb25zdCBJTkNSRU1FTlQgPSB7XG4gIENvbm5lY3Rpb246IDEsXG4gIENvbm5lY3Rpb25Qb29sOiAxLFxuICBSZXF1ZXN0OiAxLFxuICBUcmFuc2FjdGlvbjogMSxcbiAgUHJlcGFyZWRTdGF0ZW1lbnQ6IDFcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG9iamVjdEhhc1Byb3BlcnR5OiAob2JqZWN0LCBwcm9wZXJ0eSkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpLFxuICBJTkNSRU1FTlQsXG4gIElEUzoge1xuICAgIGdldDogSURTLmdldC5iaW5kKElEUyksXG4gICAgYWRkOiAob2JqZWN0LCB0eXBlLCBpZCkgPT4ge1xuICAgICAgaWYgKGlkKSByZXR1cm4gSURTLnNldChvYmplY3QsIGlkKVxuICAgICAgSURTLnNldChvYmplY3QsIElOQ1JFTUVOVFt0eXBlXSsrKVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/mssql/lib/utils.js\n");

/***/ })

};
;