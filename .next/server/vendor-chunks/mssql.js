"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/mssql";
exports.ids = ["vendor-chunks/mssql"];
exports.modules = {

/***/ "(rsc)/./node_modules/mssql/index.js":
/*!*************************************!*\
  !*** ./node_modules/mssql/index.js ***!
  \*************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nmodule.exports = __webpack_require__(/*! ./lib/tedious */ \"(rsc)/./node_modules/mssql/lib/tedious/index.js\")\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosNEdBQXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4vbm9kZV9tb2R1bGVzL21zc3FsL2luZGV4LmpzPzI3MDciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvdGVkaW91cycpXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/base/connection-pool.js":
/*!********************************************************!*\
  !*** ./node_modules/mssql/lib/base/connection-pool.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst { EventEmitter } = __webpack_require__(/*! node:events */ \"node:events\")\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\")('mssql:base')\nconst { parseSqlConnectionString } = __webpack_require__(/*! @tediousjs/connection-string */ \"(rsc)/./node_modules/@tediousjs/connection-string/lib/index.js\")\nconst tarn = __webpack_require__(/*! tarn */ \"(rsc)/./node_modules/tarn/dist/tarn.js\")\nconst { IDS } = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/mssql/lib/utils.js\")\nconst ConnectionError = __webpack_require__(/*! ../error/connection-error */ \"(rsc)/./node_modules/mssql/lib/error/connection-error.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/./node_modules/mssql/lib/shared.js\")\nconst { MSSQLError } = __webpack_require__(/*! ../error */ \"(rsc)/./node_modules/mssql/lib/error/index.js\")\n\n/**\n * Class ConnectionPool.\n *\n * Internally, each `Connection` instance is a separate pool of TDS connections. Once you create a new `Request`/`Transaction`/`Prepared Statement`, a new TDS connection is acquired from the pool and reserved for desired action. Once the action is complete, connection is released back to the pool.\n *\n * @property {Boolean} connected If true, connection is established.\n * @property {Boolean} connecting If true, connection is being established.\n *\n * @fires ConnectionPool#connect\n * @fires ConnectionPool#close\n */\n\nclass ConnectionPool extends EventEmitter {\n  /**\n   * Create new Connection.\n   *\n   * @param {Object|String} config Connection configuration object or connection string.\n   * @param {basicCallback} [callback] A callback which is called after connection has established, or an error has occurred.\n   */\n\n  constructor (config, callback) {\n    super()\n\n    IDS.add(this, 'ConnectionPool')\n    debug('pool(%d): created', IDS.get(this))\n\n    this._connectStack = []\n    this._closeStack = []\n\n    this._connected = false\n    this._connecting = false\n    this._healthy = false\n\n    if (typeof config === 'string') {\n      try {\n        this.config = this.constructor.parseConnectionString(config)\n      } catch (ex) {\n        if (typeof callback === 'function') {\n          return setImmediate(callback, ex)\n        }\n        throw ex\n      }\n    } else {\n      this.config = config\n    }\n\n    // set defaults\n    this.config.port = this.config.port || 1433\n    this.config.options = this.config.options || {}\n    this.config.stream = this.config.stream || false\n    this.config.parseJSON = this.config.parseJSON || false\n    this.config.arrayRowMode = this.config.arrayRowMode || false\n    this.config.validateConnection = 'validateConnection' in this.config ? this.config.validateConnection : true\n\n    const namedServer = /^(.*)\\\\(.*)$/.exec(this.config.server)\n    if (namedServer) {\n      this.config.server = namedServer[1]\n      this.config.options.instanceName = namedServer[2]\n    }\n\n    if (typeof this.config.options.useColumnNames !== 'undefined' && this.config.options.useColumnNames !== true) {\n      const ex = new MSSQLError('Invalid options `useColumnNames`, use `arrayRowMode` instead')\n      if (typeof callback === 'function') {\n        return setImmediate(callback, ex)\n      }\n      throw ex\n    }\n\n    if (typeof callback === 'function') {\n      this.connect(callback)\n    }\n  }\n\n  get connected () {\n    return this._connected\n  }\n\n  get connecting () {\n    return this._connecting\n  }\n\n  get healthy () {\n    return this._healthy\n  }\n\n  static parseConnectionString (connectionString) {\n    return this._parseConnectionString(connectionString)\n  }\n\n  static _parseAuthenticationType (type, entries) {\n    switch (type.toLowerCase()) {\n      case 'active directory integrated':\n        if (entries.includes('token')) {\n          return 'azure-active-directory-access-token'\n        } else if (['client id', 'client secret', 'tenant id'].every(entry => entries.includes(entry))) {\n          return 'azure-active-directory-service-principal-secret'\n        } else if (['client id', 'msi endpoint', 'msi secret'].every(entry => entries.includes(entry))) {\n          return 'azure-active-directory-msi-app-service'\n        } else if (['client id', 'msi endpoint'].every(entry => entries.includes(entry))) {\n          return 'azure-active-directory-msi-vm'\n        }\n        return 'azure-active-directory-default'\n      case 'active directory password':\n        return 'azure-active-directory-password'\n      case 'ntlm':\n        return 'ntlm'\n      default:\n        return 'default'\n    }\n  }\n\n  static _parseConnectionString (connectionString) {\n    const parsed = parseSqlConnectionString(connectionString, true, true)\n    return Object.entries(parsed).reduce((config, [key, value]) => {\n      switch (key) {\n        case 'application name':\n          break\n        case 'applicationintent':\n          Object.assign(config.options, {\n            readOnlyIntent: value === 'readonly'\n          })\n          break\n        case 'asynchronous processing':\n          break\n        case 'attachdbfilename':\n          break\n        case 'authentication':\n          Object.assign(config, {\n            authentication_type: this._parseAuthenticationType(value, Object.keys(parsed))\n          })\n          break\n        case 'column encryption setting':\n          break\n        case 'connection timeout':\n          Object.assign(config, {\n            connectionTimeout: value * 1000\n          })\n          break\n        case 'connection lifetime':\n          break\n        case 'connectretrycount':\n          break\n        case 'connectretryinterval':\n          Object.assign(config.options, {\n            connectionRetryInterval: value * 1000\n          })\n          break\n        case 'context connection':\n          break\n        case 'client id':\n          Object.assign(config, {\n            clientId: value\n          })\n          break\n        case 'client secret':\n          Object.assign(config, {\n            clientSecret: value\n          })\n          break\n        case 'current language':\n          Object.assign(config.options, {\n            language: value\n          })\n          break\n        case 'data source':\n        {\n          let server = value\n          let instanceName\n          let port = 1433\n          if (/^np:/i.test(server)) {\n            throw new Error('Connection via Named Pipes is not supported.')\n          }\n          if (/^tcp:/i.test(server)) {\n            server = server.substr(4)\n          }\n          const namedServerParts = /^(.*)\\\\(.*)$/.exec(server)\n          if (namedServerParts) {\n            server = namedServerParts[1].trim()\n            instanceName = namedServerParts[2].trim()\n          }\n          const serverParts = /^(.*),(.*)$/.exec(server)\n          if (serverParts) {\n            server = serverParts[1].trim()\n            port = parseInt(serverParts[2].trim(), 10)\n          } else {\n            const instanceParts = /^(.*),(.*)$/.exec(instanceName)\n            if (instanceParts) {\n              instanceName = instanceParts[1].trim()\n              port = parseInt(instanceParts[2].trim(), 10)\n            }\n          }\n          if (server === '.' || server === '(.)' || server.toLowerCase() === '(localdb)' || server.toLowerCase() === '(local)') {\n            server = 'localhost'\n          }\n          Object.assign(config, {\n            port,\n            server\n          })\n          if (instanceName) {\n            Object.assign(config.options, {\n              instanceName\n            })\n          }\n          break\n        }\n        case 'encrypt':\n          Object.assign(config.options, {\n            encrypt: !!value\n          })\n          break\n        case 'enlist':\n          break\n        case 'failover partner':\n          break\n        case 'initial catalog':\n          Object.assign(config, {\n            database: value\n          })\n          break\n        case 'integrated security':\n          break\n        case 'max pool size':\n          Object.assign(config.pool, {\n            max: value\n          })\n          break\n        case 'min pool size':\n          Object.assign(config.pool, {\n            min: value\n          })\n          break\n        case 'msi endpoint':\n          Object.assign(config, {\n            msiEndpoint: value\n          })\n          break\n        case 'msi secret':\n          Object.assign(config, {\n            msiSecret: value\n          })\n          break\n        case 'multipleactiveresultsets':\n          break\n        case 'multisubnetfailover':\n          Object.assign(config.options, {\n            multiSubnetFailover: value\n          })\n          break\n        case 'network library':\n          break\n        case 'packet size':\n          Object.assign(config.options, {\n            packetSize: value\n          })\n          break\n        case 'password':\n          Object.assign(config, {\n            password: value\n          })\n          break\n        case 'persist security info':\n          break\n        case 'poolblockingperiod':\n          break\n        case 'pooling':\n          break\n        case 'replication':\n          break\n        case 'tenant id':\n          Object.assign(config, {\n            tenantId: value\n          })\n          break\n        case 'token':\n          Object.assign(config, {\n            token: value\n          })\n          break\n        case 'transaction binding':\n          Object.assign(config.options, {\n            enableImplicitTransactions: value.toLowerCase() === 'implicit unbind'\n          })\n          break\n        case 'transparentnetworkipresolution':\n          break\n        case 'trustservercertificate':\n          Object.assign(config.options, {\n            trustServerCertificate: value\n          })\n          break\n        case 'type system version':\n          break\n        case 'user id': {\n          let user = value\n          let domain\n          const domainUser = /^(.*)\\\\(.*)$/.exec(user)\n          if (domainUser) {\n            domain = domainUser[1]\n            user = domainUser[2]\n          }\n          if (domain) {\n            Object.assign(config, {\n              domain\n            })\n          }\n          if (user) {\n            Object.assign(config, {\n              user\n            })\n          }\n          break\n        }\n        case 'user instance':\n          break\n        case 'workstation id':\n          Object.assign(config.options, {\n            workstationId: value\n          })\n          break\n        case 'request timeout':\n          Object.assign(config, {\n            requestTimeout: parseInt(value, 10)\n          })\n          break\n        case 'stream':\n          Object.assign(config, {\n            stream: !!value\n          })\n          break\n        case 'useutc':\n          Object.assign(config.options, {\n            useUTC: !!value\n          })\n          break\n        case 'parsejson':\n          Object.assign(config, {\n            parseJSON: !!value\n          })\n          break\n      }\n      return config\n    }, { options: {}, pool: {} })\n  }\n\n  /**\n   * Acquire connection from this connection pool.\n   *\n   * @param {ConnectionPool|Transaction|PreparedStatement} requester Requester.\n   * @param {acquireCallback} [callback] A callback which is called after connection has been acquired, or an error has occurred. If omited, method returns Promise.\n   * @return {ConnectionPool|Promise}\n   */\n\n  acquire (requester, callback) {\n    const acquirePromise = shared.Promise.resolve(this._acquire()).catch(err => {\n      this.emit('error', err)\n      throw err\n    })\n    if (typeof callback === 'function') {\n      acquirePromise.then(connection => callback(null, connection, this.config)).catch(callback)\n      return this\n    }\n\n    return acquirePromise\n  }\n\n  _acquire () {\n    if (!this.pool) {\n      return shared.Promise.reject(new ConnectionError('Connection not yet open.', 'ENOTOPEN'))\n    } else if (this.pool.destroyed) {\n      return shared.Promise.reject(new ConnectionError('Connection is closing', 'ENOTOPEN'))\n    }\n\n    return this.pool.acquire().promise\n  }\n\n  /**\n   * Release connection back to the pool.\n   *\n   * @param {Connection} connection Previously acquired connection.\n   * @return {ConnectionPool}\n   */\n\n  release (connection) {\n    debug('connection(%d): released', IDS.get(connection))\n\n    if (this.pool) {\n      this.pool.release(connection)\n    }\n    return this\n  }\n\n  /**\n   * Creates a new connection pool with one active connection. This one initial connection serves as a probe to find out whether the configuration is valid.\n   *\n   * @param {basicCallback} [callback] A callback which is called after connection has established, or an error has occurred. If omited, method returns Promise.\n   * @return {ConnectionPool|Promise}\n   */\n\n  connect (callback) {\n    if (typeof callback === 'function') {\n      this._connect(callback)\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      return this._connect(err => {\n        if (err) return reject(err)\n        resolve(this)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} callback\n   */\n\n  _connect (callback) {\n    if (this._connected) {\n      debug('pool(%d): already connected, executing connect callback immediately', IDS.get(this))\n      return setImmediate(callback, null, this)\n    }\n\n    this._connectStack.push(callback)\n\n    if (this._connecting) {\n      return\n    }\n\n    this._connecting = true\n    debug('pool(%d): connecting', IDS.get(this))\n\n    // create one test connection to check if everything is ok\n    this._poolCreate().then((connection) => {\n      debug('pool(%d): connected', IDS.get(this))\n      this._healthy = true\n\n      return this._poolDestroy(connection).then(() => {\n        // prepare pool\n        this.pool = new tarn.Pool(\n          Object.assign({\n            create: () => this._poolCreate()\n              .then(connection => {\n                this._healthy = true\n                return connection\n              })\n              .catch(err => {\n                if (this.pool.numUsed() + this.pool.numFree() <= 0) {\n                  this._healthy = false\n                }\n                throw err\n              }),\n            validate: this._poolValidate.bind(this),\n            destroy: this._poolDestroy.bind(this),\n            max: 10,\n            min: 0,\n            idleTimeoutMillis: 30000,\n            propagateCreateError: true\n          }, this.config.pool)\n        )\n\n        this._connecting = false\n        this._connected = true\n      })\n    }).then(() => {\n      this._connectStack.forEach((cb) => {\n        setImmediate(cb, null, this)\n      })\n    }).catch(err => {\n      this._connecting = false\n      this._connectStack.forEach((cb) => {\n        setImmediate(cb, err)\n      })\n    }).then(() => {\n      this._connectStack = []\n    })\n  }\n\n  get size () {\n    return this.pool.numFree() + this.pool.numUsed() + this.pool.numPendingCreates()\n  }\n\n  get available () {\n    return this.pool.numFree()\n  }\n\n  get pending () {\n    return this.pool.numPendingAcquires()\n  }\n\n  get borrowed () {\n    return this.pool.numUsed()\n  }\n\n  /**\n   * Close all active connections in the pool.\n   *\n   * @param {basicCallback} [callback] A callback which is called after connection has closed, or an error has occurred. If omited, method returns Promise.\n   * @return {ConnectionPool|Promise}\n   */\n\n  close (callback) {\n    if (typeof callback === 'function') {\n      this._close(callback)\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._close(err => {\n        if (err) return reject(err)\n        resolve(this)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} callback\n   */\n\n  _close (callback) {\n    // we don't allow pools in a connecting state to be closed because it means there are far too many\n    // edge cases to deal with\n    if (this._connecting) {\n      debug('pool(%d): close called while connecting', IDS.get(this))\n      setImmediate(callback, new ConnectionError('Cannot close a pool while it is connecting'))\n    }\n\n    if (!this.pool) {\n      debug('pool(%d): already closed, executing close callback immediately', IDS.get(this))\n      return setImmediate(callback, null)\n    }\n\n    this._closeStack.push(callback)\n\n    if (this.pool.destroyed) return\n\n    this._connecting = this._connected = this._healthy = false\n\n    this.pool.destroy().then(() => {\n      debug('pool(%d): pool closed, removing pool reference and executing close callbacks', IDS.get(this))\n      this.pool = null\n      this._closeStack.forEach(cb => {\n        setImmediate(cb, null)\n      })\n    }).catch(err => {\n      this.pool = null\n      this._closeStack.forEach(cb => {\n        setImmediate(cb, err)\n      })\n    }).then(() => {\n      this._closeStack = []\n    })\n  }\n\n  /**\n   * Returns new request using this connection.\n   *\n   * @return {Request}\n   */\n\n  request () {\n    return new shared.driver.Request(this)\n  }\n\n  /**\n   * Returns new transaction using this connection.\n   *\n   * @return {Transaction}\n   */\n\n  transaction () {\n    return new shared.driver.Transaction(this)\n  }\n\n  /**\n   * Creates a new query using this connection from a tagged template string.\n   *\n   * @variation 1\n   * @param {Array} strings Array of string literals.\n   * @param {...*} keys Values.\n   * @return {Request}\n   */\n\n  /**\n   * Execute the SQL command.\n   *\n   * @variation 2\n   * @param {String} command T-SQL command to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  query () {\n    if (typeof arguments[0] === 'string') { return new shared.driver.Request(this).query(arguments[0], arguments[1]) }\n\n    const values = Array.prototype.slice.call(arguments)\n    const strings = values.shift()\n\n    return new shared.driver.Request(this)._template(strings, values, 'query')\n  }\n\n  /**\n   * Creates a new batch using this connection from a tagged template string.\n   *\n   * @variation 1\n   * @param {Array} strings Array of string literals.\n   * @param {...*} keys Values.\n   * @return {Request}\n   */\n\n  /**\n   * Execute the SQL command.\n   *\n   * @variation 2\n   * @param {String} command T-SQL command to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  batch () {\n    if (typeof arguments[0] === 'string') { return new shared.driver.Request(this).batch(arguments[0], arguments[1]) }\n\n    const values = Array.prototype.slice.call(arguments)\n    const strings = values.shift()\n\n    return new shared.driver.Request(this)._template(strings, values, 'batch')\n  }\n}\n\nmodule.exports = ConnectionPool\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Jhc2UvY29ubmVjdGlvbi1wb29sLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLFFBQVEsZUFBZSxFQUFFLG1CQUFPLENBQUMsZ0NBQWE7QUFDOUMsY0FBYyxtQkFBTyxDQUFDLHNEQUFPO0FBQzdCLFFBQVEsMkJBQTJCLEVBQUUsbUJBQU8sQ0FBQyxvR0FBOEI7QUFDM0UsYUFBYSxtQkFBTyxDQUFDLG9EQUFNO0FBQzNCLFFBQVEsTUFBTSxFQUFFLG1CQUFPLENBQUMseURBQVU7QUFDbEMsd0JBQXdCLG1CQUFPLENBQUMsMkZBQTJCO0FBQzNELGVBQWUsbUJBQU8sQ0FBQywyREFBVztBQUNsQyxRQUFRLGFBQWEsRUFBRSxtQkFBTyxDQUFDLCtEQUFVOztBQUV6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCLGNBQWMsU0FBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZUFBZTtBQUM1QixhQUFhLGVBQWU7QUFDNUI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUksV0FBVyxZQUFZO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOENBQThDO0FBQzNELGFBQWEsaUJBQWlCO0FBQzlCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxZQUFZO0FBQ3pCLGNBQWM7QUFDZDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxNQUFNO0FBQ25CLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLHlCQUF5QjtBQUN0QyxjQUFjO0FBQ2Q7O0FBRUE7QUFDQSw0Q0FBNEM7O0FBRTVDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLE1BQU07QUFDbkIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEseUJBQXlCO0FBQ3RDLGNBQWM7QUFDZDs7QUFFQTtBQUNBLDRDQUE0Qzs7QUFFNUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Jhc2UvY29ubmVjdGlvbi1wb29sLmpzPzhmNTQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IHsgRXZlbnRFbWl0dGVyIH0gPSByZXF1aXJlKCdub2RlOmV2ZW50cycpXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ21zc3FsOmJhc2UnKVxuY29uc3QgeyBwYXJzZVNxbENvbm5lY3Rpb25TdHJpbmcgfSA9IHJlcXVpcmUoJ0B0ZWRpb3VzanMvY29ubmVjdGlvbi1zdHJpbmcnKVxuY29uc3QgdGFybiA9IHJlcXVpcmUoJ3Rhcm4nKVxuY29uc3QgeyBJRFMgfSA9IHJlcXVpcmUoJy4uL3V0aWxzJylcbmNvbnN0IENvbm5lY3Rpb25FcnJvciA9IHJlcXVpcmUoJy4uL2Vycm9yL2Nvbm5lY3Rpb24tZXJyb3InKVxuY29uc3Qgc2hhcmVkID0gcmVxdWlyZSgnLi4vc2hhcmVkJylcbmNvbnN0IHsgTVNTUUxFcnJvciB9ID0gcmVxdWlyZSgnLi4vZXJyb3InKVxuXG4vKipcbiAqIENsYXNzIENvbm5lY3Rpb25Qb29sLlxuICpcbiAqIEludGVybmFsbHksIGVhY2ggYENvbm5lY3Rpb25gIGluc3RhbmNlIGlzIGEgc2VwYXJhdGUgcG9vbCBvZiBURFMgY29ubmVjdGlvbnMuIE9uY2UgeW91IGNyZWF0ZSBhIG5ldyBgUmVxdWVzdGAvYFRyYW5zYWN0aW9uYC9gUHJlcGFyZWQgU3RhdGVtZW50YCwgYSBuZXcgVERTIGNvbm5lY3Rpb24gaXMgYWNxdWlyZWQgZnJvbSB0aGUgcG9vbCBhbmQgcmVzZXJ2ZWQgZm9yIGRlc2lyZWQgYWN0aW9uLiBPbmNlIHRoZSBhY3Rpb24gaXMgY29tcGxldGUsIGNvbm5lY3Rpb24gaXMgcmVsZWFzZWQgYmFjayB0byB0aGUgcG9vbC5cbiAqXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IGNvbm5lY3RlZCBJZiB0cnVlLCBjb25uZWN0aW9uIGlzIGVzdGFibGlzaGVkLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBjb25uZWN0aW5nIElmIHRydWUsIGNvbm5lY3Rpb24gaXMgYmVpbmcgZXN0YWJsaXNoZWQuXG4gKlxuICogQGZpcmVzIENvbm5lY3Rpb25Qb29sI2Nvbm5lY3RcbiAqIEBmaXJlcyBDb25uZWN0aW9uUG9vbCNjbG9zZVxuICovXG5cbmNsYXNzIENvbm5lY3Rpb25Qb29sIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBuZXcgQ29ubmVjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBjb25maWcgQ29ubmVjdGlvbiBjb25maWd1cmF0aW9uIG9iamVjdCBvciBjb25uZWN0aW9uIHN0cmluZy5cbiAgICogQHBhcmFtIHtiYXNpY0NhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGNvbm5lY3Rpb24gaGFzIGVzdGFibGlzaGVkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yIChjb25maWcsIGNhbGxiYWNrKSB7XG4gICAgc3VwZXIoKVxuXG4gICAgSURTLmFkZCh0aGlzLCAnQ29ubmVjdGlvblBvb2wnKVxuICAgIGRlYnVnKCdwb29sKCVkKTogY3JlYXRlZCcsIElEUy5nZXQodGhpcykpXG5cbiAgICB0aGlzLl9jb25uZWN0U3RhY2sgPSBbXVxuICAgIHRoaXMuX2Nsb3NlU3RhY2sgPSBbXVxuXG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2VcbiAgICB0aGlzLl9jb25uZWN0aW5nID0gZmFsc2VcbiAgICB0aGlzLl9oZWFsdGh5ID0gZmFsc2VcblxuICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5jb25maWcgPSB0aGlzLmNvbnN0cnVjdG9yLnBhcnNlQ29ubmVjdGlvblN0cmluZyhjb25maWcpXG4gICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgZXgpXG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXhcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgICB9XG5cbiAgICAvLyBzZXQgZGVmYXVsdHNcbiAgICB0aGlzLmNvbmZpZy5wb3J0ID0gdGhpcy5jb25maWcucG9ydCB8fCAxNDMzXG4gICAgdGhpcy5jb25maWcub3B0aW9ucyA9IHRoaXMuY29uZmlnLm9wdGlvbnMgfHwge31cbiAgICB0aGlzLmNvbmZpZy5zdHJlYW0gPSB0aGlzLmNvbmZpZy5zdHJlYW0gfHwgZmFsc2VcbiAgICB0aGlzLmNvbmZpZy5wYXJzZUpTT04gPSB0aGlzLmNvbmZpZy5wYXJzZUpTT04gfHwgZmFsc2VcbiAgICB0aGlzLmNvbmZpZy5hcnJheVJvd01vZGUgPSB0aGlzLmNvbmZpZy5hcnJheVJvd01vZGUgfHwgZmFsc2VcbiAgICB0aGlzLmNvbmZpZy52YWxpZGF0ZUNvbm5lY3Rpb24gPSAndmFsaWRhdGVDb25uZWN0aW9uJyBpbiB0aGlzLmNvbmZpZyA/IHRoaXMuY29uZmlnLnZhbGlkYXRlQ29ubmVjdGlvbiA6IHRydWVcblxuICAgIGNvbnN0IG5hbWVkU2VydmVyID0gL14oLiopXFxcXCguKikkLy5leGVjKHRoaXMuY29uZmlnLnNlcnZlcilcbiAgICBpZiAobmFtZWRTZXJ2ZXIpIHtcbiAgICAgIHRoaXMuY29uZmlnLnNlcnZlciA9IG5hbWVkU2VydmVyWzFdXG4gICAgICB0aGlzLmNvbmZpZy5vcHRpb25zLmluc3RhbmNlTmFtZSA9IG5hbWVkU2VydmVyWzJdXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZy5vcHRpb25zLnVzZUNvbHVtbk5hbWVzICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmNvbmZpZy5vcHRpb25zLnVzZUNvbHVtbk5hbWVzICE9PSB0cnVlKSB7XG4gICAgICBjb25zdCBleCA9IG5ldyBNU1NRTEVycm9yKCdJbnZhbGlkIG9wdGlvbnMgYHVzZUNvbHVtbk5hbWVzYCwgdXNlIGBhcnJheVJvd01vZGVgIGluc3RlYWQnKVxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBleClcbiAgICAgIH1cbiAgICAgIHRocm93IGV4XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5jb25uZWN0KGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIGdldCBjb25uZWN0ZWQgKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25uZWN0ZWRcbiAgfVxuXG4gIGdldCBjb25uZWN0aW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29ubmVjdGluZ1xuICB9XG5cbiAgZ2V0IGhlYWx0aHkgKCkge1xuICAgIHJldHVybiB0aGlzLl9oZWFsdGh5XG4gIH1cblxuICBzdGF0aWMgcGFyc2VDb25uZWN0aW9uU3RyaW5nIChjb25uZWN0aW9uU3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlQ29ubmVjdGlvblN0cmluZyhjb25uZWN0aW9uU3RyaW5nKVxuICB9XG5cbiAgc3RhdGljIF9wYXJzZUF1dGhlbnRpY2F0aW9uVHlwZSAodHlwZSwgZW50cmllcykge1xuICAgIHN3aXRjaCAodHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdhY3RpdmUgZGlyZWN0b3J5IGludGVncmF0ZWQnOlxuICAgICAgICBpZiAoZW50cmllcy5pbmNsdWRlcygndG9rZW4nKSkge1xuICAgICAgICAgIHJldHVybiAnYXp1cmUtYWN0aXZlLWRpcmVjdG9yeS1hY2Nlc3MtdG9rZW4nXG4gICAgICAgIH0gZWxzZSBpZiAoWydjbGllbnQgaWQnLCAnY2xpZW50IHNlY3JldCcsICd0ZW5hbnQgaWQnXS5ldmVyeShlbnRyeSA9PiBlbnRyaWVzLmluY2x1ZGVzKGVudHJ5KSkpIHtcbiAgICAgICAgICByZXR1cm4gJ2F6dXJlLWFjdGl2ZS1kaXJlY3Rvcnktc2VydmljZS1wcmluY2lwYWwtc2VjcmV0J1xuICAgICAgICB9IGVsc2UgaWYgKFsnY2xpZW50IGlkJywgJ21zaSBlbmRwb2ludCcsICdtc2kgc2VjcmV0J10uZXZlcnkoZW50cnkgPT4gZW50cmllcy5pbmNsdWRlcyhlbnRyeSkpKSB7XG4gICAgICAgICAgcmV0dXJuICdhenVyZS1hY3RpdmUtZGlyZWN0b3J5LW1zaS1hcHAtc2VydmljZSdcbiAgICAgICAgfSBlbHNlIGlmIChbJ2NsaWVudCBpZCcsICdtc2kgZW5kcG9pbnQnXS5ldmVyeShlbnRyeSA9PiBlbnRyaWVzLmluY2x1ZGVzKGVudHJ5KSkpIHtcbiAgICAgICAgICByZXR1cm4gJ2F6dXJlLWFjdGl2ZS1kaXJlY3RvcnktbXNpLXZtJ1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnYXp1cmUtYWN0aXZlLWRpcmVjdG9yeS1kZWZhdWx0J1xuICAgICAgY2FzZSAnYWN0aXZlIGRpcmVjdG9yeSBwYXNzd29yZCc6XG4gICAgICAgIHJldHVybiAnYXp1cmUtYWN0aXZlLWRpcmVjdG9yeS1wYXNzd29yZCdcbiAgICAgIGNhc2UgJ250bG0nOlxuICAgICAgICByZXR1cm4gJ250bG0nXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJ2RlZmF1bHQnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9wYXJzZUNvbm5lY3Rpb25TdHJpbmcgKGNvbm5lY3Rpb25TdHJpbmcpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZVNxbENvbm5lY3Rpb25TdHJpbmcoY29ubmVjdGlvblN0cmluZywgdHJ1ZSwgdHJ1ZSlcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMocGFyc2VkKS5yZWR1Y2UoKGNvbmZpZywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlICdhcHBsaWNhdGlvbiBuYW1lJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdhcHBsaWNhdGlvbmludGVudCc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcub3B0aW9ucywge1xuICAgICAgICAgICAgcmVhZE9ubHlJbnRlbnQ6IHZhbHVlID09PSAncmVhZG9ubHknXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdhc3luY2hyb25vdXMgcHJvY2Vzc2luZyc6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYXR0YWNoZGJmaWxlbmFtZSc6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYXV0aGVudGljYXRpb24nOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvbl90eXBlOiB0aGlzLl9wYXJzZUF1dGhlbnRpY2F0aW9uVHlwZSh2YWx1ZSwgT2JqZWN0LmtleXMocGFyc2VkKSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2NvbHVtbiBlbmNyeXB0aW9uIHNldHRpbmcnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2Nvbm5lY3Rpb24gdGltZW91dCc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb25UaW1lb3V0OiB2YWx1ZSAqIDEwMDBcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2Nvbm5lY3Rpb24gbGlmZXRpbWUnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2Nvbm5lY3RyZXRyeWNvdW50JzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdjb25uZWN0cmV0cnlpbnRlcnZhbCc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcub3B0aW9ucywge1xuICAgICAgICAgICAgY29ubmVjdGlvblJldHJ5SW50ZXJ2YWw6IHZhbHVlICogMTAwMFxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnY29udGV4dCBjb25uZWN0aW9uJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdjbGllbnQgaWQnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICBjbGllbnRJZDogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2NsaWVudCBzZWNyZXQnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdjdXJyZW50IGxhbmd1YWdlJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZy5vcHRpb25zLCB7XG4gICAgICAgICAgICBsYW5ndWFnZTogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2RhdGEgc291cmNlJzpcbiAgICAgICAge1xuICAgICAgICAgIGxldCBzZXJ2ZXIgPSB2YWx1ZVxuICAgICAgICAgIGxldCBpbnN0YW5jZU5hbWVcbiAgICAgICAgICBsZXQgcG9ydCA9IDE0MzNcbiAgICAgICAgICBpZiAoL15ucDovaS50ZXN0KHNlcnZlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29ubmVjdGlvbiB2aWEgTmFtZWQgUGlwZXMgaXMgbm90IHN1cHBvcnRlZC4nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoL150Y3A6L2kudGVzdChzZXJ2ZXIpKSB7XG4gICAgICAgICAgICBzZXJ2ZXIgPSBzZXJ2ZXIuc3Vic3RyKDQpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG5hbWVkU2VydmVyUGFydHMgPSAvXiguKilcXFxcKC4qKSQvLmV4ZWMoc2VydmVyKVxuICAgICAgICAgIGlmIChuYW1lZFNlcnZlclBhcnRzKSB7XG4gICAgICAgICAgICBzZXJ2ZXIgPSBuYW1lZFNlcnZlclBhcnRzWzFdLnRyaW0oKVxuICAgICAgICAgICAgaW5zdGFuY2VOYW1lID0gbmFtZWRTZXJ2ZXJQYXJ0c1syXS50cmltKClcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc2VydmVyUGFydHMgPSAvXiguKiksKC4qKSQvLmV4ZWMoc2VydmVyKVxuICAgICAgICAgIGlmIChzZXJ2ZXJQYXJ0cykge1xuICAgICAgICAgICAgc2VydmVyID0gc2VydmVyUGFydHNbMV0udHJpbSgpXG4gICAgICAgICAgICBwb3J0ID0gcGFyc2VJbnQoc2VydmVyUGFydHNbMl0udHJpbSgpLCAxMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2VQYXJ0cyA9IC9eKC4qKSwoLiopJC8uZXhlYyhpbnN0YW5jZU5hbWUpXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2VQYXJ0cykge1xuICAgICAgICAgICAgICBpbnN0YW5jZU5hbWUgPSBpbnN0YW5jZVBhcnRzWzFdLnRyaW0oKVxuICAgICAgICAgICAgICBwb3J0ID0gcGFyc2VJbnQoaW5zdGFuY2VQYXJ0c1syXS50cmltKCksIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2VydmVyID09PSAnLicgfHwgc2VydmVyID09PSAnKC4pJyB8fCBzZXJ2ZXIudG9Mb3dlckNhc2UoKSA9PT0gJyhsb2NhbGRiKScgfHwgc2VydmVyLnRvTG93ZXJDYXNlKCkgPT09ICcobG9jYWwpJykge1xuICAgICAgICAgICAgc2VydmVyID0gJ2xvY2FsaG9zdCdcbiAgICAgICAgICB9XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIHBvcnQsXG4gICAgICAgICAgICBzZXJ2ZXJcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmIChpbnN0YW5jZU5hbWUpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLm9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgaW5zdGFuY2VOYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2VuY3J5cHQnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLm9wdGlvbnMsIHtcbiAgICAgICAgICAgIGVuY3J5cHQ6ICEhdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VubGlzdCc6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZmFpbG92ZXIgcGFydG5lcic6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaW5pdGlhbCBjYXRhbG9nJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgZGF0YWJhc2U6IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdpbnRlZ3JhdGVkIHNlY3VyaXR5JzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdtYXggcG9vbCBzaXplJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZy5wb29sLCB7XG4gICAgICAgICAgICBtYXg6IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdtaW4gcG9vbCBzaXplJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZy5wb29sLCB7XG4gICAgICAgICAgICBtaW46IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdtc2kgZW5kcG9pbnQnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICBtc2lFbmRwb2ludDogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ21zaSBzZWNyZXQnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICBtc2lTZWNyZXQ6IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdtdWx0aXBsZWFjdGl2ZXJlc3VsdHNldHMnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ211bHRpc3VibmV0ZmFpbG92ZXInOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLm9wdGlvbnMsIHtcbiAgICAgICAgICAgIG11bHRpU3VibmV0RmFpbG92ZXI6IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICduZXR3b3JrIGxpYnJhcnknOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3BhY2tldCBzaXplJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZy5vcHRpb25zLCB7XG4gICAgICAgICAgICBwYWNrZXRTaXplOiB2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncGFzc3dvcmQnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7XG4gICAgICAgICAgICBwYXNzd29yZDogdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3BlcnNpc3Qgc2VjdXJpdHkgaW5mbyc6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncG9vbGJsb2NraW5ncGVyaW9kJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdwb29saW5nJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdyZXBsaWNhdGlvbic6XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAndGVuYW50IGlkJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgdGVuYW50SWQ6IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd0b2tlbic6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIHRva2VuOiB2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAndHJhbnNhY3Rpb24gYmluZGluZyc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcub3B0aW9ucywge1xuICAgICAgICAgICAgZW5hYmxlSW1wbGljaXRUcmFuc2FjdGlvbnM6IHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICdpbXBsaWNpdCB1bmJpbmQnXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd0cmFuc3BhcmVudG5ldHdvcmtpcHJlc29sdXRpb24nOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3RydXN0c2VydmVyY2VydGlmaWNhdGUnOlxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLm9wdGlvbnMsIHtcbiAgICAgICAgICAgIHRydXN0U2VydmVyQ2VydGlmaWNhdGU6IHZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd0eXBlIHN5c3RlbSB2ZXJzaW9uJzpcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd1c2VyIGlkJzoge1xuICAgICAgICAgIGxldCB1c2VyID0gdmFsdWVcbiAgICAgICAgICBsZXQgZG9tYWluXG4gICAgICAgICAgY29uc3QgZG9tYWluVXNlciA9IC9eKC4qKVxcXFwoLiopJC8uZXhlYyh1c2VyKVxuICAgICAgICAgIGlmIChkb21haW5Vc2VyKSB7XG4gICAgICAgICAgICBkb21haW4gPSBkb21haW5Vc2VyWzFdXG4gICAgICAgICAgICB1c2VyID0gZG9tYWluVXNlclsyXVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgICBkb21haW5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgICB1c2VyXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3VzZXIgaW5zdGFuY2UnOlxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3dvcmtzdGF0aW9uIGlkJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZy5vcHRpb25zLCB7XG4gICAgICAgICAgICB3b3Jrc3RhdGlvbklkOiB2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncmVxdWVzdCB0aW1lb3V0JzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywge1xuICAgICAgICAgICAgcmVxdWVzdFRpbWVvdXQ6IHBhcnNlSW50KHZhbHVlLCAxMClcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3N0cmVhbSc6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIHN0cmVhbTogISF2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAndXNldXRjJzpcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZy5vcHRpb25zLCB7XG4gICAgICAgICAgICB1c2VVVEM6ICEhdmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3BhcnNlanNvbic6XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHtcbiAgICAgICAgICAgIHBhcnNlSlNPTjogISF2YWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb25maWdcbiAgICB9LCB7IG9wdGlvbnM6IHt9LCBwb29sOiB7fSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEFjcXVpcmUgY29ubmVjdGlvbiBmcm9tIHRoaXMgY29ubmVjdGlvbiBwb29sLlxuICAgKlxuICAgKiBAcGFyYW0ge0Nvbm5lY3Rpb25Qb29sfFRyYW5zYWN0aW9ufFByZXBhcmVkU3RhdGVtZW50fSByZXF1ZXN0ZXIgUmVxdWVzdGVyLlxuICAgKiBAcGFyYW0ge2FjcXVpcmVDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBjb25uZWN0aW9uIGhhcyBiZWVuIGFjcXVpcmVkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7Q29ubmVjdGlvblBvb2x8UHJvbWlzZX1cbiAgICovXG5cbiAgYWNxdWlyZSAocmVxdWVzdGVyLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGFjcXVpcmVQcm9taXNlID0gc2hhcmVkLlByb21pc2UucmVzb2x2ZSh0aGlzLl9hY3F1aXJlKCkpLmNhdGNoKGVyciA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgdGhyb3cgZXJyXG4gICAgfSlcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhY3F1aXJlUHJvbWlzZS50aGVuKGNvbm5lY3Rpb24gPT4gY2FsbGJhY2sobnVsbCwgY29ubmVjdGlvbiwgdGhpcy5jb25maWcpKS5jYXRjaChjYWxsYmFjaylcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgcmV0dXJuIGFjcXVpcmVQcm9taXNlXG4gIH1cblxuICBfYWNxdWlyZSAoKSB7XG4gICAgaWYgKCF0aGlzLnBvb2wpIHtcbiAgICAgIHJldHVybiBzaGFyZWQuUHJvbWlzZS5yZWplY3QobmV3IENvbm5lY3Rpb25FcnJvcignQ29ubmVjdGlvbiBub3QgeWV0IG9wZW4uJywgJ0VOT1RPUEVOJykpXG4gICAgfSBlbHNlIGlmICh0aGlzLnBvb2wuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm4gc2hhcmVkLlByb21pc2UucmVqZWN0KG5ldyBDb25uZWN0aW9uRXJyb3IoJ0Nvbm5lY3Rpb24gaXMgY2xvc2luZycsICdFTk9UT1BFTicpKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnBvb2wuYWNxdWlyZSgpLnByb21pc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGNvbm5lY3Rpb24gYmFjayB0byB0aGUgcG9vbC5cbiAgICpcbiAgICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uZWN0aW9uIFByZXZpb3VzbHkgYWNxdWlyZWQgY29ubmVjdGlvbi5cbiAgICogQHJldHVybiB7Q29ubmVjdGlvblBvb2x9XG4gICAqL1xuXG4gIHJlbGVhc2UgKGNvbm5lY3Rpb24pIHtcbiAgICBkZWJ1ZygnY29ubmVjdGlvbiglZCk6IHJlbGVhc2VkJywgSURTLmdldChjb25uZWN0aW9uKSlcblxuICAgIGlmICh0aGlzLnBvb2wpIHtcbiAgICAgIHRoaXMucG9vbC5yZWxlYXNlKGNvbm5lY3Rpb24pXG4gICAgfVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBjb25uZWN0aW9uIHBvb2wgd2l0aCBvbmUgYWN0aXZlIGNvbm5lY3Rpb24uIFRoaXMgb25lIGluaXRpYWwgY29ubmVjdGlvbiBzZXJ2ZXMgYXMgYSBwcm9iZSB0byBmaW5kIG91dCB3aGV0aGVyIHRoZSBjb25maWd1cmF0aW9uIGlzIHZhbGlkLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgY29ubmVjdGlvbiBoYXMgZXN0YWJsaXNoZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtDb25uZWN0aW9uUG9vbHxQcm9taXNlfVxuICAgKi9cblxuICBjb25uZWN0IChjYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX2Nvbm5lY3QoY2FsbGJhY2spXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3QoZXJyID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpXG4gICAgICAgIHJlc29sdmUodGhpcylcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuXG4gIF9jb25uZWN0IChjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgIGRlYnVnKCdwb29sKCVkKTogYWxyZWFkeSBjb25uZWN0ZWQsIGV4ZWN1dGluZyBjb25uZWN0IGNhbGxiYWNrIGltbWVkaWF0ZWx5JywgSURTLmdldCh0aGlzKSlcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG51bGwsIHRoaXMpXG4gICAgfVxuXG4gICAgdGhpcy5fY29ubmVjdFN0YWNrLnB1c2goY2FsbGJhY2spXG5cbiAgICBpZiAodGhpcy5fY29ubmVjdGluZykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5fY29ubmVjdGluZyA9IHRydWVcbiAgICBkZWJ1ZygncG9vbCglZCk6IGNvbm5lY3RpbmcnLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgLy8gY3JlYXRlIG9uZSB0ZXN0IGNvbm5lY3Rpb24gdG8gY2hlY2sgaWYgZXZlcnl0aGluZyBpcyBva1xuICAgIHRoaXMuX3Bvb2xDcmVhdGUoKS50aGVuKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICBkZWJ1ZygncG9vbCglZCk6IGNvbm5lY3RlZCcsIElEUy5nZXQodGhpcykpXG4gICAgICB0aGlzLl9oZWFsdGh5ID0gdHJ1ZVxuXG4gICAgICByZXR1cm4gdGhpcy5fcG9vbERlc3Ryb3koY29ubmVjdGlvbikudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIHByZXBhcmUgcG9vbFxuICAgICAgICB0aGlzLnBvb2wgPSBuZXcgdGFybi5Qb29sKFxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgY3JlYXRlOiAoKSA9PiB0aGlzLl9wb29sQ3JlYXRlKClcbiAgICAgICAgICAgICAgLnRoZW4oY29ubmVjdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGVhbHRoeSA9IHRydWVcbiAgICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvblxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wb29sLm51bVVzZWQoKSArIHRoaXMucG9vbC5udW1GcmVlKCkgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5faGVhbHRoeSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVyclxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHZhbGlkYXRlOiB0aGlzLl9wb29sVmFsaWRhdGUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGRlc3Ryb3k6IHRoaXMuX3Bvb2xEZXN0cm95LmJpbmQodGhpcyksXG4gICAgICAgICAgICBtYXg6IDEwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDAwLFxuICAgICAgICAgICAgcHJvcGFnYXRlQ3JlYXRlRXJyb3I6IHRydWVcbiAgICAgICAgICB9LCB0aGlzLmNvbmZpZy5wb29sKVxuICAgICAgICApXG5cbiAgICAgICAgdGhpcy5fY29ubmVjdGluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuX2Nvbm5lY3RlZCA9IHRydWVcbiAgICAgIH0pXG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLl9jb25uZWN0U3RhY2suZm9yRWFjaCgoY2IpID0+IHtcbiAgICAgICAgc2V0SW1tZWRpYXRlKGNiLCBudWxsLCB0aGlzKVxuICAgICAgfSlcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgdGhpcy5fY29ubmVjdGluZyA9IGZhbHNlXG4gICAgICB0aGlzLl9jb25uZWN0U3RhY2suZm9yRWFjaCgoY2IpID0+IHtcbiAgICAgICAgc2V0SW1tZWRpYXRlKGNiLCBlcnIpXG4gICAgICB9KVxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5fY29ubmVjdFN0YWNrID0gW11cbiAgICB9KVxuICB9XG5cbiAgZ2V0IHNpemUgKCkge1xuICAgIHJldHVybiB0aGlzLnBvb2wubnVtRnJlZSgpICsgdGhpcy5wb29sLm51bVVzZWQoKSArIHRoaXMucG9vbC5udW1QZW5kaW5nQ3JlYXRlcygpXG4gIH1cblxuICBnZXQgYXZhaWxhYmxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5wb29sLm51bUZyZWUoKVxuICB9XG5cbiAgZ2V0IHBlbmRpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLnBvb2wubnVtUGVuZGluZ0FjcXVpcmVzKClcbiAgfVxuXG4gIGdldCBib3Jyb3dlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucG9vbC5udW1Vc2VkKClcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSBhbGwgYWN0aXZlIGNvbm5lY3Rpb25zIGluIHRoZSBwb29sLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgY29ubmVjdGlvbiBoYXMgY2xvc2VkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7Q29ubmVjdGlvblBvb2x8UHJvbWlzZX1cbiAgICovXG5cbiAgY2xvc2UgKGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fY2xvc2UoY2FsbGJhY2spXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fY2xvc2UoZXJyID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpXG4gICAgICAgIHJlc29sdmUodGhpcylcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuXG4gIF9jbG9zZSAoY2FsbGJhY2spIHtcbiAgICAvLyB3ZSBkb24ndCBhbGxvdyBwb29scyBpbiBhIGNvbm5lY3Rpbmcgc3RhdGUgdG8gYmUgY2xvc2VkIGJlY2F1c2UgaXQgbWVhbnMgdGhlcmUgYXJlIGZhciB0b28gbWFueVxuICAgIC8vIGVkZ2UgY2FzZXMgdG8gZGVhbCB3aXRoXG4gICAgaWYgKHRoaXMuX2Nvbm5lY3RpbmcpIHtcbiAgICAgIGRlYnVnKCdwb29sKCVkKTogY2xvc2UgY2FsbGVkIHdoaWxlIGNvbm5lY3RpbmcnLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgQ29ubmVjdGlvbkVycm9yKCdDYW5ub3QgY2xvc2UgYSBwb29sIHdoaWxlIGl0IGlzIGNvbm5lY3RpbmcnKSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucG9vbCkge1xuICAgICAgZGVidWcoJ3Bvb2woJWQpOiBhbHJlYWR5IGNsb3NlZCwgZXhlY3V0aW5nIGNsb3NlIGNhbGxiYWNrIGltbWVkaWF0ZWx5JywgSURTLmdldCh0aGlzKSlcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG51bGwpXG4gICAgfVxuXG4gICAgdGhpcy5fY2xvc2VTdGFjay5wdXNoKGNhbGxiYWNrKVxuXG4gICAgaWYgKHRoaXMucG9vbC5kZXN0cm95ZWQpIHJldHVyblxuXG4gICAgdGhpcy5fY29ubmVjdGluZyA9IHRoaXMuX2Nvbm5lY3RlZCA9IHRoaXMuX2hlYWx0aHkgPSBmYWxzZVxuXG4gICAgdGhpcy5wb29sLmRlc3Ryb3koKS50aGVuKCgpID0+IHtcbiAgICAgIGRlYnVnKCdwb29sKCVkKTogcG9vbCBjbG9zZWQsIHJlbW92aW5nIHBvb2wgcmVmZXJlbmNlIGFuZCBleGVjdXRpbmcgY2xvc2UgY2FsbGJhY2tzJywgSURTLmdldCh0aGlzKSlcbiAgICAgIHRoaXMucG9vbCA9IG51bGxcbiAgICAgIHRoaXMuX2Nsb3NlU3RhY2suZm9yRWFjaChjYiA9PiB7XG4gICAgICAgIHNldEltbWVkaWF0ZShjYiwgbnVsbClcbiAgICAgIH0pXG4gICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgIHRoaXMucG9vbCA9IG51bGxcbiAgICAgIHRoaXMuX2Nsb3NlU3RhY2suZm9yRWFjaChjYiA9PiB7XG4gICAgICAgIHNldEltbWVkaWF0ZShjYiwgZXJyKVxuICAgICAgfSlcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuX2Nsb3NlU3RhY2sgPSBbXVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBuZXcgcmVxdWVzdCB1c2luZyB0aGlzIGNvbm5lY3Rpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge1JlcXVlc3R9XG4gICAqL1xuXG4gIHJlcXVlc3QgKCkge1xuICAgIHJldHVybiBuZXcgc2hhcmVkLmRyaXZlci5SZXF1ZXN0KHRoaXMpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBuZXcgdHJhbnNhY3Rpb24gdXNpbmcgdGhpcyBjb25uZWN0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbn1cbiAgICovXG5cbiAgdHJhbnNhY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgc2hhcmVkLmRyaXZlci5UcmFuc2FjdGlvbih0aGlzKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgcXVlcnkgdXNpbmcgdGhpcyBjb25uZWN0aW9uIGZyb20gYSB0YWdnZWQgdGVtcGxhdGUgc3RyaW5nLlxuICAgKlxuICAgKiBAdmFyaWF0aW9uIDFcbiAgICogQHBhcmFtIHtBcnJheX0gc3RyaW5ncyBBcnJheSBvZiBzdHJpbmcgbGl0ZXJhbHMuXG4gICAqIEBwYXJhbSB7Li4uKn0ga2V5cyBWYWx1ZXMuXG4gICAqIEByZXR1cm4ge1JlcXVlc3R9XG4gICAqL1xuXG4gIC8qKlxuICAgKiBFeGVjdXRlIHRoZSBTUUwgY29tbWFuZC5cbiAgICpcbiAgICogQHZhcmlhdGlvbiAyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjb21tYW5kIFQtU1FMIGNvbW1hbmQgdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSB7UmVxdWVzdH5yZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgZXhlY3V0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fFByb21pc2V9XG4gICAqL1xuXG4gIHF1ZXJ5ICgpIHtcbiAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHsgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QodGhpcykucXVlcnkoYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pIH1cblxuICAgIGNvbnN0IHZhbHVlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICBjb25zdCBzdHJpbmdzID0gdmFsdWVzLnNoaWZ0KClcblxuICAgIHJldHVybiBuZXcgc2hhcmVkLmRyaXZlci5SZXF1ZXN0KHRoaXMpLl90ZW1wbGF0ZShzdHJpbmdzLCB2YWx1ZXMsICdxdWVyeScpXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBiYXRjaCB1c2luZyB0aGlzIGNvbm5lY3Rpb24gZnJvbSBhIHRhZ2dlZCB0ZW1wbGF0ZSBzdHJpbmcuXG4gICAqXG4gICAqIEB2YXJpYXRpb24gMVxuICAgKiBAcGFyYW0ge0FycmF5fSBzdHJpbmdzIEFycmF5IG9mIHN0cmluZyBsaXRlcmFscy5cbiAgICogQHBhcmFtIHsuLi4qfSBrZXlzIFZhbHVlcy5cbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgdGhlIFNRTCBjb21tYW5kLlxuICAgKlxuICAgKiBAdmFyaWF0aW9uIDJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbW1hbmQgVC1TUUwgY29tbWFuZCB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHtSZXF1ZXN0fnJlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBleGVjdXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1JlcXVlc3R8UHJvbWlzZX1cbiAgICovXG5cbiAgYmF0Y2ggKCkge1xuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykgeyByZXR1cm4gbmV3IHNoYXJlZC5kcml2ZXIuUmVxdWVzdCh0aGlzKS5iYXRjaChhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSkgfVxuXG4gICAgY29uc3QgdmFsdWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuICAgIGNvbnN0IHN0cmluZ3MgPSB2YWx1ZXMuc2hpZnQoKVxuXG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QodGhpcykuX3RlbXBsYXRlKHN0cmluZ3MsIHZhbHVlcywgJ2JhdGNoJylcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbm5lY3Rpb25Qb29sXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/base/connection-pool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/base/index.js":
/*!**********************************************!*\
  !*** ./node_modules/mssql/lib/base/index.js ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst ConnectionPool = __webpack_require__(/*! ./connection-pool */ \"(rsc)/./node_modules/mssql/lib/base/connection-pool.js\")\nconst PreparedStatement = __webpack_require__(/*! ./prepared-statement */ \"(rsc)/./node_modules/mssql/lib/base/prepared-statement.js\")\nconst Request = __webpack_require__(/*! ./request */ \"(rsc)/./node_modules/mssql/lib/base/request.js\")\nconst Transaction = __webpack_require__(/*! ./transaction */ \"(rsc)/./node_modules/mssql/lib/base/transaction.js\")\nconst { ConnectionError, TransactionError, RequestError, PreparedStatementError, MSSQLError } = __webpack_require__(/*! ../error */ \"(rsc)/./node_modules/mssql/lib/error/index.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/./node_modules/mssql/lib/shared.js\")\nconst Table = __webpack_require__(/*! ../table */ \"(rsc)/./node_modules/mssql/lib/table.js\")\nconst ISOLATION_LEVEL = __webpack_require__(/*! ../isolationlevel */ \"(rsc)/./node_modules/mssql/lib/isolationlevel.js\")\nconst { TYPES } = __webpack_require__(/*! ../datatypes */ \"(rsc)/./node_modules/mssql/lib/datatypes.js\")\nconst { connect, close, on, off, removeListener, query, batch } = __webpack_require__(/*! ../global-connection */ \"(rsc)/./node_modules/mssql/lib/global-connection.js\")\n\nmodule.exports = {\n  ConnectionPool,\n  Transaction,\n  Request,\n  PreparedStatement,\n  ConnectionError,\n  TransactionError,\n  RequestError,\n  PreparedStatementError,\n  MSSQLError,\n  driver: shared.driver,\n  exports: {\n    ConnectionError,\n    TransactionError,\n    RequestError,\n    PreparedStatementError,\n    MSSQLError,\n    Table,\n    ISOLATION_LEVEL,\n    TYPES,\n    MAX: 65535, // (1 << 16) - 1\n    map: shared.map,\n    getTypeByValue: shared.getTypeByValue,\n    connect,\n    close,\n    on,\n    removeListener,\n    off,\n    query,\n    batch\n  }\n}\n\nObject.defineProperty(module.exports, \"Promise\", ({\n  enumerable: true,\n  get: () => {\n    return shared.Promise\n  },\n  set: (value) => {\n    shared.Promise = value\n  }\n}))\n\nObject.defineProperty(module.exports, \"valueHandler\", ({\n  enumerable: true,\n  value: shared.valueHandler,\n  writable: false,\n  configurable: false\n}))\n\nfor (const key in TYPES) {\n  const value = TYPES[key]\n  module.exports.exports[key] = value\n  module.exports.exports[key.toUpperCase()] = value\n}\n\n/**\n * @callback Request~requestCallback\n * @param {Error} err Error on error, otherwise null.\n * @param {Object} [result] Request result.\n */\n\n/**\n * @callback Request~bulkCallback\n * @param {Error} err Error on error, otherwise null.\n * @param {Number} [rowsAffected] Number of affected rows.\n */\n\n/**\n * @callback basicCallback\n * @param {Error} err Error on error, otherwise null.\n * @param {Connection} [connection] Acquired connection.\n */\n\n/**\n * @callback acquireCallback\n * @param {Error} err Error on error, otherwise null.\n * @param {Connection} [connection] Acquired connection.\n * @param {Object} [config] Connection config\n */\n\n/**\n * Dispatched after connection has established.\n * @event ConnectionPool#connect\n */\n\n/**\n * Dispatched after connection has closed a pool (by calling close).\n * @event ConnectionPool#close\n */\n\n/**\n * Dispatched when transaction begin.\n * @event Transaction#begin\n */\n\n/**\n * Dispatched on successful commit.\n * @event Transaction#commit\n */\n\n/**\n * Dispatched on successful rollback.\n * @event Transaction#rollback\n */\n\n/**\n * Dispatched when metadata for new recordset are parsed.\n * @event Request#recordset\n */\n\n/**\n * Dispatched when new row is parsed.\n * @event Request#row\n */\n\n/**\n * Dispatched when request is complete.\n * @event Request#done\n */\n\n/**\n * Dispatched on error.\n * @event Request#error\n */\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Jhc2UvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosdUJBQXVCLG1CQUFPLENBQUMsaUZBQW1CO0FBQ2xELDBCQUEwQixtQkFBTyxDQUFDLHVGQUFzQjtBQUN4RCxnQkFBZ0IsbUJBQU8sQ0FBQyxpRUFBVztBQUNuQyxvQkFBb0IsbUJBQU8sQ0FBQyx5RUFBZTtBQUMzQyxRQUFRLHNGQUFzRixFQUFFLG1CQUFPLENBQUMsK0RBQVU7QUFDbEgsZUFBZSxtQkFBTyxDQUFDLDJEQUFXO0FBQ2xDLGNBQWMsbUJBQU8sQ0FBQyx5REFBVTtBQUNoQyx3QkFBd0IsbUJBQU8sQ0FBQywyRUFBbUI7QUFDbkQsUUFBUSxRQUFRLEVBQUUsbUJBQU8sQ0FBQyxpRUFBYztBQUN4QyxRQUFRLHdEQUF3RCxFQUFFLG1CQUFPLENBQUMsaUZBQXNCOztBQUVoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDOztBQUVGLHVEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQzs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxRQUFRO0FBQ25COztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxRQUFRO0FBQ25COztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxZQUFZO0FBQ3ZCOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxZQUFZO0FBQ3ZCLFdBQVcsUUFBUTtBQUNuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvYmFzZS9pbmRleC5qcz8zMDBmIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBDb25uZWN0aW9uUG9vbCA9IHJlcXVpcmUoJy4vY29ubmVjdGlvbi1wb29sJylcbmNvbnN0IFByZXBhcmVkU3RhdGVtZW50ID0gcmVxdWlyZSgnLi9wcmVwYXJlZC1zdGF0ZW1lbnQnKVxuY29uc3QgUmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpXG5jb25zdCBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb24nKVxuY29uc3QgeyBDb25uZWN0aW9uRXJyb3IsIFRyYW5zYWN0aW9uRXJyb3IsIFJlcXVlc3RFcnJvciwgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvciwgTVNTUUxFcnJvciB9ID0gcmVxdWlyZSgnLi4vZXJyb3InKVxuY29uc3Qgc2hhcmVkID0gcmVxdWlyZSgnLi4vc2hhcmVkJylcbmNvbnN0IFRhYmxlID0gcmVxdWlyZSgnLi4vdGFibGUnKVxuY29uc3QgSVNPTEFUSU9OX0xFVkVMID0gcmVxdWlyZSgnLi4vaXNvbGF0aW9ubGV2ZWwnKVxuY29uc3QgeyBUWVBFUyB9ID0gcmVxdWlyZSgnLi4vZGF0YXR5cGVzJylcbmNvbnN0IHsgY29ubmVjdCwgY2xvc2UsIG9uLCBvZmYsIHJlbW92ZUxpc3RlbmVyLCBxdWVyeSwgYmF0Y2ggfSA9IHJlcXVpcmUoJy4uL2dsb2JhbC1jb25uZWN0aW9uJylcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIENvbm5lY3Rpb25Qb29sLFxuICBUcmFuc2FjdGlvbixcbiAgUmVxdWVzdCxcbiAgUHJlcGFyZWRTdGF0ZW1lbnQsXG4gIENvbm5lY3Rpb25FcnJvcixcbiAgVHJhbnNhY3Rpb25FcnJvcixcbiAgUmVxdWVzdEVycm9yLFxuICBQcmVwYXJlZFN0YXRlbWVudEVycm9yLFxuICBNU1NRTEVycm9yLFxuICBkcml2ZXI6IHNoYXJlZC5kcml2ZXIsXG4gIGV4cG9ydHM6IHtcbiAgICBDb25uZWN0aW9uRXJyb3IsXG4gICAgVHJhbnNhY3Rpb25FcnJvcixcbiAgICBSZXF1ZXN0RXJyb3IsXG4gICAgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcixcbiAgICBNU1NRTEVycm9yLFxuICAgIFRhYmxlLFxuICAgIElTT0xBVElPTl9MRVZFTCxcbiAgICBUWVBFUyxcbiAgICBNQVg6IDY1NTM1LCAvLyAoMSA8PCAxNikgLSAxXG4gICAgbWFwOiBzaGFyZWQubWFwLFxuICAgIGdldFR5cGVCeVZhbHVlOiBzaGFyZWQuZ2V0VHlwZUJ5VmFsdWUsXG4gICAgY29ubmVjdCxcbiAgICBjbG9zZSxcbiAgICBvbixcbiAgICByZW1vdmVMaXN0ZW5lcixcbiAgICBvZmYsXG4gICAgcXVlcnksXG4gICAgYmF0Y2hcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsICdQcm9taXNlJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6ICgpID0+IHtcbiAgICByZXR1cm4gc2hhcmVkLlByb21pc2VcbiAgfSxcbiAgc2V0OiAodmFsdWUpID0+IHtcbiAgICBzaGFyZWQuUHJvbWlzZSA9IHZhbHVlXG4gIH1cbn0pXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ3ZhbHVlSGFuZGxlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHNoYXJlZC52YWx1ZUhhbmRsZXIsXG4gIHdyaXRhYmxlOiBmYWxzZSxcbiAgY29uZmlndXJhYmxlOiBmYWxzZVxufSlcblxuZm9yIChjb25zdCBrZXkgaW4gVFlQRVMpIHtcbiAgY29uc3QgdmFsdWUgPSBUWVBFU1trZXldXG4gIG1vZHVsZS5leHBvcnRzLmV4cG9ydHNba2V5XSA9IHZhbHVlXG4gIG1vZHVsZS5leHBvcnRzLmV4cG9ydHNba2V5LnRvVXBwZXJDYXNlKCldID0gdmFsdWVcbn1cblxuLyoqXG4gKiBAY2FsbGJhY2sgUmVxdWVzdH5yZXF1ZXN0Q2FsbGJhY2tcbiAqIEBwYXJhbSB7RXJyb3J9IGVyciBFcnJvciBvbiBlcnJvciwgb3RoZXJ3aXNlIG51bGwuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3VsdF0gUmVxdWVzdCByZXN1bHQuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgUmVxdWVzdH5idWxrQ2FsbGJhY2tcbiAqIEBwYXJhbSB7RXJyb3J9IGVyciBFcnJvciBvbiBlcnJvciwgb3RoZXJ3aXNlIG51bGwuXG4gKiBAcGFyYW0ge051bWJlcn0gW3Jvd3NBZmZlY3RlZF0gTnVtYmVyIG9mIGFmZmVjdGVkIHJvd3MuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgYmFzaWNDYWxsYmFja1xuICogQHBhcmFtIHtFcnJvcn0gZXJyIEVycm9yIG9uIGVycm9yLCBvdGhlcndpc2UgbnVsbC5cbiAqIEBwYXJhbSB7Q29ubmVjdGlvbn0gW2Nvbm5lY3Rpb25dIEFjcXVpcmVkIGNvbm5lY3Rpb24uXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgYWNxdWlyZUNhbGxiYWNrXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnIgRXJyb3Igb24gZXJyb3IsIG90aGVyd2lzZSBudWxsLlxuICogQHBhcmFtIHtDb25uZWN0aW9ufSBbY29ubmVjdGlvbl0gQWNxdWlyZWQgY29ubmVjdGlvbi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSBDb25uZWN0aW9uIGNvbmZpZ1xuICovXG5cbi8qKlxuICogRGlzcGF0Y2hlZCBhZnRlciBjb25uZWN0aW9uIGhhcyBlc3RhYmxpc2hlZC5cbiAqIEBldmVudCBDb25uZWN0aW9uUG9vbCNjb25uZWN0XG4gKi9cblxuLyoqXG4gKiBEaXNwYXRjaGVkIGFmdGVyIGNvbm5lY3Rpb24gaGFzIGNsb3NlZCBhIHBvb2wgKGJ5IGNhbGxpbmcgY2xvc2UpLlxuICogQGV2ZW50IENvbm5lY3Rpb25Qb29sI2Nsb3NlXG4gKi9cblxuLyoqXG4gKiBEaXNwYXRjaGVkIHdoZW4gdHJhbnNhY3Rpb24gYmVnaW4uXG4gKiBAZXZlbnQgVHJhbnNhY3Rpb24jYmVnaW5cbiAqL1xuXG4vKipcbiAqIERpc3BhdGNoZWQgb24gc3VjY2Vzc2Z1bCBjb21taXQuXG4gKiBAZXZlbnQgVHJhbnNhY3Rpb24jY29tbWl0XG4gKi9cblxuLyoqXG4gKiBEaXNwYXRjaGVkIG9uIHN1Y2Nlc3NmdWwgcm9sbGJhY2suXG4gKiBAZXZlbnQgVHJhbnNhY3Rpb24jcm9sbGJhY2tcbiAqL1xuXG4vKipcbiAqIERpc3BhdGNoZWQgd2hlbiBtZXRhZGF0YSBmb3IgbmV3IHJlY29yZHNldCBhcmUgcGFyc2VkLlxuICogQGV2ZW50IFJlcXVlc3QjcmVjb3Jkc2V0XG4gKi9cblxuLyoqXG4gKiBEaXNwYXRjaGVkIHdoZW4gbmV3IHJvdyBpcyBwYXJzZWQuXG4gKiBAZXZlbnQgUmVxdWVzdCNyb3dcbiAqL1xuXG4vKipcbiAqIERpc3BhdGNoZWQgd2hlbiByZXF1ZXN0IGlzIGNvbXBsZXRlLlxuICogQGV2ZW50IFJlcXVlc3QjZG9uZVxuICovXG5cbi8qKlxuICogRGlzcGF0Y2hlZCBvbiBlcnJvci5cbiAqIEBldmVudCBSZXF1ZXN0I2Vycm9yXG4gKi9cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/base/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/base/prepared-statement.js":
/*!***********************************************************!*\
  !*** ./node_modules/mssql/lib/base/prepared-statement.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\")('mssql:base')\nconst { EventEmitter } = __webpack_require__(/*! node:events */ \"node:events\")\nconst { IDS, objectHasProperty } = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/mssql/lib/utils.js\")\nconst globalConnection = __webpack_require__(/*! ../global-connection */ \"(rsc)/./node_modules/mssql/lib/global-connection.js\")\nconst { TransactionError, PreparedStatementError } = __webpack_require__(/*! ../error */ \"(rsc)/./node_modules/mssql/lib/error/index.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/./node_modules/mssql/lib/shared.js\")\nconst { TYPES, declare } = __webpack_require__(/*! ../datatypes */ \"(rsc)/./node_modules/mssql/lib/datatypes.js\")\n\n/**\n * Class PreparedStatement.\n *\n * IMPORTANT: Rememeber that each prepared statement means one reserved connection from the pool. Don't forget to unprepare a prepared statement!\n *\n * @property {String} statement Prepared SQL statement.\n */\n\nclass PreparedStatement extends EventEmitter {\n  /**\n   * Creates a new Prepared Statement.\n   *\n   * @param {ConnectionPool|Transaction} [holder]\n   */\n\n  constructor (parent) {\n    super()\n\n    IDS.add(this, 'PreparedStatement')\n    debug('ps(%d): created', IDS.get(this))\n\n    this.parent = parent || globalConnection.pool\n    this._handle = 0\n    this.prepared = false\n    this.parameters = {}\n  }\n\n  get config () {\n    return this.parent.config\n  }\n\n  get connected () {\n    return this.parent.connected\n  }\n\n  /**\n   * Acquire connection from connection pool.\n   *\n   * @param {Request} request Request.\n   * @param {ConnectionPool~acquireCallback} [callback] A callback which is called after connection has established, or an error has occurred. If omited, method returns Promise.\n   * @return {PreparedStatement|Promise}\n   */\n\n  acquire (request, callback) {\n    if (!this._acquiredConnection) {\n      setImmediate(callback, new PreparedStatementError('Statement is not prepared. Call prepare() first.', 'ENOTPREPARED'))\n      return this\n    }\n\n    if (this._activeRequest) {\n      setImmediate(callback, new TransactionError(\"Can't acquire connection for the request. There is another request in progress.\", 'EREQINPROG'))\n      return this\n    }\n\n    this._activeRequest = request\n    setImmediate(callback, null, this._acquiredConnection, this._acquiredConfig)\n    return this\n  }\n\n  /**\n   * Release connection back to the pool.\n   *\n   * @param {Connection} connection Previously acquired connection.\n   * @return {PreparedStatement}\n   */\n\n  release (connection) {\n    if (connection === this._acquiredConnection) {\n      this._activeRequest = null\n    }\n\n    return this\n  }\n\n  /**\n   * Add an input parameter to the prepared statement.\n   *\n   * @param {String} name Name of the input parameter without @ char.\n   * @param {*} type SQL data type of input parameter.\n   * @return {PreparedStatement}\n   */\n\n  input (name, type) {\n    if (/--| |\\/\\*|\\*\\/|'/.test(name)) {\n      throw new PreparedStatementError(`SQL injection warning for param '${name}'`, 'EINJECT')\n    }\n\n    if (arguments.length < 2) {\n      throw new PreparedStatementError('Invalid number of arguments. 2 arguments expected.', 'EARGS')\n    }\n\n    if (type instanceof Function) {\n      type = type()\n    }\n\n    if (objectHasProperty(this.parameters, name)) {\n      throw new PreparedStatementError(`The parameter name ${name} has already been declared. Parameter names must be unique`, 'EDUPEPARAM')\n    }\n\n    this.parameters[name] = {\n      name,\n      type: type.type,\n      io: 1,\n      length: type.length,\n      scale: type.scale,\n      precision: type.precision,\n      tvpType: type.tvpType\n    }\n\n    return this\n  }\n\n  /**\n   * Replace an input parameter on the request.\n   *\n   * @param {String} name Name of the input parameter without @ char.\n   * @param {*} [type] SQL data type of input parameter. If you omit type, module automaticaly decide which SQL data type should be used based on JS data type.\n   * @param {*} value Input parameter value. `undefined` and `NaN` values are automatically converted to `null` values.\n   * @return {Request}\n   */\n\n  replaceInput (name, type, value) {\n    delete this.parameters[name]\n\n    return this.input(name, type, value)\n  }\n\n  /**\n   * Add an output parameter to the prepared statement.\n   *\n   * @param {String} name Name of the output parameter without @ char.\n   * @param {*} type SQL data type of output parameter.\n   * @return {PreparedStatement}\n   */\n\n  output (name, type) {\n    if (/--| |\\/\\*|\\*\\/|'/.test(name)) {\n      throw new PreparedStatementError(`SQL injection warning for param '${name}'`, 'EINJECT')\n    }\n\n    if (arguments.length < 2) {\n      throw new PreparedStatementError('Invalid number of arguments. 2 arguments expected.', 'EARGS')\n    }\n\n    if (type instanceof Function) type = type()\n\n    if (objectHasProperty(this.parameters, name)) {\n      throw new PreparedStatementError(`The parameter name ${name} has already been declared. Parameter names must be unique`, 'EDUPEPARAM')\n    }\n\n    this.parameters[name] = {\n      name,\n      type: type.type,\n      io: 2,\n      length: type.length,\n      scale: type.scale,\n      precision: type.precision\n    }\n\n    return this\n  }\n\n  /**\n   * Replace an output parameter on the request.\n   *\n   * @param {String} name Name of the output parameter without @ char.\n   * @param {*} type SQL data type of output parameter.\n   * @return {PreparedStatement}\n   */\n\n  replaceOutput (name, type) {\n    delete this.parameters[name]\n\n    return this.output(name, type)\n  }\n\n  /**\n   * Prepare a statement.\n   *\n   * @param {String} statement SQL statement to prepare.\n   * @param {basicCallback} [callback] A callback which is called after preparation has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {PreparedStatement|Promise}\n   */\n\n  prepare (statement, callback) {\n    if (typeof callback === 'function') {\n      this._prepare(statement, callback)\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._prepare(statement, err => {\n        if (err) return reject(err)\n        resolve(this)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {String} statement\n   * @param {basicCallback} callback\n   */\n\n  _prepare (statement, callback) {\n    debug('ps(%d): prepare', IDS.get(this))\n\n    if (typeof statement === 'function') {\n      callback = statement\n      statement = undefined\n    }\n\n    if (this.prepared) {\n      return setImmediate(callback, new PreparedStatementError('Statement is already prepared.', 'EALREADYPREPARED'))\n    }\n\n    this.statement = statement || this.statement\n\n    this.parent.acquire(this, (err, connection, config) => {\n      if (err) return callback(err)\n\n      this._acquiredConnection = connection\n      this._acquiredConfig = config\n\n      const req = new shared.driver.Request(this)\n      req.stream = false\n      req.output('handle', TYPES.Int)\n      req.input('params', TYPES.NVarChar, ((() => {\n        const result = []\n        for (const name in this.parameters) {\n          if (!objectHasProperty(this.parameters, name)) {\n            continue\n          }\n          const param = this.parameters[name]\n          result.push(`@${name} ${declare(param.type, param)}${param.io === 2 ? ' output' : ''}`)\n        }\n        return result\n      })()).join(','))\n      req.input('stmt', TYPES.NVarChar, this.statement)\n      req.execute('sp_prepare', (err, result) => {\n        if (err) {\n          this.parent.release(this._acquiredConnection)\n          this._acquiredConnection = null\n          this._acquiredConfig = null\n\n          return callback(err)\n        }\n\n        debug('ps(%d): prepared', IDS.get(this))\n\n        this._handle = result.output.handle\n        this.prepared = true\n\n        callback(null)\n      })\n    })\n  }\n\n  /**\n   * Execute a prepared statement.\n   *\n   * @param {Object} values An object whose names correspond to the names of parameters that were added to the prepared statement before it was prepared.\n   * @param {basicCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  execute (values, callback) {\n    if (this.stream || (typeof callback === 'function')) {\n      return this._execute(values, callback)\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._execute(values, (err, recordset) => {\n        if (err) return reject(err)\n        resolve(recordset)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {Object} values\n   * @param {basicCallback} callback\n   */\n\n  _execute (values, callback) {\n    const req = new shared.driver.Request(this)\n    req.stream = this.stream\n    req.arrayRowMode = this.arrayRowMode\n    req.input('handle', TYPES.Int, this._handle)\n\n    // copy parameters with new values\n    for (const name in this.parameters) {\n      if (!objectHasProperty(this.parameters, name)) {\n        continue\n      }\n      const param = this.parameters[name]\n      req.parameters[name] = {\n        name,\n        type: param.type,\n        io: param.io,\n        value: values[name],\n        length: param.length,\n        scale: param.scale,\n        precision: param.precision\n      }\n    }\n\n    req.execute('sp_execute', (err, result) => {\n      if (err) return callback(err)\n\n      callback(null, result)\n    })\n\n    return req\n  }\n\n  /**\n   * Unprepare a prepared statement.\n   *\n   * @param {basicCallback} [callback] A callback which is called after unpreparation has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {PreparedStatement|Promise}\n   */\n\n  unprepare (callback) {\n    if (typeof callback === 'function') {\n      this._unprepare(callback)\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._unprepare(err => {\n        if (err) return reject(err)\n        resolve()\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} callback\n   */\n\n  _unprepare (callback) {\n    debug('ps(%d): unprepare', IDS.get(this))\n\n    if (!this.prepared) {\n      return setImmediate(callback, new PreparedStatementError('Statement is not prepared. Call prepare() first.', 'ENOTPREPARED'))\n    }\n\n    if (this._activeRequest) {\n      return setImmediate(callback, new TransactionError(\"Can't unprepare the statement. There is a request in progress.\", 'EREQINPROG'))\n    }\n\n    const req = new shared.driver.Request(this)\n    req.stream = false\n    req.input('handle', TYPES.Int, this._handle)\n    req.execute('sp_unprepare', err => {\n      if (err) return callback(err)\n\n      this.parent.release(this._acquiredConnection)\n      this._acquiredConnection = null\n      this._acquiredConfig = null\n      this._handle = 0\n      this.prepared = false\n\n      debug('ps(%d): unprepared', IDS.get(this))\n\n      return callback(null)\n    })\n  }\n}\n\nmodule.exports = PreparedStatement\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Jhc2UvcHJlcGFyZWQtc3RhdGVtZW50LmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLGNBQWMsbUJBQU8sQ0FBQyxzREFBTztBQUM3QixRQUFRLGVBQWUsRUFBRSxtQkFBTyxDQUFDLGdDQUFhO0FBQzlDLFFBQVEseUJBQXlCLEVBQUUsbUJBQU8sQ0FBQyx5REFBVTtBQUNyRCx5QkFBeUIsbUJBQU8sQ0FBQyxpRkFBc0I7QUFDdkQsUUFBUSwyQ0FBMkMsRUFBRSxtQkFBTyxDQUFDLCtEQUFVO0FBQ3ZFLGVBQWUsbUJBQU8sQ0FBQywyREFBVztBQUNsQyxRQUFRLGlCQUFpQixFQUFFLG1CQUFPLENBQUMsaUVBQWM7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVE7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDRCQUE0QjtBQUN6Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QixhQUFhLGdDQUFnQztBQUM3QyxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFlBQVk7QUFDekIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsR0FBRztBQUNoQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBLDJFQUEyRSxLQUFLO0FBQ2hGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2REFBNkQsTUFBTTtBQUNuRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxHQUFHO0FBQ2hCLGFBQWEsR0FBRztBQUNoQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLEdBQUc7QUFDaEIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQSwyRUFBMkUsS0FBSztBQUNoRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw2REFBNkQsTUFBTTtBQUNuRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsR0FBRztBQUNoQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLGVBQWU7QUFDNUIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxlQUFlO0FBQzVCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixNQUFNLEVBQUUsMkJBQTJCLEVBQUUsZ0NBQWdDO0FBQy9GO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsZUFBZTtBQUM1QixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxlQUFlO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9iYXNlL3ByZXBhcmVkLXN0YXRlbWVudC5qcz81YzVmIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ21zc3FsOmJhc2UnKVxuY29uc3QgeyBFdmVudEVtaXR0ZXIgfSA9IHJlcXVpcmUoJ25vZGU6ZXZlbnRzJylcbmNvbnN0IHsgSURTLCBvYmplY3RIYXNQcm9wZXJ0eSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMnKVxuY29uc3QgZ2xvYmFsQ29ubmVjdGlvbiA9IHJlcXVpcmUoJy4uL2dsb2JhbC1jb25uZWN0aW9uJylcbmNvbnN0IHsgVHJhbnNhY3Rpb25FcnJvciwgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvciB9ID0gcmVxdWlyZSgnLi4vZXJyb3InKVxuY29uc3Qgc2hhcmVkID0gcmVxdWlyZSgnLi4vc2hhcmVkJylcbmNvbnN0IHsgVFlQRVMsIGRlY2xhcmUgfSA9IHJlcXVpcmUoJy4uL2RhdGF0eXBlcycpXG5cbi8qKlxuICogQ2xhc3MgUHJlcGFyZWRTdGF0ZW1lbnQuXG4gKlxuICogSU1QT1JUQU5UOiBSZW1lbWViZXIgdGhhdCBlYWNoIHByZXBhcmVkIHN0YXRlbWVudCBtZWFucyBvbmUgcmVzZXJ2ZWQgY29ubmVjdGlvbiBmcm9tIHRoZSBwb29sLiBEb24ndCBmb3JnZXQgdG8gdW5wcmVwYXJlIGEgcHJlcGFyZWQgc3RhdGVtZW50IVxuICpcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBzdGF0ZW1lbnQgUHJlcGFyZWQgU1FMIHN0YXRlbWVudC5cbiAqL1xuXG5jbGFzcyBQcmVwYXJlZFN0YXRlbWVudCBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFByZXBhcmVkIFN0YXRlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtDb25uZWN0aW9uUG9vbHxUcmFuc2FjdGlvbn0gW2hvbGRlcl1cbiAgICovXG5cbiAgY29uc3RydWN0b3IgKHBhcmVudCkge1xuICAgIHN1cGVyKClcblxuICAgIElEUy5hZGQodGhpcywgJ1ByZXBhcmVkU3RhdGVtZW50JylcbiAgICBkZWJ1ZygncHMoJWQpOiBjcmVhdGVkJywgSURTLmdldCh0aGlzKSlcblxuICAgIHRoaXMucGFyZW50ID0gcGFyZW50IHx8IGdsb2JhbENvbm5lY3Rpb24ucG9vbFxuICAgIHRoaXMuX2hhbmRsZSA9IDBcbiAgICB0aGlzLnByZXBhcmVkID0gZmFsc2VcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSB7fVxuICB9XG5cbiAgZ2V0IGNvbmZpZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyZW50LmNvbmZpZ1xuICB9XG5cbiAgZ2V0IGNvbm5lY3RlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyZW50LmNvbm5lY3RlZFxuICB9XG5cbiAgLyoqXG4gICAqIEFjcXVpcmUgY29ubmVjdGlvbiBmcm9tIGNvbm5lY3Rpb24gcG9vbC5cbiAgICpcbiAgICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0IFJlcXVlc3QuXG4gICAqIEBwYXJhbSB7Q29ubmVjdGlvblBvb2x+YWNxdWlyZUNhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGNvbm5lY3Rpb24gaGFzIGVzdGFibGlzaGVkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7UHJlcGFyZWRTdGF0ZW1lbnR8UHJvbWlzZX1cbiAgICovXG5cbiAgYWNxdWlyZSAocmVxdWVzdCwgY2FsbGJhY2spIHtcbiAgICBpZiAoIXRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbikge1xuICAgICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcignU3RhdGVtZW50IGlzIG5vdCBwcmVwYXJlZC4gQ2FsbCBwcmVwYXJlKCkgZmlyc3QuJywgJ0VOT1RQUkVQQVJFRCcpKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlUmVxdWVzdCkge1xuICAgICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgVHJhbnNhY3Rpb25FcnJvcihcIkNhbid0IGFjcXVpcmUgY29ubmVjdGlvbiBmb3IgdGhlIHJlcXVlc3QuIFRoZXJlIGlzIGFub3RoZXIgcmVxdWVzdCBpbiBwcm9ncmVzcy5cIiwgJ0VSRVFJTlBST0cnKSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgdGhpcy5fYWN0aXZlUmVxdWVzdCA9IHJlcXVlc3RcbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG51bGwsIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbiwgdGhpcy5fYWNxdWlyZWRDb25maWcpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGNvbm5lY3Rpb24gYmFjayB0byB0aGUgcG9vbC5cbiAgICpcbiAgICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uZWN0aW9uIFByZXZpb3VzbHkgYWNxdWlyZWQgY29ubmVjdGlvbi5cbiAgICogQHJldHVybiB7UHJlcGFyZWRTdGF0ZW1lbnR9XG4gICAqL1xuXG4gIHJlbGVhc2UgKGNvbm5lY3Rpb24pIHtcbiAgICBpZiAoY29ubmVjdGlvbiA9PT0gdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uKSB7XG4gICAgICB0aGlzLl9hY3RpdmVSZXF1ZXN0ID0gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIGlucHV0IHBhcmFtZXRlciB0byB0aGUgcHJlcGFyZWQgc3RhdGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBpbnB1dCBwYXJhbWV0ZXIgd2l0aG91dCBAIGNoYXIuXG4gICAqIEBwYXJhbSB7Kn0gdHlwZSBTUUwgZGF0YSB0eXBlIG9mIGlucHV0IHBhcmFtZXRlci5cbiAgICogQHJldHVybiB7UHJlcGFyZWRTdGF0ZW1lbnR9XG4gICAqL1xuXG4gIGlucHV0IChuYW1lLCB0eXBlKSB7XG4gICAgaWYgKC8tLXwgfFxcL1xcKnxcXCpcXC98Jy8udGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFByZXBhcmVkU3RhdGVtZW50RXJyb3IoYFNRTCBpbmplY3Rpb24gd2FybmluZyBmb3IgcGFyYW0gJyR7bmFtZX0nYCwgJ0VJTkpFQ1QnKVxuICAgIH1cblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgdGhyb3cgbmV3IFByZXBhcmVkU3RhdGVtZW50RXJyb3IoJ0ludmFsaWQgbnVtYmVyIG9mIGFyZ3VtZW50cy4gMiBhcmd1bWVudHMgZXhwZWN0ZWQuJywgJ0VBUkdTJylcbiAgICB9XG5cbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICB0eXBlID0gdHlwZSgpXG4gICAgfVxuXG4gICAgaWYgKG9iamVjdEhhc1Byb3BlcnR5KHRoaXMucGFyYW1ldGVycywgbmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBQcmVwYXJlZFN0YXRlbWVudEVycm9yKGBUaGUgcGFyYW1ldGVyIG5hbWUgJHtuYW1lfSBoYXMgYWxyZWFkeSBiZWVuIGRlY2xhcmVkLiBQYXJhbWV0ZXIgbmFtZXMgbXVzdCBiZSB1bmlxdWVgLCAnRURVUEVQQVJBTScpXG4gICAgfVxuXG4gICAgdGhpcy5wYXJhbWV0ZXJzW25hbWVdID0ge1xuICAgICAgbmFtZSxcbiAgICAgIHR5cGU6IHR5cGUudHlwZSxcbiAgICAgIGlvOiAxLFxuICAgICAgbGVuZ3RoOiB0eXBlLmxlbmd0aCxcbiAgICAgIHNjYWxlOiB0eXBlLnNjYWxlLFxuICAgICAgcHJlY2lzaW9uOiB0eXBlLnByZWNpc2lvbixcbiAgICAgIHR2cFR5cGU6IHR5cGUudHZwVHlwZVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZSBhbiBpbnB1dCBwYXJhbWV0ZXIgb24gdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGlucHV0IHBhcmFtZXRlciB3aXRob3V0IEAgY2hhci5cbiAgICogQHBhcmFtIHsqfSBbdHlwZV0gU1FMIGRhdGEgdHlwZSBvZiBpbnB1dCBwYXJhbWV0ZXIuIElmIHlvdSBvbWl0IHR5cGUsIG1vZHVsZSBhdXRvbWF0aWNhbHkgZGVjaWRlIHdoaWNoIFNRTCBkYXRhIHR5cGUgc2hvdWxkIGJlIHVzZWQgYmFzZWQgb24gSlMgZGF0YSB0eXBlLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIElucHV0IHBhcmFtZXRlciB2YWx1ZS4gYHVuZGVmaW5lZGAgYW5kIGBOYU5gIHZhbHVlcyBhcmUgYXV0b21hdGljYWxseSBjb252ZXJ0ZWQgdG8gYG51bGxgIHZhbHVlcy5cbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgcmVwbGFjZUlucHV0IChuYW1lLCB0eXBlLCB2YWx1ZSkge1xuICAgIGRlbGV0ZSB0aGlzLnBhcmFtZXRlcnNbbmFtZV1cblxuICAgIHJldHVybiB0aGlzLmlucHV0KG5hbWUsIHR5cGUsIHZhbHVlKVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBvdXRwdXQgcGFyYW1ldGVyIHRvIHRoZSBwcmVwYXJlZCBzdGF0ZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIG91dHB1dCBwYXJhbWV0ZXIgd2l0aG91dCBAIGNoYXIuXG4gICAqIEBwYXJhbSB7Kn0gdHlwZSBTUUwgZGF0YSB0eXBlIG9mIG91dHB1dCBwYXJhbWV0ZXIuXG4gICAqIEByZXR1cm4ge1ByZXBhcmVkU3RhdGVtZW50fVxuICAgKi9cblxuICBvdXRwdXQgKG5hbWUsIHR5cGUpIHtcbiAgICBpZiAoLy0tfCB8XFwvXFwqfFxcKlxcL3wnLy50ZXN0KG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcihgU1FMIGluamVjdGlvbiB3YXJuaW5nIGZvciBwYXJhbSAnJHtuYW1lfSdgLCAnRUlOSkVDVCcpXG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICB0aHJvdyBuZXcgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcignSW52YWxpZCBudW1iZXIgb2YgYXJndW1lbnRzLiAyIGFyZ3VtZW50cyBleHBlY3RlZC4nLCAnRUFSR1MnKVxuICAgIH1cblxuICAgIGlmICh0eXBlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHR5cGUgPSB0eXBlKClcblxuICAgIGlmIChvYmplY3RIYXNQcm9wZXJ0eSh0aGlzLnBhcmFtZXRlcnMsIG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcihgVGhlIHBhcmFtZXRlciBuYW1lICR7bmFtZX0gaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZC4gUGFyYW1ldGVyIG5hbWVzIG11c3QgYmUgdW5pcXVlYCwgJ0VEVVBFUEFSQU0nKVxuICAgIH1cblxuICAgIHRoaXMucGFyYW1ldGVyc1tuYW1lXSA9IHtcbiAgICAgIG5hbWUsXG4gICAgICB0eXBlOiB0eXBlLnR5cGUsXG4gICAgICBpbzogMixcbiAgICAgIGxlbmd0aDogdHlwZS5sZW5ndGgsXG4gICAgICBzY2FsZTogdHlwZS5zY2FsZSxcbiAgICAgIHByZWNpc2lvbjogdHlwZS5wcmVjaXNpb25cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgYW4gb3V0cHV0IHBhcmFtZXRlciBvbiB0aGUgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgb3V0cHV0IHBhcmFtZXRlciB3aXRob3V0IEAgY2hhci5cbiAgICogQHBhcmFtIHsqfSB0eXBlIFNRTCBkYXRhIHR5cGUgb2Ygb3V0cHV0IHBhcmFtZXRlci5cbiAgICogQHJldHVybiB7UHJlcGFyZWRTdGF0ZW1lbnR9XG4gICAqL1xuXG4gIHJlcGxhY2VPdXRwdXQgKG5hbWUsIHR5cGUpIHtcbiAgICBkZWxldGUgdGhpcy5wYXJhbWV0ZXJzW25hbWVdXG5cbiAgICByZXR1cm4gdGhpcy5vdXRwdXQobmFtZSwgdHlwZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGEgc3RhdGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhdGVtZW50IFNRTCBzdGF0ZW1lbnQgdG8gcHJlcGFyZS5cbiAgICogQHBhcmFtIHtiYXNpY0NhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIHByZXBhcmF0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtQcmVwYXJlZFN0YXRlbWVudHxQcm9taXNlfVxuICAgKi9cblxuICBwcmVwYXJlIChzdGF0ZW1lbnQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fcHJlcGFyZShzdGF0ZW1lbnQsIGNhbGxiYWNrKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3ByZXBhcmUoc3RhdGVtZW50LCBlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycilcbiAgICAgICAgcmVzb2x2ZSh0aGlzKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdGF0ZW1lbnRcbiAgICogQHBhcmFtIHtiYXNpY0NhbGxiYWNrfSBjYWxsYmFja1xuICAgKi9cblxuICBfcHJlcGFyZSAoc3RhdGVtZW50LCBjYWxsYmFjaykge1xuICAgIGRlYnVnKCdwcyglZCk6IHByZXBhcmUnLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgaWYgKHR5cGVvZiBzdGF0ZW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gc3RhdGVtZW50XG4gICAgICBzdGF0ZW1lbnQgPSB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcmVwYXJlZCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFByZXBhcmVkU3RhdGVtZW50RXJyb3IoJ1N0YXRlbWVudCBpcyBhbHJlYWR5IHByZXBhcmVkLicsICdFQUxSRUFEWVBSRVBBUkVEJykpXG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZW1lbnQgPSBzdGF0ZW1lbnQgfHwgdGhpcy5zdGF0ZW1lbnRcblxuICAgIHRoaXMucGFyZW50LmFjcXVpcmUodGhpcywgKGVyciwgY29ubmVjdGlvbiwgY29uZmlnKSA9PiB7XG4gICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuXG4gICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24gPSBjb25uZWN0aW9uXG4gICAgICB0aGlzLl9hY3F1aXJlZENvbmZpZyA9IGNvbmZpZ1xuXG4gICAgICBjb25zdCByZXEgPSBuZXcgc2hhcmVkLmRyaXZlci5SZXF1ZXN0KHRoaXMpXG4gICAgICByZXEuc3RyZWFtID0gZmFsc2VcbiAgICAgIHJlcS5vdXRwdXQoJ2hhbmRsZScsIFRZUEVTLkludClcbiAgICAgIHJlcS5pbnB1dCgncGFyYW1zJywgVFlQRVMuTlZhckNoYXIsICgoKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgaWYgKCFvYmplY3RIYXNQcm9wZXJ0eSh0aGlzLnBhcmFtZXRlcnMsIG5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMucGFyYW1ldGVyc1tuYW1lXVxuICAgICAgICAgIHJlc3VsdC5wdXNoKGBAJHtuYW1lfSAke2RlY2xhcmUocGFyYW0udHlwZSwgcGFyYW0pfSR7cGFyYW0uaW8gPT09IDIgPyAnIG91dHB1dCcgOiAnJ31gKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH0pKCkpLmpvaW4oJywnKSlcbiAgICAgIHJlcS5pbnB1dCgnc3RtdCcsIFRZUEVTLk5WYXJDaGFyLCB0aGlzLnN0YXRlbWVudClcbiAgICAgIHJlcS5leGVjdXRlKCdzcF9wcmVwYXJlJywgKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB0aGlzLnBhcmVudC5yZWxlYXNlKHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbilcbiAgICAgICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24gPSBudWxsXG4gICAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25maWcgPSBudWxsXG5cbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKVxuICAgICAgICB9XG5cbiAgICAgICAgZGVidWcoJ3BzKCVkKTogcHJlcGFyZWQnLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgICAgIHRoaXMuX2hhbmRsZSA9IHJlc3VsdC5vdXRwdXQuaGFuZGxlXG4gICAgICAgIHRoaXMucHJlcGFyZWQgPSB0cnVlXG5cbiAgICAgICAgY2FsbGJhY2sobnVsbClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgcHJlcGFyZWQgc3RhdGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIEFuIG9iamVjdCB3aG9zZSBuYW1lcyBjb3JyZXNwb25kIHRvIHRoZSBuYW1lcyBvZiBwYXJhbWV0ZXJzIHRoYXQgd2VyZSBhZGRlZCB0byB0aGUgcHJlcGFyZWQgc3RhdGVtZW50IGJlZm9yZSBpdCB3YXMgcHJlcGFyZWQuXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBleGVjdXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1JlcXVlc3R8UHJvbWlzZX1cbiAgICovXG5cbiAgZXhlY3V0ZSAodmFsdWVzLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnN0cmVhbSB8fCAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGUodmFsdWVzLCBjYWxsYmFjaylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX2V4ZWN1dGUodmFsdWVzLCAoZXJyLCByZWNvcmRzZXQpID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpXG4gICAgICAgIHJlc29sdmUocmVjb3Jkc2V0KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXNcbiAgICogQHBhcmFtIHtiYXNpY0NhbGxiYWNrfSBjYWxsYmFja1xuICAgKi9cblxuICBfZXhlY3V0ZSAodmFsdWVzLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IHJlcSA9IG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QodGhpcylcbiAgICByZXEuc3RyZWFtID0gdGhpcy5zdHJlYW1cbiAgICByZXEuYXJyYXlSb3dNb2RlID0gdGhpcy5hcnJheVJvd01vZGVcbiAgICByZXEuaW5wdXQoJ2hhbmRsZScsIFRZUEVTLkludCwgdGhpcy5faGFuZGxlKVxuXG4gICAgLy8gY29weSBwYXJhbWV0ZXJzIHdpdGggbmV3IHZhbHVlc1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiB0aGlzLnBhcmFtZXRlcnMpIHtcbiAgICAgIGlmICghb2JqZWN0SGFzUHJvcGVydHkodGhpcy5wYXJhbWV0ZXJzLCBuYW1lKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLnBhcmFtZXRlcnNbbmFtZV1cbiAgICAgIHJlcS5wYXJhbWV0ZXJzW25hbWVdID0ge1xuICAgICAgICBuYW1lLFxuICAgICAgICB0eXBlOiBwYXJhbS50eXBlLFxuICAgICAgICBpbzogcGFyYW0uaW8sXG4gICAgICAgIHZhbHVlOiB2YWx1ZXNbbmFtZV0sXG4gICAgICAgIGxlbmd0aDogcGFyYW0ubGVuZ3RoLFxuICAgICAgICBzY2FsZTogcGFyYW0uc2NhbGUsXG4gICAgICAgIHByZWNpc2lvbjogcGFyYW0ucHJlY2lzaW9uXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVxLmV4ZWN1dGUoJ3NwX2V4ZWN1dGUnLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG5cbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdClcbiAgICB9KVxuXG4gICAgcmV0dXJuIHJlcVxuICB9XG5cbiAgLyoqXG4gICAqIFVucHJlcGFyZSBhIHByZXBhcmVkIHN0YXRlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtiYXNpY0NhbGxiYWNrfSBbY2FsbGJhY2tdIEEgY2FsbGJhY2sgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIHVucHJlcGFyYXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1ByZXBhcmVkU3RhdGVtZW50fFByb21pc2V9XG4gICAqL1xuXG4gIHVucHJlcGFyZSAoY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl91bnByZXBhcmUoY2FsbGJhY2spXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fdW5wcmVwYXJlKGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKVxuICAgICAgICByZXNvbHZlKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IGNhbGxiYWNrXG4gICAqL1xuXG4gIF91bnByZXBhcmUgKGNhbGxiYWNrKSB7XG4gICAgZGVidWcoJ3BzKCVkKTogdW5wcmVwYXJlJywgSURTLmdldCh0aGlzKSlcblxuICAgIGlmICghdGhpcy5wcmVwYXJlZCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFByZXBhcmVkU3RhdGVtZW50RXJyb3IoJ1N0YXRlbWVudCBpcyBub3QgcHJlcGFyZWQuIENhbGwgcHJlcGFyZSgpIGZpcnN0LicsICdFTk9UUFJFUEFSRUQnKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlUmVxdWVzdCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFRyYW5zYWN0aW9uRXJyb3IoXCJDYW4ndCB1bnByZXBhcmUgdGhlIHN0YXRlbWVudC4gVGhlcmUgaXMgYSByZXF1ZXN0IGluIHByb2dyZXNzLlwiLCAnRVJFUUlOUFJPRycpKVxuICAgIH1cblxuICAgIGNvbnN0IHJlcSA9IG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QodGhpcylcbiAgICByZXEuc3RyZWFtID0gZmFsc2VcbiAgICByZXEuaW5wdXQoJ2hhbmRsZScsIFRZUEVTLkludCwgdGhpcy5faGFuZGxlKVxuICAgIHJlcS5leGVjdXRlKCdzcF91bnByZXBhcmUnLCBlcnIgPT4ge1xuICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcblxuICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZSh0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24pXG4gICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24gPSBudWxsXG4gICAgICB0aGlzLl9hY3F1aXJlZENvbmZpZyA9IG51bGxcbiAgICAgIHRoaXMuX2hhbmRsZSA9IDBcbiAgICAgIHRoaXMucHJlcGFyZWQgPSBmYWxzZVxuXG4gICAgICBkZWJ1ZygncHMoJWQpOiB1bnByZXBhcmVkJywgSURTLmdldCh0aGlzKSlcblxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpXG4gICAgfSlcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFByZXBhcmVkU3RhdGVtZW50XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/base/prepared-statement.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/base/request.js":
/*!************************************************!*\
  !*** ./node_modules/mssql/lib/base/request.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\")('mssql:base')\nconst { EventEmitter } = __webpack_require__(/*! node:events */ \"node:events\")\nconst { Readable } = __webpack_require__(/*! node:stream */ \"node:stream\")\nconst { IDS, objectHasProperty } = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/mssql/lib/utils.js\")\nconst globalConnection = __webpack_require__(/*! ../global-connection */ \"(rsc)/./node_modules/mssql/lib/global-connection.js\")\nconst { RequestError, ConnectionError } = __webpack_require__(/*! ../error */ \"(rsc)/./node_modules/mssql/lib/error/index.js\")\nconst { TYPES } = __webpack_require__(/*! ../datatypes */ \"(rsc)/./node_modules/mssql/lib/datatypes.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/./node_modules/mssql/lib/shared.js\")\n\n/**\n * Class Request.\n *\n * @property {Transaction} transaction Reference to transaction when request was created in transaction.\n * @property {*} parameters Collection of input and output parameters.\n * @property {Boolean} canceled `true` if request was canceled.\n *\n * @fires Request#recordset\n * @fires Request#row\n * @fires Request#done\n * @fires Request#error\n */\n\nclass Request extends EventEmitter {\n  /**\n   * Create new Request.\n   *\n   * @param {Connection|ConnectionPool|Transaction|PreparedStatement} parent If omitted, global connection is used instead.\n   */\n\n  constructor (parent) {\n    super()\n\n    IDS.add(this, 'Request')\n    debug('request(%d): created', IDS.get(this))\n\n    this.canceled = false\n    this._paused = false\n    this.parent = parent || globalConnection.pool\n    this.parameters = {}\n    this.stream = null\n    this.arrayRowMode = null\n  }\n\n  get paused () {\n    return this._paused\n  }\n\n  /**\n   * Generate sql string and set input parameters from tagged template string.\n   *\n   * @param {Template literal} template\n   * @return {String}\n   */\n\n  template () {\n    const values = Array.prototype.slice.call(arguments)\n    const strings = values.shift()\n    return this._template(strings, values)\n  }\n\n  /**\n   * Fetch request from tagged template string.\n   *\n   * @private\n   * @param {Array} strings\n   * @param {Array} values\n   * @param {String} [method] If provided, method is automatically called with serialized command on this object.\n   * @return {Request}\n   */\n\n  _template (strings, values, method) {\n    const command = [strings[0]]\n\n    for (let index = 0; index < values.length; index++) {\n      const value = values[index]\n      // if value is an array, prepare each items as it's own comma separated parameter\n      if (Array.isArray(value)) {\n        for (let parameterIndex = 0; parameterIndex < value.length; parameterIndex++) {\n          this.input(`param${index + 1}_${parameterIndex}`, value[parameterIndex])\n          command.push(`@param${index + 1}_${parameterIndex}`)\n          if (parameterIndex < value.length - 1) {\n            command.push(', ')\n          }\n        }\n        command.push(strings[index + 1])\n      } else {\n        this.input(`param${index + 1}`, value)\n        command.push(`@param${index + 1}`, strings[index + 1])\n      }\n    }\n\n    if (method) {\n      return this[method](command.join(''))\n    } else {\n      return command.join('')\n    }\n  }\n\n  /**\n   * Add an input parameter to the request.\n   *\n   * @param {String} name Name of the input parameter without @ char.\n   * @param {*} [type] SQL data type of input parameter. If you omit type, module automatically decides which SQL data type should be used based on JS data type.\n   * @param {*} value Input parameter value. `undefined` and `NaN` values are automatically converted to `null` values.\n   * @return {Request}\n   */\n\n  input (name, type, value) {\n    if (/--| |\\/\\*|\\*\\/|'/.test(name)) {\n      throw new RequestError(`SQL injection warning for param '${name}'`, 'EINJECT')\n    }\n\n    if (arguments.length < 2) {\n      throw new RequestError('Invalid number of arguments. At least 2 arguments expected.', 'EARGS')\n    } else if (arguments.length === 2) {\n      value = type\n      type = shared.getTypeByValue(value)\n    }\n\n    // support for custom data types\n    if (value && typeof value.valueOf === 'function' && !(value instanceof Date)) value = value.valueOf()\n\n    if (value === undefined) value = null // undefined to null\n    if (typeof value === 'number' && isNaN(value)) value = null // NaN to null\n    if (type instanceof Function) type = type()\n\n    if (objectHasProperty(this.parameters, name)) {\n      throw new RequestError(`The parameter name ${name} has already been declared. Parameter names must be unique`, 'EDUPEPARAM')\n    }\n\n    this.parameters[name] = {\n      name,\n      type: type.type,\n      io: 1,\n      value,\n      length: type.length,\n      scale: type.scale,\n      precision: type.precision,\n      tvpType: type.tvpType\n    }\n\n    return this\n  }\n\n  /**\n   * Replace an input parameter on the request.\n   *\n   * @param {String} name Name of the input parameter without @ char.\n   * @param {*} [type] SQL data type of input parameter. If you omit type, module automatically decides which SQL data type should be used based on JS data type.\n   * @param {*} value Input parameter value. `undefined` and `NaN` values are automatically converted to `null` values.\n   * @return {Request}\n   */\n\n  replaceInput (name, type, value) {\n    delete this.parameters[name]\n\n    return this.input(name, type, value)\n  }\n\n  /**\n   * Add an output parameter to the request.\n   *\n   * @param {String} name Name of the output parameter without @ char.\n   * @param {*} type SQL data type of output parameter.\n   * @param {*} [value] Output parameter value initial value. `undefined` and `NaN` values are automatically converted to `null` values. Optional.\n   * @return {Request}\n   */\n\n  output (name, type, value) {\n    if (!type) { type = TYPES.NVarChar }\n\n    if (/--| |\\/\\*|\\*\\/|'/.test(name)) {\n      throw new RequestError(`SQL injection warning for param '${name}'`, 'EINJECT')\n    }\n\n    if ((type === TYPES.Text) || (type === TYPES.NText) || (type === TYPES.Image)) {\n      throw new RequestError('Deprecated types (Text, NText, Image) are not supported as OUTPUT parameters.', 'EDEPRECATED')\n    }\n\n    // support for custom data types\n    if (value && typeof value.valueOf === 'function' && !(value instanceof Date)) value = value.valueOf()\n\n    if (value === undefined) value = null // undefined to null\n    if (typeof value === 'number' && isNaN(value)) value = null // NaN to null\n    if (type instanceof Function) type = type()\n\n    if (objectHasProperty(this.parameters, name)) {\n      throw new RequestError(`The parameter name ${name} has already been declared. Parameter names must be unique`, 'EDUPEPARAM')\n    }\n\n    this.parameters[name] = {\n      name,\n      type: type.type,\n      io: 2,\n      value,\n      length: type.length,\n      scale: type.scale,\n      precision: type.precision\n    }\n\n    return this\n  }\n\n  /**\n   * Replace an output parameter on the request.\n   *\n   * @param {String} name Name of the output parameter without @ char.\n   * @param {*} type SQL data type of output parameter.\n   * @param {*} [value] Output parameter value initial value. `undefined` and `NaN` values are automatically converted to `null` values. Optional.\n   * @return {Request}\n   */\n\n  replaceOutput (name, type, value) {\n    delete this.parameters[name]\n\n    return this.output(name, type, value)\n  }\n\n  /**\n   * Execute the SQL batch.\n   *\n   * @param {String} batch T-SQL batch to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  batch (batch, callback) {\n    if (this.stream === null && this.parent) this.stream = this.parent.config.stream\n    if (this.arrayRowMode === null && this.parent) this.arrayRowMode = this.parent.config.arrayRowMode\n    this.rowsAffected = 0\n\n    if (typeof callback === 'function') {\n      this._batch(batch, (err, recordsets, output, rowsAffected) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected\n          })\n        }\n\n        if (err) return callback(err)\n        callback(null, {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected\n        })\n      })\n      return this\n    }\n\n    // Check if method was called as tagged template\n    if (typeof batch === 'object') {\n      const values = Array.prototype.slice.call(arguments)\n      const strings = values.shift()\n      batch = this._template(strings, values)\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._batch(batch, (err, recordsets, output, rowsAffected) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected\n          })\n        }\n\n        if (err) return reject(err)\n        resolve({\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected\n        })\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {String} batch\n   * @param {Request~requestCallback} callback\n   */\n\n  _batch (batch, callback) {\n    if (!this.parent) {\n      return setImmediate(callback, new RequestError('No connection is specified for that request.', 'ENOCONN'))\n    }\n\n    if (!this.parent.connected) {\n      return setImmediate(callback, new ConnectionError('Connection is closed.', 'ECONNCLOSED'))\n    }\n\n    this.canceled = false\n    setImmediate(callback)\n  }\n\n  /**\n   * Bulk load.\n   *\n   * @param {Table} table SQL table.\n   * @param {object} [options] Options to be passed to the underlying driver (tedious only).\n   * @param {Request~bulkCallback} [callback] A callback which is called after bulk load has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  bulk (table, options, callback) {\n    if (typeof options === 'function') {\n      callback = options\n      options = {}\n    } else if (typeof options === 'undefined') {\n      options = {}\n    }\n\n    if (this.stream === null && this.parent) this.stream = this.parent.config.stream\n    if (this.arrayRowMode === null && this.parent) this.arrayRowMode = this.parent.config.arrayRowMode\n\n    if (this.stream || typeof callback === 'function') {\n      this._bulk(table, options, (err, rowsAffected) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          return this.emit('done', {\n            rowsAffected\n          })\n        }\n\n        if (err) return callback(err)\n        callback(null, {\n          rowsAffected\n        })\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._bulk(table, options, (err, rowsAffected) => {\n        if (err) return reject(err)\n        resolve({\n          rowsAffected\n        })\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {Table} table\n   * @param {object} options\n   * @param {Request~bulkCallback} callback\n   */\n\n  _bulk (table, options, callback) {\n    if (!this.parent) {\n      return setImmediate(callback, new RequestError('No connection is specified for that request.', 'ENOCONN'))\n    }\n\n    if (!this.parent.connected) {\n      return setImmediate(callback, new ConnectionError('Connection is closed.', 'ECONNCLOSED'))\n    }\n\n    this.canceled = false\n    setImmediate(callback)\n  }\n\n  /**\n   * Wrap original request in a Readable stream that supports back pressure and return.\n   * It also sets request to `stream` mode and pulls all rows from all recordsets to a given stream.\n   *\n   * @param {Object} streamOptions - optional options to configure the readable stream with like highWaterMark\n   * @return {Stream}\n   */\n\n  toReadableStream (streamOptions = {}) {\n    this.stream = true\n    this.pause()\n    const readableStream = new Readable({\n      ...streamOptions,\n      objectMode: true,\n      read: (/* size */) => {\n        this.resume()\n      }\n    })\n    this.on('row', (row) => {\n      if (!readableStream.push(row)) {\n        this.pause()\n      }\n    })\n    this.on('error', (error) => {\n      readableStream.emit('error', error)\n    })\n    this.on('done', () => {\n      readableStream.push(null)\n    })\n    return readableStream\n  }\n\n  /**\n   * Wrap original request in a Readable stream that supports back pressure and pipe to the Writable stream.\n   * It also sets request to `stream` mode and pulls all rows from all recordsets to a given stream.\n   *\n   * @param {Stream} stream Stream to pipe data into.\n   * @return {Stream}\n   */\n\n  pipe (writableStream) {\n    const readableStream = this.toReadableStream()\n    return readableStream.pipe(writableStream)\n  }\n\n  /**\n   * Execute the SQL command.\n   *\n   * @param {String} command T-SQL command to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  query (command, callback) {\n    if (this.stream === null && this.parent) this.stream = this.parent.config.stream\n    if (this.arrayRowMode === null && this.parent) this.arrayRowMode = this.parent.config.arrayRowMode\n    this.rowsAffected = 0\n\n    if (typeof callback === 'function') {\n      this._query(command, (err, recordsets, output, rowsAffected, columns) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected\n          })\n        }\n\n        if (err) return callback(err)\n        const result = {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected\n        }\n        if (this.arrayRowMode) result.columns = columns\n        callback(null, result)\n      })\n      return this\n    }\n\n    // Check if method was called as tagged template\n    if (typeof command === 'object') {\n      const values = Array.prototype.slice.call(arguments)\n      const strings = values.shift()\n      command = this._template(strings, values)\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._query(command, (err, recordsets, output, rowsAffected, columns) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected\n          })\n        }\n\n        if (err) return reject(err)\n        const result = {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected\n        }\n        if (this.arrayRowMode) result.columns = columns\n        resolve(result)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {String} command\n   * @param {Request~bulkCallback} callback\n   */\n\n  _query (command, callback) {\n    if (!this.parent) {\n      return setImmediate(callback, new RequestError('No connection is specified for that request.', 'ENOCONN'))\n    }\n\n    if (!this.parent.connected) {\n      return setImmediate(callback, new ConnectionError('Connection is closed.', 'ECONNCLOSED'))\n    }\n\n    this.canceled = false\n    setImmediate(callback)\n  }\n\n  /**\n   * Call a stored procedure.\n   *\n   * @param {String} procedure Name of the stored procedure to be executed.\n   * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n   * @return {Request|Promise}\n   */\n\n  execute (command, callback) {\n    if (this.stream === null && this.parent) this.stream = this.parent.config.stream\n    if (this.arrayRowMode === null && this.parent) this.arrayRowMode = this.parent.config.arrayRowMode\n    this.rowsAffected = 0\n\n    if (typeof callback === 'function') {\n      this._execute(command, (err, recordsets, output, returnValue, rowsAffected, columns) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected,\n            returnValue\n          })\n        }\n\n        if (err) return callback(err)\n        const result = {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected,\n          returnValue\n        }\n        if (this.arrayRowMode) result.columns = columns\n        callback(null, result)\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._execute(command, (err, recordsets, output, returnValue, rowsAffected, columns) => {\n        if (this.stream) {\n          if (err) this.emit('error', err)\n          err = null\n\n          this.emit('done', {\n            output,\n            rowsAffected,\n            returnValue\n          })\n        }\n\n        if (err) return reject(err)\n        const result = {\n          recordsets,\n          recordset: recordsets && recordsets[0],\n          output,\n          rowsAffected,\n          returnValue\n        }\n        if (this.arrayRowMode) result.columns = columns\n        resolve(result)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {String} procedure\n   * @param {Request~bulkCallback} callback\n   */\n\n  _execute (procedure, callback) {\n    if (!this.parent) {\n      return setImmediate(callback, new RequestError('No connection is specified for that request.', 'ENOCONN'))\n    }\n\n    if (!this.parent.connected) {\n      return setImmediate(callback, new ConnectionError('Connection is closed.', 'ECONNCLOSED'))\n    }\n\n    this.canceled = false\n    setImmediate(callback)\n  }\n\n  /**\n   * Cancel currently executed request.\n   *\n   * @return {Boolean}\n   */\n\n  cancel () {\n    this._cancel()\n    return true\n  }\n\n  /**\n   * @private\n   */\n\n  _cancel () {\n    this.canceled = true\n  }\n\n  pause () {\n    if (this.stream) {\n      this._pause()\n      return true\n    }\n    return false\n  }\n\n  _pause () {\n    this._paused = true\n  }\n\n  resume () {\n    if (this.stream) {\n      this._resume()\n      return true\n    }\n    return false\n  }\n\n  _resume () {\n    this._paused = false\n  }\n\n  _setCurrentRequest (request) {\n    this._currentRequest = request\n    if (this._paused) {\n      this.pause()\n    }\n    return this\n  }\n}\n\nmodule.exports = Request\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Jhc2UvcmVxdWVzdC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixjQUFjLG1CQUFPLENBQUMsc0RBQU87QUFDN0IsUUFBUSxlQUFlLEVBQUUsbUJBQU8sQ0FBQyxnQ0FBYTtBQUM5QyxRQUFRLFdBQVcsRUFBRSxtQkFBTyxDQUFDLGdDQUFhO0FBQzFDLFFBQVEseUJBQXlCLEVBQUUsbUJBQU8sQ0FBQyx5REFBVTtBQUNyRCx5QkFBeUIsbUJBQU8sQ0FBQyxpRkFBc0I7QUFDdkQsUUFBUSxnQ0FBZ0MsRUFBRSxtQkFBTyxDQUFDLCtEQUFVO0FBQzVELFFBQVEsUUFBUSxFQUFFLG1CQUFPLENBQUMsaUVBQWM7QUFDeEMsZUFBZSxtQkFBTyxDQUFDLDJEQUFXOztBQUVsQztBQUNBO0FBQ0E7QUFDQSxjQUFjLGFBQWE7QUFDM0IsY0FBYyxHQUFHO0FBQ2pCLGNBQWMsU0FBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlEQUF5RDtBQUN0RTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsa0JBQWtCO0FBQy9CLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsT0FBTztBQUNwQixhQUFhLFFBQVE7QUFDckIsY0FBYztBQUNkOztBQUVBO0FBQ0E7O0FBRUEsd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsK0JBQStCO0FBQ3BFLDZCQUE2QixVQUFVLEdBQUcsZUFBZTtBQUN6RCxnQ0FBZ0MsVUFBVSxHQUFHLGVBQWU7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUiwyQkFBMkIsVUFBVTtBQUNyQyw4QkFBOEIsVUFBVTtBQUN4QztBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLEdBQUc7QUFDaEIsYUFBYSxHQUFHO0FBQ2hCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0EsaUVBQWlFLEtBQUs7QUFDdEU7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtREFBbUQsTUFBTTtBQUN6RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLEdBQUc7QUFDaEIsYUFBYSxHQUFHO0FBQ2hCLGNBQWM7QUFDZDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsR0FBRztBQUNoQixhQUFhLEdBQUc7QUFDaEIsY0FBYztBQUNkOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBLGlFQUFpRSxLQUFLO0FBQ3RFOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1EQUFtRCxNQUFNO0FBQ3pEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLEdBQUc7QUFDaEIsYUFBYSxHQUFHO0FBQ2hCLGNBQWM7QUFDZDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEseUJBQXlCO0FBQ3RDLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSx5QkFBeUI7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsc0JBQXNCO0FBQ25DLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFFBQVE7QUFDckIsYUFBYSxzQkFBc0I7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixjQUFjO0FBQ2Q7O0FBRUEsc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLHlCQUF5QjtBQUN0QyxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLHNCQUFzQjtBQUNuQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLHlCQUF5QjtBQUN0QyxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxzQkFBc0I7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Jhc2UvcmVxdWVzdC5qcz8xNmNkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ21zc3FsOmJhc2UnKVxuY29uc3QgeyBFdmVudEVtaXR0ZXIgfSA9IHJlcXVpcmUoJ25vZGU6ZXZlbnRzJylcbmNvbnN0IHsgUmVhZGFibGUgfSA9IHJlcXVpcmUoJ25vZGU6c3RyZWFtJylcbmNvbnN0IHsgSURTLCBvYmplY3RIYXNQcm9wZXJ0eSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMnKVxuY29uc3QgZ2xvYmFsQ29ubmVjdGlvbiA9IHJlcXVpcmUoJy4uL2dsb2JhbC1jb25uZWN0aW9uJylcbmNvbnN0IHsgUmVxdWVzdEVycm9yLCBDb25uZWN0aW9uRXJyb3IgfSA9IHJlcXVpcmUoJy4uL2Vycm9yJylcbmNvbnN0IHsgVFlQRVMgfSA9IHJlcXVpcmUoJy4uL2RhdGF0eXBlcycpXG5jb25zdCBzaGFyZWQgPSByZXF1aXJlKCcuLi9zaGFyZWQnKVxuXG4vKipcbiAqIENsYXNzIFJlcXVlc3QuXG4gKlxuICogQHByb3BlcnR5IHtUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb24gUmVmZXJlbmNlIHRvIHRyYW5zYWN0aW9uIHdoZW4gcmVxdWVzdCB3YXMgY3JlYXRlZCBpbiB0cmFuc2FjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Kn0gcGFyYW1ldGVycyBDb2xsZWN0aW9uIG9mIGlucHV0IGFuZCBvdXRwdXQgcGFyYW1ldGVycy5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gY2FuY2VsZWQgYHRydWVgIGlmIHJlcXVlc3Qgd2FzIGNhbmNlbGVkLlxuICpcbiAqIEBmaXJlcyBSZXF1ZXN0I3JlY29yZHNldFxuICogQGZpcmVzIFJlcXVlc3Qjcm93XG4gKiBAZmlyZXMgUmVxdWVzdCNkb25lXG4gKiBAZmlyZXMgUmVxdWVzdCNlcnJvclxuICovXG5cbmNsYXNzIFJlcXVlc3QgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAvKipcbiAgICogQ3JlYXRlIG5ldyBSZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge0Nvbm5lY3Rpb258Q29ubmVjdGlvblBvb2x8VHJhbnNhY3Rpb258UHJlcGFyZWRTdGF0ZW1lbnR9IHBhcmVudCBJZiBvbWl0dGVkLCBnbG9iYWwgY29ubmVjdGlvbiBpcyB1c2VkIGluc3RlYWQuXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yIChwYXJlbnQpIHtcbiAgICBzdXBlcigpXG5cbiAgICBJRFMuYWRkKHRoaXMsICdSZXF1ZXN0JylcbiAgICBkZWJ1ZygncmVxdWVzdCglZCk6IGNyZWF0ZWQnLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgdGhpcy5jYW5jZWxlZCA9IGZhbHNlXG4gICAgdGhpcy5fcGF1c2VkID0gZmFsc2VcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudCB8fCBnbG9iYWxDb25uZWN0aW9uLnBvb2xcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSB7fVxuICAgIHRoaXMuc3RyZWFtID0gbnVsbFxuICAgIHRoaXMuYXJyYXlSb3dNb2RlID0gbnVsbFxuICB9XG5cbiAgZ2V0IHBhdXNlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhdXNlZFxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHNxbCBzdHJpbmcgYW5kIHNldCBpbnB1dCBwYXJhbWV0ZXJzIGZyb20gdGFnZ2VkIHRlbXBsYXRlIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtUZW1wbGF0ZSBsaXRlcmFsfSB0ZW1wbGF0ZVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIHRlbXBsYXRlICgpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXG4gICAgY29uc3Qgc3RyaW5ncyA9IHZhbHVlcy5zaGlmdCgpXG4gICAgcmV0dXJuIHRoaXMuX3RlbXBsYXRlKHN0cmluZ3MsIHZhbHVlcylcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCByZXF1ZXN0IGZyb20gdGFnZ2VkIHRlbXBsYXRlIHN0cmluZy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gc3RyaW5nc1xuICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXNcbiAgICogQHBhcmFtIHtTdHJpbmd9IFttZXRob2RdIElmIHByb3ZpZGVkLCBtZXRob2QgaXMgYXV0b21hdGljYWxseSBjYWxsZWQgd2l0aCBzZXJpYWxpemVkIGNvbW1hbmQgb24gdGhpcyBvYmplY3QuXG4gICAqIEByZXR1cm4ge1JlcXVlc3R9XG4gICAqL1xuXG4gIF90ZW1wbGF0ZSAoc3RyaW5ncywgdmFsdWVzLCBtZXRob2QpIHtcbiAgICBjb25zdCBjb21tYW5kID0gW3N0cmluZ3NbMF1dXG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdmFsdWVzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNbaW5kZXhdXG4gICAgICAvLyBpZiB2YWx1ZSBpcyBhbiBhcnJheSwgcHJlcGFyZSBlYWNoIGl0ZW1zIGFzIGl0J3Mgb3duIGNvbW1hIHNlcGFyYXRlZCBwYXJhbWV0ZXJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGxldCBwYXJhbWV0ZXJJbmRleCA9IDA7IHBhcmFtZXRlckluZGV4IDwgdmFsdWUubGVuZ3RoOyBwYXJhbWV0ZXJJbmRleCsrKSB7XG4gICAgICAgICAgdGhpcy5pbnB1dChgcGFyYW0ke2luZGV4ICsgMX1fJHtwYXJhbWV0ZXJJbmRleH1gLCB2YWx1ZVtwYXJhbWV0ZXJJbmRleF0pXG4gICAgICAgICAgY29tbWFuZC5wdXNoKGBAcGFyYW0ke2luZGV4ICsgMX1fJHtwYXJhbWV0ZXJJbmRleH1gKVxuICAgICAgICAgIGlmIChwYXJhbWV0ZXJJbmRleCA8IHZhbHVlLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGNvbW1hbmQucHVzaCgnLCAnKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb21tYW5kLnB1c2goc3RyaW5nc1tpbmRleCArIDFdKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbnB1dChgcGFyYW0ke2luZGV4ICsgMX1gLCB2YWx1ZSlcbiAgICAgICAgY29tbWFuZC5wdXNoKGBAcGFyYW0ke2luZGV4ICsgMX1gLCBzdHJpbmdzW2luZGV4ICsgMV0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1ldGhvZCkge1xuICAgICAgcmV0dXJuIHRoaXNbbWV0aG9kXShjb21tYW5kLmpvaW4oJycpKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29tbWFuZC5qb2luKCcnKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gaW5wdXQgcGFyYW1ldGVyIHRvIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBpbnB1dCBwYXJhbWV0ZXIgd2l0aG91dCBAIGNoYXIuXG4gICAqIEBwYXJhbSB7Kn0gW3R5cGVdIFNRTCBkYXRhIHR5cGUgb2YgaW5wdXQgcGFyYW1ldGVyLiBJZiB5b3Ugb21pdCB0eXBlLCBtb2R1bGUgYXV0b21hdGljYWxseSBkZWNpZGVzIHdoaWNoIFNRTCBkYXRhIHR5cGUgc2hvdWxkIGJlIHVzZWQgYmFzZWQgb24gSlMgZGF0YSB0eXBlLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIElucHV0IHBhcmFtZXRlciB2YWx1ZS4gYHVuZGVmaW5lZGAgYW5kIGBOYU5gIHZhbHVlcyBhcmUgYXV0b21hdGljYWxseSBjb252ZXJ0ZWQgdG8gYG51bGxgIHZhbHVlcy5cbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgaW5wdXQgKG5hbWUsIHR5cGUsIHZhbHVlKSB7XG4gICAgaWYgKC8tLXwgfFxcL1xcKnxcXCpcXC98Jy8udGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcihgU1FMIGluamVjdGlvbiB3YXJuaW5nIGZvciBwYXJhbSAnJHtuYW1lfSdgLCAnRUlOSkVDVCcpXG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICB0aHJvdyBuZXcgUmVxdWVzdEVycm9yKCdJbnZhbGlkIG51bWJlciBvZiBhcmd1bWVudHMuIEF0IGxlYXN0IDIgYXJndW1lbnRzIGV4cGVjdGVkLicsICdFQVJHUycpXG4gICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICB2YWx1ZSA9IHR5cGVcbiAgICAgIHR5cGUgPSBzaGFyZWQuZ2V0VHlwZUJ5VmFsdWUodmFsdWUpXG4gICAgfVxuXG4gICAgLy8gc3VwcG9ydCBmb3IgY3VzdG9tIGRhdGEgdHlwZXNcbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT09ICdmdW5jdGlvbicgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpKSB2YWx1ZSA9IHZhbHVlLnZhbHVlT2YoKVxuXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHZhbHVlID0gbnVsbCAvLyB1bmRlZmluZWQgdG8gbnVsbFxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIGlzTmFOKHZhbHVlKSkgdmFsdWUgPSBudWxsIC8vIE5hTiB0byBudWxsXG4gICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBGdW5jdGlvbikgdHlwZSA9IHR5cGUoKVxuXG4gICAgaWYgKG9iamVjdEhhc1Byb3BlcnR5KHRoaXMucGFyYW1ldGVycywgbmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoYFRoZSBwYXJhbWV0ZXIgbmFtZSAke25hbWV9IGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQuIFBhcmFtZXRlciBuYW1lcyBtdXN0IGJlIHVuaXF1ZWAsICdFRFVQRVBBUkFNJylcbiAgICB9XG5cbiAgICB0aGlzLnBhcmFtZXRlcnNbbmFtZV0gPSB7XG4gICAgICBuYW1lLFxuICAgICAgdHlwZTogdHlwZS50eXBlLFxuICAgICAgaW86IDEsXG4gICAgICB2YWx1ZSxcbiAgICAgIGxlbmd0aDogdHlwZS5sZW5ndGgsXG4gICAgICBzY2FsZTogdHlwZS5zY2FsZSxcbiAgICAgIHByZWNpc2lvbjogdHlwZS5wcmVjaXNpb24sXG4gICAgICB0dnBUeXBlOiB0eXBlLnR2cFR5cGVcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgYW4gaW5wdXQgcGFyYW1ldGVyIG9uIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBpbnB1dCBwYXJhbWV0ZXIgd2l0aG91dCBAIGNoYXIuXG4gICAqIEBwYXJhbSB7Kn0gW3R5cGVdIFNRTCBkYXRhIHR5cGUgb2YgaW5wdXQgcGFyYW1ldGVyLiBJZiB5b3Ugb21pdCB0eXBlLCBtb2R1bGUgYXV0b21hdGljYWxseSBkZWNpZGVzIHdoaWNoIFNRTCBkYXRhIHR5cGUgc2hvdWxkIGJlIHVzZWQgYmFzZWQgb24gSlMgZGF0YSB0eXBlLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIElucHV0IHBhcmFtZXRlciB2YWx1ZS4gYHVuZGVmaW5lZGAgYW5kIGBOYU5gIHZhbHVlcyBhcmUgYXV0b21hdGljYWxseSBjb252ZXJ0ZWQgdG8gYG51bGxgIHZhbHVlcy5cbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgcmVwbGFjZUlucHV0IChuYW1lLCB0eXBlLCB2YWx1ZSkge1xuICAgIGRlbGV0ZSB0aGlzLnBhcmFtZXRlcnNbbmFtZV1cblxuICAgIHJldHVybiB0aGlzLmlucHV0KG5hbWUsIHR5cGUsIHZhbHVlKVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBvdXRwdXQgcGFyYW1ldGVyIHRvIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBvdXRwdXQgcGFyYW1ldGVyIHdpdGhvdXQgQCBjaGFyLlxuICAgKiBAcGFyYW0geyp9IHR5cGUgU1FMIGRhdGEgdHlwZSBvZiBvdXRwdXQgcGFyYW1ldGVyLlxuICAgKiBAcGFyYW0geyp9IFt2YWx1ZV0gT3V0cHV0IHBhcmFtZXRlciB2YWx1ZSBpbml0aWFsIHZhbHVlLiBgdW5kZWZpbmVkYCBhbmQgYE5hTmAgdmFsdWVzIGFyZSBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byBgbnVsbGAgdmFsdWVzLiBPcHRpb25hbC5cbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgb3V0cHV0IChuYW1lLCB0eXBlLCB2YWx1ZSkge1xuICAgIGlmICghdHlwZSkgeyB0eXBlID0gVFlQRVMuTlZhckNoYXIgfVxuXG4gICAgaWYgKC8tLXwgfFxcL1xcKnxcXCpcXC98Jy8udGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcihgU1FMIGluamVjdGlvbiB3YXJuaW5nIGZvciBwYXJhbSAnJHtuYW1lfSdgLCAnRUlOSkVDVCcpXG4gICAgfVxuXG4gICAgaWYgKCh0eXBlID09PSBUWVBFUy5UZXh0KSB8fCAodHlwZSA9PT0gVFlQRVMuTlRleHQpIHx8ICh0eXBlID09PSBUWVBFUy5JbWFnZSkpIHtcbiAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoJ0RlcHJlY2F0ZWQgdHlwZXMgKFRleHQsIE5UZXh0LCBJbWFnZSkgYXJlIG5vdCBzdXBwb3J0ZWQgYXMgT1VUUFVUIHBhcmFtZXRlcnMuJywgJ0VERVBSRUNBVEVEJylcbiAgICB9XG5cbiAgICAvLyBzdXBwb3J0IGZvciBjdXN0b20gZGF0YSB0eXBlc1xuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PT0gJ2Z1bmN0aW9uJyAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpIHZhbHVlID0gdmFsdWUudmFsdWVPZigpXG5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgdmFsdWUgPSBudWxsIC8vIHVuZGVmaW5lZCB0byBudWxsXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNOYU4odmFsdWUpKSB2YWx1ZSA9IG51bGwgLy8gTmFOIHRvIG51bGxcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB0eXBlID0gdHlwZSgpXG5cbiAgICBpZiAob2JqZWN0SGFzUHJvcGVydHkodGhpcy5wYXJhbWV0ZXJzLCBuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcihgVGhlIHBhcmFtZXRlciBuYW1lICR7bmFtZX0gaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZC4gUGFyYW1ldGVyIG5hbWVzIG11c3QgYmUgdW5pcXVlYCwgJ0VEVVBFUEFSQU0nKVxuICAgIH1cblxuICAgIHRoaXMucGFyYW1ldGVyc1tuYW1lXSA9IHtcbiAgICAgIG5hbWUsXG4gICAgICB0eXBlOiB0eXBlLnR5cGUsXG4gICAgICBpbzogMixcbiAgICAgIHZhbHVlLFxuICAgICAgbGVuZ3RoOiB0eXBlLmxlbmd0aCxcbiAgICAgIHNjYWxlOiB0eXBlLnNjYWxlLFxuICAgICAgcHJlY2lzaW9uOiB0eXBlLnByZWNpc2lvblxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZSBhbiBvdXRwdXQgcGFyYW1ldGVyIG9uIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBvdXRwdXQgcGFyYW1ldGVyIHdpdGhvdXQgQCBjaGFyLlxuICAgKiBAcGFyYW0geyp9IHR5cGUgU1FMIGRhdGEgdHlwZSBvZiBvdXRwdXQgcGFyYW1ldGVyLlxuICAgKiBAcGFyYW0geyp9IFt2YWx1ZV0gT3V0cHV0IHBhcmFtZXRlciB2YWx1ZSBpbml0aWFsIHZhbHVlLiBgdW5kZWZpbmVkYCBhbmQgYE5hTmAgdmFsdWVzIGFyZSBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byBgbnVsbGAgdmFsdWVzLiBPcHRpb25hbC5cbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgcmVwbGFjZU91dHB1dCAobmFtZSwgdHlwZSwgdmFsdWUpIHtcbiAgICBkZWxldGUgdGhpcy5wYXJhbWV0ZXJzW25hbWVdXG5cbiAgICByZXR1cm4gdGhpcy5vdXRwdXQobmFtZSwgdHlwZSwgdmFsdWUpXG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSB0aGUgU1FMIGJhdGNoLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2ggVC1TUUwgYmF0Y2ggdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSB7UmVxdWVzdH5yZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgZXhlY3V0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fFByb21pc2V9XG4gICAqL1xuXG4gIGJhdGNoIChiYXRjaCwgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zdHJlYW0gPT09IG51bGwgJiYgdGhpcy5wYXJlbnQpIHRoaXMuc3RyZWFtID0gdGhpcy5wYXJlbnQuY29uZmlnLnN0cmVhbVxuICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSA9PT0gbnVsbCAmJiB0aGlzLnBhcmVudCkgdGhpcy5hcnJheVJvd01vZGUgPSB0aGlzLnBhcmVudC5jb25maWcuYXJyYXlSb3dNb2RlXG4gICAgdGhpcy5yb3dzQWZmZWN0ZWQgPSAwXG5cbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9iYXRjaChiYXRjaCwgKGVyciwgcmVjb3Jkc2V0cywgb3V0cHV0LCByb3dzQWZmZWN0ZWQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKGVycikgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgICBlcnIgPSBudWxsXG5cbiAgICAgICAgICB0aGlzLmVtaXQoJ2RvbmUnLCB7XG4gICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICByb3dzQWZmZWN0ZWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcbiAgICAgICAgY2FsbGJhY2sobnVsbCwge1xuICAgICAgICAgIHJlY29yZHNldHMsXG4gICAgICAgICAgcmVjb3Jkc2V0OiByZWNvcmRzZXRzICYmIHJlY29yZHNldHNbMF0sXG4gICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgIHJvd3NBZmZlY3RlZFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgbWV0aG9kIHdhcyBjYWxsZWQgYXMgdGFnZ2VkIHRlbXBsYXRlXG4gICAgaWYgKHR5cGVvZiBiYXRjaCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgIGNvbnN0IHN0cmluZ3MgPSB2YWx1ZXMuc2hpZnQoKVxuICAgICAgYmF0Y2ggPSB0aGlzLl90ZW1wbGF0ZShzdHJpbmdzLCB2YWx1ZXMpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl9iYXRjaChiYXRjaCwgKGVyciwgcmVjb3Jkc2V0cywgb3V0cHV0LCByb3dzQWZmZWN0ZWQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKGVycikgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgICBlcnIgPSBudWxsXG5cbiAgICAgICAgICB0aGlzLmVtaXQoJ2RvbmUnLCB7XG4gICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICByb3dzQWZmZWN0ZWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpXG4gICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgIHJlY29yZHNldHMsXG4gICAgICAgICAgcmVjb3Jkc2V0OiByZWNvcmRzZXRzICYmIHJlY29yZHNldHNbMF0sXG4gICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgIHJvd3NBZmZlY3RlZFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXRjaFxuICAgKiBAcGFyYW0ge1JlcXVlc3R+cmVxdWVzdENhbGxiYWNrfSBjYWxsYmFja1xuICAgKi9cblxuICBfYmF0Y2ggKGJhdGNoLCBjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBSZXF1ZXN0RXJyb3IoJ05vIGNvbm5lY3Rpb24gaXMgc3BlY2lmaWVkIGZvciB0aGF0IHJlcXVlc3QuJywgJ0VOT0NPTk4nKSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGFyZW50LmNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IENvbm5lY3Rpb25FcnJvcignQ29ubmVjdGlvbiBpcyBjbG9zZWQuJywgJ0VDT05OQ0xPU0VEJykpXG4gICAgfVxuXG4gICAgdGhpcy5jYW5jZWxlZCA9IGZhbHNlXG4gICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIEJ1bGsgbG9hZC5cbiAgICpcbiAgICogQHBhcmFtIHtUYWJsZX0gdGFibGUgU1FMIHRhYmxlLlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIE9wdGlvbnMgdG8gYmUgcGFzc2VkIHRvIHRoZSB1bmRlcmx5aW5nIGRyaXZlciAodGVkaW91cyBvbmx5KS5cbiAgICogQHBhcmFtIHtSZXF1ZXN0fmJ1bGtDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBidWxrIGxvYWQgaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1JlcXVlc3R8UHJvbWlzZX1cbiAgICovXG5cbiAgYnVsayAodGFibGUsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnNcbiAgICAgIG9wdGlvbnMgPSB7fVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zID0ge31cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdHJlYW0gPT09IG51bGwgJiYgdGhpcy5wYXJlbnQpIHRoaXMuc3RyZWFtID0gdGhpcy5wYXJlbnQuY29uZmlnLnN0cmVhbVxuICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSA9PT0gbnVsbCAmJiB0aGlzLnBhcmVudCkgdGhpcy5hcnJheVJvd01vZGUgPSB0aGlzLnBhcmVudC5jb25maWcuYXJyYXlSb3dNb2RlXG5cbiAgICBpZiAodGhpcy5zdHJlYW0gfHwgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9idWxrKHRhYmxlLCBvcHRpb25zLCAoZXJyLCByb3dzQWZmZWN0ZWQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKGVycikgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgICByZXR1cm4gdGhpcy5lbWl0KCdkb25lJywge1xuICAgICAgICAgICAgcm93c0FmZmVjdGVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHtcbiAgICAgICAgICByb3dzQWZmZWN0ZWRcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fYnVsayh0YWJsZSwgb3B0aW9ucywgKGVyciwgcm93c0FmZmVjdGVkKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKVxuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICByb3dzQWZmZWN0ZWRcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1RhYmxlfSB0YWJsZVxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge1JlcXVlc3R+YnVsa0NhbGxiYWNrfSBjYWxsYmFja1xuICAgKi9cblxuICBfYnVsayAodGFibGUsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFJlcXVlc3RFcnJvcignTm8gY29ubmVjdGlvbiBpcyBzcGVjaWZpZWQgZm9yIHRoYXQgcmVxdWVzdC4nLCAnRU5PQ09OTicpKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5wYXJlbnQuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgQ29ubmVjdGlvbkVycm9yKCdDb25uZWN0aW9uIGlzIGNsb3NlZC4nLCAnRUNPTk5DTE9TRUQnKSlcbiAgICB9XG5cbiAgICB0aGlzLmNhbmNlbGVkID0gZmFsc2VcbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogV3JhcCBvcmlnaW5hbCByZXF1ZXN0IGluIGEgUmVhZGFibGUgc3RyZWFtIHRoYXQgc3VwcG9ydHMgYmFjayBwcmVzc3VyZSBhbmQgcmV0dXJuLlxuICAgKiBJdCBhbHNvIHNldHMgcmVxdWVzdCB0byBgc3RyZWFtYCBtb2RlIGFuZCBwdWxscyBhbGwgcm93cyBmcm9tIGFsbCByZWNvcmRzZXRzIHRvIGEgZ2l2ZW4gc3RyZWFtLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc3RyZWFtT3B0aW9ucyAtIG9wdGlvbmFsIG9wdGlvbnMgdG8gY29uZmlndXJlIHRoZSByZWFkYWJsZSBzdHJlYW0gd2l0aCBsaWtlIGhpZ2hXYXRlck1hcmtcbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cblxuICB0b1JlYWRhYmxlU3RyZWFtIChzdHJlYW1PcHRpb25zID0ge30pIHtcbiAgICB0aGlzLnN0cmVhbSA9IHRydWVcbiAgICB0aGlzLnBhdXNlKClcbiAgICBjb25zdCByZWFkYWJsZVN0cmVhbSA9IG5ldyBSZWFkYWJsZSh7XG4gICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgb2JqZWN0TW9kZTogdHJ1ZSxcbiAgICAgIHJlYWQ6ICgvKiBzaXplICovKSA9PiB7XG4gICAgICAgIHRoaXMucmVzdW1lKClcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMub24oJ3JvdycsIChyb3cpID0+IHtcbiAgICAgIGlmICghcmVhZGFibGVTdHJlYW0ucHVzaChyb3cpKSB7XG4gICAgICAgIHRoaXMucGF1c2UoKVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgIHJlYWRhYmxlU3RyZWFtLmVtaXQoJ2Vycm9yJywgZXJyb3IpXG4gICAgfSlcbiAgICB0aGlzLm9uKCdkb25lJywgKCkgPT4ge1xuICAgICAgcmVhZGFibGVTdHJlYW0ucHVzaChudWxsKVxuICAgIH0pXG4gICAgcmV0dXJuIHJlYWRhYmxlU3RyZWFtXG4gIH1cblxuICAvKipcbiAgICogV3JhcCBvcmlnaW5hbCByZXF1ZXN0IGluIGEgUmVhZGFibGUgc3RyZWFtIHRoYXQgc3VwcG9ydHMgYmFjayBwcmVzc3VyZSBhbmQgcGlwZSB0byB0aGUgV3JpdGFibGUgc3RyZWFtLlxuICAgKiBJdCBhbHNvIHNldHMgcmVxdWVzdCB0byBgc3RyZWFtYCBtb2RlIGFuZCBwdWxscyBhbGwgcm93cyBmcm9tIGFsbCByZWNvcmRzZXRzIHRvIGEgZ2l2ZW4gc3RyZWFtLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmVhbX0gc3RyZWFtIFN0cmVhbSB0byBwaXBlIGRhdGEgaW50by5cbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cblxuICBwaXBlICh3cml0YWJsZVN0cmVhbSkge1xuICAgIGNvbnN0IHJlYWRhYmxlU3RyZWFtID0gdGhpcy50b1JlYWRhYmxlU3RyZWFtKClcbiAgICByZXR1cm4gcmVhZGFibGVTdHJlYW0ucGlwZSh3cml0YWJsZVN0cmVhbSlcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIHRoZSBTUUwgY29tbWFuZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbW1hbmQgVC1TUUwgY29tbWFuZCB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHtSZXF1ZXN0fnJlcXVlc3RDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBleGVjdXRpb24gaGFzIGNvbXBsZXRlZCwgb3IgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBJZiBvbWl0ZWQsIG1ldGhvZCByZXR1cm5zIFByb21pc2UuXG4gICAqIEByZXR1cm4ge1JlcXVlc3R8UHJvbWlzZX1cbiAgICovXG5cbiAgcXVlcnkgKGNvbW1hbmQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc3RyZWFtID09PSBudWxsICYmIHRoaXMucGFyZW50KSB0aGlzLnN0cmVhbSA9IHRoaXMucGFyZW50LmNvbmZpZy5zdHJlYW1cbiAgICBpZiAodGhpcy5hcnJheVJvd01vZGUgPT09IG51bGwgJiYgdGhpcy5wYXJlbnQpIHRoaXMuYXJyYXlSb3dNb2RlID0gdGhpcy5wYXJlbnQuY29uZmlnLmFycmF5Um93TW9kZVxuICAgIHRoaXMucm93c0FmZmVjdGVkID0gMFxuXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fcXVlcnkoY29tbWFuZCwgKGVyciwgcmVjb3Jkc2V0cywgb3V0cHV0LCByb3dzQWZmZWN0ZWQsIGNvbHVtbnMpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKGVycikgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgICBlcnIgPSBudWxsXG5cbiAgICAgICAgICB0aGlzLmVtaXQoJ2RvbmUnLCB7XG4gICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICByb3dzQWZmZWN0ZWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgIHJlY29yZHNldHMsXG4gICAgICAgICAgcmVjb3Jkc2V0OiByZWNvcmRzZXRzICYmIHJlY29yZHNldHNbMF0sXG4gICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgIHJvd3NBZmZlY3RlZFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSkgcmVzdWx0LmNvbHVtbnMgPSBjb2x1bW5zXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdClcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIG1ldGhvZCB3YXMgY2FsbGVkIGFzIHRhZ2dlZCB0ZW1wbGF0ZVxuICAgIGlmICh0eXBlb2YgY29tbWFuZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgIGNvbnN0IHN0cmluZ3MgPSB2YWx1ZXMuc2hpZnQoKVxuICAgICAgY29tbWFuZCA9IHRoaXMuX3RlbXBsYXRlKHN0cmluZ3MsIHZhbHVlcylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX3F1ZXJ5KGNvbW1hbmQsIChlcnIsIHJlY29yZHNldHMsIG91dHB1dCwgcm93c0FmZmVjdGVkLCBjb2x1bW5zKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgIGlmIChlcnIpIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpXG4gICAgICAgICAgZXJyID0gbnVsbFxuXG4gICAgICAgICAgdGhpcy5lbWl0KCdkb25lJywge1xuICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgcm93c0FmZmVjdGVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgcmVjb3Jkc2V0cyxcbiAgICAgICAgICByZWNvcmRzZXQ6IHJlY29yZHNldHMgJiYgcmVjb3Jkc2V0c1swXSxcbiAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgcm93c0FmZmVjdGVkXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlKSByZXN1bHQuY29sdW1ucyA9IGNvbHVtbnNcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbW1hbmRcbiAgICogQHBhcmFtIHtSZXF1ZXN0fmJ1bGtDYWxsYmFja30gY2FsbGJhY2tcbiAgICovXG5cbiAgX3F1ZXJ5IChjb21tYW5kLCBjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBSZXF1ZXN0RXJyb3IoJ05vIGNvbm5lY3Rpb24gaXMgc3BlY2lmaWVkIGZvciB0aGF0IHJlcXVlc3QuJywgJ0VOT0NPTk4nKSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGFyZW50LmNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IENvbm5lY3Rpb25FcnJvcignQ29ubmVjdGlvbiBpcyBjbG9zZWQuJywgJ0VDT05OQ0xPU0VEJykpXG4gICAgfVxuXG4gICAgdGhpcy5jYW5jZWxlZCA9IGZhbHNlXG4gICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgYSBzdG9yZWQgcHJvY2VkdXJlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvY2VkdXJlIE5hbWUgb2YgdGhlIHN0b3JlZCBwcm9jZWR1cmUgdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSB7UmVxdWVzdH5yZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgZXhlY3V0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtSZXF1ZXN0fFByb21pc2V9XG4gICAqL1xuXG4gIGV4ZWN1dGUgKGNvbW1hbmQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc3RyZWFtID09PSBudWxsICYmIHRoaXMucGFyZW50KSB0aGlzLnN0cmVhbSA9IHRoaXMucGFyZW50LmNvbmZpZy5zdHJlYW1cbiAgICBpZiAodGhpcy5hcnJheVJvd01vZGUgPT09IG51bGwgJiYgdGhpcy5wYXJlbnQpIHRoaXMuYXJyYXlSb3dNb2RlID0gdGhpcy5wYXJlbnQuY29uZmlnLmFycmF5Um93TW9kZVxuICAgIHRoaXMucm93c0FmZmVjdGVkID0gMFxuXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fZXhlY3V0ZShjb21tYW5kLCAoZXJyLCByZWNvcmRzZXRzLCBvdXRwdXQsIHJldHVyblZhbHVlLCByb3dzQWZmZWN0ZWQsIGNvbHVtbnMpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKGVycikgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgICBlcnIgPSBudWxsXG5cbiAgICAgICAgICB0aGlzLmVtaXQoJ2RvbmUnLCB7XG4gICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICByb3dzQWZmZWN0ZWQsXG4gICAgICAgICAgICByZXR1cm5WYWx1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgcmVjb3Jkc2V0cyxcbiAgICAgICAgICByZWNvcmRzZXQ6IHJlY29yZHNldHMgJiYgcmVjb3Jkc2V0c1swXSxcbiAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgcm93c0FmZmVjdGVkLFxuICAgICAgICAgIHJldHVyblZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlKSByZXN1bHQuY29sdW1ucyA9IGNvbHVtbnNcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KVxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLl9leGVjdXRlKGNvbW1hbmQsIChlcnIsIHJlY29yZHNldHMsIG91dHB1dCwgcmV0dXJuVmFsdWUsIHJvd3NBZmZlY3RlZCwgY29sdW1ucykgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICBpZiAoZXJyKSB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICAgIGVyciA9IG51bGxcblxuICAgICAgICAgIHRoaXMuZW1pdCgnZG9uZScsIHtcbiAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIHJvd3NBZmZlY3RlZCxcbiAgICAgICAgICAgIHJldHVyblZhbHVlXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgcmVjb3Jkc2V0cyxcbiAgICAgICAgICByZWNvcmRzZXQ6IHJlY29yZHNldHMgJiYgcmVjb3Jkc2V0c1swXSxcbiAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgcm93c0FmZmVjdGVkLFxuICAgICAgICAgIHJldHVyblZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlKSByZXN1bHQuY29sdW1ucyA9IGNvbHVtbnNcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb2NlZHVyZVxuICAgKiBAcGFyYW0ge1JlcXVlc3R+YnVsa0NhbGxiYWNrfSBjYWxsYmFja1xuICAgKi9cblxuICBfZXhlY3V0ZSAocHJvY2VkdXJlLCBjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBSZXF1ZXN0RXJyb3IoJ05vIGNvbm5lY3Rpb24gaXMgc3BlY2lmaWVkIGZvciB0aGF0IHJlcXVlc3QuJywgJ0VOT0NPTk4nKSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGFyZW50LmNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IENvbm5lY3Rpb25FcnJvcignQ29ubmVjdGlvbiBpcyBjbG9zZWQuJywgJ0VDT05OQ0xPU0VEJykpXG4gICAgfVxuXG4gICAgdGhpcy5jYW5jZWxlZCA9IGZhbHNlXG4gICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbCBjdXJyZW50bHkgZXhlY3V0ZWQgcmVxdWVzdC5cbiAgICpcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgY2FuY2VsICgpIHtcbiAgICB0aGlzLl9jYW5jZWwoKVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgX2NhbmNlbCAoKSB7XG4gICAgdGhpcy5jYW5jZWxlZCA9IHRydWVcbiAgfVxuXG4gIHBhdXNlICgpIHtcbiAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgIHRoaXMuX3BhdXNlKClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgX3BhdXNlICgpIHtcbiAgICB0aGlzLl9wYXVzZWQgPSB0cnVlXG4gIH1cblxuICByZXN1bWUgKCkge1xuICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgdGhpcy5fcmVzdW1lKClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgX3Jlc3VtZSAoKSB7XG4gICAgdGhpcy5fcGF1c2VkID0gZmFsc2VcbiAgfVxuXG4gIF9zZXRDdXJyZW50UmVxdWVzdCAocmVxdWVzdCkge1xuICAgIHRoaXMuX2N1cnJlbnRSZXF1ZXN0ID0gcmVxdWVzdFxuICAgIGlmICh0aGlzLl9wYXVzZWQpIHtcbiAgICAgIHRoaXMucGF1c2UoKVxuICAgIH1cbiAgICByZXR1cm4gdGhpc1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVxdWVzdFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/base/request.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/base/transaction.js":
/*!****************************************************!*\
  !*** ./node_modules/mssql/lib/base/transaction.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\")('mssql:base')\nconst { EventEmitter } = __webpack_require__(/*! node:events */ \"node:events\")\nconst { IDS } = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/mssql/lib/utils.js\")\nconst globalConnection = __webpack_require__(/*! ../global-connection */ \"(rsc)/./node_modules/mssql/lib/global-connection.js\")\nconst { TransactionError } = __webpack_require__(/*! ../error */ \"(rsc)/./node_modules/mssql/lib/error/index.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/./node_modules/mssql/lib/shared.js\")\nconst ISOLATION_LEVEL = __webpack_require__(/*! ../isolationlevel */ \"(rsc)/./node_modules/mssql/lib/isolationlevel.js\")\n\n/**\n * Class Transaction.\n *\n * @property {Number} isolationLevel Controls the locking and row versioning behavior of TSQL statements issued by a connection. READ_COMMITTED by default.\n * @property {String} name Transaction name. Empty string by default.\n *\n * @fires Transaction#begin\n * @fires Transaction#commit\n * @fires Transaction#rollback\n */\n\nclass Transaction extends EventEmitter {\n  /**\n   * Create new Transaction.\n   *\n   * @param {Connection} [parent] If ommited, global connection is used instead.\n   */\n\n  constructor (parent) {\n    super()\n\n    IDS.add(this, 'Transaction')\n    debug('transaction(%d): created', IDS.get(this))\n\n    this.parent = parent || globalConnection.pool\n    this.isolationLevel = Transaction.defaultIsolationLevel\n    this.name = ''\n  }\n\n  get config () {\n    return this.parent.config\n  }\n\n  get connected () {\n    return this.parent.connected\n  }\n\n  /**\n   * Acquire connection from connection pool.\n   *\n   * @param {Request} request Request.\n   * @param {ConnectionPool~acquireCallback} [callback] A callback which is called after connection has established, or an error has occurred. If omited, method returns Promise.\n   * @return {Transaction|Promise}\n   */\n\n  acquire (request, callback) {\n    if (!this._acquiredConnection) {\n      setImmediate(callback, new TransactionError('Transaction has not begun. Call begin() first.', 'ENOTBEGUN'))\n      return this\n    }\n\n    if (this._activeRequest) {\n      setImmediate(callback, new TransactionError(\"Can't acquire connection for the request. There is another request in progress.\", 'EREQINPROG'))\n      return this\n    }\n\n    this._activeRequest = request\n    setImmediate(callback, null, this._acquiredConnection, this._acquiredConfig)\n    return this\n  }\n\n  /**\n   * Release connection back to the pool.\n   *\n   * @param {Connection} connection Previously acquired connection.\n   * @return {Transaction}\n   */\n\n  release (connection) {\n    if (connection === this._acquiredConnection) {\n      this._activeRequest = null\n    }\n\n    return this\n  }\n\n  /**\n   * Begin a transaction.\n   *\n   * @param {Number} [isolationLevel] Controls the locking and row versioning behavior of TSQL statements issued by a connection.\n   * @param {basicCallback} [callback] A callback which is called after transaction has began, or an error has occurred. If omited, method returns Promise.\n   * @return {Transaction|Promise}\n   */\n\n  begin (isolationLevel, callback) {\n    if (isolationLevel instanceof Function) {\n      callback = isolationLevel\n      isolationLevel = undefined\n    }\n\n    if (typeof callback === 'function') {\n      this._begin(isolationLevel, err => {\n        if (!err) {\n          this.emit('begin')\n        }\n        callback(err)\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._begin(isolationLevel, err => {\n        if (err) return reject(err)\n        this.emit('begin')\n        resolve(this)\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {Number} [isolationLevel]\n   * @param {basicCallback} [callback]\n   * @return {Transaction}\n   */\n\n  _begin (isolationLevel, callback) {\n    if (this._acquiredConnection) {\n      return setImmediate(callback, new TransactionError('Transaction has already begun.', 'EALREADYBEGUN'))\n    }\n\n    this._aborted = false\n    this._rollbackRequested = false\n    if (isolationLevel) {\n      if (Object.keys(ISOLATION_LEVEL).some(key => {\n        return ISOLATION_LEVEL[key] === isolationLevel\n      })) {\n        this.isolationLevel = isolationLevel\n      } else {\n        throw new TransactionError('Invalid isolation level.')\n      }\n    }\n\n    setImmediate(callback)\n  }\n\n  /**\n   * Commit a transaction.\n   *\n   * @param {basicCallback} [callback] A callback which is called after transaction has commited, or an error has occurred. If omited, method returns Promise.\n   * @return {Transaction|Promise}\n   */\n\n  commit (callback) {\n    if (typeof callback === 'function') {\n      this._commit(err => {\n        if (!err) {\n          this.emit('commit')\n        }\n        callback(err)\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      this._commit(err => {\n        if (err) return reject(err)\n        this.emit('commit')\n        resolve()\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} [callback]\n   * @return {Transaction}\n   */\n\n  _commit (callback) {\n    if (this._aborted) {\n      return setImmediate(callback, new TransactionError('Transaction has been aborted.', 'EABORT'))\n    }\n\n    if (!this._acquiredConnection) {\n      return setImmediate(callback, new TransactionError('Transaction has not begun. Call begin() first.', 'ENOTBEGUN'))\n    }\n\n    if (this._activeRequest) {\n      return setImmediate(callback, new TransactionError(\"Can't commit transaction. There is a request in progress.\", 'EREQINPROG'))\n    }\n\n    setImmediate(callback)\n  }\n\n  /**\n   * Returns new request using this transaction.\n   *\n   * @return {Request}\n   */\n\n  request () {\n    return new shared.driver.Request(this)\n  }\n\n  /**\n   * Rollback a transaction.\n   *\n   * @param {basicCallback} [callback] A callback which is called after transaction has rolled back, or an error has occurred. If omited, method returns Promise.\n   * @return {Transaction|Promise}\n   */\n\n  rollback (callback) {\n    if (typeof callback === 'function') {\n      this._rollback(err => {\n        if (!err) {\n          this.emit('rollback', this._aborted)\n        }\n        callback(err)\n      })\n      return this\n    }\n\n    return new shared.Promise((resolve, reject) => {\n      return this._rollback(err => {\n        if (err) return reject(err)\n        this.emit('rollback', this._aborted)\n        resolve()\n      })\n    })\n  }\n\n  /**\n   * @private\n   * @param {basicCallback} [callback]\n   * @return {Transaction}\n   */\n\n  _rollback (callback) {\n    if (this._aborted) {\n      return setImmediate(callback, new TransactionError('Transaction has been aborted.', 'EABORT'))\n    }\n\n    if (!this._acquiredConnection) {\n      return setImmediate(callback, new TransactionError('Transaction has not begun. Call begin() first.', 'ENOTBEGUN'))\n    }\n\n    if (this._activeRequest) {\n      return setImmediate(callback, new TransactionError(\"Can't rollback transaction. There is a request in progress.\", 'EREQINPROG'))\n    }\n\n    this._rollbackRequested = true\n\n    setImmediate(callback)\n  }\n}\n\n/**\n * Default isolation level used for any transactions that don't explicitly specify an isolation level.\n *\n * @type {number}\n */\nTransaction.defaultIsolationLevel = ISOLATION_LEVEL.READ_COMMITTED\n\nmodule.exports = Transaction\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Jhc2UvdHJhbnNhY3Rpb24uanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosY0FBYyxtQkFBTyxDQUFDLHNEQUFPO0FBQzdCLFFBQVEsZUFBZSxFQUFFLG1CQUFPLENBQUMsZ0NBQWE7QUFDOUMsUUFBUSxNQUFNLEVBQUUsbUJBQU8sQ0FBQyx5REFBVTtBQUNsQyx5QkFBeUIsbUJBQU8sQ0FBQyxpRkFBc0I7QUFDdkQsUUFBUSxtQkFBbUIsRUFBRSxtQkFBTyxDQUFDLCtEQUFVO0FBQy9DLGVBQWUsbUJBQU8sQ0FBQywyREFBVztBQUNsQyx3QkFBd0IsbUJBQU8sQ0FBQywyRUFBbUI7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0QixjQUFjLFFBQVE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsWUFBWTtBQUN6Qjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEIsYUFBYSxnQ0FBZ0M7QUFDN0MsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxZQUFZO0FBQ3pCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLGVBQWU7QUFDNUIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLGVBQWU7QUFDNUIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZUFBZTtBQUM1QixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvYmFzZS90cmFuc2FjdGlvbi5qcz9kMDU1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ21zc3FsOmJhc2UnKVxuY29uc3QgeyBFdmVudEVtaXR0ZXIgfSA9IHJlcXVpcmUoJ25vZGU6ZXZlbnRzJylcbmNvbnN0IHsgSURTIH0gPSByZXF1aXJlKCcuLi91dGlscycpXG5jb25zdCBnbG9iYWxDb25uZWN0aW9uID0gcmVxdWlyZSgnLi4vZ2xvYmFsLWNvbm5lY3Rpb24nKVxuY29uc3QgeyBUcmFuc2FjdGlvbkVycm9yIH0gPSByZXF1aXJlKCcuLi9lcnJvcicpXG5jb25zdCBzaGFyZWQgPSByZXF1aXJlKCcuLi9zaGFyZWQnKVxuY29uc3QgSVNPTEFUSU9OX0xFVkVMID0gcmVxdWlyZSgnLi4vaXNvbGF0aW9ubGV2ZWwnKVxuXG4vKipcbiAqIENsYXNzIFRyYW5zYWN0aW9uLlxuICpcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBpc29sYXRpb25MZXZlbCBDb250cm9scyB0aGUgbG9ja2luZyBhbmQgcm93IHZlcnNpb25pbmcgYmVoYXZpb3Igb2YgVFNRTCBzdGF0ZW1lbnRzIGlzc3VlZCBieSBhIGNvbm5lY3Rpb24uIFJFQURfQ09NTUlUVEVEIGJ5IGRlZmF1bHQuXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbmFtZSBUcmFuc2FjdGlvbiBuYW1lLiBFbXB0eSBzdHJpbmcgYnkgZGVmYXVsdC5cbiAqXG4gKiBAZmlyZXMgVHJhbnNhY3Rpb24jYmVnaW5cbiAqIEBmaXJlcyBUcmFuc2FjdGlvbiNjb21taXRcbiAqIEBmaXJlcyBUcmFuc2FjdGlvbiNyb2xsYmFja1xuICovXG5cbmNsYXNzIFRyYW5zYWN0aW9uIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBuZXcgVHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Q29ubmVjdGlvbn0gW3BhcmVudF0gSWYgb21taXRlZCwgZ2xvYmFsIGNvbm5lY3Rpb24gaXMgdXNlZCBpbnN0ZWFkLlxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAocGFyZW50KSB7XG4gICAgc3VwZXIoKVxuXG4gICAgSURTLmFkZCh0aGlzLCAnVHJhbnNhY3Rpb24nKVxuICAgIGRlYnVnKCd0cmFuc2FjdGlvbiglZCk6IGNyZWF0ZWQnLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQgfHwgZ2xvYmFsQ29ubmVjdGlvbi5wb29sXG4gICAgdGhpcy5pc29sYXRpb25MZXZlbCA9IFRyYW5zYWN0aW9uLmRlZmF1bHRJc29sYXRpb25MZXZlbFxuICAgIHRoaXMubmFtZSA9ICcnXG4gIH1cblxuICBnZXQgY29uZmlnICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQuY29uZmlnXG4gIH1cblxuICBnZXQgY29ubmVjdGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQuY29ubmVjdGVkXG4gIH1cblxuICAvKipcbiAgICogQWNxdWlyZSBjb25uZWN0aW9uIGZyb20gY29ubmVjdGlvbiBwb29sLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlcXVlc3R9IHJlcXVlc3QgUmVxdWVzdC5cbiAgICogQHBhcmFtIHtDb25uZWN0aW9uUG9vbH5hY3F1aXJlQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgY29ubmVjdGlvbiBoYXMgZXN0YWJsaXNoZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICAgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbnxQcm9taXNlfVxuICAgKi9cblxuICBhY3F1aXJlIChyZXF1ZXN0LCBjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uKSB7XG4gICAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBUcmFuc2FjdGlvbkVycm9yKCdUcmFuc2FjdGlvbiBoYXMgbm90IGJlZ3VuLiBDYWxsIGJlZ2luKCkgZmlyc3QuJywgJ0VOT1RCRUdVTicpKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlUmVxdWVzdCkge1xuICAgICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgVHJhbnNhY3Rpb25FcnJvcihcIkNhbid0IGFjcXVpcmUgY29ubmVjdGlvbiBmb3IgdGhlIHJlcXVlc3QuIFRoZXJlIGlzIGFub3RoZXIgcmVxdWVzdCBpbiBwcm9ncmVzcy5cIiwgJ0VSRVFJTlBST0cnKSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgdGhpcy5fYWN0aXZlUmVxdWVzdCA9IHJlcXVlc3RcbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG51bGwsIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbiwgdGhpcy5fYWNxdWlyZWRDb25maWcpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGNvbm5lY3Rpb24gYmFjayB0byB0aGUgcG9vbC5cbiAgICpcbiAgICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uZWN0aW9uIFByZXZpb3VzbHkgYWNxdWlyZWQgY29ubmVjdGlvbi5cbiAgICogQHJldHVybiB7VHJhbnNhY3Rpb259XG4gICAqL1xuXG4gIHJlbGVhc2UgKGNvbm5lY3Rpb24pIHtcbiAgICBpZiAoY29ubmVjdGlvbiA9PT0gdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uKSB7XG4gICAgICB0aGlzLl9hY3RpdmVSZXF1ZXN0ID0gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogQmVnaW4gYSB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtpc29sYXRpb25MZXZlbF0gQ29udHJvbHMgdGhlIGxvY2tpbmcgYW5kIHJvdyB2ZXJzaW9uaW5nIGJlaGF2aW9yIG9mIFRTUUwgc3RhdGVtZW50cyBpc3N1ZWQgYnkgYSBjb25uZWN0aW9uLlxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgdHJhbnNhY3Rpb24gaGFzIGJlZ2FuLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7VHJhbnNhY3Rpb258UHJvbWlzZX1cbiAgICovXG5cbiAgYmVnaW4gKGlzb2xhdGlvbkxldmVsLCBjYWxsYmFjaykge1xuICAgIGlmIChpc29sYXRpb25MZXZlbCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICBjYWxsYmFjayA9IGlzb2xhdGlvbkxldmVsXG4gICAgICBpc29sYXRpb25MZXZlbCA9IHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX2JlZ2luKGlzb2xhdGlvbkxldmVsLCBlcnIgPT4ge1xuICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgIHRoaXMuZW1pdCgnYmVnaW4nKVxuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKGVycilcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fYmVnaW4oaXNvbGF0aW9uTGV2ZWwsIGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKVxuICAgICAgICB0aGlzLmVtaXQoJ2JlZ2luJylcbiAgICAgICAgcmVzb2x2ZSh0aGlzKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbaXNvbGF0aW9uTGV2ZWxdXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXVxuICAgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbn1cbiAgICovXG5cbiAgX2JlZ2luIChpc29sYXRpb25MZXZlbCwgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uKSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgVHJhbnNhY3Rpb25FcnJvcignVHJhbnNhY3Rpb24gaGFzIGFscmVhZHkgYmVndW4uJywgJ0VBTFJFQURZQkVHVU4nKSlcbiAgICB9XG5cbiAgICB0aGlzLl9hYm9ydGVkID0gZmFsc2VcbiAgICB0aGlzLl9yb2xsYmFja1JlcXVlc3RlZCA9IGZhbHNlXG4gICAgaWYgKGlzb2xhdGlvbkxldmVsKSB7XG4gICAgICBpZiAoT2JqZWN0LmtleXMoSVNPTEFUSU9OX0xFVkVMKS5zb21lKGtleSA9PiB7XG4gICAgICAgIHJldHVybiBJU09MQVRJT05fTEVWRUxba2V5XSA9PT0gaXNvbGF0aW9uTGV2ZWxcbiAgICAgIH0pKSB7XG4gICAgICAgIHRoaXMuaXNvbGF0aW9uTGV2ZWwgPSBpc29sYXRpb25MZXZlbFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFRyYW5zYWN0aW9uRXJyb3IoJ0ludmFsaWQgaXNvbGF0aW9uIGxldmVsLicpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIENvbW1pdCBhIHRyYW5zYWN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgdHJhbnNhY3Rpb24gaGFzIGNvbW1pdGVkLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7VHJhbnNhY3Rpb258UHJvbWlzZX1cbiAgICovXG5cbiAgY29tbWl0IChjYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX2NvbW1pdChlcnIgPT4ge1xuICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgIHRoaXMuZW1pdCgnY29tbWl0JylcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhlcnIpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuX2NvbW1pdChlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycilcbiAgICAgICAgdGhpcy5lbWl0KCdjb21taXQnKVxuICAgICAgICByZXNvbHZlKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja11cbiAgICogQHJldHVybiB7VHJhbnNhY3Rpb259XG4gICAqL1xuXG4gIF9jb21taXQgKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuX2Fib3J0ZWQpIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBUcmFuc2FjdGlvbkVycm9yKCdUcmFuc2FjdGlvbiBoYXMgYmVlbiBhYm9ydGVkLicsICdFQUJPUlQnKSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbikge1xuICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgbmV3IFRyYW5zYWN0aW9uRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBub3QgYmVndW4uIENhbGwgYmVnaW4oKSBmaXJzdC4nLCAnRU5PVEJFR1VOJykpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZVJlcXVlc3QpIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBUcmFuc2FjdGlvbkVycm9yKFwiQ2FuJ3QgY29tbWl0IHRyYW5zYWN0aW9uLiBUaGVyZSBpcyBhIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXCIsICdFUkVRSU5QUk9HJykpXG4gICAgfVxuXG4gICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgbmV3IHJlcXVlc3QgdXNpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogQHJldHVybiB7UmVxdWVzdH1cbiAgICovXG5cbiAgcmVxdWVzdCAoKSB7XG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuZHJpdmVyLlJlcXVlc3QodGhpcylcbiAgfVxuXG4gIC8qKlxuICAgKiBSb2xsYmFjayBhIHRyYW5zYWN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgdHJhbnNhY3Rpb24gaGFzIHJvbGxlZCBiYWNrLCBvciBhbiBlcnJvciBoYXMgb2NjdXJyZWQuIElmIG9taXRlZCwgbWV0aG9kIHJldHVybnMgUHJvbWlzZS5cbiAgICogQHJldHVybiB7VHJhbnNhY3Rpb258UHJvbWlzZX1cbiAgICovXG5cbiAgcm9sbGJhY2sgKGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fcm9sbGJhY2soZXJyID0+IHtcbiAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JvbGxiYWNrJywgdGhpcy5fYWJvcnRlZClcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhlcnIpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9yb2xsYmFjayhlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycilcbiAgICAgICAgdGhpcy5lbWl0KCdyb2xsYmFjaycsIHRoaXMuX2Fib3J0ZWQpXG4gICAgICAgIHJlc29sdmUoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXVxuICAgKiBAcmV0dXJuIHtUcmFuc2FjdGlvbn1cbiAgICovXG5cbiAgX3JvbGxiYWNrIChjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLl9hYm9ydGVkKSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgVHJhbnNhY3Rpb25FcnJvcignVHJhbnNhY3Rpb24gaGFzIGJlZW4gYWJvcnRlZC4nLCAnRUFCT1JUJykpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24pIHtcbiAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIG5ldyBUcmFuc2FjdGlvbkVycm9yKCdUcmFuc2FjdGlvbiBoYXMgbm90IGJlZ3VuLiBDYWxsIGJlZ2luKCkgZmlyc3QuJywgJ0VOT1RCRUdVTicpKVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9hY3RpdmVSZXF1ZXN0KSB7XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlKGNhbGxiYWNrLCBuZXcgVHJhbnNhY3Rpb25FcnJvcihcIkNhbid0IHJvbGxiYWNrIHRyYW5zYWN0aW9uLiBUaGVyZSBpcyBhIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXCIsICdFUkVRSU5QUk9HJykpXG4gICAgfVxuXG4gICAgdGhpcy5fcm9sbGJhY2tSZXF1ZXN0ZWQgPSB0cnVlXG5cbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spXG4gIH1cbn1cblxuLyoqXG4gKiBEZWZhdWx0IGlzb2xhdGlvbiBsZXZlbCB1c2VkIGZvciBhbnkgdHJhbnNhY3Rpb25zIHRoYXQgZG9uJ3QgZXhwbGljaXRseSBzcGVjaWZ5IGFuIGlzb2xhdGlvbiBsZXZlbC5cbiAqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UcmFuc2FjdGlvbi5kZWZhdWx0SXNvbGF0aW9uTGV2ZWwgPSBJU09MQVRJT05fTEVWRUwuUkVBRF9DT01NSVRURURcblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2FjdGlvblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/base/transaction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/datatypes.js":
/*!*********************************************!*\
  !*** ./node_modules/mssql/lib/datatypes.js ***!
  \*********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst objectHasProperty = (__webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/mssql/lib/utils.js\").objectHasProperty)\nconst inspect = Symbol.for('nodejs.util.inspect.custom')\n\nconst TYPES = {\n  VarChar (length) {\n    return { type: TYPES.VarChar, length }\n  },\n  NVarChar (length) {\n    return { type: TYPES.NVarChar, length }\n  },\n  Text () {\n    return { type: TYPES.Text }\n  },\n  Int () {\n    return { type: TYPES.Int }\n  },\n  BigInt () {\n    return { type: TYPES.BigInt }\n  },\n  TinyInt () {\n    return { type: TYPES.TinyInt }\n  },\n  SmallInt () {\n    return { type: TYPES.SmallInt }\n  },\n  Bit () {\n    return { type: TYPES.Bit }\n  },\n  Float () {\n    return { type: TYPES.Float }\n  },\n  Numeric (precision, scale) {\n    return { type: TYPES.Numeric, precision, scale }\n  },\n  Decimal (precision, scale) {\n    return { type: TYPES.Decimal, precision, scale }\n  },\n  Real () {\n    return { type: TYPES.Real }\n  },\n  Date () {\n    return { type: TYPES.Date }\n  },\n  DateTime () {\n    return { type: TYPES.DateTime }\n  },\n  DateTime2 (scale) {\n    return { type: TYPES.DateTime2, scale }\n  },\n  DateTimeOffset (scale) {\n    return { type: TYPES.DateTimeOffset, scale }\n  },\n  SmallDateTime () {\n    return { type: TYPES.SmallDateTime }\n  },\n  Time (scale) {\n    return { type: TYPES.Time, scale }\n  },\n  UniqueIdentifier () {\n    return { type: TYPES.UniqueIdentifier }\n  },\n  SmallMoney () {\n    return { type: TYPES.SmallMoney }\n  },\n  Money () {\n    return { type: TYPES.Money }\n  },\n  Binary (length) {\n    return { type: TYPES.Binary, length }\n  },\n  VarBinary (length) {\n    return { type: TYPES.VarBinary, length }\n  },\n  Image () {\n    return { type: TYPES.Image }\n  },\n  Xml () {\n    return { type: TYPES.Xml }\n  },\n  Char (length) {\n    return { type: TYPES.Char, length }\n  },\n  NChar (length) {\n    return { type: TYPES.NChar, length }\n  },\n  NText () {\n    return { type: TYPES.NText }\n  },\n  TVP (tvpType) {\n    return { type: TYPES.TVP, tvpType }\n  },\n  UDT () {\n    return { type: TYPES.UDT }\n  },\n  Geography () {\n    return { type: TYPES.Geography }\n  },\n  Geometry () {\n    return { type: TYPES.Geometry }\n  },\n  Variant () {\n    return { type: TYPES.Variant }\n  }\n}\n\nmodule.exports.TYPES = TYPES\nmodule.exports.DECLARATIONS = {}\n\nconst zero = function (value, length) {\n  if (length == null) length = 2\n\n  value = String(value)\n  if (value.length < length) {\n    for (let i = 1; i <= length - value.length; i++) {\n      value = `0${value}`\n    }\n  }\n  return value\n}\n\nfor (const key in TYPES) {\n  if (objectHasProperty(TYPES, key)) {\n    const value = TYPES[key]\n    value.declaration = key.toLowerCase()\n    module.exports.DECLARATIONS[value.declaration] = value;\n\n    ((key, value) => {\n      value[inspect] = () => `[sql.${key}]`\n    })(key, value)\n  }\n}\n\nmodule.exports.declare = (type, options) => {\n  switch (type) {\n    case TYPES.VarChar: case TYPES.VarBinary:\n      return `${type.declaration} (${options.length > 8000 ? 'MAX' : (options.length == null ? 'MAX' : options.length)})`\n    case TYPES.NVarChar:\n      return `${type.declaration} (${options.length > 4000 ? 'MAX' : (options.length == null ? 'MAX' : options.length)})`\n    case TYPES.Char: case TYPES.NChar: case TYPES.Binary:\n      return `${type.declaration} (${options.length == null ? 1 : options.length})`\n    case TYPES.Decimal: case TYPES.Numeric:\n      return `${type.declaration} (${options.precision == null ? 18 : options.precision}, ${options.scale == null ? 0 : options.scale})`\n    case TYPES.Time: case TYPES.DateTime2: case TYPES.DateTimeOffset:\n      return `${type.declaration} (${options.scale == null ? 7 : options.scale})`\n    case TYPES.TVP:\n      return `${options.tvpType} readonly`\n    default:\n      return type.declaration\n  }\n}\n\nmodule.exports.cast = (value, type, options) => {\n  if (value == null) {\n    return null\n  }\n\n  switch (typeof value) {\n    case 'string':\n      return `N'${value.replace(/'/g, '\\'\\'')}'`\n\n    case 'number':\n    case 'bigint':\n      return value\n\n    case 'boolean':\n      return value ? 1 : 0\n\n    case 'object':\n      if (value instanceof Date) {\n        let ns = value.getUTCMilliseconds() / 1000\n        if (value.nanosecondDelta != null) {\n          ns += value.nanosecondDelta\n        }\n        const scale = options.scale == null ? 7 : options.scale\n\n        if (scale > 0) {\n          ns = String(ns).substr(1, scale + 1)\n        } else {\n          ns = ''\n        }\n\n        return `N'${value.getUTCFullYear()}-${zero(value.getUTCMonth() + 1)}-${zero(value.getUTCDate())} ${zero(value.getUTCHours())}:${zero(value.getUTCMinutes())}:${zero(value.getUTCSeconds())}${ns}'`\n      } else if (Buffer.isBuffer(value)) {\n        return `0x${value.toString('hex')}`\n      }\n\n      return null\n\n    default:\n      return null\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2RhdGF0eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWiwwQkFBMEIsaUdBQW9DO0FBQzlEOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBLG9CQUFvQjtBQUNwQiwyQkFBMkI7O0FBRTNCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQiw0QkFBNEI7QUFDaEQsa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQyxJQUFJO0FBQ3pDLEtBQUs7QUFDTDtBQUNBOztBQUVBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsZ0JBQWdCLGtCQUFrQixHQUFHLGtGQUFrRjtBQUN2SDtBQUNBLGdCQUFnQixrQkFBa0IsR0FBRyxrRkFBa0Y7QUFDdkg7QUFDQSxnQkFBZ0Isa0JBQWtCLEdBQUcsNENBQTRDO0FBQ2pGO0FBQ0EsZ0JBQWdCLGtCQUFrQixHQUFHLG1EQUFtRCxJQUFJLDBDQUEwQztBQUN0STtBQUNBLGdCQUFnQixrQkFBa0IsR0FBRywwQ0FBMEM7QUFDL0U7QUFDQSxnQkFBZ0IsaUJBQWlCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQiw0QkFBNEI7O0FBRTlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQSxvQkFBb0IsdUJBQXVCLEdBQUcsOEJBQThCLEdBQUcsMEJBQTBCLEVBQUUsMEJBQTBCLEdBQUcsNEJBQTRCLEdBQUcsNEJBQTRCLEVBQUUsR0FBRztBQUN4TSxRQUFRO0FBQ1Isb0JBQW9CLHNCQUFzQjtBQUMxQzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvZGF0YXR5cGVzLmpzPzFlOTIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IG9iamVjdEhhc1Byb3BlcnR5ID0gcmVxdWlyZSgnLi91dGlscycpLm9iamVjdEhhc1Byb3BlcnR5XG5jb25zdCBpbnNwZWN0ID0gU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKVxuXG5jb25zdCBUWVBFUyA9IHtcbiAgVmFyQ2hhciAobGVuZ3RoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuVmFyQ2hhciwgbGVuZ3RoIH1cbiAgfSxcbiAgTlZhckNoYXIgKGxlbmd0aCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLk5WYXJDaGFyLCBsZW5ndGggfVxuICB9LFxuICBUZXh0ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5UZXh0IH1cbiAgfSxcbiAgSW50ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5JbnQgfVxuICB9LFxuICBCaWdJbnQgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkJpZ0ludCB9XG4gIH0sXG4gIFRpbnlJbnQgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLlRpbnlJbnQgfVxuICB9LFxuICBTbWFsbEludCAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuU21hbGxJbnQgfVxuICB9LFxuICBCaXQgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkJpdCB9XG4gIH0sXG4gIEZsb2F0ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5GbG9hdCB9XG4gIH0sXG4gIE51bWVyaWMgKHByZWNpc2lvbiwgc2NhbGUpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5OdW1lcmljLCBwcmVjaXNpb24sIHNjYWxlIH1cbiAgfSxcbiAgRGVjaW1hbCAocHJlY2lzaW9uLCBzY2FsZSkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkRlY2ltYWwsIHByZWNpc2lvbiwgc2NhbGUgfVxuICB9LFxuICBSZWFsICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5SZWFsIH1cbiAgfSxcbiAgRGF0ZSAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuRGF0ZSB9XG4gIH0sXG4gIERhdGVUaW1lICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5EYXRlVGltZSB9XG4gIH0sXG4gIERhdGVUaW1lMiAoc2NhbGUpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5EYXRlVGltZTIsIHNjYWxlIH1cbiAgfSxcbiAgRGF0ZVRpbWVPZmZzZXQgKHNjYWxlKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuRGF0ZVRpbWVPZmZzZXQsIHNjYWxlIH1cbiAgfSxcbiAgU21hbGxEYXRlVGltZSAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuU21hbGxEYXRlVGltZSB9XG4gIH0sXG4gIFRpbWUgKHNjYWxlKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuVGltZSwgc2NhbGUgfVxuICB9LFxuICBVbmlxdWVJZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5VbmlxdWVJZGVudGlmaWVyIH1cbiAgfSxcbiAgU21hbGxNb25leSAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuU21hbGxNb25leSB9XG4gIH0sXG4gIE1vbmV5ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5Nb25leSB9XG4gIH0sXG4gIEJpbmFyeSAobGVuZ3RoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuQmluYXJ5LCBsZW5ndGggfVxuICB9LFxuICBWYXJCaW5hcnkgKGxlbmd0aCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLlZhckJpbmFyeSwgbGVuZ3RoIH1cbiAgfSxcbiAgSW1hZ2UgKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLkltYWdlIH1cbiAgfSxcbiAgWG1sICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5YbWwgfVxuICB9LFxuICBDaGFyIChsZW5ndGgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5DaGFyLCBsZW5ndGggfVxuICB9LFxuICBOQ2hhciAobGVuZ3RoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuTkNoYXIsIGxlbmd0aCB9XG4gIH0sXG4gIE5UZXh0ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5OVGV4dCB9XG4gIH0sXG4gIFRWUCAodHZwVHlwZSkge1xuICAgIHJldHVybiB7IHR5cGU6IFRZUEVTLlRWUCwgdHZwVHlwZSB9XG4gIH0sXG4gIFVEVCAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuVURUIH1cbiAgfSxcbiAgR2VvZ3JhcGh5ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5HZW9ncmFwaHkgfVxuICB9LFxuICBHZW9tZXRyeSAoKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogVFlQRVMuR2VvbWV0cnkgfVxuICB9LFxuICBWYXJpYW50ICgpIHtcbiAgICByZXR1cm4geyB0eXBlOiBUWVBFUy5WYXJpYW50IH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cy5UWVBFUyA9IFRZUEVTXG5tb2R1bGUuZXhwb3J0cy5ERUNMQVJBVElPTlMgPSB7fVxuXG5jb25zdCB6ZXJvID0gZnVuY3Rpb24gKHZhbHVlLCBsZW5ndGgpIHtcbiAgaWYgKGxlbmd0aCA9PSBudWxsKSBsZW5ndGggPSAyXG5cbiAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gIGlmICh2YWx1ZS5sZW5ndGggPCBsZW5ndGgpIHtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBsZW5ndGggLSB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFsdWUgPSBgMCR7dmFsdWV9YFxuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsdWVcbn1cblxuZm9yIChjb25zdCBrZXkgaW4gVFlQRVMpIHtcbiAgaWYgKG9iamVjdEhhc1Byb3BlcnR5KFRZUEVTLCBrZXkpKSB7XG4gICAgY29uc3QgdmFsdWUgPSBUWVBFU1trZXldXG4gICAgdmFsdWUuZGVjbGFyYXRpb24gPSBrZXkudG9Mb3dlckNhc2UoKVxuICAgIG1vZHVsZS5leHBvcnRzLkRFQ0xBUkFUSU9OU1t2YWx1ZS5kZWNsYXJhdGlvbl0gPSB2YWx1ZTtcblxuICAgICgoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgdmFsdWVbaW5zcGVjdF0gPSAoKSA9PiBgW3NxbC4ke2tleX1dYFxuICAgIH0pKGtleSwgdmFsdWUpXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMuZGVjbGFyZSA9ICh0eXBlLCBvcHRpb25zKSA9PiB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgVFlQRVMuVmFyQ2hhcjogY2FzZSBUWVBFUy5WYXJCaW5hcnk6XG4gICAgICByZXR1cm4gYCR7dHlwZS5kZWNsYXJhdGlvbn0gKCR7b3B0aW9ucy5sZW5ndGggPiA4MDAwID8gJ01BWCcgOiAob3B0aW9ucy5sZW5ndGggPT0gbnVsbCA/ICdNQVgnIDogb3B0aW9ucy5sZW5ndGgpfSlgXG4gICAgY2FzZSBUWVBFUy5OVmFyQ2hhcjpcbiAgICAgIHJldHVybiBgJHt0eXBlLmRlY2xhcmF0aW9ufSAoJHtvcHRpb25zLmxlbmd0aCA+IDQwMDAgPyAnTUFYJyA6IChvcHRpb25zLmxlbmd0aCA9PSBudWxsID8gJ01BWCcgOiBvcHRpb25zLmxlbmd0aCl9KWBcbiAgICBjYXNlIFRZUEVTLkNoYXI6IGNhc2UgVFlQRVMuTkNoYXI6IGNhc2UgVFlQRVMuQmluYXJ5OlxuICAgICAgcmV0dXJuIGAke3R5cGUuZGVjbGFyYXRpb259ICgke29wdGlvbnMubGVuZ3RoID09IG51bGwgPyAxIDogb3B0aW9ucy5sZW5ndGh9KWBcbiAgICBjYXNlIFRZUEVTLkRlY2ltYWw6IGNhc2UgVFlQRVMuTnVtZXJpYzpcbiAgICAgIHJldHVybiBgJHt0eXBlLmRlY2xhcmF0aW9ufSAoJHtvcHRpb25zLnByZWNpc2lvbiA9PSBudWxsID8gMTggOiBvcHRpb25zLnByZWNpc2lvbn0sICR7b3B0aW9ucy5zY2FsZSA9PSBudWxsID8gMCA6IG9wdGlvbnMuc2NhbGV9KWBcbiAgICBjYXNlIFRZUEVTLlRpbWU6IGNhc2UgVFlQRVMuRGF0ZVRpbWUyOiBjYXNlIFRZUEVTLkRhdGVUaW1lT2Zmc2V0OlxuICAgICAgcmV0dXJuIGAke3R5cGUuZGVjbGFyYXRpb259ICgke29wdGlvbnMuc2NhbGUgPT0gbnVsbCA/IDcgOiBvcHRpb25zLnNjYWxlfSlgXG4gICAgY2FzZSBUWVBFUy5UVlA6XG4gICAgICByZXR1cm4gYCR7b3B0aW9ucy50dnBUeXBlfSByZWFkb25seWBcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHR5cGUuZGVjbGFyYXRpb25cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cy5jYXN0ID0gKHZhbHVlLCB0eXBlLCBvcHRpb25zKSA9PiB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIHJldHVybiBgTicke3ZhbHVlLnJlcGxhY2UoLycvZywgJ1xcJ1xcJycpfSdgXG5cbiAgICBjYXNlICdudW1iZXInOlxuICAgIGNhc2UgJ2JpZ2ludCc6XG4gICAgICByZXR1cm4gdmFsdWVcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIHZhbHVlID8gMSA6IDBcblxuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIGxldCBucyA9IHZhbHVlLmdldFVUQ01pbGxpc2Vjb25kcygpIC8gMTAwMFxuICAgICAgICBpZiAodmFsdWUubmFub3NlY29uZERlbHRhICE9IG51bGwpIHtcbiAgICAgICAgICBucyArPSB2YWx1ZS5uYW5vc2Vjb25kRGVsdGFcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY2FsZSA9IG9wdGlvbnMuc2NhbGUgPT0gbnVsbCA/IDcgOiBvcHRpb25zLnNjYWxlXG5cbiAgICAgICAgaWYgKHNjYWxlID4gMCkge1xuICAgICAgICAgIG5zID0gU3RyaW5nKG5zKS5zdWJzdHIoMSwgc2NhbGUgKyAxKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5zID0gJydcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBgTicke3ZhbHVlLmdldFVUQ0Z1bGxZZWFyKCl9LSR7emVybyh2YWx1ZS5nZXRVVENNb250aCgpICsgMSl9LSR7emVybyh2YWx1ZS5nZXRVVENEYXRlKCkpfSAke3plcm8odmFsdWUuZ2V0VVRDSG91cnMoKSl9OiR7emVybyh2YWx1ZS5nZXRVVENNaW51dGVzKCkpfToke3plcm8odmFsdWUuZ2V0VVRDU2Vjb25kcygpKX0ke25zfSdgXG4gICAgICB9IGVsc2UgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGAweCR7dmFsdWUudG9TdHJpbmcoJ2hleCcpfWBcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGxcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/datatypes.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/error/connection-error.js":
/*!**********************************************************!*\
  !*** ./node_modules/mssql/lib/error/connection-error.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/./node_modules/mssql/lib/error/mssql-error.js\")\n\n/**\n * Class ConnectionError.\n */\n\nclass ConnectionError extends MSSQLError {\n  /**\n   * Creates a new ConnectionError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    super(message, code)\n\n    this.name = 'ConnectionError'\n\n    let err = message?.details\n    if (err instanceof Array && (err = err.at(-1))) {\n      this.message = err.message\n      this.originalError = err\n    }\n  }\n}\n\nmodule.exports = ConnectionError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL2Nvbm5lY3Rpb24tZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosbUJBQW1CLG1CQUFPLENBQUMsMEVBQWU7O0FBRTFDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvZXJyb3IvY29ubmVjdGlvbi1lcnJvci5qcz85YTgxIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBNU1NRTEVycm9yID0gcmVxdWlyZSgnLi9tc3NxbC1lcnJvcicpXG5cbi8qKlxuICogQ2xhc3MgQ29ubmVjdGlvbkVycm9yLlxuICovXG5cbmNsYXNzIENvbm5lY3Rpb25FcnJvciBleHRlbmRzIE1TU1FMRXJyb3Ige1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBDb25uZWN0aW9uRXJyb3IuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIEVycm9yIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbY29kZV0gRXJyb3IgY29kZS5cbiAgICovXG5cbiAgY29uc3RydWN0b3IgKG1lc3NhZ2UsIGNvZGUpIHtcbiAgICBzdXBlcihtZXNzYWdlLCBjb2RlKVxuXG4gICAgdGhpcy5uYW1lID0gJ0Nvbm5lY3Rpb25FcnJvcidcblxuICAgIGxldCBlcnIgPSBtZXNzYWdlPy5kZXRhaWxzXG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIEFycmF5ICYmIChlcnIgPSBlcnIuYXQoLTEpKSkge1xuICAgICAgdGhpcy5tZXNzYWdlID0gZXJyLm1lc3NhZ2VcbiAgICAgIHRoaXMub3JpZ2luYWxFcnJvciA9IGVyclxuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbm5lY3Rpb25FcnJvclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/error/connection-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/error/index.js":
/*!***********************************************!*\
  !*** ./node_modules/mssql/lib/error/index.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst ConnectionError = __webpack_require__(/*! ./connection-error */ \"(rsc)/./node_modules/mssql/lib/error/connection-error.js\")\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/./node_modules/mssql/lib/error/mssql-error.js\")\nconst PreparedStatementError = __webpack_require__(/*! ./prepared-statement-error */ \"(rsc)/./node_modules/mssql/lib/error/prepared-statement-error.js\")\nconst RequestError = __webpack_require__(/*! ./request-error */ \"(rsc)/./node_modules/mssql/lib/error/request-error.js\")\nconst TransactionError = __webpack_require__(/*! ./transaction-error */ \"(rsc)/./node_modules/mssql/lib/error/transaction-error.js\")\n\nmodule.exports = {\n  ConnectionError,\n  MSSQLError,\n  PreparedStatementError,\n  RequestError,\n  TransactionError\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLHdCQUF3QixtQkFBTyxDQUFDLG9GQUFvQjtBQUNwRCxtQkFBbUIsbUJBQU8sQ0FBQywwRUFBZTtBQUMxQywrQkFBK0IsbUJBQU8sQ0FBQyxvR0FBNEI7QUFDbkUscUJBQXFCLG1CQUFPLENBQUMsOEVBQWlCO0FBQzlDLHlCQUF5QixtQkFBTyxDQUFDLHNGQUFxQjs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL2luZGV4LmpzP2QxOWMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IENvbm5lY3Rpb25FcnJvciA9IHJlcXVpcmUoJy4vY29ubmVjdGlvbi1lcnJvcicpXG5jb25zdCBNU1NRTEVycm9yID0gcmVxdWlyZSgnLi9tc3NxbC1lcnJvcicpXG5jb25zdCBQcmVwYXJlZFN0YXRlbWVudEVycm9yID0gcmVxdWlyZSgnLi9wcmVwYXJlZC1zdGF0ZW1lbnQtZXJyb3InKVxuY29uc3QgUmVxdWVzdEVycm9yID0gcmVxdWlyZSgnLi9yZXF1ZXN0LWVycm9yJylcbmNvbnN0IFRyYW5zYWN0aW9uRXJyb3IgPSByZXF1aXJlKCcuL3RyYW5zYWN0aW9uLWVycm9yJylcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIENvbm5lY3Rpb25FcnJvcixcbiAgTVNTUUxFcnJvcixcbiAgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcixcbiAgUmVxdWVzdEVycm9yLFxuICBUcmFuc2FjdGlvbkVycm9yXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/error/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/error/mssql-error.js":
/*!*****************************************************!*\
  !*** ./node_modules/mssql/lib/error/mssql-error.js ***!
  \*****************************************************/
/***/ ((module) => {

eval("\n\nclass MSSQLError extends Error {\n  /**\n   * Creates a new ConnectionError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    if (message instanceof Error) {\n      super(message.message)\n      this.code = message.code || code\n\n      Error.captureStackTrace(this, this.constructor)\n      Object.defineProperty(this, 'originalError', { enumerable: true, value: message })\n    } else {\n      super(message)\n      this.code = code\n    }\n\n    this.name = 'MSSQLError'\n  }\n}\n\nmodule.exports = MSSQLError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL21zc3FsLWVycm9yLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFEQUFxRCxrQ0FBa0M7QUFDdkYsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL21zc3FsLWVycm9yLmpzPzc1OWQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNsYXNzIE1TU1FMRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IENvbm5lY3Rpb25FcnJvci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgRXJyb3IgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IFtjb2RlXSBFcnJvciBjb2RlLlxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAobWVzc2FnZSwgY29kZSkge1xuICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHN1cGVyKG1lc3NhZ2UubWVzc2FnZSlcbiAgICAgIHRoaXMuY29kZSA9IG1lc3NhZ2UuY29kZSB8fCBjb2RlXG5cbiAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ29yaWdpbmFsRXJyb3InLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiBtZXNzYWdlIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHN1cGVyKG1lc3NhZ2UpXG4gICAgICB0aGlzLmNvZGUgPSBjb2RlXG4gICAgfVxuXG4gICAgdGhpcy5uYW1lID0gJ01TU1FMRXJyb3InXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNU1NRTEVycm9yXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/error/mssql-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/error/prepared-statement-error.js":
/*!******************************************************************!*\
  !*** ./node_modules/mssql/lib/error/prepared-statement-error.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/./node_modules/mssql/lib/error/mssql-error.js\")\n\n/**\n * Class PreparedStatementError.\n */\n\nclass PreparedStatementError extends MSSQLError {\n  /**\n   * Creates a new PreparedStatementError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    super(message, code)\n\n    this.name = 'PreparedStatementError'\n  }\n}\n\nmodule.exports = PreparedStatementError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL3ByZXBhcmVkLXN0YXRlbWVudC1lcnJvci5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixtQkFBbUIsbUJBQU8sQ0FBQywwRUFBZTs7QUFFMUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvZXJyb3IvcHJlcGFyZWQtc3RhdGVtZW50LWVycm9yLmpzPzRjM2EiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IE1TU1FMRXJyb3IgPSByZXF1aXJlKCcuL21zc3FsLWVycm9yJylcblxuLyoqXG4gKiBDbGFzcyBQcmVwYXJlZFN0YXRlbWVudEVycm9yLlxuICovXG5cbmNsYXNzIFByZXBhcmVkU3RhdGVtZW50RXJyb3IgZXh0ZW5kcyBNU1NRTEVycm9yIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgUHJlcGFyZWRTdGF0ZW1lbnRFcnJvci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgRXJyb3IgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IFtjb2RlXSBFcnJvciBjb2RlLlxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAobWVzc2FnZSwgY29kZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGUpXG5cbiAgICB0aGlzLm5hbWUgPSAnUHJlcGFyZWRTdGF0ZW1lbnRFcnJvcidcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFByZXBhcmVkU3RhdGVtZW50RXJyb3JcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/error/prepared-statement-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/error/request-error.js":
/*!*******************************************************!*\
  !*** ./node_modules/mssql/lib/error/request-error.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/./node_modules/mssql/lib/error/mssql-error.js\")\n\n/**\n * Class RequestError.\n *\n * @property {String} number Error number.\n * @property {Number} lineNumber Line number.\n * @property {String} state Error state.\n * @property {String} class Error class.\n * @property {String} serverName Server name.\n * @property {String} procName Procedure name.\n */\n\nclass RequestError extends MSSQLError {\n  /**\n   * Creates a new RequestError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    super(message, code)\n    if (message instanceof Error) {\n      if (message.info) {\n        this.number = message.info.number || message.code // err.code is returned by msnodesql driver\n        this.lineNumber = message.info.lineNumber\n        this.state = message.info.state || message.sqlstate // err.sqlstate is returned by msnodesql driver\n        this.class = message.info.class\n        this.serverName = message.info.serverName\n        this.procName = message.info.procName\n      } else {\n        // Use err attributes returned by msnodesql driver\n        this.number = message.code\n        this.lineNumber = message.lineNumber\n        this.state = message.sqlstate\n        this.class = message.severity\n        this.serverName = message.serverName\n        this.procName = message.procName\n      }\n    }\n\n    this.name = 'RequestError'\n    const parsedMessage = (/^\\[Microsoft\\]\\[SQL Server Native Client 11\\.0\\](?:\\[SQL Server\\])?([\\s\\S]*)$/).exec(this.message)\n    if (parsedMessage) {\n      this.message = parsedMessage[1]\n    }\n  }\n}\n\nmodule.exports = RequestError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL3JlcXVlc3QtZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosbUJBQW1CLG1CQUFPLENBQUMsMEVBQWU7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0QixjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsUUFBUTtBQUN0QixjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL3JlcXVlc3QtZXJyb3IuanM/OTgzZiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgTVNTUUxFcnJvciA9IHJlcXVpcmUoJy4vbXNzcWwtZXJyb3InKVxuXG4vKipcbiAqIENsYXNzIFJlcXVlc3RFcnJvci5cbiAqXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbnVtYmVyIEVycm9yIG51bWJlci5cbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBsaW5lTnVtYmVyIExpbmUgbnVtYmVyLlxuICogQHByb3BlcnR5IHtTdHJpbmd9IHN0YXRlIEVycm9yIHN0YXRlLlxuICogQHByb3BlcnR5IHtTdHJpbmd9IGNsYXNzIEVycm9yIGNsYXNzLlxuICogQHByb3BlcnR5IHtTdHJpbmd9IHNlcnZlck5hbWUgU2VydmVyIG5hbWUuXG4gKiBAcHJvcGVydHkge1N0cmluZ30gcHJvY05hbWUgUHJvY2VkdXJlIG5hbWUuXG4gKi9cblxuY2xhc3MgUmVxdWVzdEVycm9yIGV4dGVuZHMgTVNTUUxFcnJvciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFJlcXVlc3RFcnJvci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgRXJyb3IgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IFtjb2RlXSBFcnJvciBjb2RlLlxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAobWVzc2FnZSwgY29kZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGUpXG4gICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgaWYgKG1lc3NhZ2UuaW5mbykge1xuICAgICAgICB0aGlzLm51bWJlciA9IG1lc3NhZ2UuaW5mby5udW1iZXIgfHwgbWVzc2FnZS5jb2RlIC8vIGVyci5jb2RlIGlzIHJldHVybmVkIGJ5IG1zbm9kZXNxbCBkcml2ZXJcbiAgICAgICAgdGhpcy5saW5lTnVtYmVyID0gbWVzc2FnZS5pbmZvLmxpbmVOdW1iZXJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IG1lc3NhZ2UuaW5mby5zdGF0ZSB8fCBtZXNzYWdlLnNxbHN0YXRlIC8vIGVyci5zcWxzdGF0ZSBpcyByZXR1cm5lZCBieSBtc25vZGVzcWwgZHJpdmVyXG4gICAgICAgIHRoaXMuY2xhc3MgPSBtZXNzYWdlLmluZm8uY2xhc3NcbiAgICAgICAgdGhpcy5zZXJ2ZXJOYW1lID0gbWVzc2FnZS5pbmZvLnNlcnZlck5hbWVcbiAgICAgICAgdGhpcy5wcm9jTmFtZSA9IG1lc3NhZ2UuaW5mby5wcm9jTmFtZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXNlIGVyciBhdHRyaWJ1dGVzIHJldHVybmVkIGJ5IG1zbm9kZXNxbCBkcml2ZXJcbiAgICAgICAgdGhpcy5udW1iZXIgPSBtZXNzYWdlLmNvZGVcbiAgICAgICAgdGhpcy5saW5lTnVtYmVyID0gbWVzc2FnZS5saW5lTnVtYmVyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBtZXNzYWdlLnNxbHN0YXRlXG4gICAgICAgIHRoaXMuY2xhc3MgPSBtZXNzYWdlLnNldmVyaXR5XG4gICAgICAgIHRoaXMuc2VydmVyTmFtZSA9IG1lc3NhZ2Uuc2VydmVyTmFtZVxuICAgICAgICB0aGlzLnByb2NOYW1lID0gbWVzc2FnZS5wcm9jTmFtZVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubmFtZSA9ICdSZXF1ZXN0RXJyb3InXG4gICAgY29uc3QgcGFyc2VkTWVzc2FnZSA9ICgvXlxcW01pY3Jvc29mdFxcXVxcW1NRTCBTZXJ2ZXIgTmF0aXZlIENsaWVudCAxMVxcLjBcXF0oPzpcXFtTUUwgU2VydmVyXFxdKT8oW1xcc1xcU10qKSQvKS5leGVjKHRoaXMubWVzc2FnZSlcbiAgICBpZiAocGFyc2VkTWVzc2FnZSkge1xuICAgICAgdGhpcy5tZXNzYWdlID0gcGFyc2VkTWVzc2FnZVsxXVxuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlcXVlc3RFcnJvclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/error/request-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/error/transaction-error.js":
/*!***********************************************************!*\
  !*** ./node_modules/mssql/lib/error/transaction-error.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst MSSQLError = __webpack_require__(/*! ./mssql-error */ \"(rsc)/./node_modules/mssql/lib/error/mssql-error.js\")\n\n/**\n * Class TransactionError.\n */\n\nclass TransactionError extends MSSQLError {\n  /**\n   * Creates a new TransactionError.\n   *\n   * @param {String} message Error message.\n   * @param {String} [code] Error code.\n   */\n\n  constructor (message, code) {\n    super(message, code)\n\n    this.name = 'TransactionError'\n  }\n}\n\nmodule.exports = TransactionError\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2Vycm9yL3RyYW5zYWN0aW9uLWVycm9yLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLG1CQUFtQixtQkFBTyxDQUFDLDBFQUFlOztBQUUxQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9lcnJvci90cmFuc2FjdGlvbi1lcnJvci5qcz9jZDNkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBNU1NRTEVycm9yID0gcmVxdWlyZSgnLi9tc3NxbC1lcnJvcicpXG5cbi8qKlxuICogQ2xhc3MgVHJhbnNhY3Rpb25FcnJvci5cbiAqL1xuXG5jbGFzcyBUcmFuc2FjdGlvbkVycm9yIGV4dGVuZHMgTVNTUUxFcnJvciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFRyYW5zYWN0aW9uRXJyb3IuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIEVycm9yIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbY29kZV0gRXJyb3IgY29kZS5cbiAgICovXG5cbiAgY29uc3RydWN0b3IgKG1lc3NhZ2UsIGNvZGUpIHtcbiAgICBzdXBlcihtZXNzYWdlLCBjb2RlKVxuXG4gICAgdGhpcy5uYW1lID0gJ1RyYW5zYWN0aW9uRXJyb3InXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2FjdGlvbkVycm9yXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/error/transaction-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/global-connection.js":
/*!*****************************************************!*\
  !*** ./node_modules/mssql/lib/global-connection.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst shared = __webpack_require__(/*! ./shared */ \"(rsc)/./node_modules/mssql/lib/shared.js\")\n\nlet globalConnection = null\nconst globalConnectionHandlers = {}\n\n/**\n * Open global connection pool.\n *\n * @param {Object|String} config Connection configuration object or connection string.\n * @param {basicCallback} [callback] A callback which is called after connection has established, or an error has occurred. If omited, method returns Promise.\n * @return {Promise.<ConnectionPool>}\n */\n\nfunction connect (config, callback) {\n  if (!globalConnection) {\n    globalConnection = new shared.driver.ConnectionPool(config)\n\n    for (const event in globalConnectionHandlers) {\n      for (let i = 0, l = globalConnectionHandlers[event].length; i < l; i++) {\n        globalConnection.on(event, globalConnectionHandlers[event][i])\n      }\n    }\n\n    const ogClose = globalConnection.close\n\n    const globalClose = function (callback) {\n      // remove event handlers from the global connection\n      for (const event in globalConnectionHandlers) {\n        for (let i = 0, l = globalConnectionHandlers[event].length; i < l; i++) {\n          this.removeListener(event, globalConnectionHandlers[event][i])\n        }\n      }\n\n      // attach error handler to prevent process crash in case of error\n      this.on('error', err => {\n        if (globalConnectionHandlers.error) {\n          for (let i = 0, l = globalConnectionHandlers.error.length; i < l; i++) {\n            globalConnectionHandlers.error[i].call(this, err)\n          }\n        }\n      })\n\n      globalConnection = null\n      return ogClose.call(this, callback)\n    }\n\n    globalConnection.close = globalClose.bind(globalConnection)\n  }\n  if (typeof callback === 'function') {\n    return globalConnection.connect((err, connection) => {\n      if (err) {\n        globalConnection = null\n      }\n      callback(err, connection)\n    })\n  }\n  return globalConnection.connect().catch((err) => {\n    globalConnection = null\n    return shared.Promise.reject(err)\n  })\n}\n\n/**\n * Close all active connections in the global pool.\n *\n * @param {basicCallback} [callback] A callback which is called after connection has closed, or an error has occurred. If omited, method returns Promise.\n * @return {ConnectionPool|Promise}\n */\n\nfunction close (callback) {\n  if (globalConnection) {\n    const gc = globalConnection\n    globalConnection = null\n    return gc.close(callback)\n  }\n\n  if (typeof callback === 'function') {\n    setImmediate(callback)\n    return null\n  }\n\n  return new shared.Promise((resolve) => {\n    resolve(globalConnection)\n  })\n}\n\n/**\n * Attach event handler to global connection pool.\n *\n * @param {String} event Event name.\n * @param {Function} handler Event handler.\n * @return {ConnectionPool}\n */\n\nfunction on (event, handler) {\n  if (!globalConnectionHandlers[event]) globalConnectionHandlers[event] = []\n  globalConnectionHandlers[event].push(handler)\n\n  if (globalConnection) globalConnection.on(event, handler)\n  return globalConnection\n}\n\n/**\n * Detach event handler from global connection.\n *\n * @param {String} event Event name.\n * @param {Function} handler Event handler.\n * @return {ConnectionPool}\n */\n\nfunction removeListener (event, handler) {\n  if (!globalConnectionHandlers[event]) return globalConnection\n  const index = globalConnectionHandlers[event].indexOf(handler)\n  if (index === -1) return globalConnection\n  globalConnectionHandlers[event].splice(index, 1)\n  if (globalConnectionHandlers[event].length === 0) globalConnectionHandlers[event] = undefined\n\n  if (globalConnection) globalConnection.removeListener(event, handler)\n  return globalConnection\n}\n\n/**\n * Creates a new query using global connection from a tagged template string.\n *\n * @variation 1\n * @param {Array|String} strings Array of string literals or sql command.\n * @param {...*} keys Values.\n * @return {Request}\n */\n\n/**\n * Execute the SQL command.\n *\n * @variation 2\n * @param {String} command T-SQL command to be executed.\n * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n * @return {Request|Promise}\n */\n\nfunction query () {\n  if (typeof arguments[0] === 'string') { return new shared.driver.Request().query(arguments[0], arguments[1]) }\n\n  const values = Array.prototype.slice.call(arguments)\n  const strings = values.shift()\n\n  return new shared.driver.Request()._template(strings, values, 'query')\n}\n\n/**\n * Creates a new batch using global connection from a tagged template string.\n *\n * @variation 1\n * @param {Array} strings Array of string literals.\n * @param {...*} keys Values.\n * @return {Request}\n */\n\n/**\n * Execute the SQL command.\n *\n * @variation 2\n * @param {String} command T-SQL command to be executed.\n * @param {Request~requestCallback} [callback] A callback which is called after execution has completed, or an error has occurred. If omited, method returns Promise.\n * @return {Request|Promise}\n */\n\nfunction batch () {\n  if (typeof arguments[0] === 'string') { return new shared.driver.Request().batch(arguments[0], arguments[1]) }\n\n  const values = Array.prototype.slice.call(arguments)\n  const strings = values.shift()\n\n  return new shared.driver.Request()._template(strings, values, 'batch')\n}\n\nmodule.exports = {\n  batch,\n  close,\n  connect,\n  off: removeListener,\n  on,\n  query,\n  removeListener\n}\n\nObject.defineProperty(module.exports, \"pool\", ({\n  get: () => {\n    return globalConnection\n  },\n  set: () => {}\n}))\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2dsb2JhbC1jb25uZWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLGVBQWUsbUJBQU8sQ0FBQywwREFBVTs7QUFFakM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUIsV0FBVyxlQUFlO0FBQzFCLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrRUFBa0UsT0FBTztBQUN6RTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLE9BQU87QUFDM0U7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxPQUFPO0FBQzVFO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxlQUFlO0FBQzFCLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFVBQVU7QUFDckIsWUFBWTtBQUNaOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekIsV0FBVyxNQUFNO0FBQ2pCLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLHlCQUF5QjtBQUNwQyxZQUFZO0FBQ1o7O0FBRUE7QUFDQSwwQ0FBMEM7O0FBRTFDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE1BQU07QUFDakIsWUFBWTtBQUNaOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcseUJBQXlCO0FBQ3BDLFlBQVk7QUFDWjs7QUFFQTtBQUNBLDBDQUEwQzs7QUFFMUM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwrQ0FBOEM7QUFDOUM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvZ2xvYmFsLWNvbm5lY3Rpb24uanM/NDMzNiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3Qgc2hhcmVkID0gcmVxdWlyZSgnLi9zaGFyZWQnKVxuXG5sZXQgZ2xvYmFsQ29ubmVjdGlvbiA9IG51bGxcbmNvbnN0IGdsb2JhbENvbm5lY3Rpb25IYW5kbGVycyA9IHt9XG5cbi8qKlxuICogT3BlbiBnbG9iYWwgY29ubmVjdGlvbiBwb29sLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gY29uZmlnIENvbm5lY3Rpb24gY29uZmlndXJhdGlvbiBvYmplY3Qgb3IgY29ubmVjdGlvbiBzdHJpbmcuXG4gKiBAcGFyYW0ge2Jhc2ljQ2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgY29ubmVjdGlvbiBoYXMgZXN0YWJsaXNoZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICogQHJldHVybiB7UHJvbWlzZS48Q29ubmVjdGlvblBvb2w+fVxuICovXG5cbmZ1bmN0aW9uIGNvbm5lY3QgKGNvbmZpZywgY2FsbGJhY2spIHtcbiAgaWYgKCFnbG9iYWxDb25uZWN0aW9uKSB7XG4gICAgZ2xvYmFsQ29ubmVjdGlvbiA9IG5ldyBzaGFyZWQuZHJpdmVyLkNvbm5lY3Rpb25Qb29sKGNvbmZpZylcblxuICAgIGZvciAoY29uc3QgZXZlbnQgaW4gZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGdsb2JhbENvbm5lY3Rpb25IYW5kbGVyc1tldmVudF0ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGdsb2JhbENvbm5lY3Rpb24ub24oZXZlbnQsIGdsb2JhbENvbm5lY3Rpb25IYW5kbGVyc1tldmVudF1baV0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb2dDbG9zZSA9IGdsb2JhbENvbm5lY3Rpb24uY2xvc2VcblxuICAgIGNvbnN0IGdsb2JhbENsb3NlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAvLyByZW1vdmUgZXZlbnQgaGFuZGxlcnMgZnJvbSB0aGUgZ2xvYmFsIGNvbm5lY3Rpb25cbiAgICAgIGZvciAoY29uc3QgZXZlbnQgaW4gZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzW2V2ZW50XS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnNbZXZlbnRdW2ldKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGF0dGFjaCBlcnJvciBoYW5kbGVyIHRvIHByZXZlbnQgcHJvY2VzcyBjcmFzaCBpbiBjYXNlIG9mIGVycm9yXG4gICAgICB0aGlzLm9uKCdlcnJvcicsIGVyciA9PiB7XG4gICAgICAgIGlmIChnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnMuZXJyb3IpIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGdsb2JhbENvbm5lY3Rpb25IYW5kbGVycy5lcnJvci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGdsb2JhbENvbm5lY3Rpb25IYW5kbGVycy5lcnJvcltpXS5jYWxsKHRoaXMsIGVycilcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGdsb2JhbENvbm5lY3Rpb24gPSBudWxsXG4gICAgICByZXR1cm4gb2dDbG9zZS5jYWxsKHRoaXMsIGNhbGxiYWNrKVxuICAgIH1cblxuICAgIGdsb2JhbENvbm5lY3Rpb24uY2xvc2UgPSBnbG9iYWxDbG9zZS5iaW5kKGdsb2JhbENvbm5lY3Rpb24pXG4gIH1cbiAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBnbG9iYWxDb25uZWN0aW9uLmNvbm5lY3QoKGVyciwgY29ubmVjdGlvbikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBnbG9iYWxDb25uZWN0aW9uID0gbnVsbFxuICAgICAgfVxuICAgICAgY2FsbGJhY2soZXJyLCBjb25uZWN0aW9uKVxuICAgIH0pXG4gIH1cbiAgcmV0dXJuIGdsb2JhbENvbm5lY3Rpb24uY29ubmVjdCgpLmNhdGNoKChlcnIpID0+IHtcbiAgICBnbG9iYWxDb25uZWN0aW9uID0gbnVsbFxuICAgIHJldHVybiBzaGFyZWQuUHJvbWlzZS5yZWplY3QoZXJyKVxuICB9KVxufVxuXG4vKipcbiAqIENsb3NlIGFsbCBhY3RpdmUgY29ubmVjdGlvbnMgaW4gdGhlIGdsb2JhbCBwb29sLlxuICpcbiAqIEBwYXJhbSB7YmFzaWNDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBjb25uZWN0aW9uIGhhcyBjbG9zZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICogQHJldHVybiB7Q29ubmVjdGlvblBvb2x8UHJvbWlzZX1cbiAqL1xuXG5mdW5jdGlvbiBjbG9zZSAoY2FsbGJhY2spIHtcbiAgaWYgKGdsb2JhbENvbm5lY3Rpb24pIHtcbiAgICBjb25zdCBnYyA9IGdsb2JhbENvbm5lY3Rpb25cbiAgICBnbG9iYWxDb25uZWN0aW9uID0gbnVsbFxuICAgIHJldHVybiBnYy5jbG9zZShjYWxsYmFjaylcbiAgfVxuXG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICBzZXRJbW1lZGlhdGUoY2FsbGJhY2spXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiBuZXcgc2hhcmVkLlByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICByZXNvbHZlKGdsb2JhbENvbm5lY3Rpb24pXG4gIH0pXG59XG5cbi8qKlxuICogQXR0YWNoIGV2ZW50IGhhbmRsZXIgdG8gZ2xvYmFsIGNvbm5lY3Rpb24gcG9vbC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgRXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgRXZlbnQgaGFuZGxlci5cbiAqIEByZXR1cm4ge0Nvbm5lY3Rpb25Qb29sfVxuICovXG5cbmZ1bmN0aW9uIG9uIChldmVudCwgaGFuZGxlcikge1xuICBpZiAoIWdsb2JhbENvbm5lY3Rpb25IYW5kbGVyc1tldmVudF0pIGdsb2JhbENvbm5lY3Rpb25IYW5kbGVyc1tldmVudF0gPSBbXVxuICBnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnNbZXZlbnRdLnB1c2goaGFuZGxlcilcblxuICBpZiAoZ2xvYmFsQ29ubmVjdGlvbikgZ2xvYmFsQ29ubmVjdGlvbi5vbihldmVudCwgaGFuZGxlcilcbiAgcmV0dXJuIGdsb2JhbENvbm5lY3Rpb25cbn1cblxuLyoqXG4gKiBEZXRhY2ggZXZlbnQgaGFuZGxlciBmcm9tIGdsb2JhbCBjb25uZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBFdmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBFdmVudCBoYW5kbGVyLlxuICogQHJldHVybiB7Q29ubmVjdGlvblBvb2x9XG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIgKGV2ZW50LCBoYW5kbGVyKSB7XG4gIGlmICghZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzW2V2ZW50XSkgcmV0dXJuIGdsb2JhbENvbm5lY3Rpb25cbiAgY29uc3QgaW5kZXggPSBnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnNbZXZlbnRdLmluZGV4T2YoaGFuZGxlcilcbiAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGdsb2JhbENvbm5lY3Rpb25cbiAgZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzW2V2ZW50XS5zcGxpY2UoaW5kZXgsIDEpXG4gIGlmIChnbG9iYWxDb25uZWN0aW9uSGFuZGxlcnNbZXZlbnRdLmxlbmd0aCA9PT0gMCkgZ2xvYmFsQ29ubmVjdGlvbkhhbmRsZXJzW2V2ZW50XSA9IHVuZGVmaW5lZFxuXG4gIGlmIChnbG9iYWxDb25uZWN0aW9uKSBnbG9iYWxDb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBoYW5kbGVyKVxuICByZXR1cm4gZ2xvYmFsQ29ubmVjdGlvblxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcXVlcnkgdXNpbmcgZ2xvYmFsIGNvbm5lY3Rpb24gZnJvbSBhIHRhZ2dlZCB0ZW1wbGF0ZSBzdHJpbmcuXG4gKlxuICogQHZhcmlhdGlvbiAxXG4gKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gc3RyaW5ncyBBcnJheSBvZiBzdHJpbmcgbGl0ZXJhbHMgb3Igc3FsIGNvbW1hbmQuXG4gKiBAcGFyYW0gey4uLip9IGtleXMgVmFsdWVzLlxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqL1xuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIFNRTCBjb21tYW5kLlxuICpcbiAqIEB2YXJpYXRpb24gMlxuICogQHBhcmFtIHtTdHJpbmd9IGNvbW1hbmQgVC1TUUwgY29tbWFuZCB0byBiZSBleGVjdXRlZC5cbiAqIEBwYXJhbSB7UmVxdWVzdH5yZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgZXhlY3V0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICogQHJldHVybiB7UmVxdWVzdHxQcm9taXNlfVxuICovXG5cbmZ1bmN0aW9uIHF1ZXJ5ICgpIHtcbiAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7IHJldHVybiBuZXcgc2hhcmVkLmRyaXZlci5SZXF1ZXN0KCkucXVlcnkoYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pIH1cblxuICBjb25zdCB2YWx1ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXG4gIGNvbnN0IHN0cmluZ3MgPSB2YWx1ZXMuc2hpZnQoKVxuXG4gIHJldHVybiBuZXcgc2hhcmVkLmRyaXZlci5SZXF1ZXN0KCkuX3RlbXBsYXRlKHN0cmluZ3MsIHZhbHVlcywgJ3F1ZXJ5Jylcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGJhdGNoIHVzaW5nIGdsb2JhbCBjb25uZWN0aW9uIGZyb20gYSB0YWdnZWQgdGVtcGxhdGUgc3RyaW5nLlxuICpcbiAqIEB2YXJpYXRpb24gMVxuICogQHBhcmFtIHtBcnJheX0gc3RyaW5ncyBBcnJheSBvZiBzdHJpbmcgbGl0ZXJhbHMuXG4gKiBAcGFyYW0gey4uLip9IGtleXMgVmFsdWVzLlxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqL1xuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIFNRTCBjb21tYW5kLlxuICpcbiAqIEB2YXJpYXRpb24gMlxuICogQHBhcmFtIHtTdHJpbmd9IGNvbW1hbmQgVC1TUUwgY29tbWFuZCB0byBiZSBleGVjdXRlZC5cbiAqIEBwYXJhbSB7UmVxdWVzdH5yZXF1ZXN0Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgZXhlY3V0aW9uIGhhcyBjb21wbGV0ZWQsIG9yIGFuIGVycm9yIGhhcyBvY2N1cnJlZC4gSWYgb21pdGVkLCBtZXRob2QgcmV0dXJucyBQcm9taXNlLlxuICogQHJldHVybiB7UmVxdWVzdHxQcm9taXNlfVxuICovXG5cbmZ1bmN0aW9uIGJhdGNoICgpIHtcbiAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7IHJldHVybiBuZXcgc2hhcmVkLmRyaXZlci5SZXF1ZXN0KCkuYmF0Y2goYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pIH1cblxuICBjb25zdCB2YWx1ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXG4gIGNvbnN0IHN0cmluZ3MgPSB2YWx1ZXMuc2hpZnQoKVxuXG4gIHJldHVybiBuZXcgc2hhcmVkLmRyaXZlci5SZXF1ZXN0KCkuX3RlbXBsYXRlKHN0cmluZ3MsIHZhbHVlcywgJ2JhdGNoJylcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGJhdGNoLFxuICBjbG9zZSxcbiAgY29ubmVjdCxcbiAgb2ZmOiByZW1vdmVMaXN0ZW5lcixcbiAgb24sXG4gIHF1ZXJ5LFxuICByZW1vdmVMaXN0ZW5lclxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsICdwb29sJywge1xuICBnZXQ6ICgpID0+IHtcbiAgICByZXR1cm4gZ2xvYmFsQ29ubmVjdGlvblxuICB9LFxuICBzZXQ6ICgpID0+IHt9XG59KVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/global-connection.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/isolationlevel.js":
/*!**************************************************!*\
  !*** ./node_modules/mssql/lib/isolationlevel.js ***!
  \**************************************************/
/***/ ((module) => {

eval("\n\nmodule.exports = {\n  READ_UNCOMMITTED: 0x01,\n  READ_COMMITTED: 0x02,\n  REPEATABLE_READ: 0x03,\n  SERIALIZABLE: 0x04,\n  SNAPSHOT: 0x05\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL2lzb2xhdGlvbmxldmVsLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9pc29sYXRpb25sZXZlbC5qcz9lMWY3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgUkVBRF9VTkNPTU1JVFRFRDogMHgwMSxcbiAgUkVBRF9DT01NSVRURUQ6IDB4MDIsXG4gIFJFUEVBVEFCTEVfUkVBRDogMHgwMyxcbiAgU0VSSUFMSVpBQkxFOiAweDA0LFxuICBTTkFQU0hPVDogMHgwNVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/isolationlevel.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/shared.js":
/*!******************************************!*\
  !*** ./node_modules/mssql/lib/shared.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst { TYPES } = __webpack_require__(/*! ./datatypes */ \"(rsc)/./node_modules/mssql/lib/datatypes.js\")\nconst Table = __webpack_require__(/*! ./table */ \"(rsc)/./node_modules/mssql/lib/table.js\")\n\nlet PromiseLibrary = Promise\nconst driver = {}\nconst map = []\n\n/**\n * Register you own type map.\n *\n * @path module.exports.map\n * @param {*} jstype JS data type.\n * @param {*} sqltype SQL data type.\n */\n\nmap.register = function (jstype, sqltype) {\n  for (let index = 0; index < this.length; index++) {\n    const item = this[index]\n    if (item.js === jstype) {\n      this.splice(index, 1)\n      break\n    }\n  }\n\n  this.push({\n    js: jstype,\n    sql: sqltype\n  })\n\n  return null\n}\n\nmap.register(String, TYPES.NVarChar)\nmap.register(Number, TYPES.Int)\nmap.register(Boolean, TYPES.Bit)\nmap.register(Date, TYPES.DateTime)\nmap.register(Buffer, TYPES.VarBinary)\nmap.register(Table, TYPES.TVP)\n\n/**\n * @ignore\n */\n\nconst getTypeByValue = function (value) {\n  if ((value === null) || (value === undefined)) { return TYPES.NVarChar }\n\n  switch (typeof value) {\n    case 'string':\n      for (const item of Array.from(map)) {\n        if (item.js === String) {\n          return item.sql\n        }\n      }\n\n      return TYPES.NVarChar\n\n    case 'number':\n      if (value % 1 === 0) {\n        if (value < -2147483648 || value > 2147483647) {\n          return TYPES.BigInt\n        } else {\n          return TYPES.Int\n        }\n      } else {\n        return TYPES.Float\n      }\n\n    case 'bigint':\n      if (value < -2147483648n || value > 2147483647n) {\n        return TYPES.BigInt\n      } else {\n        return TYPES.Int\n      }\n\n    case 'boolean':\n      for (const item of Array.from(map)) {\n        if (item.js === Boolean) {\n          return item.sql\n        }\n      }\n\n      return TYPES.Bit\n\n    case 'object':\n      for (const item of Array.from(map)) {\n        if (value instanceof item.js) {\n          return item.sql\n        }\n      }\n\n      return TYPES.NVarChar\n\n    default:\n      return TYPES.NVarChar\n  }\n}\n\nmodule.exports = {\n  driver,\n  getTypeByValue,\n  map\n}\n\nObject.defineProperty(module.exports, \"Promise\", ({\n  get: () => {\n    return PromiseLibrary\n  },\n  set: (value) => {\n    PromiseLibrary = value\n  }\n}))\n\nObject.defineProperty(module.exports, \"valueHandler\", ({\n  enumerable: true,\n  value: new Map(),\n  writable: false,\n  configurable: false\n}))\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3NoYXJlZC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixRQUFRLFFBQVEsRUFBRSxtQkFBTyxDQUFDLGdFQUFhO0FBQ3ZDLGNBQWMsbUJBQU8sQ0FBQyx3REFBUzs7QUFFL0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2QsV0FBVyxHQUFHO0FBQ2Q7O0FBRUE7QUFDQSxzQkFBc0IscUJBQXFCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1EQUFtRDs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrREFBaUQ7QUFDakQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7O0FBRUYsdURBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi9zaGFyZWQuanM/NDJmNCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgeyBUWVBFUyB9ID0gcmVxdWlyZSgnLi9kYXRhdHlwZXMnKVxuY29uc3QgVGFibGUgPSByZXF1aXJlKCcuL3RhYmxlJylcblxubGV0IFByb21pc2VMaWJyYXJ5ID0gUHJvbWlzZVxuY29uc3QgZHJpdmVyID0ge31cbmNvbnN0IG1hcCA9IFtdXG5cbi8qKlxuICogUmVnaXN0ZXIgeW91IG93biB0eXBlIG1hcC5cbiAqXG4gKiBAcGF0aCBtb2R1bGUuZXhwb3J0cy5tYXBcbiAqIEBwYXJhbSB7Kn0ganN0eXBlIEpTIGRhdGEgdHlwZS5cbiAqIEBwYXJhbSB7Kn0gc3FsdHlwZSBTUUwgZGF0YSB0eXBlLlxuICovXG5cbm1hcC5yZWdpc3RlciA9IGZ1bmN0aW9uIChqc3R5cGUsIHNxbHR5cGUpIHtcbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY29uc3QgaXRlbSA9IHRoaXNbaW5kZXhdXG4gICAgaWYgKGl0ZW0uanMgPT09IGpzdHlwZSkge1xuICAgICAgdGhpcy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHRoaXMucHVzaCh7XG4gICAganM6IGpzdHlwZSxcbiAgICBzcWw6IHNxbHR5cGVcbiAgfSlcblxuICByZXR1cm4gbnVsbFxufVxuXG5tYXAucmVnaXN0ZXIoU3RyaW5nLCBUWVBFUy5OVmFyQ2hhcilcbm1hcC5yZWdpc3RlcihOdW1iZXIsIFRZUEVTLkludClcbm1hcC5yZWdpc3RlcihCb29sZWFuLCBUWVBFUy5CaXQpXG5tYXAucmVnaXN0ZXIoRGF0ZSwgVFlQRVMuRGF0ZVRpbWUpXG5tYXAucmVnaXN0ZXIoQnVmZmVyLCBUWVBFUy5WYXJCaW5hcnkpXG5tYXAucmVnaXN0ZXIoVGFibGUsIFRZUEVTLlRWUClcblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cblxuY29uc3QgZ2V0VHlwZUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaWYgKCh2YWx1ZSA9PT0gbnVsbCkgfHwgKHZhbHVlID09PSB1bmRlZmluZWQpKSB7IHJldHVybiBUWVBFUy5OVmFyQ2hhciB9XG5cbiAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIEFycmF5LmZyb20obWFwKSkge1xuICAgICAgICBpZiAoaXRlbS5qcyA9PT0gU3RyaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW0uc3FsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFRZUEVTLk5WYXJDaGFyXG5cbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgaWYgKHZhbHVlICUgMSA9PT0gMCkge1xuICAgICAgICBpZiAodmFsdWUgPCAtMjE0NzQ4MzY0OCB8fCB2YWx1ZSA+IDIxNDc0ODM2NDcpIHtcbiAgICAgICAgICByZXR1cm4gVFlQRVMuQmlnSW50XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFRZUEVTLkludFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVFlQRVMuRmxvYXRcbiAgICAgIH1cblxuICAgIGNhc2UgJ2JpZ2ludCc6XG4gICAgICBpZiAodmFsdWUgPCAtMjE0NzQ4MzY0OG4gfHwgdmFsdWUgPiAyMTQ3NDgzNjQ3bikge1xuICAgICAgICByZXR1cm4gVFlQRVMuQmlnSW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVFlQRVMuSW50XG4gICAgICB9XG5cbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBBcnJheS5mcm9tKG1hcCkpIHtcbiAgICAgICAgaWYgKGl0ZW0uanMgPT09IEJvb2xlYW4pIHtcbiAgICAgICAgICByZXR1cm4gaXRlbS5zcWxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gVFlQRVMuQml0XG5cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIEFycmF5LmZyb20obWFwKSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBpdGVtLmpzKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW0uc3FsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFRZUEVTLk5WYXJDaGFyXG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFRZUEVTLk5WYXJDaGFyXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRyaXZlcixcbiAgZ2V0VHlwZUJ5VmFsdWUsXG4gIG1hcFxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsICdQcm9taXNlJywge1xuICBnZXQ6ICgpID0+IHtcbiAgICByZXR1cm4gUHJvbWlzZUxpYnJhcnlcbiAgfSxcbiAgc2V0OiAodmFsdWUpID0+IHtcbiAgICBQcm9taXNlTGlicmFyeSA9IHZhbHVlXG4gIH1cbn0pXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ3ZhbHVlSGFuZGxlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IG5ldyBNYXAoKSxcbiAgd3JpdGFibGU6IGZhbHNlLFxuICBjb25maWd1cmFibGU6IGZhbHNlXG59KVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/shared.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/table.js":
/*!*****************************************!*\
  !*** ./node_modules/mssql/lib/table.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst TYPES = (__webpack_require__(/*! ./datatypes */ \"(rsc)/./node_modules/mssql/lib/datatypes.js\").TYPES)\nconst declareType = (__webpack_require__(/*! ./datatypes */ \"(rsc)/./node_modules/mssql/lib/datatypes.js\").declare)\nconst objectHasProperty = (__webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/mssql/lib/utils.js\").objectHasProperty)\n\nconst MAX = 65535 // (1 << 16) - 1\nconst JSON_COLUMN_ID = 'JSON_F52E2B61-18A1-11d1-B105-00805F49916B'\n\nfunction Table (name) {\n  if (name) {\n    const parsed = Table.parseName(name)\n    this.name = parsed.name\n    this.schema = parsed.schema\n    this.database = parsed.database\n    this.path = (this.database ? `[${this.database}].` : '') + (this.schema ? `[${this.schema}].` : '') + `[${this.name}]`\n    this.temporary = this.name.charAt(0) === '#'\n  }\n\n  this.columns = []\n  this.rows = []\n\n  Object.defineProperty(this.columns, 'add', {\n    value (name, column, options) {\n      if (column == null) {\n        throw new Error('Column data type is not defined.')\n      }\n      if (column instanceof Function) {\n        column = column()\n      }\n\n      options = options || {}\n      column.name = name;\n\n      ['nullable', 'primary', 'identity', 'readOnly', 'length'].forEach(prop => {\n        if (objectHasProperty(options, prop)) {\n          column[prop] = options[prop]\n        }\n      })\n\n      return this.push(column)\n    }\n  })\n\n  Object.defineProperty(this.rows, 'add', {\n    value () {\n      return this.push(Array.prototype.slice.call(arguments))\n    }\n  }\n  )\n\n  Object.defineProperty(this.rows, 'clear', {\n    value () {\n      return this.splice(0, this.length)\n    }\n  }\n  )\n}\n\n/*\n@private\n*/\n\nTable.prototype._makeBulk = function _makeBulk () {\n  for (let i = 0; i < this.columns.length; i++) {\n    const col = this.columns[i]\n    switch (col.type) {\n      case TYPES.Date:\n      case TYPES.DateTime:\n      case TYPES.DateTime2:\n        for (let j = 0; j < this.rows.length; j++) {\n          const dateValue = this.rows[j][i]\n          if (typeof dateValue === 'string' || typeof dateValue === 'number') {\n            const date = new Date(dateValue)\n            if (isNaN(date.getDate())) {\n              throw new TypeError('Invalid date value passed to bulk rows')\n            }\n            this.rows[j][i] = date\n          }\n        }\n        break\n\n      case TYPES.Xml:\n        col.type = TYPES.NVarChar(MAX).type\n        break\n\n      case TYPES.UDT:\n      case TYPES.Geography:\n      case TYPES.Geometry:\n        col.type = TYPES.VarBinary(MAX).type\n        break\n\n      default:\n        break\n    }\n  }\n\n  return this\n}\n\nTable.prototype.declare = function declare () {\n  const pkey = this.columns.filter(col => col.primary === true).map(col => `[${col.name}]`)\n  const cols = this.columns.map(col => {\n    const def = [`[${col.name}] ${declareType(col.type, col)}`]\n\n    if (col.nullable === true) {\n      def.push('null')\n    } else if (col.nullable === false) {\n      def.push('not null')\n    }\n\n    if (col.primary === true && pkey.length === 1) {\n      def.push('primary key')\n    }\n\n    return def.join(' ')\n  })\n\n  const constraint = pkey.length > 1 ? `, constraint [PK_${this.temporary ? this.name.substr(1) : this.name}] primary key (${pkey.join(', ')})` : ''\n  return `create table ${this.path} (${cols.join(', ')}${constraint})`\n}\n\nTable.fromRecordset = function fromRecordset (recordset, name) {\n  const t = new this(name)\n\n  for (const colName in recordset.columns) {\n    if (objectHasProperty(recordset.columns, colName)) {\n      const col = recordset.columns[colName]\n\n      t.columns.add(colName, {\n        type: col.type,\n        length: col.length,\n        scale: col.scale,\n        precision: col.precision\n      }, {\n        nullable: col.nullable,\n        identity: col.identity,\n        readOnly: col.readOnly\n      })\n    }\n  }\n\n  if (t.columns.length === 1 && t.columns[0].name === JSON_COLUMN_ID) {\n    for (let i = 0; i < recordset.length; i++) {\n      t.rows.add(JSON.stringify(recordset[i]))\n    }\n  } else {\n    for (let i = 0; i < recordset.length; i++) {\n      t.rows.add.apply(t.rows, t.columns.map(col => recordset[i][col.name]))\n    }\n  }\n\n  return t\n}\n\nTable.parseName = function parseName (name) {\n  const length = name.length\n  let cursor = -1\n  let buffer = ''\n  let escaped = false\n  const path = []\n\n  while (++cursor < length) {\n    const char = name.charAt(cursor)\n    if (char === '[') {\n      if (escaped) {\n        buffer += char\n      } else {\n        escaped = true\n      }\n    } else if (char === ']') {\n      if (escaped) {\n        escaped = false\n      } else {\n        throw new Error('Invalid table name.')\n      }\n    } else if (char === '.') {\n      if (escaped) {\n        buffer += char\n      } else {\n        path.push(buffer)\n        buffer = ''\n      }\n    } else {\n      buffer += char\n    }\n  }\n\n  if (buffer) {\n    path.push(buffer)\n  }\n\n  switch (path.length) {\n    case 1:\n      return {\n        name: path[0],\n        schema: null,\n        database: null\n      }\n\n    case 2:\n      return {\n        name: path[1],\n        schema: path[0],\n        database: null\n      }\n\n    case 3:\n      return {\n        name: path[2],\n        schema: path[1],\n        database: path[0]\n      }\n\n    default:\n      throw new Error('Invalid table name.')\n  }\n}\n\nmodule.exports = Table\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3RhYmxlLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLGNBQWMsNkZBQTRCO0FBQzFDLG9CQUFvQiwrRkFBOEI7QUFDbEQsMEJBQTBCLGlHQUFvQzs7QUFFOUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsY0FBYywrQkFBK0IsWUFBWSxnQkFBZ0IsVUFBVTtBQUN4SDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsK0VBQStFLFNBQVM7QUFDeEY7QUFDQSxxQkFBcUIsU0FBUyxJQUFJLDJCQUEyQjs7QUFFN0Q7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUgsMkRBQTJELGlEQUFpRCxpQkFBaUIsZ0JBQWdCO0FBQzdJLHlCQUF5QixXQUFXLEdBQUcsZ0JBQWdCLEVBQUUsV0FBVztBQUNwRTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQztBQUNBO0FBQ0EsSUFBSTtBQUNKLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi90YWJsZS5qcz9mNzdhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBUWVBFUyA9IHJlcXVpcmUoJy4vZGF0YXR5cGVzJykuVFlQRVNcbmNvbnN0IGRlY2xhcmVUeXBlID0gcmVxdWlyZSgnLi9kYXRhdHlwZXMnKS5kZWNsYXJlXG5jb25zdCBvYmplY3RIYXNQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vdXRpbHMnKS5vYmplY3RIYXNQcm9wZXJ0eVxuXG5jb25zdCBNQVggPSA2NTUzNSAvLyAoMSA8PCAxNikgLSAxXG5jb25zdCBKU09OX0NPTFVNTl9JRCA9ICdKU09OX0Y1MkUyQjYxLTE4QTEtMTFkMS1CMTA1LTAwODA1RjQ5OTE2QidcblxuZnVuY3Rpb24gVGFibGUgKG5hbWUpIHtcbiAgaWYgKG5hbWUpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBUYWJsZS5wYXJzZU5hbWUobmFtZSlcbiAgICB0aGlzLm5hbWUgPSBwYXJzZWQubmFtZVxuICAgIHRoaXMuc2NoZW1hID0gcGFyc2VkLnNjaGVtYVxuICAgIHRoaXMuZGF0YWJhc2UgPSBwYXJzZWQuZGF0YWJhc2VcbiAgICB0aGlzLnBhdGggPSAodGhpcy5kYXRhYmFzZSA/IGBbJHt0aGlzLmRhdGFiYXNlfV0uYCA6ICcnKSArICh0aGlzLnNjaGVtYSA/IGBbJHt0aGlzLnNjaGVtYX1dLmAgOiAnJykgKyBgWyR7dGhpcy5uYW1lfV1gXG4gICAgdGhpcy50ZW1wb3JhcnkgPSB0aGlzLm5hbWUuY2hhckF0KDApID09PSAnIydcbiAgfVxuXG4gIHRoaXMuY29sdW1ucyA9IFtdXG4gIHRoaXMucm93cyA9IFtdXG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuY29sdW1ucywgJ2FkZCcsIHtcbiAgICB2YWx1ZSAobmFtZSwgY29sdW1uLCBvcHRpb25zKSB7XG4gICAgICBpZiAoY29sdW1uID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb2x1bW4gZGF0YSB0eXBlIGlzIG5vdCBkZWZpbmVkLicpXG4gICAgICB9XG4gICAgICBpZiAoY29sdW1uIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgY29sdW1uID0gY29sdW1uKClcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICAgIGNvbHVtbi5uYW1lID0gbmFtZTtcblxuICAgICAgWydudWxsYWJsZScsICdwcmltYXJ5JywgJ2lkZW50aXR5JywgJ3JlYWRPbmx5JywgJ2xlbmd0aCddLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgIGlmIChvYmplY3RIYXNQcm9wZXJ0eShvcHRpb25zLCBwcm9wKSkge1xuICAgICAgICAgIGNvbHVtbltwcm9wXSA9IG9wdGlvbnNbcHJvcF1cbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHRoaXMucHVzaChjb2x1bW4pXG4gICAgfVxuICB9KVxuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLnJvd3MsICdhZGQnLCB7XG4gICAgdmFsdWUgKCkge1xuICAgICAgcmV0dXJuIHRoaXMucHVzaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKVxuICAgIH1cbiAgfVxuICApXG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMucm93cywgJ2NsZWFyJywge1xuICAgIHZhbHVlICgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNwbGljZSgwLCB0aGlzLmxlbmd0aClcbiAgICB9XG4gIH1cbiAgKVxufVxuXG4vKlxuQHByaXZhdGVcbiovXG5cblRhYmxlLnByb3RvdHlwZS5fbWFrZUJ1bGsgPSBmdW5jdGlvbiBfbWFrZUJ1bGsgKCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNvbCA9IHRoaXMuY29sdW1uc1tpXVxuICAgIHN3aXRjaCAoY29sLnR5cGUpIHtcbiAgICAgIGNhc2UgVFlQRVMuRGF0ZTpcbiAgICAgIGNhc2UgVFlQRVMuRGF0ZVRpbWU6XG4gICAgICBjYXNlIFRZUEVTLkRhdGVUaW1lMjpcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd3MubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSB0aGlzLnJvd3Nbal1baV1cbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGVWYWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGRhdGVWYWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpXG4gICAgICAgICAgICBpZiAoaXNOYU4oZGF0ZS5nZXREYXRlKCkpKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgZGF0ZSB2YWx1ZSBwYXNzZWQgdG8gYnVsayByb3dzJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93c1tqXVtpXSA9IGRhdGVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBUWVBFUy5YbWw6XG4gICAgICAgIGNvbC50eXBlID0gVFlQRVMuTlZhckNoYXIoTUFYKS50eXBlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgVFlQRVMuVURUOlxuICAgICAgY2FzZSBUWVBFUy5HZW9ncmFwaHk6XG4gICAgICBjYXNlIFRZUEVTLkdlb21ldHJ5OlxuICAgICAgICBjb2wudHlwZSA9IFRZUEVTLlZhckJpbmFyeShNQVgpLnR5cGVcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG5UYWJsZS5wcm90b3R5cGUuZGVjbGFyZSA9IGZ1bmN0aW9uIGRlY2xhcmUgKCkge1xuICBjb25zdCBwa2V5ID0gdGhpcy5jb2x1bW5zLmZpbHRlcihjb2wgPT4gY29sLnByaW1hcnkgPT09IHRydWUpLm1hcChjb2wgPT4gYFske2NvbC5uYW1lfV1gKVxuICBjb25zdCBjb2xzID0gdGhpcy5jb2x1bW5zLm1hcChjb2wgPT4ge1xuICAgIGNvbnN0IGRlZiA9IFtgWyR7Y29sLm5hbWV9XSAke2RlY2xhcmVUeXBlKGNvbC50eXBlLCBjb2wpfWBdXG5cbiAgICBpZiAoY29sLm51bGxhYmxlID09PSB0cnVlKSB7XG4gICAgICBkZWYucHVzaCgnbnVsbCcpXG4gICAgfSBlbHNlIGlmIChjb2wubnVsbGFibGUgPT09IGZhbHNlKSB7XG4gICAgICBkZWYucHVzaCgnbm90IG51bGwnKVxuICAgIH1cblxuICAgIGlmIChjb2wucHJpbWFyeSA9PT0gdHJ1ZSAmJiBwa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgZGVmLnB1c2goJ3ByaW1hcnkga2V5JylcbiAgICB9XG5cbiAgICByZXR1cm4gZGVmLmpvaW4oJyAnKVxuICB9KVxuXG4gIGNvbnN0IGNvbnN0cmFpbnQgPSBwa2V5Lmxlbmd0aCA+IDEgPyBgLCBjb25zdHJhaW50IFtQS18ke3RoaXMudGVtcG9yYXJ5ID8gdGhpcy5uYW1lLnN1YnN0cigxKSA6IHRoaXMubmFtZX1dIHByaW1hcnkga2V5ICgke3BrZXkuam9pbignLCAnKX0pYCA6ICcnXG4gIHJldHVybiBgY3JlYXRlIHRhYmxlICR7dGhpcy5wYXRofSAoJHtjb2xzLmpvaW4oJywgJyl9JHtjb25zdHJhaW50fSlgXG59XG5cblRhYmxlLmZyb21SZWNvcmRzZXQgPSBmdW5jdGlvbiBmcm9tUmVjb3Jkc2V0IChyZWNvcmRzZXQsIG5hbWUpIHtcbiAgY29uc3QgdCA9IG5ldyB0aGlzKG5hbWUpXG5cbiAgZm9yIChjb25zdCBjb2xOYW1lIGluIHJlY29yZHNldC5jb2x1bW5zKSB7XG4gICAgaWYgKG9iamVjdEhhc1Byb3BlcnR5KHJlY29yZHNldC5jb2x1bW5zLCBjb2xOYW1lKSkge1xuICAgICAgY29uc3QgY29sID0gcmVjb3Jkc2V0LmNvbHVtbnNbY29sTmFtZV1cblxuICAgICAgdC5jb2x1bW5zLmFkZChjb2xOYW1lLCB7XG4gICAgICAgIHR5cGU6IGNvbC50eXBlLFxuICAgICAgICBsZW5ndGg6IGNvbC5sZW5ndGgsXG4gICAgICAgIHNjYWxlOiBjb2wuc2NhbGUsXG4gICAgICAgIHByZWNpc2lvbjogY29sLnByZWNpc2lvblxuICAgICAgfSwge1xuICAgICAgICBudWxsYWJsZTogY29sLm51bGxhYmxlLFxuICAgICAgICBpZGVudGl0eTogY29sLmlkZW50aXR5LFxuICAgICAgICByZWFkT25seTogY29sLnJlYWRPbmx5XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGlmICh0LmNvbHVtbnMubGVuZ3RoID09PSAxICYmIHQuY29sdW1uc1swXS5uYW1lID09PSBKU09OX0NPTFVNTl9JRCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjb3Jkc2V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0LnJvd3MuYWRkKEpTT04uc3RyaW5naWZ5KHJlY29yZHNldFtpXSkpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjb3Jkc2V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0LnJvd3MuYWRkLmFwcGx5KHQucm93cywgdC5jb2x1bW5zLm1hcChjb2wgPT4gcmVjb3Jkc2V0W2ldW2NvbC5uYW1lXSkpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRcbn1cblxuVGFibGUucGFyc2VOYW1lID0gZnVuY3Rpb24gcGFyc2VOYW1lIChuYW1lKSB7XG4gIGNvbnN0IGxlbmd0aCA9IG5hbWUubGVuZ3RoXG4gIGxldCBjdXJzb3IgPSAtMVxuICBsZXQgYnVmZmVyID0gJydcbiAgbGV0IGVzY2FwZWQgPSBmYWxzZVxuICBjb25zdCBwYXRoID0gW11cblxuICB3aGlsZSAoKytjdXJzb3IgPCBsZW5ndGgpIHtcbiAgICBjb25zdCBjaGFyID0gbmFtZS5jaGFyQXQoY3Vyc29yKVxuICAgIGlmIChjaGFyID09PSAnWycpIHtcbiAgICAgIGlmIChlc2NhcGVkKSB7XG4gICAgICAgIGJ1ZmZlciArPSBjaGFyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlc2NhcGVkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gJ10nKSB7XG4gICAgICBpZiAoZXNjYXBlZCkge1xuICAgICAgICBlc2NhcGVkID0gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0YWJsZSBuYW1lLicpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGFyID09PSAnLicpIHtcbiAgICAgIGlmIChlc2NhcGVkKSB7XG4gICAgICAgIGJ1ZmZlciArPSBjaGFyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXRoLnB1c2goYnVmZmVyKVxuICAgICAgICBidWZmZXIgPSAnJ1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBidWZmZXIgKz0gY2hhclxuICAgIH1cbiAgfVxuXG4gIGlmIChidWZmZXIpIHtcbiAgICBwYXRoLnB1c2goYnVmZmVyKVxuICB9XG5cbiAgc3dpdGNoIChwYXRoLmxlbmd0aCkge1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHBhdGhbMF0sXG4gICAgICAgIHNjaGVtYTogbnVsbCxcbiAgICAgICAgZGF0YWJhc2U6IG51bGxcbiAgICAgIH1cblxuICAgIGNhc2UgMjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHBhdGhbMV0sXG4gICAgICAgIHNjaGVtYTogcGF0aFswXSxcbiAgICAgICAgZGF0YWJhc2U6IG51bGxcbiAgICAgIH1cblxuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHBhdGhbMl0sXG4gICAgICAgIHNjaGVtYTogcGF0aFsxXSxcbiAgICAgICAgZGF0YWJhc2U6IHBhdGhbMF1cbiAgICAgIH1cblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFibGUgbmFtZS4nKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGFibGVcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/table.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/tedious/connection-pool.js":
/*!***********************************************************!*\
  !*** ./node_modules/mssql/lib/tedious/connection-pool.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst tds = __webpack_require__(/*! tedious */ \"(rsc)/./node_modules/tedious/lib/tedious.js\")\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\")('mssql:tedi')\nconst BaseConnectionPool = __webpack_require__(/*! ../base/connection-pool */ \"(rsc)/./node_modules/mssql/lib/base/connection-pool.js\")\nconst { IDS } = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/mssql/lib/utils.js\")\nconst shared = __webpack_require__(/*! ../shared */ \"(rsc)/./node_modules/mssql/lib/shared.js\")\nconst ConnectionError = __webpack_require__(/*! ../error/connection-error */ \"(rsc)/./node_modules/mssql/lib/error/connection-error.js\")\n\nclass ConnectionPool extends BaseConnectionPool {\n  _config () {\n    const cfg = {\n      server: this.config.server,\n      options: Object.assign({\n        encrypt: typeof this.config.encrypt === 'boolean' ? this.config.encrypt : true,\n        trustServerCertificate: typeof this.config.trustServerCertificate === 'boolean' ? this.config.trustServerCertificate : false\n      }, this.config.options),\n      authentication: Object.assign({\n        type: this.config.domain !== undefined ? 'ntlm' : this.config.authentication_type !== undefined ? this.config.authentication_type : 'default',\n        options: Object.entries({\n          userName: this.config.user,\n          password: this.config.password,\n          domain: this.config.domain,\n          clientId: this.config.clientId,\n          clientSecret: this.config.clientSecret,\n          tenantId: this.config.tenantId,\n          token: this.config.token,\n          msiEndpoint: this.config.msiEndpoint,\n          msiSecret: this.config.msiSecret\n        }).reduce((acc, [key, val]) => {\n          if (typeof val !== 'undefined') {\n            return { ...acc, [key]: val }\n          }\n          return acc\n        }, {})\n      }, this.config.authentication)\n    }\n\n    cfg.options.database = cfg.options.database || this.config.database\n    cfg.options.port = cfg.options.port || this.config.port\n    cfg.options.connectTimeout = cfg.options.connectTimeout ?? this.config.connectionTimeout ?? this.config.timeout ?? 15000\n    cfg.options.requestTimeout = cfg.options.requestTimeout ?? this.config.requestTimeout ?? this.config.timeout ?? 15000\n    cfg.options.tdsVersion = cfg.options.tdsVersion || '7_4'\n    cfg.options.rowCollectionOnDone = cfg.options.rowCollectionOnDone || false\n    cfg.options.rowCollectionOnRequestCompletion = cfg.options.rowCollectionOnRequestCompletion || false\n    cfg.options.useColumnNames = cfg.options.useColumnNames || false\n    cfg.options.appName = cfg.options.appName || 'node-mssql'\n\n    // tedious always connect via tcp when port is specified\n    if (cfg.options.instanceName) delete cfg.options.port\n\n    if (isNaN(cfg.options.requestTimeout)) cfg.options.requestTimeout = 15000\n    if (cfg.options.requestTimeout === Infinity || cfg.options.requestTimeout < 0) cfg.options.requestTimeout = 0\n\n    if (!cfg.options.debug && this.config.debug) {\n      cfg.options.debug = {\n        packet: true,\n        token: true,\n        data: true,\n        payload: true\n      }\n    }\n    return cfg\n  }\n\n  _poolCreate () {\n    return new shared.Promise((resolve, reject) => {\n      const resolveOnce = (v) => {\n        resolve(v)\n        resolve = reject = () => {}\n      }\n      const rejectOnce = (e) => {\n        reject(e)\n        resolve = reject = () => {}\n      }\n      let tedious\n      try {\n        tedious = new tds.Connection(this._config())\n      } catch (err) {\n        rejectOnce(err)\n        return\n      }\n      tedious.connect(err => {\n        if (err) {\n          err = new ConnectionError(err)\n          return rejectOnce(err)\n        }\n\n        debug('connection(%d): established', IDS.get(tedious))\n        this.collation = tedious.databaseCollation\n        resolveOnce(tedious)\n      })\n      IDS.add(tedious, 'Connection')\n      debug('pool(%d): connection #%d created', IDS.get(this), IDS.get(tedious))\n      debug('connection(%d): establishing', IDS.get(tedious))\n\n      tedious.on('end', () => {\n        const err = new ConnectionError('The connection ended without ever completing the connection')\n        rejectOnce(err)\n      })\n      tedious.on('error', err => {\n        if (err.code === 'ESOCKET') {\n          tedious.hasError = true\n        } else {\n          this.emit('error', err)\n        }\n        rejectOnce(err)\n      })\n\n      if (this.config.debug) {\n        tedious.on('debug', this.emit.bind(this, 'debug', tedious))\n      }\n      if (typeof this.config.beforeConnect === 'function') {\n        this.config.beforeConnect(tedious)\n      }\n    })\n  }\n\n  _poolValidate (tedious) {\n    if (tedious && !tedious.closed && !tedious.hasError) {\n      return !this.config.validateConnection || new shared.Promise((resolve) => {\n        const req = new tds.Request('SELECT 1;', (err) => {\n          resolve(!err)\n        })\n        tedious.execSql(req)\n      })\n    }\n    return false\n  }\n\n  _poolDestroy (tedious) {\n    return new shared.Promise((resolve, reject) => {\n      if (!tedious) {\n        resolve()\n        return\n      }\n      debug('connection(%d): destroying', IDS.get(tedious))\n\n      if (tedious.closed) {\n        debug('connection(%d): already closed', IDS.get(tedious))\n        resolve()\n      } else {\n        tedious.once('end', () => {\n          debug('connection(%d): destroyed', IDS.get(tedious))\n          resolve()\n        })\n\n        tedious.close()\n      }\n    })\n  }\n}\n\nmodule.exports = ConnectionPool\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3RlZGlvdXMvY29ubmVjdGlvbi1wb29sLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLFlBQVksbUJBQU8sQ0FBQyw0REFBUztBQUM3QixjQUFjLG1CQUFPLENBQUMsc0RBQU87QUFDN0IsMkJBQTJCLG1CQUFPLENBQUMsdUZBQXlCO0FBQzVELFFBQVEsTUFBTSxFQUFFLG1CQUFPLENBQUMseURBQVU7QUFDbEMsZUFBZSxtQkFBTyxDQUFDLDJEQUFXO0FBQ2xDLHdCQUF3QixtQkFBTyxDQUFDLDJGQUEyQjs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxTQUFTLElBQUk7QUFDYixPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvdGVkaW91cy9jb25uZWN0aW9uLXBvb2wuanM/ZjkxMSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgdGRzID0gcmVxdWlyZSgndGVkaW91cycpXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ21zc3FsOnRlZGknKVxuY29uc3QgQmFzZUNvbm5lY3Rpb25Qb29sID0gcmVxdWlyZSgnLi4vYmFzZS9jb25uZWN0aW9uLXBvb2wnKVxuY29uc3QgeyBJRFMgfSA9IHJlcXVpcmUoJy4uL3V0aWxzJylcbmNvbnN0IHNoYXJlZCA9IHJlcXVpcmUoJy4uL3NoYXJlZCcpXG5jb25zdCBDb25uZWN0aW9uRXJyb3IgPSByZXF1aXJlKCcuLi9lcnJvci9jb25uZWN0aW9uLWVycm9yJylcblxuY2xhc3MgQ29ubmVjdGlvblBvb2wgZXh0ZW5kcyBCYXNlQ29ubmVjdGlvblBvb2wge1xuICBfY29uZmlnICgpIHtcbiAgICBjb25zdCBjZmcgPSB7XG4gICAgICBzZXJ2ZXI6IHRoaXMuY29uZmlnLnNlcnZlcixcbiAgICAgIG9wdGlvbnM6IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICBlbmNyeXB0OiB0eXBlb2YgdGhpcy5jb25maWcuZW5jcnlwdCA9PT0gJ2Jvb2xlYW4nID8gdGhpcy5jb25maWcuZW5jcnlwdCA6IHRydWUsXG4gICAgICAgIHRydXN0U2VydmVyQ2VydGlmaWNhdGU6IHR5cGVvZiB0aGlzLmNvbmZpZy50cnVzdFNlcnZlckNlcnRpZmljYXRlID09PSAnYm9vbGVhbicgPyB0aGlzLmNvbmZpZy50cnVzdFNlcnZlckNlcnRpZmljYXRlIDogZmFsc2VcbiAgICAgIH0sIHRoaXMuY29uZmlnLm9wdGlvbnMpLFxuICAgICAgYXV0aGVudGljYXRpb246IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICB0eXBlOiB0aGlzLmNvbmZpZy5kb21haW4gIT09IHVuZGVmaW5lZCA/ICdudGxtJyA6IHRoaXMuY29uZmlnLmF1dGhlbnRpY2F0aW9uX3R5cGUgIT09IHVuZGVmaW5lZCA/IHRoaXMuY29uZmlnLmF1dGhlbnRpY2F0aW9uX3R5cGUgOiAnZGVmYXVsdCcsXG4gICAgICAgIG9wdGlvbnM6IE9iamVjdC5lbnRyaWVzKHtcbiAgICAgICAgICB1c2VyTmFtZTogdGhpcy5jb25maWcudXNlcixcbiAgICAgICAgICBwYXNzd29yZDogdGhpcy5jb25maWcucGFzc3dvcmQsXG4gICAgICAgICAgZG9tYWluOiB0aGlzLmNvbmZpZy5kb21haW4sXG4gICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY29uZmlnLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudFNlY3JldDogdGhpcy5jb25maWcuY2xpZW50U2VjcmV0LFxuICAgICAgICAgIHRlbmFudElkOiB0aGlzLmNvbmZpZy50ZW5hbnRJZCxcbiAgICAgICAgICB0b2tlbjogdGhpcy5jb25maWcudG9rZW4sXG4gICAgICAgICAgbXNpRW5kcG9pbnQ6IHRoaXMuY29uZmlnLm1zaUVuZHBvaW50LFxuICAgICAgICAgIG1zaVNlY3JldDogdGhpcy5jb25maWcubXNpU2VjcmV0XG4gICAgICAgIH0pLnJlZHVjZSgoYWNjLCBba2V5LCB2YWxdKSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5hY2MsIFtrZXldOiB2YWwgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sIHt9KVxuICAgICAgfSwgdGhpcy5jb25maWcuYXV0aGVudGljYXRpb24pXG4gICAgfVxuXG4gICAgY2ZnLm9wdGlvbnMuZGF0YWJhc2UgPSBjZmcub3B0aW9ucy5kYXRhYmFzZSB8fCB0aGlzLmNvbmZpZy5kYXRhYmFzZVxuICAgIGNmZy5vcHRpb25zLnBvcnQgPSBjZmcub3B0aW9ucy5wb3J0IHx8IHRoaXMuY29uZmlnLnBvcnRcbiAgICBjZmcub3B0aW9ucy5jb25uZWN0VGltZW91dCA9IGNmZy5vcHRpb25zLmNvbm5lY3RUaW1lb3V0ID8/IHRoaXMuY29uZmlnLmNvbm5lY3Rpb25UaW1lb3V0ID8/IHRoaXMuY29uZmlnLnRpbWVvdXQgPz8gMTUwMDBcbiAgICBjZmcub3B0aW9ucy5yZXF1ZXN0VGltZW91dCA9IGNmZy5vcHRpb25zLnJlcXVlc3RUaW1lb3V0ID8/IHRoaXMuY29uZmlnLnJlcXVlc3RUaW1lb3V0ID8/IHRoaXMuY29uZmlnLnRpbWVvdXQgPz8gMTUwMDBcbiAgICBjZmcub3B0aW9ucy50ZHNWZXJzaW9uID0gY2ZnLm9wdGlvbnMudGRzVmVyc2lvbiB8fCAnN180J1xuICAgIGNmZy5vcHRpb25zLnJvd0NvbGxlY3Rpb25PbkRvbmUgPSBjZmcub3B0aW9ucy5yb3dDb2xsZWN0aW9uT25Eb25lIHx8IGZhbHNlXG4gICAgY2ZnLm9wdGlvbnMucm93Q29sbGVjdGlvbk9uUmVxdWVzdENvbXBsZXRpb24gPSBjZmcub3B0aW9ucy5yb3dDb2xsZWN0aW9uT25SZXF1ZXN0Q29tcGxldGlvbiB8fCBmYWxzZVxuICAgIGNmZy5vcHRpb25zLnVzZUNvbHVtbk5hbWVzID0gY2ZnLm9wdGlvbnMudXNlQ29sdW1uTmFtZXMgfHwgZmFsc2VcbiAgICBjZmcub3B0aW9ucy5hcHBOYW1lID0gY2ZnLm9wdGlvbnMuYXBwTmFtZSB8fCAnbm9kZS1tc3NxbCdcblxuICAgIC8vIHRlZGlvdXMgYWx3YXlzIGNvbm5lY3QgdmlhIHRjcCB3aGVuIHBvcnQgaXMgc3BlY2lmaWVkXG4gICAgaWYgKGNmZy5vcHRpb25zLmluc3RhbmNlTmFtZSkgZGVsZXRlIGNmZy5vcHRpb25zLnBvcnRcblxuICAgIGlmIChpc05hTihjZmcub3B0aW9ucy5yZXF1ZXN0VGltZW91dCkpIGNmZy5vcHRpb25zLnJlcXVlc3RUaW1lb3V0ID0gMTUwMDBcbiAgICBpZiAoY2ZnLm9wdGlvbnMucmVxdWVzdFRpbWVvdXQgPT09IEluZmluaXR5IHx8IGNmZy5vcHRpb25zLnJlcXVlc3RUaW1lb3V0IDwgMCkgY2ZnLm9wdGlvbnMucmVxdWVzdFRpbWVvdXQgPSAwXG5cbiAgICBpZiAoIWNmZy5vcHRpb25zLmRlYnVnICYmIHRoaXMuY29uZmlnLmRlYnVnKSB7XG4gICAgICBjZmcub3B0aW9ucy5kZWJ1ZyA9IHtcbiAgICAgICAgcGFja2V0OiB0cnVlLFxuICAgICAgICB0b2tlbjogdHJ1ZSxcbiAgICAgICAgZGF0YTogdHJ1ZSxcbiAgICAgICAgcGF5bG9hZDogdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2ZnXG4gIH1cblxuICBfcG9vbENyZWF0ZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXNvbHZlT25jZSA9ICh2KSA9PiB7XG4gICAgICAgIHJlc29sdmUodilcbiAgICAgICAgcmVzb2x2ZSA9IHJlamVjdCA9ICgpID0+IHt9XG4gICAgICB9XG4gICAgICBjb25zdCByZWplY3RPbmNlID0gKGUpID0+IHtcbiAgICAgICAgcmVqZWN0KGUpXG4gICAgICAgIHJlc29sdmUgPSByZWplY3QgPSAoKSA9PiB7fVxuICAgICAgfVxuICAgICAgbGV0IHRlZGlvdXNcbiAgICAgIHRyeSB7XG4gICAgICAgIHRlZGlvdXMgPSBuZXcgdGRzLkNvbm5lY3Rpb24odGhpcy5fY29uZmlnKCkpXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVqZWN0T25jZShlcnIpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgdGVkaW91cy5jb25uZWN0KGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBlcnIgPSBuZXcgQ29ubmVjdGlvbkVycm9yKGVycilcbiAgICAgICAgICByZXR1cm4gcmVqZWN0T25jZShlcnIpXG4gICAgICAgIH1cblxuICAgICAgICBkZWJ1ZygnY29ubmVjdGlvbiglZCk6IGVzdGFibGlzaGVkJywgSURTLmdldCh0ZWRpb3VzKSlcbiAgICAgICAgdGhpcy5jb2xsYXRpb24gPSB0ZWRpb3VzLmRhdGFiYXNlQ29sbGF0aW9uXG4gICAgICAgIHJlc29sdmVPbmNlKHRlZGlvdXMpXG4gICAgICB9KVxuICAgICAgSURTLmFkZCh0ZWRpb3VzLCAnQ29ubmVjdGlvbicpXG4gICAgICBkZWJ1ZygncG9vbCglZCk6IGNvbm5lY3Rpb24gIyVkIGNyZWF0ZWQnLCBJRFMuZ2V0KHRoaXMpLCBJRFMuZ2V0KHRlZGlvdXMpKVxuICAgICAgZGVidWcoJ2Nvbm5lY3Rpb24oJWQpOiBlc3RhYmxpc2hpbmcnLCBJRFMuZ2V0KHRlZGlvdXMpKVxuXG4gICAgICB0ZWRpb3VzLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBDb25uZWN0aW9uRXJyb3IoJ1RoZSBjb25uZWN0aW9uIGVuZGVkIHdpdGhvdXQgZXZlciBjb21wbGV0aW5nIHRoZSBjb25uZWN0aW9uJylcbiAgICAgICAgcmVqZWN0T25jZShlcnIpXG4gICAgICB9KVxuICAgICAgdGVkaW91cy5vbignZXJyb3InLCBlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyLmNvZGUgPT09ICdFU09DS0VUJykge1xuICAgICAgICAgIHRlZGlvdXMuaGFzRXJyb3IgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgfVxuICAgICAgICByZWplY3RPbmNlKGVycilcbiAgICAgIH0pXG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Zykge1xuICAgICAgICB0ZWRpb3VzLm9uKCdkZWJ1ZycsIHRoaXMuZW1pdC5iaW5kKHRoaXMsICdkZWJ1ZycsIHRlZGlvdXMpKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZy5iZWZvcmVDb25uZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuY29uZmlnLmJlZm9yZUNvbm5lY3QodGVkaW91cylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgX3Bvb2xWYWxpZGF0ZSAodGVkaW91cykge1xuICAgIGlmICh0ZWRpb3VzICYmICF0ZWRpb3VzLmNsb3NlZCAmJiAhdGVkaW91cy5oYXNFcnJvcikge1xuICAgICAgcmV0dXJuICF0aGlzLmNvbmZpZy52YWxpZGF0ZUNvbm5lY3Rpb24gfHwgbmV3IHNoYXJlZC5Qcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcSA9IG5ldyB0ZHMuUmVxdWVzdCgnU0VMRUNUIDE7JywgKGVycikgPT4ge1xuICAgICAgICAgIHJlc29sdmUoIWVycilcbiAgICAgICAgfSlcbiAgICAgICAgdGVkaW91cy5leGVjU3FsKHJlcSlcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgX3Bvb2xEZXN0cm95ICh0ZWRpb3VzKSB7XG4gICAgcmV0dXJuIG5ldyBzaGFyZWQuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAoIXRlZGlvdXMpIHtcbiAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgZGVidWcoJ2Nvbm5lY3Rpb24oJWQpOiBkZXN0cm95aW5nJywgSURTLmdldCh0ZWRpb3VzKSlcblxuICAgICAgaWYgKHRlZGlvdXMuY2xvc2VkKSB7XG4gICAgICAgIGRlYnVnKCdjb25uZWN0aW9uKCVkKTogYWxyZWFkeSBjbG9zZWQnLCBJRFMuZ2V0KHRlZGlvdXMpKVxuICAgICAgICByZXNvbHZlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRlZGlvdXMub25jZSgnZW5kJywgKCkgPT4ge1xuICAgICAgICAgIGRlYnVnKCdjb25uZWN0aW9uKCVkKTogZGVzdHJveWVkJywgSURTLmdldCh0ZWRpb3VzKSlcbiAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgfSlcblxuICAgICAgICB0ZWRpb3VzLmNsb3NlKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29ubmVjdGlvblBvb2xcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/tedious/connection-pool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/tedious/index.js":
/*!*************************************************!*\
  !*** ./node_modules/mssql/lib/tedious/index.js ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst base = __webpack_require__(/*! ../base */ \"(rsc)/./node_modules/mssql/lib/base/index.js\")\nconst ConnectionPool = __webpack_require__(/*! ./connection-pool */ \"(rsc)/./node_modules/mssql/lib/tedious/connection-pool.js\")\nconst Transaction = __webpack_require__(/*! ./transaction */ \"(rsc)/./node_modules/mssql/lib/tedious/transaction.js\")\nconst Request = __webpack_require__(/*! ./request */ \"(rsc)/./node_modules/mssql/lib/tedious/request.js\")\n\nmodule.exports = Object.assign({\n  ConnectionPool,\n  Transaction,\n  Request,\n  PreparedStatement: base.PreparedStatement\n}, base.exports)\n\nObject.defineProperty(module.exports, \"Promise\", ({\n  enumerable: true,\n  get: () => {\n    return base.Promise\n  },\n  set: (value) => {\n    base.Promise = value\n  }\n}))\n\nObject.defineProperty(module.exports, \"valueHandler\", ({\n  enumerable: true,\n  value: base.valueHandler,\n  writable: false,\n  configurable: false\n}))\n\nbase.driver.name = 'tedious'\nbase.driver.ConnectionPool = ConnectionPool\nbase.driver.Transaction = Transaction\nbase.driver.Request = Request\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3RlZGlvdXMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosYUFBYSxtQkFBTyxDQUFDLDZEQUFTO0FBQzlCLHVCQUF1QixtQkFBTyxDQUFDLG9GQUFtQjtBQUNsRCxvQkFBb0IsbUJBQU8sQ0FBQyw0RUFBZTtBQUMzQyxnQkFBZ0IsbUJBQU8sQ0FBQyxvRUFBVzs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsa0RBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7O0FBRUYsdURBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxFQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi90ZWRpb3VzL2luZGV4LmpzPzE4MGMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGJhc2UgPSByZXF1aXJlKCcuLi9iYXNlJylcbmNvbnN0IENvbm5lY3Rpb25Qb29sID0gcmVxdWlyZSgnLi9jb25uZWN0aW9uLXBvb2wnKVxuY29uc3QgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL3RyYW5zYWN0aW9uJylcbmNvbnN0IFJlcXVlc3QgPSByZXF1aXJlKCcuL3JlcXVlc3QnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5hc3NpZ24oe1xuICBDb25uZWN0aW9uUG9vbCxcbiAgVHJhbnNhY3Rpb24sXG4gIFJlcXVlc3QsXG4gIFByZXBhcmVkU3RhdGVtZW50OiBiYXNlLlByZXBhcmVkU3RhdGVtZW50XG59LCBiYXNlLmV4cG9ydHMpXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ1Byb21pc2UnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogKCkgPT4ge1xuICAgIHJldHVybiBiYXNlLlByb21pc2VcbiAgfSxcbiAgc2V0OiAodmFsdWUpID0+IHtcbiAgICBiYXNlLlByb21pc2UgPSB2YWx1ZVxuICB9XG59KVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsICd2YWx1ZUhhbmRsZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIHZhbHVlOiBiYXNlLnZhbHVlSGFuZGxlcixcbiAgd3JpdGFibGU6IGZhbHNlLFxuICBjb25maWd1cmFibGU6IGZhbHNlXG59KVxuXG5iYXNlLmRyaXZlci5uYW1lID0gJ3RlZGlvdXMnXG5iYXNlLmRyaXZlci5Db25uZWN0aW9uUG9vbCA9IENvbm5lY3Rpb25Qb29sXG5iYXNlLmRyaXZlci5UcmFuc2FjdGlvbiA9IFRyYW5zYWN0aW9uXG5iYXNlLmRyaXZlci5SZXF1ZXN0ID0gUmVxdWVzdFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/tedious/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/tedious/request.js":
/*!***************************************************!*\
  !*** ./node_modules/mssql/lib/tedious/request.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst tds = __webpack_require__(/*! tedious */ \"(rsc)/./node_modules/tedious/lib/tedious.js\")\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\")('mssql:tedi')\nconst BaseRequest = __webpack_require__(/*! ../base/request */ \"(rsc)/./node_modules/mssql/lib/base/request.js\")\nconst RequestError = __webpack_require__(/*! ../error/request-error */ \"(rsc)/./node_modules/mssql/lib/error/request-error.js\")\nconst { IDS, objectHasProperty } = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/mssql/lib/utils.js\")\nconst { TYPES, DECLARATIONS, declare, cast } = __webpack_require__(/*! ../datatypes */ \"(rsc)/./node_modules/mssql/lib/datatypes.js\")\nconst Table = __webpack_require__(/*! ../table */ \"(rsc)/./node_modules/mssql/lib/table.js\")\nconst { PARSERS: UDT } = __webpack_require__(/*! ../udt */ \"(rsc)/./node_modules/mssql/lib/udt.js\")\nconst { valueHandler } = __webpack_require__(/*! ../shared */ \"(rsc)/./node_modules/mssql/lib/shared.js\")\n\nconst JSON_COLUMN_ID = 'JSON_F52E2B61-18A1-11d1-B105-00805F49916B'\nconst XML_COLUMN_ID = 'XML_F52E2B61-18A1-11d1-B105-00805F49916B'\n\nconst N_TYPES = {\n  BitN: 0x68,\n  DateTimeN: 0x6F,\n  DecimalN: 0x6A,\n  FloatN: 0x6D,\n  IntN: 0x26,\n  MoneyN: 0x6E,\n  NumericN: 0x6C\n}\n\nconst getTediousType = function (type) {\n  switch (type) {\n    case TYPES.VarChar: return tds.TYPES.VarChar\n    case TYPES.NVarChar: return tds.TYPES.NVarChar\n    case TYPES.Text: return tds.TYPES.Text\n    case TYPES.Int: return tds.TYPES.Int\n    case TYPES.BigInt: return tds.TYPES.BigInt\n    case TYPES.TinyInt: return tds.TYPES.TinyInt\n    case TYPES.SmallInt: return tds.TYPES.SmallInt\n    case TYPES.Bit: return tds.TYPES.Bit\n    case TYPES.Float: return tds.TYPES.Float\n    case TYPES.Decimal: return tds.TYPES.Decimal\n    case TYPES.Numeric: return tds.TYPES.Numeric\n    case TYPES.Real: return tds.TYPES.Real\n    case TYPES.Money: return tds.TYPES.Money\n    case TYPES.SmallMoney: return tds.TYPES.SmallMoney\n    case TYPES.Time: return tds.TYPES.Time\n    case TYPES.Date: return tds.TYPES.Date\n    case TYPES.DateTime: return tds.TYPES.DateTime\n    case TYPES.DateTime2: return tds.TYPES.DateTime2\n    case TYPES.DateTimeOffset: return tds.TYPES.DateTimeOffset\n    case TYPES.SmallDateTime: return tds.TYPES.SmallDateTime\n    case TYPES.UniqueIdentifier: return tds.TYPES.UniqueIdentifier\n    case TYPES.Xml: return tds.TYPES.NVarChar\n    case TYPES.Char: return tds.TYPES.Char\n    case TYPES.NChar: return tds.TYPES.NChar\n    case TYPES.NText: return tds.TYPES.NVarChar\n    case TYPES.Image: return tds.TYPES.Image\n    case TYPES.Binary: return tds.TYPES.Binary\n    case TYPES.VarBinary: return tds.TYPES.VarBinary\n    case TYPES.UDT: case TYPES.Geography: case TYPES.Geometry: return tds.TYPES.UDT\n    case TYPES.TVP: return tds.TYPES.TVP\n    case TYPES.Variant: return tds.TYPES.Variant\n    default: return type\n  }\n}\n\nconst getMssqlType = function (type, length) {\n  if (typeof type !== 'object') return undefined\n\n  switch (type) {\n    case tds.TYPES.Char: return TYPES.Char\n    case tds.TYPES.NChar: return TYPES.NChar\n    case tds.TYPES.VarChar: return TYPES.VarChar\n    case tds.TYPES.NVarChar: return TYPES.NVarChar\n    case tds.TYPES.Text: return TYPES.Text\n    case tds.TYPES.NText: return TYPES.NText\n    case tds.TYPES.Int: return TYPES.Int\n    case tds.TYPES.BigInt: return TYPES.BigInt\n    case tds.TYPES.TinyInt: return TYPES.TinyInt\n    case tds.TYPES.SmallInt: return TYPES.SmallInt\n    case tds.TYPES.Bit: return TYPES.Bit\n    case tds.TYPES.Float: return TYPES.Float\n    case tds.TYPES.Real: return TYPES.Real\n    case tds.TYPES.Money: return TYPES.Money\n    case tds.TYPES.SmallMoney: return TYPES.SmallMoney\n    case tds.TYPES.Numeric: return TYPES.Numeric\n    case tds.TYPES.Decimal: return TYPES.Decimal\n    case tds.TYPES.DateTime: return TYPES.DateTime\n    case tds.TYPES.Time: return TYPES.Time\n    case tds.TYPES.Date: return TYPES.Date\n    case tds.TYPES.DateTime2: return TYPES.DateTime2\n    case tds.TYPES.DateTimeOffset: return TYPES.DateTimeOffset\n    case tds.TYPES.SmallDateTime: return TYPES.SmallDateTime\n    case tds.TYPES.UniqueIdentifier: return TYPES.UniqueIdentifier\n    case tds.TYPES.Image: return TYPES.Image\n    case tds.TYPES.Binary: return TYPES.Binary\n    case tds.TYPES.VarBinary: return TYPES.VarBinary\n    case tds.TYPES.Xml: return TYPES.Xml\n    case tds.TYPES.UDT: return TYPES.UDT\n    case tds.TYPES.TVP: return TYPES.TVP\n    case tds.TYPES.Variant: return TYPES.Variant\n    default:\n      switch (type.id) {\n        case N_TYPES.BitN: return TYPES.Bit\n        case N_TYPES.NumericN: return TYPES.Numeric\n        case N_TYPES.DecimalN: return TYPES.Decimal\n        case N_TYPES.IntN:\n          if (length === 8) return TYPES.BigInt\n          if (length === 4) return TYPES.Int\n          if (length === 2) return TYPES.SmallInt\n          return TYPES.TinyInt\n        case N_TYPES.FloatN:\n          if (length === 8) return TYPES.Float\n          return TYPES.Real\n        case N_TYPES.MoneyN:\n          if (length === 8) return TYPES.Money\n          return TYPES.SmallMoney\n        case N_TYPES.DateTimeN:\n          if (length === 8) return TYPES.DateTime\n          return TYPES.SmallDateTime\n      }\n  }\n}\n\nconst createColumns = function (metadata, arrayRowMode) {\n  let out = {}\n  if (arrayRowMode) out = []\n  for (let index = 0, length = metadata.length; index < length; index++) {\n    const column = metadata[index]\n    const outColumn = {\n      index,\n      name: column.colName,\n      length: column.dataLength,\n      type: getMssqlType(column.type, column.dataLength),\n      scale: column.scale,\n      precision: column.precision,\n      nullable: !!(column.flags & 0x01),\n      caseSensitive: !!(column.flags & 0x02),\n      identity: !!(column.flags & 0x10),\n      readOnly: !(column.flags & 0x0C)\n    }\n\n    if (column.udtInfo) {\n      outColumn.udt = {\n        name: column.udtInfo.typeName,\n        database: column.udtInfo.dbname,\n        schema: column.udtInfo.owningSchema,\n        assembly: column.udtInfo.assemblyName\n      }\n\n      if (DECLARATIONS[column.udtInfo.typeName]) {\n        outColumn.type = DECLARATIONS[column.udtInfo.typeName]\n      }\n    }\n\n    if (arrayRowMode) {\n      out.push(outColumn)\n    } else {\n      out[column.colName] = outColumn\n    }\n  }\n\n  return out\n}\n\nconst valueCorrection = function (value, metadata) {\n  const type = getMssqlType(metadata.type)\n  if (valueHandler.has(type)) {\n    return valueHandler.get(type)(value)\n  } else if ((metadata.type === tds.TYPES.UDT) && (value != null)) {\n    if (UDT[metadata.udtInfo.typeName]) {\n      return UDT[metadata.udtInfo.typeName](value)\n    } else {\n      return value\n    }\n  } else {\n    return value\n  }\n}\n\nconst parameterCorrection = function (value) {\n  if (value instanceof Table) {\n    const tvp = {\n      name: value.name,\n      schema: value.schema,\n      columns: [],\n      rows: value.rows\n    }\n\n    for (const col of value.columns) {\n      tvp.columns.push({\n        name: col.name,\n        type: getTediousType(col.type),\n        length: col.length,\n        scale: col.scale,\n        precision: col.precision\n      })\n    }\n\n    return tvp\n  } else {\n    return value\n  }\n}\n\nclass Request extends BaseRequest {\n  /*\n  Execute specified sql batch.\n  */\n\n  _batch (batch, callback) {\n    this._isBatch = true\n    this._query(batch, callback)\n  }\n\n  /*\n  Bulk load.\n  */\n\n  _bulk (table, options, callback) {\n    super._bulk(table, options, err => {\n      if (err) return callback(err)\n\n      try {\n        table._makeBulk()\n      } catch (e) {\n        return callback(new RequestError(e, 'EREQUEST'))\n      }\n\n      if (!table.name) {\n        return callback(new RequestError('Table name must be specified for bulk insert.', 'ENAME'))\n      }\n\n      if (table.name.charAt(0) === '@') {\n        return callback(new RequestError(\"You can't use table variables for bulk insert.\", 'ENAME'))\n      }\n\n      const errors = []\n      const errorHandlers = {}\n      let hasReturned = false\n\n      const handleError = (doReturn, connection, info) => {\n        let err = new Error(info.message)\n        err.info = info\n        err = new RequestError(err, 'EREQUEST')\n\n        if (this.stream) {\n          this.emit('error', err)\n        } else {\n          if (doReturn && !hasReturned) {\n            if (connection) {\n              for (const event in errorHandlers) {\n                connection.removeListener(event, errorHandlers[event])\n              }\n\n              this.parent.release(connection)\n            }\n\n            hasReturned = true\n            callback(err)\n          }\n        }\n\n        // we must collect errors even in stream mode\n        errors.push(err)\n      }\n\n      const handleInfo = msg => {\n        this.emit('info', {\n          message: msg.message,\n          number: msg.number,\n          state: msg.state,\n          class: msg.class,\n          lineNumber: msg.lineNumber,\n          serverName: msg.serverName,\n          procName: msg.procName\n        })\n      }\n\n      this.parent.acquire(this, (err, connection) => {\n        const callbackWithRelease = (err, ...args) => {\n          try {\n            this.parent.release(connection)\n          } catch (e) {\n            // noop\n          }\n          callback(err, ...args)\n        }\n        if (err) return callbackWithRelease(err)\n\n        debug('connection(%d): borrowed to request #%d', IDS.get(connection), IDS.get(this))\n\n        if (this.canceled) {\n          debug('request(%d): canceled', IDS.get(this))\n          return callbackWithRelease(new RequestError('Canceled.', 'ECANCEL'))\n        }\n\n        this._cancel = () => {\n          debug('request(%d): cancel', IDS.get(this))\n          connection.cancel()\n        }\n\n        // attach handler to handle multiple error messages\n        connection.on('infoMessage', errorHandlers.infoMessage = handleInfo)\n        connection.on('errorMessage', errorHandlers.errorMessage = handleError.bind(null, false, connection))\n        connection.on('error', errorHandlers.error = handleError.bind(null, true, connection))\n\n        const done = (err, rowCount) => {\n          // to make sure we handle no-sql errors as well\n          if (err && (!errors.length || (errors.length && err.message !== errors[errors.length - 1].message))) {\n            err = new RequestError(err, 'EREQUEST')\n            if (this.stream) this.emit('error', err)\n            errors.push(err)\n          }\n\n          delete this._cancel\n\n          let error\n          if (errors.length && !this.stream) {\n            error = errors.pop()\n            error.precedingErrors = errors\n          }\n\n          if (!hasReturned) {\n            for (const event in errorHandlers) {\n              connection.removeListener(event, errorHandlers[event])\n            }\n\n            hasReturned = true\n\n            if (this.stream) {\n              callbackWithRelease(null, rowCount)\n            } else {\n              callbackWithRelease(error, rowCount)\n            }\n          }\n        }\n\n        const bulk = connection.newBulkLoad(table.path, options, done)\n\n        for (const col of table.columns) {\n          bulk.addColumn(col.name, getTediousType(col.type), { nullable: col.nullable, length: col.length, scale: col.scale, precision: col.precision })\n        }\n\n        if (table.create) {\n          const objectid = table.temporary ? `tempdb..[${table.name}]` : table.path\n          const req = new tds.Request(`if object_id('${objectid.replace(/'/g, '\\'\\'')}') is null ${table.declare()}`, err => {\n            if (err) return done(err)\n\n            connection.execBulkLoad(bulk, table.rows)\n          })\n          this._setCurrentRequest(req)\n\n          connection.execSqlBatch(req)\n        } else {\n          connection.execBulkLoad(bulk, table.rows)\n        }\n      })\n    })\n  }\n\n  /*\n  Execute specified sql command.\n  */\n\n  _query (command, callback) {\n    super._query(command, err => {\n      if (err) return callback(err)\n\n      const recordsets = []\n      const recordsetcolumns = []\n      const errors = []\n      const errorHandlers = {}\n      const output = {}\n      const rowsAffected = []\n\n      let columns = {}\n      let recordset = []\n      let batchLastRow = null\n      let batchHasOutput = false\n      let isChunkedRecordset = false\n      let chunksBuffer = null\n      let hasReturned = false\n\n      const handleError = (doReturn, connection, info) => {\n        let err = new Error(info.message)\n        err.info = info\n        err = new RequestError(err, 'EREQUEST')\n\n        if (this.stream) {\n          this.emit('error', err)\n        } else {\n          if (doReturn && !hasReturned) {\n            if (connection) {\n              for (const event in errorHandlers) {\n                connection.removeListener(event, errorHandlers[event])\n              }\n\n              this.parent.release(connection)\n            }\n\n            hasReturned = true\n            callback(err)\n          }\n        }\n\n        // we must collect errors even in stream mode\n        errors.push(err)\n      }\n\n      const handleInfo = msg => {\n        this.emit('info', {\n          message: msg.message,\n          number: msg.number,\n          state: msg.state,\n          class: msg.class,\n          lineNumber: msg.lineNumber,\n          serverName: msg.serverName,\n          procName: msg.procName\n        })\n      }\n\n      this.parent.acquire(this, (err, connection, config) => {\n        if (err) return callback(err)\n\n        debug('connection(%d): borrowed to request #%d', IDS.get(connection), IDS.get(this))\n\n        let row\n\n        if (this.canceled) {\n          debug('request(%d): canceled', IDS.get(this))\n          this.parent.release(connection)\n          return callback(new RequestError('Canceled.', 'ECANCEL'))\n        }\n\n        this._cancel = () => {\n          debug('request(%d): cancel', IDS.get(this))\n          connection.cancel()\n        }\n\n        // attach handler to handle multiple error messages\n        connection.on('infoMessage', errorHandlers.infoMessage = handleInfo)\n        connection.on('errorMessage', errorHandlers.errorMessage = handleError.bind(null, false, connection))\n        connection.on('error', errorHandlers.error = handleError.bind(null, true, connection))\n\n        debug('request(%d): query', IDS.get(this), command)\n\n        const req = new tds.Request(command, err => {\n          // tedious v15 has started using AggregateErrors to wrap multiple errors into single error objects\n          (err?.errors ? err.errors : [err]).forEach((e, i, { length }) => {\n            // to make sure we handle no-sql errors as well\n            if (e && (!errors.length || (errors.length && errors.length >= length && e.message !== errors[errors.length - length + i].message))) {\n              e = new RequestError(e, 'EREQUEST')\n              if (this.stream) this.emit('error', e)\n              errors.push(e)\n            }\n          })\n\n          // process batch outputs\n          if (batchHasOutput) {\n            if (!this.stream) batchLastRow = recordsets.pop()[0]\n\n            for (const name in batchLastRow) {\n              const value = batchLastRow[name]\n              if (name !== '___return___') {\n                output[name] = value\n              }\n            }\n          }\n\n          delete this._cancel\n\n          let error\n          if (errors.length && !this.stream) {\n            error = errors.pop()\n            error.precedingErrors = errors\n          }\n\n          if (!hasReturned) {\n            for (const event in errorHandlers) {\n              connection.removeListener(event, errorHandlers[event])\n            }\n\n            this.parent.release(connection)\n            hasReturned = true\n\n            if (error) {\n              debug('request(%d): failed', IDS.get(this), error)\n            } else {\n              debug('request(%d): completed', IDS.get(this))\n            }\n\n            if (this.stream) {\n              callback(null, null, output, rowsAffected, recordsetcolumns)\n            } else {\n              callback(error, recordsets, output, rowsAffected, recordsetcolumns)\n            }\n          }\n        })\n\n        this._setCurrentRequest(req)\n\n        req.on('columnMetadata', metadata => {\n          columns = createColumns(metadata, this.arrayRowMode)\n\n          isChunkedRecordset = false\n          if (metadata.length === 1 && (metadata[0].colName === JSON_COLUMN_ID || metadata[0].colName === XML_COLUMN_ID)) {\n            isChunkedRecordset = true\n            chunksBuffer = []\n          }\n\n          if (this.stream) {\n            if (this._isBatch) {\n              // don't stream recordset with output values in batches\n              if (!columns.___return___) {\n                this.emit('recordset', columns)\n              }\n            } else {\n              this.emit('recordset', columns)\n            }\n          }\n          if (this.arrayRowMode) recordsetcolumns.push(columns)\n        })\n\n        const doneHandler = (rowCount, more) => {\n          if (rowCount != null) {\n            rowsAffected.push(rowCount)\n            if (this.stream) {\n              this.emit('rowsaffected', rowCount)\n            }\n          }\n          // this function is called even when select only set variables so we should skip adding a new recordset\n          if (Object.keys(columns).length === 0) return\n\n          if (isChunkedRecordset) {\n            const concatenatedChunks = chunksBuffer.join('')\n            if (columns[JSON_COLUMN_ID] && config.parseJSON === true) {\n              try {\n                if (concatenatedChunks === '') {\n                  row = null\n                } else {\n                  row = JSON.parse(concatenatedChunks)\n                }\n              } catch (ex) {\n                row = null\n                const ex2 = new RequestError(new Error(`Failed to parse incoming JSON. ${ex.message}`), 'EJSON')\n\n                if (this.stream) this.emit('error', ex2)\n\n                // we must collect errors even in stream mode\n                errors.push(ex2)\n              }\n            } else {\n              row = {}\n              row[Object.keys(columns)[0]] = concatenatedChunks\n            }\n\n            chunksBuffer = null\n\n            if (this.stream) {\n              this.emit('row', row)\n            } else {\n              recordset.push(row)\n            }\n          }\n\n          if (!this.stream) {\n            // all rows of current recordset loaded\n            Object.defineProperty(recordset, 'columns', {\n              enumerable: false,\n              configurable: true,\n              value: columns\n            })\n\n            Object.defineProperty(recordset, 'toTable', {\n              enumerable: false,\n              configurable: true,\n              value (name) { return Table.fromRecordset(this, name) }\n            })\n\n            recordsets.push(recordset)\n          }\n\n          recordset = []\n          columns = {}\n        }\n\n        req.on('doneInProc', doneHandler) // doneInProc handlers are used in both queries and batches\n        req.on('done', doneHandler) // done handlers are used in batches\n\n        req.on('returnValue', (parameterName, value, metadata) => {\n          output[parameterName] = value\n        })\n\n        req.on('row', columns => {\n          if (!recordset) recordset = []\n\n          if (isChunkedRecordset) {\n            return chunksBuffer.push(columns[0].value)\n          }\n\n          if (this.arrayRowMode) {\n            row = []\n          } else {\n            row = {}\n          }\n          for (const col of columns) {\n            col.value = valueCorrection(col.value, col.metadata)\n\n            if (this.arrayRowMode) {\n              row.push(col.value)\n            } else {\n              const exi = row[col.metadata.colName]\n              if (exi !== undefined) {\n                if (exi instanceof Array) {\n                  exi.push(col.value)\n                } else {\n                  row[col.metadata.colName] = [exi, col.value]\n                }\n              } else {\n                row[col.metadata.colName] = col.value\n              }\n            }\n          }\n\n          if (this.stream) {\n            if (this._isBatch) {\n              // dont stream recordset with output values in batches\n              if (row.___return___) {\n                batchLastRow = row\n              } else {\n                this.emit('row', row)\n              }\n            } else {\n              this.emit('row', row)\n            }\n          } else {\n            recordset.push(row)\n          }\n        })\n\n        if (this._isBatch) {\n          if (Object.keys(this.parameters).length) {\n            for (const name in this.parameters) {\n              if (!objectHasProperty(this.parameters, name)) {\n                continue\n              }\n              const param = this.parameters[name]\n\n              try {\n                param.value = getTediousType(param.type).validate(param.value, this.parent.collation)\n              } catch (e) {\n                e.message = `Validation failed for parameter '${name}'. ${e.message}`\n                const err = new RequestError(e, 'EPARAM')\n\n                this.parent.release(connection)\n                return callback(err)\n              }\n            }\n\n            const declarations = []\n            for (const name in this.parameters) {\n              if (!objectHasProperty(this.parameters, name)) {\n                continue\n              }\n              const param = this.parameters[name]\n              declarations.push(`@${name} ${declare(param.type, param)}`)\n            }\n\n            const assigns = []\n            for (const name in this.parameters) {\n              if (!objectHasProperty(this.parameters, name)) {\n                continue\n              }\n              const param = this.parameters[name]\n              assigns.push(`@${name} = ${cast(param.value, param.type, param)}`)\n            }\n\n            const selects = []\n            for (const name in this.parameters) {\n              if (!objectHasProperty(this.parameters, name)) {\n                continue\n              }\n              const param = this.parameters[name]\n              if (param.io === 2) {\n                selects.push(`@${name} as [${name}]`)\n              }\n            }\n\n            batchHasOutput = selects.length > 0\n\n            req.sqlTextOrProcedure = `declare ${declarations.join(', ')};select ${assigns.join(', ')};${req.sqlTextOrProcedure};${batchHasOutput ? (`select 1 as [___return___], ${selects.join(', ')}`) : ''}`\n          }\n        } else {\n          for (const name in this.parameters) {\n            if (!objectHasProperty(this.parameters, name)) {\n              continue\n            }\n            const param = this.parameters[name]\n            if (param.io === 1) {\n              req.addParameter(param.name, getTediousType(param.type), parameterCorrection(param.value), { length: param.length, scale: param.scale, precision: param.precision })\n            } else {\n              req.addOutputParameter(param.name, getTediousType(param.type), parameterCorrection(param.value), { length: param.length, scale: param.scale, precision: param.precision })\n            }\n          }\n        }\n\n        try {\n          connection[this._isBatch ? 'execSqlBatch' : 'execSql'](req)\n        } catch (error) {\n          handleError(true, connection, error)\n        }\n      })\n    })\n  }\n\n  /*\n  Execute stored procedure with specified parameters.\n  */\n\n  _execute (procedure, callback) {\n    super._execute(procedure, err => {\n      if (err) return callback(err)\n\n      const recordsets = []\n      const recordsetcolumns = []\n      const errors = []\n      const errorHandlers = {}\n      const output = {}\n      const rowsAffected = []\n\n      let columns = {}\n      let recordset = []\n      let returnValue = 0\n      let isChunkedRecordset = false\n      let chunksBuffer = null\n      let hasReturned = false\n\n      const handleError = (doReturn, connection, info) => {\n        let err = new Error(info.message)\n        err.info = info\n        err = new RequestError(err, 'EREQUEST')\n\n        if (this.stream) {\n          this.emit('error', err)\n        } else {\n          if (doReturn && !hasReturned) {\n            if (connection) {\n              for (const event in errorHandlers) {\n                connection.removeListener(event, errorHandlers[event])\n              }\n\n              this.parent.release(connection)\n            }\n\n            hasReturned = true\n            callback(err)\n          }\n        }\n\n        // we must collect errors even in stream mode\n        errors.push(err)\n      }\n\n      const handleInfo = msg => {\n        this.emit('info', {\n          message: msg.message,\n          number: msg.number,\n          state: msg.state,\n          class: msg.class,\n          lineNumber: msg.lineNumber,\n          serverName: msg.serverName,\n          procName: msg.procName\n        })\n      }\n\n      this.parent.acquire(this, (err, connection, config) => {\n        if (err) return callback(err)\n\n        debug('connection(%d): borrowed to request #%d', IDS.get(connection), IDS.get(this))\n\n        let row\n\n        if (this.canceled) {\n          debug('request(%d): canceled', IDS.get(this))\n          this.parent.release(connection)\n          return callback(new RequestError('Canceled.', 'ECANCEL'))\n        }\n\n        this._cancel = () => {\n          debug('request(%d): cancel', IDS.get(this))\n          connection.cancel()\n        }\n\n        // attach handler to handle multiple error messages\n        connection.on('infoMessage', errorHandlers.infoMessage = handleInfo)\n        connection.on('errorMessage', errorHandlers.errorMessage = handleError.bind(null, false, connection))\n        connection.on('error', errorHandlers.error = handleError.bind(null, true, connection))\n\n        if (debug.enabled) {\n          // log stored procedure executions and provided parameters\n          const params = Object.keys(this.parameters).map(k => this.parameters[k])\n          // cut long string parameters short to keep log somewhat clean\n          const logValue = s => typeof s === 'string' && s.length > 50 ? s.substring(0, 47) + '...' : s\n          // format parameter names as 'my_parameter [sql.Int]'\n          const logName = param => param.name + ' [sql.' + param.type.name + ']'\n          const logParams = {}\n          params.forEach(p => { logParams[logName(p)] = logValue(p.value) })\n          debug('request(%d): execute %s %O', IDS.get(this), procedure, logParams)\n        }\n\n        const req = new tds.Request(procedure, err => {\n          // to make sure we handle no-sql errors as well\n          if (err && (!errors.length || (errors.length && err.message !== errors[errors.length - 1].message))) {\n            err = new RequestError(err, 'EREQUEST')\n            if (this.stream) this.emit('error', err)\n            errors.push(err)\n          }\n\n          delete this._cancel\n\n          let error\n          if (errors.length && !this.stream) {\n            error = errors.pop()\n            error.precedingErrors = errors\n          }\n\n          if (!hasReturned) {\n            for (const event in errorHandlers) {\n              connection.removeListener(event, errorHandlers[event])\n            }\n\n            this.parent.release(connection)\n            hasReturned = true\n\n            if (error) {\n              debug('request(%d): failed', IDS.get(this), error)\n            } else {\n              debug('request(%d): complete', IDS.get(this))\n            }\n\n            if (this.stream) {\n              callback(null, null, output, returnValue, rowsAffected, recordsetcolumns)\n            } else {\n              callback(error, recordsets, output, returnValue, rowsAffected, recordsetcolumns)\n            }\n          }\n        })\n\n        this._setCurrentRequest(req)\n\n        req.on('columnMetadata', metadata => {\n          columns = createColumns(metadata, this.arrayRowMode)\n\n          isChunkedRecordset = false\n          if ((metadata.length === 1) && (metadata[0].colName === JSON_COLUMN_ID || metadata[0].colName === XML_COLUMN_ID)) {\n            isChunkedRecordset = true\n            chunksBuffer = []\n          }\n\n          if (this.stream) this.emit('recordset', columns)\n          if (this.arrayRowMode) recordsetcolumns.push(columns)\n        })\n\n        req.on('row', columns => {\n          if (!recordset) recordset = []\n\n          if (isChunkedRecordset) {\n            return chunksBuffer.push(columns[0].value)\n          }\n\n          if (this.arrayRowMode) {\n            row = []\n          } else {\n            row = {}\n          }\n          for (const col of columns) {\n            col.value = valueCorrection(col.value, col.metadata)\n\n            if (this.arrayRowMode) {\n              row.push(col.value)\n            } else {\n              const exi = row[col.metadata.colName]\n              if (exi != null) {\n                if (exi instanceof Array) {\n                  exi.push(col.value)\n                } else {\n                  row[col.metadata.colName] = [exi, col.value]\n                }\n              } else {\n                row[col.metadata.colName] = col.value\n              }\n            }\n          }\n\n          if (this.stream) {\n            this.emit('row', row)\n          } else {\n            recordset.push(row)\n          }\n        })\n\n        req.on('doneInProc', (rowCount, more) => {\n          if (rowCount != null) {\n            rowsAffected.push(rowCount)\n            if (this.stream) {\n              this.emit('rowsaffected', rowCount)\n            }\n          }\n\n          // filter empty recordsets when NOCOUNT is OFF\n          if (Object.keys(columns).length === 0) return\n\n          if (isChunkedRecordset) {\n            if (columns[JSON_COLUMN_ID] && config.parseJSON === true) {\n              try {\n                if (chunksBuffer.length === 0) {\n                  row = null\n                } else {\n                  row = JSON.parse(chunksBuffer.join(''))\n                }\n              } catch (ex) {\n                row = null\n                const ex2 = new RequestError(new Error(`Failed to parse incoming JSON. ${ex.message}`), 'EJSON')\n\n                if (this.stream) this.emit('error', ex2)\n\n                // we must collect errors even in stream mode\n                errors.push(ex2)\n              }\n            } else {\n              row = {}\n              row[Object.keys(columns)[0]] = chunksBuffer.join('')\n            }\n\n            chunksBuffer = null\n\n            if (this.stream) {\n              this.emit('row', row)\n            } else {\n              recordset.push(row)\n            }\n          }\n\n          if (!this.stream) {\n            // all rows of current recordset loaded\n            Object.defineProperty(recordset, 'columns', {\n              enumerable: false,\n              configurable: true,\n              value: columns\n            })\n\n            Object.defineProperty(recordset, 'toTable', {\n              enumerable: false,\n              configurable: true,\n              value (name) { return Table.fromRecordset(this, name) }\n            })\n\n            recordsets.push(recordset)\n          }\n\n          recordset = []\n          columns = {}\n        })\n\n        req.on('doneProc', (rowCount, more, returnStatus) => {\n          returnValue = returnStatus\n        })\n\n        req.on('returnValue', (parameterName, value, metadata) => {\n          output[parameterName] = value\n        })\n\n        for (const name in this.parameters) {\n          if (!objectHasProperty(this.parameters, name)) {\n            continue\n          }\n          const param = this.parameters[name]\n          if (param.io === 1) {\n            req.addParameter(param.name, getTediousType(param.type), parameterCorrection(param.value), { length: param.length, scale: param.scale, precision: param.precision })\n          } else {\n            req.addOutputParameter(param.name, getTediousType(param.type), parameterCorrection(param.value), { length: param.length, scale: param.scale, precision: param.precision })\n          }\n        }\n\n        connection.callProcedure(req)\n      })\n    })\n  }\n\n  _pause () {\n    super._pause()\n    if (this._currentRequest) {\n      this._currentRequest.pause()\n    }\n  }\n\n  _resume () {\n    super._resume()\n    if (this._currentRequest) {\n      this._currentRequest.resume()\n    }\n  }\n}\n\nmodule.exports = Request\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3RlZGlvdXMvcmVxdWVzdC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixZQUFZLG1CQUFPLENBQUMsNERBQVM7QUFDN0IsY0FBYyxtQkFBTyxDQUFDLHNEQUFPO0FBQzdCLG9CQUFvQixtQkFBTyxDQUFDLHVFQUFpQjtBQUM3QyxxQkFBcUIsbUJBQU8sQ0FBQyxxRkFBd0I7QUFDckQsUUFBUSx5QkFBeUIsRUFBRSxtQkFBTyxDQUFDLHlEQUFVO0FBQ3JELFFBQVEscUNBQXFDLEVBQUUsbUJBQU8sQ0FBQyxpRUFBYztBQUNyRSxjQUFjLG1CQUFPLENBQUMseURBQVU7QUFDaEMsUUFBUSxlQUFlLEVBQUUsbUJBQU8sQ0FBQyxxREFBUTtBQUN6QyxRQUFRLGVBQWUsRUFBRSxtQkFBTyxDQUFDLDJEQUFXOztBQUU1QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELGdCQUFnQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLCtEQUErRCx3RkFBd0Y7QUFDdko7O0FBRUE7QUFDQSx5REFBeUQsV0FBVztBQUNwRSx1REFBdUQsK0JBQStCLGFBQWEsZ0JBQWdCO0FBQ25IOztBQUVBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSw4REFBOEQsUUFBUTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSx5RkFBeUYsV0FBVzs7QUFFcEc7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQixnRUFBZ0UsS0FBSyxLQUFLLFVBQVU7QUFDcEY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLE1BQU0sRUFBRSwyQkFBMkI7QUFDdkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLE1BQU0sSUFBSSxxQ0FBcUM7QUFDOUU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsTUFBTSxNQUFNLEtBQUs7QUFDbEQ7QUFDQTs7QUFFQTs7QUFFQSxnREFBZ0QseUJBQXlCLFNBQVMsb0JBQW9CLEVBQUUsd0JBQXdCLEVBQUUsaURBQWlELG1CQUFtQixRQUFRO0FBQzlNO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJHQUEyRyxzRUFBc0U7QUFDakwsY0FBYztBQUNkLGlIQUFpSCxzRUFBc0U7QUFDdkw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMkNBQTJDO0FBQzNFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSx5RkFBeUYsV0FBVzs7QUFFcEc7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUdBQXlHLHNFQUFzRTtBQUMvSyxZQUFZO0FBQ1osK0dBQStHLHNFQUFzRTtBQUNyTDtBQUNBOztBQUVBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdHlwZXNjcmlwdC1yZWR1eC1zYW1wbGUvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3RlZGlvdXMvcmVxdWVzdC5qcz9kMWY3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCB0ZHMgPSByZXF1aXJlKCd0ZWRpb3VzJylcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnbXNzcWw6dGVkaScpXG5jb25zdCBCYXNlUmVxdWVzdCA9IHJlcXVpcmUoJy4uL2Jhc2UvcmVxdWVzdCcpXG5jb25zdCBSZXF1ZXN0RXJyb3IgPSByZXF1aXJlKCcuLi9lcnJvci9yZXF1ZXN0LWVycm9yJylcbmNvbnN0IHsgSURTLCBvYmplY3RIYXNQcm9wZXJ0eSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMnKVxuY29uc3QgeyBUWVBFUywgREVDTEFSQVRJT05TLCBkZWNsYXJlLCBjYXN0IH0gPSByZXF1aXJlKCcuLi9kYXRhdHlwZXMnKVxuY29uc3QgVGFibGUgPSByZXF1aXJlKCcuLi90YWJsZScpXG5jb25zdCB7IFBBUlNFUlM6IFVEVCB9ID0gcmVxdWlyZSgnLi4vdWR0JylcbmNvbnN0IHsgdmFsdWVIYW5kbGVyIH0gPSByZXF1aXJlKCcuLi9zaGFyZWQnKVxuXG5jb25zdCBKU09OX0NPTFVNTl9JRCA9ICdKU09OX0Y1MkUyQjYxLTE4QTEtMTFkMS1CMTA1LTAwODA1RjQ5OTE2QidcbmNvbnN0IFhNTF9DT0xVTU5fSUQgPSAnWE1MX0Y1MkUyQjYxLTE4QTEtMTFkMS1CMTA1LTAwODA1RjQ5OTE2QidcblxuY29uc3QgTl9UWVBFUyA9IHtcbiAgQml0TjogMHg2OCxcbiAgRGF0ZVRpbWVOOiAweDZGLFxuICBEZWNpbWFsTjogMHg2QSxcbiAgRmxvYXROOiAweDZELFxuICBJbnROOiAweDI2LFxuICBNb25leU46IDB4NkUsXG4gIE51bWVyaWNOOiAweDZDXG59XG5cbmNvbnN0IGdldFRlZGlvdXNUeXBlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBUWVBFUy5WYXJDaGFyOiByZXR1cm4gdGRzLlRZUEVTLlZhckNoYXJcbiAgICBjYXNlIFRZUEVTLk5WYXJDaGFyOiByZXR1cm4gdGRzLlRZUEVTLk5WYXJDaGFyXG4gICAgY2FzZSBUWVBFUy5UZXh0OiByZXR1cm4gdGRzLlRZUEVTLlRleHRcbiAgICBjYXNlIFRZUEVTLkludDogcmV0dXJuIHRkcy5UWVBFUy5JbnRcbiAgICBjYXNlIFRZUEVTLkJpZ0ludDogcmV0dXJuIHRkcy5UWVBFUy5CaWdJbnRcbiAgICBjYXNlIFRZUEVTLlRpbnlJbnQ6IHJldHVybiB0ZHMuVFlQRVMuVGlueUludFxuICAgIGNhc2UgVFlQRVMuU21hbGxJbnQ6IHJldHVybiB0ZHMuVFlQRVMuU21hbGxJbnRcbiAgICBjYXNlIFRZUEVTLkJpdDogcmV0dXJuIHRkcy5UWVBFUy5CaXRcbiAgICBjYXNlIFRZUEVTLkZsb2F0OiByZXR1cm4gdGRzLlRZUEVTLkZsb2F0XG4gICAgY2FzZSBUWVBFUy5EZWNpbWFsOiByZXR1cm4gdGRzLlRZUEVTLkRlY2ltYWxcbiAgICBjYXNlIFRZUEVTLk51bWVyaWM6IHJldHVybiB0ZHMuVFlQRVMuTnVtZXJpY1xuICAgIGNhc2UgVFlQRVMuUmVhbDogcmV0dXJuIHRkcy5UWVBFUy5SZWFsXG4gICAgY2FzZSBUWVBFUy5Nb25leTogcmV0dXJuIHRkcy5UWVBFUy5Nb25leVxuICAgIGNhc2UgVFlQRVMuU21hbGxNb25leTogcmV0dXJuIHRkcy5UWVBFUy5TbWFsbE1vbmV5XG4gICAgY2FzZSBUWVBFUy5UaW1lOiByZXR1cm4gdGRzLlRZUEVTLlRpbWVcbiAgICBjYXNlIFRZUEVTLkRhdGU6IHJldHVybiB0ZHMuVFlQRVMuRGF0ZVxuICAgIGNhc2UgVFlQRVMuRGF0ZVRpbWU6IHJldHVybiB0ZHMuVFlQRVMuRGF0ZVRpbWVcbiAgICBjYXNlIFRZUEVTLkRhdGVUaW1lMjogcmV0dXJuIHRkcy5UWVBFUy5EYXRlVGltZTJcbiAgICBjYXNlIFRZUEVTLkRhdGVUaW1lT2Zmc2V0OiByZXR1cm4gdGRzLlRZUEVTLkRhdGVUaW1lT2Zmc2V0XG4gICAgY2FzZSBUWVBFUy5TbWFsbERhdGVUaW1lOiByZXR1cm4gdGRzLlRZUEVTLlNtYWxsRGF0ZVRpbWVcbiAgICBjYXNlIFRZUEVTLlVuaXF1ZUlkZW50aWZpZXI6IHJldHVybiB0ZHMuVFlQRVMuVW5pcXVlSWRlbnRpZmllclxuICAgIGNhc2UgVFlQRVMuWG1sOiByZXR1cm4gdGRzLlRZUEVTLk5WYXJDaGFyXG4gICAgY2FzZSBUWVBFUy5DaGFyOiByZXR1cm4gdGRzLlRZUEVTLkNoYXJcbiAgICBjYXNlIFRZUEVTLk5DaGFyOiByZXR1cm4gdGRzLlRZUEVTLk5DaGFyXG4gICAgY2FzZSBUWVBFUy5OVGV4dDogcmV0dXJuIHRkcy5UWVBFUy5OVmFyQ2hhclxuICAgIGNhc2UgVFlQRVMuSW1hZ2U6IHJldHVybiB0ZHMuVFlQRVMuSW1hZ2VcbiAgICBjYXNlIFRZUEVTLkJpbmFyeTogcmV0dXJuIHRkcy5UWVBFUy5CaW5hcnlcbiAgICBjYXNlIFRZUEVTLlZhckJpbmFyeTogcmV0dXJuIHRkcy5UWVBFUy5WYXJCaW5hcnlcbiAgICBjYXNlIFRZUEVTLlVEVDogY2FzZSBUWVBFUy5HZW9ncmFwaHk6IGNhc2UgVFlQRVMuR2VvbWV0cnk6IHJldHVybiB0ZHMuVFlQRVMuVURUXG4gICAgY2FzZSBUWVBFUy5UVlA6IHJldHVybiB0ZHMuVFlQRVMuVFZQXG4gICAgY2FzZSBUWVBFUy5WYXJpYW50OiByZXR1cm4gdGRzLlRZUEVTLlZhcmlhbnRcbiAgICBkZWZhdWx0OiByZXR1cm4gdHlwZVxuICB9XG59XG5cbmNvbnN0IGdldE1zc3FsVHlwZSA9IGZ1bmN0aW9uICh0eXBlLCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB0eXBlICE9PSAnb2JqZWN0JykgcmV0dXJuIHVuZGVmaW5lZFxuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgdGRzLlRZUEVTLkNoYXI6IHJldHVybiBUWVBFUy5DaGFyXG4gICAgY2FzZSB0ZHMuVFlQRVMuTkNoYXI6IHJldHVybiBUWVBFUy5OQ2hhclxuICAgIGNhc2UgdGRzLlRZUEVTLlZhckNoYXI6IHJldHVybiBUWVBFUy5WYXJDaGFyXG4gICAgY2FzZSB0ZHMuVFlQRVMuTlZhckNoYXI6IHJldHVybiBUWVBFUy5OVmFyQ2hhclxuICAgIGNhc2UgdGRzLlRZUEVTLlRleHQ6IHJldHVybiBUWVBFUy5UZXh0XG4gICAgY2FzZSB0ZHMuVFlQRVMuTlRleHQ6IHJldHVybiBUWVBFUy5OVGV4dFxuICAgIGNhc2UgdGRzLlRZUEVTLkludDogcmV0dXJuIFRZUEVTLkludFxuICAgIGNhc2UgdGRzLlRZUEVTLkJpZ0ludDogcmV0dXJuIFRZUEVTLkJpZ0ludFxuICAgIGNhc2UgdGRzLlRZUEVTLlRpbnlJbnQ6IHJldHVybiBUWVBFUy5UaW55SW50XG4gICAgY2FzZSB0ZHMuVFlQRVMuU21hbGxJbnQ6IHJldHVybiBUWVBFUy5TbWFsbEludFxuICAgIGNhc2UgdGRzLlRZUEVTLkJpdDogcmV0dXJuIFRZUEVTLkJpdFxuICAgIGNhc2UgdGRzLlRZUEVTLkZsb2F0OiByZXR1cm4gVFlQRVMuRmxvYXRcbiAgICBjYXNlIHRkcy5UWVBFUy5SZWFsOiByZXR1cm4gVFlQRVMuUmVhbFxuICAgIGNhc2UgdGRzLlRZUEVTLk1vbmV5OiByZXR1cm4gVFlQRVMuTW9uZXlcbiAgICBjYXNlIHRkcy5UWVBFUy5TbWFsbE1vbmV5OiByZXR1cm4gVFlQRVMuU21hbGxNb25leVxuICAgIGNhc2UgdGRzLlRZUEVTLk51bWVyaWM6IHJldHVybiBUWVBFUy5OdW1lcmljXG4gICAgY2FzZSB0ZHMuVFlQRVMuRGVjaW1hbDogcmV0dXJuIFRZUEVTLkRlY2ltYWxcbiAgICBjYXNlIHRkcy5UWVBFUy5EYXRlVGltZTogcmV0dXJuIFRZUEVTLkRhdGVUaW1lXG4gICAgY2FzZSB0ZHMuVFlQRVMuVGltZTogcmV0dXJuIFRZUEVTLlRpbWVcbiAgICBjYXNlIHRkcy5UWVBFUy5EYXRlOiByZXR1cm4gVFlQRVMuRGF0ZVxuICAgIGNhc2UgdGRzLlRZUEVTLkRhdGVUaW1lMjogcmV0dXJuIFRZUEVTLkRhdGVUaW1lMlxuICAgIGNhc2UgdGRzLlRZUEVTLkRhdGVUaW1lT2Zmc2V0OiByZXR1cm4gVFlQRVMuRGF0ZVRpbWVPZmZzZXRcbiAgICBjYXNlIHRkcy5UWVBFUy5TbWFsbERhdGVUaW1lOiByZXR1cm4gVFlQRVMuU21hbGxEYXRlVGltZVxuICAgIGNhc2UgdGRzLlRZUEVTLlVuaXF1ZUlkZW50aWZpZXI6IHJldHVybiBUWVBFUy5VbmlxdWVJZGVudGlmaWVyXG4gICAgY2FzZSB0ZHMuVFlQRVMuSW1hZ2U6IHJldHVybiBUWVBFUy5JbWFnZVxuICAgIGNhc2UgdGRzLlRZUEVTLkJpbmFyeTogcmV0dXJuIFRZUEVTLkJpbmFyeVxuICAgIGNhc2UgdGRzLlRZUEVTLlZhckJpbmFyeTogcmV0dXJuIFRZUEVTLlZhckJpbmFyeVxuICAgIGNhc2UgdGRzLlRZUEVTLlhtbDogcmV0dXJuIFRZUEVTLlhtbFxuICAgIGNhc2UgdGRzLlRZUEVTLlVEVDogcmV0dXJuIFRZUEVTLlVEVFxuICAgIGNhc2UgdGRzLlRZUEVTLlRWUDogcmV0dXJuIFRZUEVTLlRWUFxuICAgIGNhc2UgdGRzLlRZUEVTLlZhcmlhbnQ6IHJldHVybiBUWVBFUy5WYXJpYW50XG4gICAgZGVmYXVsdDpcbiAgICAgIHN3aXRjaCAodHlwZS5pZCkge1xuICAgICAgICBjYXNlIE5fVFlQRVMuQml0TjogcmV0dXJuIFRZUEVTLkJpdFxuICAgICAgICBjYXNlIE5fVFlQRVMuTnVtZXJpY046IHJldHVybiBUWVBFUy5OdW1lcmljXG4gICAgICAgIGNhc2UgTl9UWVBFUy5EZWNpbWFsTjogcmV0dXJuIFRZUEVTLkRlY2ltYWxcbiAgICAgICAgY2FzZSBOX1RZUEVTLkludE46XG4gICAgICAgICAgaWYgKGxlbmd0aCA9PT0gOCkgcmV0dXJuIFRZUEVTLkJpZ0ludFxuICAgICAgICAgIGlmIChsZW5ndGggPT09IDQpIHJldHVybiBUWVBFUy5JbnRcbiAgICAgICAgICBpZiAobGVuZ3RoID09PSAyKSByZXR1cm4gVFlQRVMuU21hbGxJbnRcbiAgICAgICAgICByZXR1cm4gVFlQRVMuVGlueUludFxuICAgICAgICBjYXNlIE5fVFlQRVMuRmxvYXROOlxuICAgICAgICAgIGlmIChsZW5ndGggPT09IDgpIHJldHVybiBUWVBFUy5GbG9hdFxuICAgICAgICAgIHJldHVybiBUWVBFUy5SZWFsXG4gICAgICAgIGNhc2UgTl9UWVBFUy5Nb25leU46XG4gICAgICAgICAgaWYgKGxlbmd0aCA9PT0gOCkgcmV0dXJuIFRZUEVTLk1vbmV5XG4gICAgICAgICAgcmV0dXJuIFRZUEVTLlNtYWxsTW9uZXlcbiAgICAgICAgY2FzZSBOX1RZUEVTLkRhdGVUaW1lTjpcbiAgICAgICAgICBpZiAobGVuZ3RoID09PSA4KSByZXR1cm4gVFlQRVMuRGF0ZVRpbWVcbiAgICAgICAgICByZXR1cm4gVFlQRVMuU21hbGxEYXRlVGltZVxuICAgICAgfVxuICB9XG59XG5cbmNvbnN0IGNyZWF0ZUNvbHVtbnMgPSBmdW5jdGlvbiAobWV0YWRhdGEsIGFycmF5Um93TW9kZSkge1xuICBsZXQgb3V0ID0ge31cbiAgaWYgKGFycmF5Um93TW9kZSkgb3V0ID0gW11cbiAgZm9yIChsZXQgaW5kZXggPSAwLCBsZW5ndGggPSBtZXRhZGF0YS5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY29uc3QgY29sdW1uID0gbWV0YWRhdGFbaW5kZXhdXG4gICAgY29uc3Qgb3V0Q29sdW1uID0ge1xuICAgICAgaW5kZXgsXG4gICAgICBuYW1lOiBjb2x1bW4uY29sTmFtZSxcbiAgICAgIGxlbmd0aDogY29sdW1uLmRhdGFMZW5ndGgsXG4gICAgICB0eXBlOiBnZXRNc3NxbFR5cGUoY29sdW1uLnR5cGUsIGNvbHVtbi5kYXRhTGVuZ3RoKSxcbiAgICAgIHNjYWxlOiBjb2x1bW4uc2NhbGUsXG4gICAgICBwcmVjaXNpb246IGNvbHVtbi5wcmVjaXNpb24sXG4gICAgICBudWxsYWJsZTogISEoY29sdW1uLmZsYWdzICYgMHgwMSksXG4gICAgICBjYXNlU2Vuc2l0aXZlOiAhIShjb2x1bW4uZmxhZ3MgJiAweDAyKSxcbiAgICAgIGlkZW50aXR5OiAhIShjb2x1bW4uZmxhZ3MgJiAweDEwKSxcbiAgICAgIHJlYWRPbmx5OiAhKGNvbHVtbi5mbGFncyAmIDB4MEMpXG4gICAgfVxuXG4gICAgaWYgKGNvbHVtbi51ZHRJbmZvKSB7XG4gICAgICBvdXRDb2x1bW4udWR0ID0ge1xuICAgICAgICBuYW1lOiBjb2x1bW4udWR0SW5mby50eXBlTmFtZSxcbiAgICAgICAgZGF0YWJhc2U6IGNvbHVtbi51ZHRJbmZvLmRibmFtZSxcbiAgICAgICAgc2NoZW1hOiBjb2x1bW4udWR0SW5mby5vd25pbmdTY2hlbWEsXG4gICAgICAgIGFzc2VtYmx5OiBjb2x1bW4udWR0SW5mby5hc3NlbWJseU5hbWVcbiAgICAgIH1cblxuICAgICAgaWYgKERFQ0xBUkFUSU9OU1tjb2x1bW4udWR0SW5mby50eXBlTmFtZV0pIHtcbiAgICAgICAgb3V0Q29sdW1uLnR5cGUgPSBERUNMQVJBVElPTlNbY29sdW1uLnVkdEluZm8udHlwZU5hbWVdXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFycmF5Um93TW9kZSkge1xuICAgICAgb3V0LnB1c2gob3V0Q29sdW1uKVxuICAgIH0gZWxzZSB7XG4gICAgICBvdXRbY29sdW1uLmNvbE5hbWVdID0gb3V0Q29sdW1uXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dFxufVxuXG5jb25zdCB2YWx1ZUNvcnJlY3Rpb24gPSBmdW5jdGlvbiAodmFsdWUsIG1ldGFkYXRhKSB7XG4gIGNvbnN0IHR5cGUgPSBnZXRNc3NxbFR5cGUobWV0YWRhdGEudHlwZSlcbiAgaWYgKHZhbHVlSGFuZGxlci5oYXModHlwZSkpIHtcbiAgICByZXR1cm4gdmFsdWVIYW5kbGVyLmdldCh0eXBlKSh2YWx1ZSlcbiAgfSBlbHNlIGlmICgobWV0YWRhdGEudHlwZSA9PT0gdGRzLlRZUEVTLlVEVCkgJiYgKHZhbHVlICE9IG51bGwpKSB7XG4gICAgaWYgKFVEVFttZXRhZGF0YS51ZHRJbmZvLnR5cGVOYW1lXSkge1xuICAgICAgcmV0dXJuIFVEVFttZXRhZGF0YS51ZHRJbmZvLnR5cGVOYW1lXSh2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZVxuICB9XG59XG5cbmNvbnN0IHBhcmFtZXRlckNvcnJlY3Rpb24gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVGFibGUpIHtcbiAgICBjb25zdCB0dnAgPSB7XG4gICAgICBuYW1lOiB2YWx1ZS5uYW1lLFxuICAgICAgc2NoZW1hOiB2YWx1ZS5zY2hlbWEsXG4gICAgICBjb2x1bW5zOiBbXSxcbiAgICAgIHJvd3M6IHZhbHVlLnJvd3NcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGNvbCBvZiB2YWx1ZS5jb2x1bW5zKSB7XG4gICAgICB0dnAuY29sdW1ucy5wdXNoKHtcbiAgICAgICAgbmFtZTogY29sLm5hbWUsXG4gICAgICAgIHR5cGU6IGdldFRlZGlvdXNUeXBlKGNvbC50eXBlKSxcbiAgICAgICAgbGVuZ3RoOiBjb2wubGVuZ3RoLFxuICAgICAgICBzY2FsZTogY29sLnNjYWxlLFxuICAgICAgICBwcmVjaXNpb246IGNvbC5wcmVjaXNpb25cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHR2cFxuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZVxuICB9XG59XG5cbmNsYXNzIFJlcXVlc3QgZXh0ZW5kcyBCYXNlUmVxdWVzdCB7XG4gIC8qXG4gIEV4ZWN1dGUgc3BlY2lmaWVkIHNxbCBiYXRjaC5cbiAgKi9cblxuICBfYmF0Y2ggKGJhdGNoLCBjYWxsYmFjaykge1xuICAgIHRoaXMuX2lzQmF0Y2ggPSB0cnVlXG4gICAgdGhpcy5fcXVlcnkoYmF0Y2gsIGNhbGxiYWNrKVxuICB9XG5cbiAgLypcbiAgQnVsayBsb2FkLlxuICAqL1xuXG4gIF9idWxrICh0YWJsZSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBzdXBlci5fYnVsayh0YWJsZSwgb3B0aW9ucywgZXJyID0+IHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRhYmxlLl9tYWtlQnVsaygpXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgUmVxdWVzdEVycm9yKGUsICdFUkVRVUVTVCcpKVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRhYmxlLm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBSZXF1ZXN0RXJyb3IoJ1RhYmxlIG5hbWUgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIGJ1bGsgaW5zZXJ0LicsICdFTkFNRScpKVxuICAgICAgfVxuXG4gICAgICBpZiAodGFibGUubmFtZS5jaGFyQXQoMCkgPT09ICdAJykge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IFJlcXVlc3RFcnJvcihcIllvdSBjYW4ndCB1c2UgdGFibGUgdmFyaWFibGVzIGZvciBidWxrIGluc2VydC5cIiwgJ0VOQU1FJykpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVycm9ycyA9IFtdXG4gICAgICBjb25zdCBlcnJvckhhbmRsZXJzID0ge31cbiAgICAgIGxldCBoYXNSZXR1cm5lZCA9IGZhbHNlXG5cbiAgICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGRvUmV0dXJuLCBjb25uZWN0aW9uLCBpbmZvKSA9PiB7XG4gICAgICAgIGxldCBlcnIgPSBuZXcgRXJyb3IoaW5mby5tZXNzYWdlKVxuICAgICAgICBlcnIuaW5mbyA9IGluZm9cbiAgICAgICAgZXJyID0gbmV3IFJlcXVlc3RFcnJvcihlcnIsICdFUkVRVUVTVCcpXG5cbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZG9SZXR1cm4gJiYgIWhhc1JldHVybmVkKSB7XG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IGluIGVycm9ySGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBlcnJvckhhbmRsZXJzW2V2ZW50XSlcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbGVhc2UoY29ubmVjdGlvbilcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaGFzUmV0dXJuZWQgPSB0cnVlXG4gICAgICAgICAgICBjYWxsYmFjayhlcnIpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2UgbXVzdCBjb2xsZWN0IGVycm9ycyBldmVuIGluIHN0cmVhbSBtb2RlXG4gICAgICAgIGVycm9ycy5wdXNoKGVycilcbiAgICAgIH1cblxuICAgICAgY29uc3QgaGFuZGxlSW5mbyA9IG1zZyA9PiB7XG4gICAgICAgIHRoaXMuZW1pdCgnaW5mbycsIHtcbiAgICAgICAgICBtZXNzYWdlOiBtc2cubWVzc2FnZSxcbiAgICAgICAgICBudW1iZXI6IG1zZy5udW1iZXIsXG4gICAgICAgICAgc3RhdGU6IG1zZy5zdGF0ZSxcbiAgICAgICAgICBjbGFzczogbXNnLmNsYXNzLFxuICAgICAgICAgIGxpbmVOdW1iZXI6IG1zZy5saW5lTnVtYmVyLFxuICAgICAgICAgIHNlcnZlck5hbWU6IG1zZy5zZXJ2ZXJOYW1lLFxuICAgICAgICAgIHByb2NOYW1lOiBtc2cucHJvY05hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgdGhpcy5wYXJlbnQuYWNxdWlyZSh0aGlzLCAoZXJyLCBjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrV2l0aFJlbGVhc2UgPSAoZXJyLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbGVhc2UoY29ubmVjdGlvbilcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgICAgfVxuICAgICAgICAgIGNhbGxiYWNrKGVyciwgLi4uYXJncylcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2tXaXRoUmVsZWFzZShlcnIpXG5cbiAgICAgICAgZGVidWcoJ2Nvbm5lY3Rpb24oJWQpOiBib3Jyb3dlZCB0byByZXF1ZXN0ICMlZCcsIElEUy5nZXQoY29ubmVjdGlvbiksIElEUy5nZXQodGhpcykpXG5cbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsZWQpIHtcbiAgICAgICAgICBkZWJ1ZygncmVxdWVzdCglZCk6IGNhbmNlbGVkJywgSURTLmdldCh0aGlzKSlcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2tXaXRoUmVsZWFzZShuZXcgUmVxdWVzdEVycm9yKCdDYW5jZWxlZC4nLCAnRUNBTkNFTCcpKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2FuY2VsID0gKCkgPT4ge1xuICAgICAgICAgIGRlYnVnKCdyZXF1ZXN0KCVkKTogY2FuY2VsJywgSURTLmdldCh0aGlzKSlcbiAgICAgICAgICBjb25uZWN0aW9uLmNhbmNlbCgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBhdHRhY2ggaGFuZGxlciB0byBoYW5kbGUgbXVsdGlwbGUgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAgY29ubmVjdGlvbi5vbignaW5mb01lc3NhZ2UnLCBlcnJvckhhbmRsZXJzLmluZm9NZXNzYWdlID0gaGFuZGxlSW5mbylcbiAgICAgICAgY29ubmVjdGlvbi5vbignZXJyb3JNZXNzYWdlJywgZXJyb3JIYW5kbGVycy5lcnJvck1lc3NhZ2UgPSBoYW5kbGVFcnJvci5iaW5kKG51bGwsIGZhbHNlLCBjb25uZWN0aW9uKSlcbiAgICAgICAgY29ubmVjdGlvbi5vbignZXJyb3InLCBlcnJvckhhbmRsZXJzLmVycm9yID0gaGFuZGxlRXJyb3IuYmluZChudWxsLCB0cnVlLCBjb25uZWN0aW9uKSlcblxuICAgICAgICBjb25zdCBkb25lID0gKGVyciwgcm93Q291bnQpID0+IHtcbiAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgd2UgaGFuZGxlIG5vLXNxbCBlcnJvcnMgYXMgd2VsbFxuICAgICAgICAgIGlmIChlcnIgJiYgKCFlcnJvcnMubGVuZ3RoIHx8IChlcnJvcnMubGVuZ3RoICYmIGVyci5tZXNzYWdlICE9PSBlcnJvcnNbZXJyb3JzLmxlbmd0aCAtIDFdLm1lc3NhZ2UpKSkge1xuICAgICAgICAgICAgZXJyID0gbmV3IFJlcXVlc3RFcnJvcihlcnIsICdFUkVRVUVTVCcpXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpXG4gICAgICAgICAgICBlcnJvcnMucHVzaChlcnIpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2NhbmNlbFxuXG4gICAgICAgICAgbGV0IGVycm9yXG4gICAgICAgICAgaWYgKGVycm9ycy5sZW5ndGggJiYgIXRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICBlcnJvciA9IGVycm9ycy5wb3AoKVxuICAgICAgICAgICAgZXJyb3IucHJlY2VkaW5nRXJyb3JzID0gZXJyb3JzXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFoYXNSZXR1cm5lZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBpbiBlcnJvckhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgIGNvbm5lY3Rpb24ucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGVycm9ySGFuZGxlcnNbZXZlbnRdKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoYXNSZXR1cm5lZCA9IHRydWVcblxuICAgICAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrV2l0aFJlbGVhc2UobnVsbCwgcm93Q291bnQpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjYWxsYmFja1dpdGhSZWxlYXNlKGVycm9yLCByb3dDb3VudClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidWxrID0gY29ubmVjdGlvbi5uZXdCdWxrTG9hZCh0YWJsZS5wYXRoLCBvcHRpb25zLCBkb25lKVxuXG4gICAgICAgIGZvciAoY29uc3QgY29sIG9mIHRhYmxlLmNvbHVtbnMpIHtcbiAgICAgICAgICBidWxrLmFkZENvbHVtbihjb2wubmFtZSwgZ2V0VGVkaW91c1R5cGUoY29sLnR5cGUpLCB7IG51bGxhYmxlOiBjb2wubnVsbGFibGUsIGxlbmd0aDogY29sLmxlbmd0aCwgc2NhbGU6IGNvbC5zY2FsZSwgcHJlY2lzaW9uOiBjb2wucHJlY2lzaW9uIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFibGUuY3JlYXRlKSB7XG4gICAgICAgICAgY29uc3Qgb2JqZWN0aWQgPSB0YWJsZS50ZW1wb3JhcnkgPyBgdGVtcGRiLi5bJHt0YWJsZS5uYW1lfV1gIDogdGFibGUucGF0aFxuICAgICAgICAgIGNvbnN0IHJlcSA9IG5ldyB0ZHMuUmVxdWVzdChgaWYgb2JqZWN0X2lkKCcke29iamVjdGlkLnJlcGxhY2UoLycvZywgJ1xcJ1xcJycpfScpIGlzIG51bGwgJHt0YWJsZS5kZWNsYXJlKCl9YCwgZXJyID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHJldHVybiBkb25lKGVycilcblxuICAgICAgICAgICAgY29ubmVjdGlvbi5leGVjQnVsa0xvYWQoYnVsaywgdGFibGUucm93cylcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMuX3NldEN1cnJlbnRSZXF1ZXN0KHJlcSlcblxuICAgICAgICAgIGNvbm5lY3Rpb24uZXhlY1NxbEJhdGNoKHJlcSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25uZWN0aW9uLmV4ZWNCdWxrTG9hZChidWxrLCB0YWJsZS5yb3dzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKlxuICBFeGVjdXRlIHNwZWNpZmllZCBzcWwgY29tbWFuZC5cbiAgKi9cblxuICBfcXVlcnkgKGNvbW1hbmQsIGNhbGxiYWNrKSB7XG4gICAgc3VwZXIuX3F1ZXJ5KGNvbW1hbmQsIGVyciA9PiB7XG4gICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuXG4gICAgICBjb25zdCByZWNvcmRzZXRzID0gW11cbiAgICAgIGNvbnN0IHJlY29yZHNldGNvbHVtbnMgPSBbXVxuICAgICAgY29uc3QgZXJyb3JzID0gW11cbiAgICAgIGNvbnN0IGVycm9ySGFuZGxlcnMgPSB7fVxuICAgICAgY29uc3Qgb3V0cHV0ID0ge31cbiAgICAgIGNvbnN0IHJvd3NBZmZlY3RlZCA9IFtdXG5cbiAgICAgIGxldCBjb2x1bW5zID0ge31cbiAgICAgIGxldCByZWNvcmRzZXQgPSBbXVxuICAgICAgbGV0IGJhdGNoTGFzdFJvdyA9IG51bGxcbiAgICAgIGxldCBiYXRjaEhhc091dHB1dCA9IGZhbHNlXG4gICAgICBsZXQgaXNDaHVua2VkUmVjb3Jkc2V0ID0gZmFsc2VcbiAgICAgIGxldCBjaHVua3NCdWZmZXIgPSBudWxsXG4gICAgICBsZXQgaGFzUmV0dXJuZWQgPSBmYWxzZVxuXG4gICAgICBjb25zdCBoYW5kbGVFcnJvciA9IChkb1JldHVybiwgY29ubmVjdGlvbiwgaW5mbykgPT4ge1xuICAgICAgICBsZXQgZXJyID0gbmV3IEVycm9yKGluZm8ubWVzc2FnZSlcbiAgICAgICAgZXJyLmluZm8gPSBpbmZvXG4gICAgICAgIGVyciA9IG5ldyBSZXF1ZXN0RXJyb3IoZXJyLCAnRVJFUVVFU1QnKVxuXG4gICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGRvUmV0dXJuICYmICFoYXNSZXR1cm5lZCkge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBpbiBlcnJvckhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5yZW1vdmVMaXN0ZW5lcihldmVudCwgZXJyb3JIYW5kbGVyc1tldmVudF0pXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZWxlYXNlKGNvbm5lY3Rpb24pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGhhc1JldHVybmVkID0gdHJ1ZVxuICAgICAgICAgICAgY2FsbGJhY2soZXJyKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlIG11c3QgY29sbGVjdCBlcnJvcnMgZXZlbiBpbiBzdHJlYW0gbW9kZVxuICAgICAgICBlcnJvcnMucHVzaChlcnIpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhhbmRsZUluZm8gPSBtc2cgPT4ge1xuICAgICAgICB0aGlzLmVtaXQoJ2luZm8nLCB7XG4gICAgICAgICAgbWVzc2FnZTogbXNnLm1lc3NhZ2UsXG4gICAgICAgICAgbnVtYmVyOiBtc2cubnVtYmVyLFxuICAgICAgICAgIHN0YXRlOiBtc2cuc3RhdGUsXG4gICAgICAgICAgY2xhc3M6IG1zZy5jbGFzcyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiBtc2cubGluZU51bWJlcixcbiAgICAgICAgICBzZXJ2ZXJOYW1lOiBtc2cuc2VydmVyTmFtZSxcbiAgICAgICAgICBwcm9jTmFtZTogbXNnLnByb2NOYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHRoaXMucGFyZW50LmFjcXVpcmUodGhpcywgKGVyciwgY29ubmVjdGlvbiwgY29uZmlnKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG5cbiAgICAgICAgZGVidWcoJ2Nvbm5lY3Rpb24oJWQpOiBib3Jyb3dlZCB0byByZXF1ZXN0ICMlZCcsIElEUy5nZXQoY29ubmVjdGlvbiksIElEUy5nZXQodGhpcykpXG5cbiAgICAgICAgbGV0IHJvd1xuXG4gICAgICAgIGlmICh0aGlzLmNhbmNlbGVkKSB7XG4gICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBjYW5jZWxlZCcsIElEUy5nZXQodGhpcykpXG4gICAgICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZShjb25uZWN0aW9uKVxuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgUmVxdWVzdEVycm9yKCdDYW5jZWxlZC4nLCAnRUNBTkNFTCcpKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2FuY2VsID0gKCkgPT4ge1xuICAgICAgICAgIGRlYnVnKCdyZXF1ZXN0KCVkKTogY2FuY2VsJywgSURTLmdldCh0aGlzKSlcbiAgICAgICAgICBjb25uZWN0aW9uLmNhbmNlbCgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBhdHRhY2ggaGFuZGxlciB0byBoYW5kbGUgbXVsdGlwbGUgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAgY29ubmVjdGlvbi5vbignaW5mb01lc3NhZ2UnLCBlcnJvckhhbmRsZXJzLmluZm9NZXNzYWdlID0gaGFuZGxlSW5mbylcbiAgICAgICAgY29ubmVjdGlvbi5vbignZXJyb3JNZXNzYWdlJywgZXJyb3JIYW5kbGVycy5lcnJvck1lc3NhZ2UgPSBoYW5kbGVFcnJvci5iaW5kKG51bGwsIGZhbHNlLCBjb25uZWN0aW9uKSlcbiAgICAgICAgY29ubmVjdGlvbi5vbignZXJyb3InLCBlcnJvckhhbmRsZXJzLmVycm9yID0gaGFuZGxlRXJyb3IuYmluZChudWxsLCB0cnVlLCBjb25uZWN0aW9uKSlcblxuICAgICAgICBkZWJ1ZygncmVxdWVzdCglZCk6IHF1ZXJ5JywgSURTLmdldCh0aGlzKSwgY29tbWFuZClcblxuICAgICAgICBjb25zdCByZXEgPSBuZXcgdGRzLlJlcXVlc3QoY29tbWFuZCwgZXJyID0+IHtcbiAgICAgICAgICAvLyB0ZWRpb3VzIHYxNSBoYXMgc3RhcnRlZCB1c2luZyBBZ2dyZWdhdGVFcnJvcnMgdG8gd3JhcCBtdWx0aXBsZSBlcnJvcnMgaW50byBzaW5nbGUgZXJyb3Igb2JqZWN0c1xuICAgICAgICAgIChlcnI/LmVycm9ycyA/IGVyci5lcnJvcnMgOiBbZXJyXSkuZm9yRWFjaCgoZSwgaSwgeyBsZW5ndGggfSkgPT4ge1xuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIHdlIGhhbmRsZSBuby1zcWwgZXJyb3JzIGFzIHdlbGxcbiAgICAgICAgICAgIGlmIChlICYmICghZXJyb3JzLmxlbmd0aCB8fCAoZXJyb3JzLmxlbmd0aCAmJiBlcnJvcnMubGVuZ3RoID49IGxlbmd0aCAmJiBlLm1lc3NhZ2UgIT09IGVycm9yc1tlcnJvcnMubGVuZ3RoIC0gbGVuZ3RoICsgaV0ubWVzc2FnZSkpKSB7XG4gICAgICAgICAgICAgIGUgPSBuZXcgUmVxdWVzdEVycm9yKGUsICdFUkVRVUVTVCcpXG4gICAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkgdGhpcy5lbWl0KCdlcnJvcicsIGUpXG4gICAgICAgICAgICAgIGVycm9ycy5wdXNoKGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIHByb2Nlc3MgYmF0Y2ggb3V0cHV0c1xuICAgICAgICAgIGlmIChiYXRjaEhhc091dHB1dCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0cmVhbSkgYmF0Y2hMYXN0Um93ID0gcmVjb3Jkc2V0cy5wb3AoKVswXVxuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gYmF0Y2hMYXN0Um93KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYmF0Y2hMYXN0Um93W25hbWVdXG4gICAgICAgICAgICAgIGlmIChuYW1lICE9PSAnX19fcmV0dXJuX19fJykge1xuICAgICAgICAgICAgICAgIG91dHB1dFtuYW1lXSA9IHZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkZWxldGUgdGhpcy5fY2FuY2VsXG5cbiAgICAgICAgICBsZXQgZXJyb3JcbiAgICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCAmJiAhdGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgIGVycm9yID0gZXJyb3JzLnBvcCgpXG4gICAgICAgICAgICBlcnJvci5wcmVjZWRpbmdFcnJvcnMgPSBlcnJvcnNcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWhhc1JldHVybmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IGluIGVycm9ySGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgY29ubmVjdGlvbi5yZW1vdmVMaXN0ZW5lcihldmVudCwgZXJyb3JIYW5kbGVyc1tldmVudF0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbGVhc2UoY29ubmVjdGlvbilcbiAgICAgICAgICAgIGhhc1JldHVybmVkID0gdHJ1ZVxuXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBmYWlsZWQnLCBJRFMuZ2V0KHRoaXMpLCBlcnJvcilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlYnVnKCdyZXF1ZXN0KCVkKTogY29tcGxldGVkJywgSURTLmdldCh0aGlzKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIG51bGwsIG91dHB1dCwgcm93c0FmZmVjdGVkLCByZWNvcmRzZXRjb2x1bW5zKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHJlY29yZHNldHMsIG91dHB1dCwgcm93c0FmZmVjdGVkLCByZWNvcmRzZXRjb2x1bW5zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLl9zZXRDdXJyZW50UmVxdWVzdChyZXEpXG5cbiAgICAgICAgcmVxLm9uKCdjb2x1bW5NZXRhZGF0YScsIG1ldGFkYXRhID0+IHtcbiAgICAgICAgICBjb2x1bW5zID0gY3JlYXRlQ29sdW1ucyhtZXRhZGF0YSwgdGhpcy5hcnJheVJvd01vZGUpXG5cbiAgICAgICAgICBpc0NodW5rZWRSZWNvcmRzZXQgPSBmYWxzZVxuICAgICAgICAgIGlmIChtZXRhZGF0YS5sZW5ndGggPT09IDEgJiYgKG1ldGFkYXRhWzBdLmNvbE5hbWUgPT09IEpTT05fQ09MVU1OX0lEIHx8IG1ldGFkYXRhWzBdLmNvbE5hbWUgPT09IFhNTF9DT0xVTU5fSUQpKSB7XG4gICAgICAgICAgICBpc0NodW5rZWRSZWNvcmRzZXQgPSB0cnVlXG4gICAgICAgICAgICBjaHVua3NCdWZmZXIgPSBbXVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzQmF0Y2gpIHtcbiAgICAgICAgICAgICAgLy8gZG9uJ3Qgc3RyZWFtIHJlY29yZHNldCB3aXRoIG91dHB1dCB2YWx1ZXMgaW4gYmF0Y2hlc1xuICAgICAgICAgICAgICBpZiAoIWNvbHVtbnMuX19fcmV0dXJuX19fKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdyZWNvcmRzZXQnLCBjb2x1bW5zKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3JlY29yZHNldCcsIGNvbHVtbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSkgcmVjb3Jkc2V0Y29sdW1ucy5wdXNoKGNvbHVtbnMpXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgZG9uZUhhbmRsZXIgPSAocm93Q291bnQsIG1vcmUpID0+IHtcbiAgICAgICAgICBpZiAocm93Q291bnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgcm93c0FmZmVjdGVkLnB1c2gocm93Q291bnQpXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgdGhpcy5lbWl0KCdyb3dzYWZmZWN0ZWQnLCByb3dDb3VudClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZXZlbiB3aGVuIHNlbGVjdCBvbmx5IHNldCB2YXJpYWJsZXMgc28gd2Ugc2hvdWxkIHNraXAgYWRkaW5nIGEgbmV3IHJlY29yZHNldFxuICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhjb2x1bW5zKS5sZW5ndGggPT09IDApIHJldHVyblxuXG4gICAgICAgICAgaWYgKGlzQ2h1bmtlZFJlY29yZHNldCkge1xuICAgICAgICAgICAgY29uc3QgY29uY2F0ZW5hdGVkQ2h1bmtzID0gY2h1bmtzQnVmZmVyLmpvaW4oJycpXG4gICAgICAgICAgICBpZiAoY29sdW1uc1tKU09OX0NPTFVNTl9JRF0gJiYgY29uZmlnLnBhcnNlSlNPTiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb25jYXRlbmF0ZWRDaHVua3MgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICByb3cgPSBudWxsXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJvdyA9IEpTT04ucGFyc2UoY29uY2F0ZW5hdGVkQ2h1bmtzKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICByb3cgPSBudWxsXG4gICAgICAgICAgICAgICAgY29uc3QgZXgyID0gbmV3IFJlcXVlc3RFcnJvcihuZXcgRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBpbmNvbWluZyBKU09OLiAke2V4Lm1lc3NhZ2V9YCksICdFSlNPTicpXG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHRoaXMuZW1pdCgnZXJyb3InLCBleDIpXG5cbiAgICAgICAgICAgICAgICAvLyB3ZSBtdXN0IGNvbGxlY3QgZXJyb3JzIGV2ZW4gaW4gc3RyZWFtIG1vZGVcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChleDIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJvdyA9IHt9XG4gICAgICAgICAgICAgIHJvd1tPYmplY3Qua2V5cyhjb2x1bW5zKVswXV0gPSBjb25jYXRlbmF0ZWRDaHVua3NcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2h1bmtzQnVmZmVyID0gbnVsbFxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgdGhpcy5lbWl0KCdyb3cnLCByb3cpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZWNvcmRzZXQucHVzaChyb3cpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCF0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgLy8gYWxsIHJvd3Mgb2YgY3VycmVudCByZWNvcmRzZXQgbG9hZGVkXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVjb3Jkc2V0LCAnY29sdW1ucycsIHtcbiAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgdmFsdWU6IGNvbHVtbnNcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWNvcmRzZXQsICd0b1RhYmxlJywge1xuICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICB2YWx1ZSAobmFtZSkgeyByZXR1cm4gVGFibGUuZnJvbVJlY29yZHNldCh0aGlzLCBuYW1lKSB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZWNvcmRzZXRzLnB1c2gocmVjb3Jkc2V0KVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlY29yZHNldCA9IFtdXG4gICAgICAgICAgY29sdW1ucyA9IHt9XG4gICAgICAgIH1cblxuICAgICAgICByZXEub24oJ2RvbmVJblByb2MnLCBkb25lSGFuZGxlcikgLy8gZG9uZUluUHJvYyBoYW5kbGVycyBhcmUgdXNlZCBpbiBib3RoIHF1ZXJpZXMgYW5kIGJhdGNoZXNcbiAgICAgICAgcmVxLm9uKCdkb25lJywgZG9uZUhhbmRsZXIpIC8vIGRvbmUgaGFuZGxlcnMgYXJlIHVzZWQgaW4gYmF0Y2hlc1xuXG4gICAgICAgIHJlcS5vbigncmV0dXJuVmFsdWUnLCAocGFyYW1ldGVyTmFtZSwgdmFsdWUsIG1ldGFkYXRhKSA9PiB7XG4gICAgICAgICAgb3V0cHV0W3BhcmFtZXRlck5hbWVdID0gdmFsdWVcbiAgICAgICAgfSlcblxuICAgICAgICByZXEub24oJ3JvdycsIGNvbHVtbnMgPT4ge1xuICAgICAgICAgIGlmICghcmVjb3Jkc2V0KSByZWNvcmRzZXQgPSBbXVxuXG4gICAgICAgICAgaWYgKGlzQ2h1bmtlZFJlY29yZHNldCkge1xuICAgICAgICAgICAgcmV0dXJuIGNodW5rc0J1ZmZlci5wdXNoKGNvbHVtbnNbMF0udmFsdWUpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuYXJyYXlSb3dNb2RlKSB7XG4gICAgICAgICAgICByb3cgPSBbXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByb3cgPSB7fVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IGNvbCBvZiBjb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2wudmFsdWUgPSB2YWx1ZUNvcnJlY3Rpb24oY29sLnZhbHVlLCBjb2wubWV0YWRhdGEpXG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSkge1xuICAgICAgICAgICAgICByb3cucHVzaChjb2wudmFsdWUpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBleGkgPSByb3dbY29sLm1ldGFkYXRhLmNvbE5hbWVdXG4gICAgICAgICAgICAgIGlmIChleGkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChleGkgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgICAgZXhpLnB1c2goY29sLnZhbHVlKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByb3dbY29sLm1ldGFkYXRhLmNvbE5hbWVdID0gW2V4aSwgY29sLnZhbHVlXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByb3dbY29sLm1ldGFkYXRhLmNvbE5hbWVdID0gY29sLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0JhdGNoKSB7XG4gICAgICAgICAgICAgIC8vIGRvbnQgc3RyZWFtIHJlY29yZHNldCB3aXRoIG91dHB1dCB2YWx1ZXMgaW4gYmF0Y2hlc1xuICAgICAgICAgICAgICBpZiAocm93Ll9fX3JldHVybl9fXykge1xuICAgICAgICAgICAgICAgIGJhdGNoTGFzdFJvdyA9IHJvd1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgncm93Jywgcm93KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3JvdycsIHJvdylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVjb3Jkc2V0LnB1c2gocm93KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBpZiAodGhpcy5faXNCYXRjaCkge1xuICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnBhcmFtZXRlcnMpLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMucGFyYW1ldGVycykge1xuICAgICAgICAgICAgICBpZiAoIW9iamVjdEhhc1Byb3BlcnR5KHRoaXMucGFyYW1ldGVycywgbmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gdGhpcy5wYXJhbWV0ZXJzW25hbWVdXG5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwYXJhbS52YWx1ZSA9IGdldFRlZGlvdXNUeXBlKHBhcmFtLnR5cGUpLnZhbGlkYXRlKHBhcmFtLnZhbHVlLCB0aGlzLnBhcmVudC5jb2xsYXRpb24pXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBlLm1lc3NhZ2UgPSBgVmFsaWRhdGlvbiBmYWlsZWQgZm9yIHBhcmFtZXRlciAnJHtuYW1lfScuICR7ZS5tZXNzYWdlfWBcbiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgUmVxdWVzdEVycm9yKGUsICdFUEFSQU0nKVxuXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZShjb25uZWN0aW9uKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gW11cbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB0aGlzLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgaWYgKCFvYmplY3RIYXNQcm9wZXJ0eSh0aGlzLnBhcmFtZXRlcnMsIG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMucGFyYW1ldGVyc1tuYW1lXVxuICAgICAgICAgICAgICBkZWNsYXJhdGlvbnMucHVzaChgQCR7bmFtZX0gJHtkZWNsYXJlKHBhcmFtLnR5cGUsIHBhcmFtKX1gKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBhc3NpZ25zID0gW11cbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB0aGlzLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgaWYgKCFvYmplY3RIYXNQcm9wZXJ0eSh0aGlzLnBhcmFtZXRlcnMsIG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMucGFyYW1ldGVyc1tuYW1lXVxuICAgICAgICAgICAgICBhc3NpZ25zLnB1c2goYEAke25hbWV9ID0gJHtjYXN0KHBhcmFtLnZhbHVlLCBwYXJhbS50eXBlLCBwYXJhbSl9YClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0cyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgIGlmICghb2JqZWN0SGFzUHJvcGVydHkodGhpcy5wYXJhbWV0ZXJzLCBuYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLnBhcmFtZXRlcnNbbmFtZV1cbiAgICAgICAgICAgICAgaWYgKHBhcmFtLmlvID09PSAyKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0cy5wdXNoKGBAJHtuYW1lfSBhcyBbJHtuYW1lfV1gKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJhdGNoSGFzT3V0cHV0ID0gc2VsZWN0cy5sZW5ndGggPiAwXG5cbiAgICAgICAgICAgIHJlcS5zcWxUZXh0T3JQcm9jZWR1cmUgPSBgZGVjbGFyZSAke2RlY2xhcmF0aW9ucy5qb2luKCcsICcpfTtzZWxlY3QgJHthc3NpZ25zLmpvaW4oJywgJyl9OyR7cmVxLnNxbFRleHRPclByb2NlZHVyZX07JHtiYXRjaEhhc091dHB1dCA/IChgc2VsZWN0IDEgYXMgW19fX3JldHVybl9fX10sICR7c2VsZWN0cy5qb2luKCcsICcpfWApIDogJyd9YFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoIW9iamVjdEhhc1Byb3BlcnR5KHRoaXMucGFyYW1ldGVycywgbmFtZSkpIHtcbiAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gdGhpcy5wYXJhbWV0ZXJzW25hbWVdXG4gICAgICAgICAgICBpZiAocGFyYW0uaW8gPT09IDEpIHtcbiAgICAgICAgICAgICAgcmVxLmFkZFBhcmFtZXRlcihwYXJhbS5uYW1lLCBnZXRUZWRpb3VzVHlwZShwYXJhbS50eXBlKSwgcGFyYW1ldGVyQ29ycmVjdGlvbihwYXJhbS52YWx1ZSksIHsgbGVuZ3RoOiBwYXJhbS5sZW5ndGgsIHNjYWxlOiBwYXJhbS5zY2FsZSwgcHJlY2lzaW9uOiBwYXJhbS5wcmVjaXNpb24gfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlcS5hZGRPdXRwdXRQYXJhbWV0ZXIocGFyYW0ubmFtZSwgZ2V0VGVkaW91c1R5cGUocGFyYW0udHlwZSksIHBhcmFtZXRlckNvcnJlY3Rpb24ocGFyYW0udmFsdWUpLCB7IGxlbmd0aDogcGFyYW0ubGVuZ3RoLCBzY2FsZTogcGFyYW0uc2NhbGUsIHByZWNpc2lvbjogcGFyYW0ucHJlY2lzaW9uIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25uZWN0aW9uW3RoaXMuX2lzQmF0Y2ggPyAnZXhlY1NxbEJhdGNoJyA6ICdleGVjU3FsJ10ocmVxKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGhhbmRsZUVycm9yKHRydWUsIGNvbm5lY3Rpb24sIGVycm9yKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKlxuICBFeGVjdXRlIHN0b3JlZCBwcm9jZWR1cmUgd2l0aCBzcGVjaWZpZWQgcGFyYW1ldGVycy5cbiAgKi9cblxuICBfZXhlY3V0ZSAocHJvY2VkdXJlLCBjYWxsYmFjaykge1xuICAgIHN1cGVyLl9leGVjdXRlKHByb2NlZHVyZSwgZXJyID0+IHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG5cbiAgICAgIGNvbnN0IHJlY29yZHNldHMgPSBbXVxuICAgICAgY29uc3QgcmVjb3Jkc2V0Y29sdW1ucyA9IFtdXG4gICAgICBjb25zdCBlcnJvcnMgPSBbXVxuICAgICAgY29uc3QgZXJyb3JIYW5kbGVycyA9IHt9XG4gICAgICBjb25zdCBvdXRwdXQgPSB7fVxuICAgICAgY29uc3Qgcm93c0FmZmVjdGVkID0gW11cblxuICAgICAgbGV0IGNvbHVtbnMgPSB7fVxuICAgICAgbGV0IHJlY29yZHNldCA9IFtdXG4gICAgICBsZXQgcmV0dXJuVmFsdWUgPSAwXG4gICAgICBsZXQgaXNDaHVua2VkUmVjb3Jkc2V0ID0gZmFsc2VcbiAgICAgIGxldCBjaHVua3NCdWZmZXIgPSBudWxsXG4gICAgICBsZXQgaGFzUmV0dXJuZWQgPSBmYWxzZVxuXG4gICAgICBjb25zdCBoYW5kbGVFcnJvciA9IChkb1JldHVybiwgY29ubmVjdGlvbiwgaW5mbykgPT4ge1xuICAgICAgICBsZXQgZXJyID0gbmV3IEVycm9yKGluZm8ubWVzc2FnZSlcbiAgICAgICAgZXJyLmluZm8gPSBpbmZvXG4gICAgICAgIGVyciA9IG5ldyBSZXF1ZXN0RXJyb3IoZXJyLCAnRVJFUVVFU1QnKVxuXG4gICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGRvUmV0dXJuICYmICFoYXNSZXR1cm5lZCkge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBpbiBlcnJvckhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5yZW1vdmVMaXN0ZW5lcihldmVudCwgZXJyb3JIYW5kbGVyc1tldmVudF0pXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZWxlYXNlKGNvbm5lY3Rpb24pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGhhc1JldHVybmVkID0gdHJ1ZVxuICAgICAgICAgICAgY2FsbGJhY2soZXJyKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlIG11c3QgY29sbGVjdCBlcnJvcnMgZXZlbiBpbiBzdHJlYW0gbW9kZVxuICAgICAgICBlcnJvcnMucHVzaChlcnIpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhhbmRsZUluZm8gPSBtc2cgPT4ge1xuICAgICAgICB0aGlzLmVtaXQoJ2luZm8nLCB7XG4gICAgICAgICAgbWVzc2FnZTogbXNnLm1lc3NhZ2UsXG4gICAgICAgICAgbnVtYmVyOiBtc2cubnVtYmVyLFxuICAgICAgICAgIHN0YXRlOiBtc2cuc3RhdGUsXG4gICAgICAgICAgY2xhc3M6IG1zZy5jbGFzcyxcbiAgICAgICAgICBsaW5lTnVtYmVyOiBtc2cubGluZU51bWJlcixcbiAgICAgICAgICBzZXJ2ZXJOYW1lOiBtc2cuc2VydmVyTmFtZSxcbiAgICAgICAgICBwcm9jTmFtZTogbXNnLnByb2NOYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHRoaXMucGFyZW50LmFjcXVpcmUodGhpcywgKGVyciwgY29ubmVjdGlvbiwgY29uZmlnKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG5cbiAgICAgICAgZGVidWcoJ2Nvbm5lY3Rpb24oJWQpOiBib3Jyb3dlZCB0byByZXF1ZXN0ICMlZCcsIElEUy5nZXQoY29ubmVjdGlvbiksIElEUy5nZXQodGhpcykpXG5cbiAgICAgICAgbGV0IHJvd1xuXG4gICAgICAgIGlmICh0aGlzLmNhbmNlbGVkKSB7XG4gICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBjYW5jZWxlZCcsIElEUy5nZXQodGhpcykpXG4gICAgICAgICAgdGhpcy5wYXJlbnQucmVsZWFzZShjb25uZWN0aW9uKVxuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgUmVxdWVzdEVycm9yKCdDYW5jZWxlZC4nLCAnRUNBTkNFTCcpKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2FuY2VsID0gKCkgPT4ge1xuICAgICAgICAgIGRlYnVnKCdyZXF1ZXN0KCVkKTogY2FuY2VsJywgSURTLmdldCh0aGlzKSlcbiAgICAgICAgICBjb25uZWN0aW9uLmNhbmNlbCgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBhdHRhY2ggaGFuZGxlciB0byBoYW5kbGUgbXVsdGlwbGUgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAgY29ubmVjdGlvbi5vbignaW5mb01lc3NhZ2UnLCBlcnJvckhhbmRsZXJzLmluZm9NZXNzYWdlID0gaGFuZGxlSW5mbylcbiAgICAgICAgY29ubmVjdGlvbi5vbignZXJyb3JNZXNzYWdlJywgZXJyb3JIYW5kbGVycy5lcnJvck1lc3NhZ2UgPSBoYW5kbGVFcnJvci5iaW5kKG51bGwsIGZhbHNlLCBjb25uZWN0aW9uKSlcbiAgICAgICAgY29ubmVjdGlvbi5vbignZXJyb3InLCBlcnJvckhhbmRsZXJzLmVycm9yID0gaGFuZGxlRXJyb3IuYmluZChudWxsLCB0cnVlLCBjb25uZWN0aW9uKSlcblxuICAgICAgICBpZiAoZGVidWcuZW5hYmxlZCkge1xuICAgICAgICAgIC8vIGxvZyBzdG9yZWQgcHJvY2VkdXJlIGV4ZWN1dGlvbnMgYW5kIHByb3ZpZGVkIHBhcmFtZXRlcnNcbiAgICAgICAgICBjb25zdCBwYXJhbXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtZXRlcnMpLm1hcChrID0+IHRoaXMucGFyYW1ldGVyc1trXSlcbiAgICAgICAgICAvLyBjdXQgbG9uZyBzdHJpbmcgcGFyYW1ldGVycyBzaG9ydCB0byBrZWVwIGxvZyBzb21ld2hhdCBjbGVhblxuICAgICAgICAgIGNvbnN0IGxvZ1ZhbHVlID0gcyA9PiB0eXBlb2YgcyA9PT0gJ3N0cmluZycgJiYgcy5sZW5ndGggPiA1MCA/IHMuc3Vic3RyaW5nKDAsIDQ3KSArICcuLi4nIDogc1xuICAgICAgICAgIC8vIGZvcm1hdCBwYXJhbWV0ZXIgbmFtZXMgYXMgJ215X3BhcmFtZXRlciBbc3FsLkludF0nXG4gICAgICAgICAgY29uc3QgbG9nTmFtZSA9IHBhcmFtID0+IHBhcmFtLm5hbWUgKyAnIFtzcWwuJyArIHBhcmFtLnR5cGUubmFtZSArICddJ1xuICAgICAgICAgIGNvbnN0IGxvZ1BhcmFtcyA9IHt9XG4gICAgICAgICAgcGFyYW1zLmZvckVhY2gocCA9PiB7IGxvZ1BhcmFtc1tsb2dOYW1lKHApXSA9IGxvZ1ZhbHVlKHAudmFsdWUpIH0pXG4gICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBleGVjdXRlICVzICVPJywgSURTLmdldCh0aGlzKSwgcHJvY2VkdXJlLCBsb2dQYXJhbXMpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXEgPSBuZXcgdGRzLlJlcXVlc3QocHJvY2VkdXJlLCBlcnIgPT4ge1xuICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSB3ZSBoYW5kbGUgbm8tc3FsIGVycm9ycyBhcyB3ZWxsXG4gICAgICAgICAgaWYgKGVyciAmJiAoIWVycm9ycy5sZW5ndGggfHwgKGVycm9ycy5sZW5ndGggJiYgZXJyLm1lc3NhZ2UgIT09IGVycm9yc1tlcnJvcnMubGVuZ3RoIC0gMV0ubWVzc2FnZSkpKSB7XG4gICAgICAgICAgICBlcnIgPSBuZXcgUmVxdWVzdEVycm9yKGVyciwgJ0VSRVFVRVNUJylcbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkgdGhpcy5lbWl0KCdlcnJvcicsIGVycilcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGVycilcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkZWxldGUgdGhpcy5fY2FuY2VsXG5cbiAgICAgICAgICBsZXQgZXJyb3JcbiAgICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCAmJiAhdGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgIGVycm9yID0gZXJyb3JzLnBvcCgpXG4gICAgICAgICAgICBlcnJvci5wcmVjZWRpbmdFcnJvcnMgPSBlcnJvcnNcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWhhc1JldHVybmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IGluIGVycm9ySGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgY29ubmVjdGlvbi5yZW1vdmVMaXN0ZW5lcihldmVudCwgZXJyb3JIYW5kbGVyc1tldmVudF0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbGVhc2UoY29ubmVjdGlvbilcbiAgICAgICAgICAgIGhhc1JldHVybmVkID0gdHJ1ZVxuXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZGVidWcoJ3JlcXVlc3QoJWQpOiBmYWlsZWQnLCBJRFMuZ2V0KHRoaXMpLCBlcnJvcilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlYnVnKCdyZXF1ZXN0KCVkKTogY29tcGxldGUnLCBJRFMuZ2V0KHRoaXMpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgbnVsbCwgb3V0cHV0LCByZXR1cm5WYWx1ZSwgcm93c0FmZmVjdGVkLCByZWNvcmRzZXRjb2x1bW5zKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHJlY29yZHNldHMsIG91dHB1dCwgcmV0dXJuVmFsdWUsIHJvd3NBZmZlY3RlZCwgcmVjb3Jkc2V0Y29sdW1ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5fc2V0Q3VycmVudFJlcXVlc3QocmVxKVxuXG4gICAgICAgIHJlcS5vbignY29sdW1uTWV0YWRhdGEnLCBtZXRhZGF0YSA9PiB7XG4gICAgICAgICAgY29sdW1ucyA9IGNyZWF0ZUNvbHVtbnMobWV0YWRhdGEsIHRoaXMuYXJyYXlSb3dNb2RlKVxuXG4gICAgICAgICAgaXNDaHVua2VkUmVjb3Jkc2V0ID0gZmFsc2VcbiAgICAgICAgICBpZiAoKG1ldGFkYXRhLmxlbmd0aCA9PT0gMSkgJiYgKG1ldGFkYXRhWzBdLmNvbE5hbWUgPT09IEpTT05fQ09MVU1OX0lEIHx8IG1ldGFkYXRhWzBdLmNvbE5hbWUgPT09IFhNTF9DT0xVTU5fSUQpKSB7XG4gICAgICAgICAgICBpc0NodW5rZWRSZWNvcmRzZXQgPSB0cnVlXG4gICAgICAgICAgICBjaHVua3NCdWZmZXIgPSBbXVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkgdGhpcy5lbWl0KCdyZWNvcmRzZXQnLCBjb2x1bW5zKVxuICAgICAgICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSkgcmVjb3Jkc2V0Y29sdW1ucy5wdXNoKGNvbHVtbnMpXG4gICAgICAgIH0pXG5cbiAgICAgICAgcmVxLm9uKCdyb3cnLCBjb2x1bW5zID0+IHtcbiAgICAgICAgICBpZiAoIXJlY29yZHNldCkgcmVjb3Jkc2V0ID0gW11cblxuICAgICAgICAgIGlmIChpc0NodW5rZWRSZWNvcmRzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBjaHVua3NCdWZmZXIucHVzaChjb2x1bW5zWzBdLnZhbHVlKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLmFycmF5Um93TW9kZSkge1xuICAgICAgICAgICAgcm93ID0gW11cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcm93ID0ge31cbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCBjb2wgb2YgY29sdW1ucykge1xuICAgICAgICAgICAgY29sLnZhbHVlID0gdmFsdWVDb3JyZWN0aW9uKGNvbC52YWx1ZSwgY29sLm1ldGFkYXRhKVxuXG4gICAgICAgICAgICBpZiAodGhpcy5hcnJheVJvd01vZGUpIHtcbiAgICAgICAgICAgICAgcm93LnB1c2goY29sLnZhbHVlKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgZXhpID0gcm93W2NvbC5tZXRhZGF0YS5jb2xOYW1lXVxuICAgICAgICAgICAgICBpZiAoZXhpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXhpIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgIGV4aS5wdXNoKGNvbC52YWx1ZSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcm93W2NvbC5tZXRhZGF0YS5jb2xOYW1lXSA9IFtleGksIGNvbC52YWx1ZV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcm93W2NvbC5tZXRhZGF0YS5jb2xOYW1lXSA9IGNvbC52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JvdycsIHJvdylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVjb3Jkc2V0LnB1c2gocm93KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICByZXEub24oJ2RvbmVJblByb2MnLCAocm93Q291bnQsIG1vcmUpID0+IHtcbiAgICAgICAgICBpZiAocm93Q291bnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgcm93c0FmZmVjdGVkLnB1c2gocm93Q291bnQpXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgdGhpcy5lbWl0KCdyb3dzYWZmZWN0ZWQnLCByb3dDb3VudClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBmaWx0ZXIgZW1wdHkgcmVjb3Jkc2V0cyB3aGVuIE5PQ09VTlQgaXMgT0ZGXG4gICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNvbHVtbnMpLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgICAgICAgICBpZiAoaXNDaHVua2VkUmVjb3Jkc2V0KSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uc1tKU09OX0NPTFVNTl9JRF0gJiYgY29uZmlnLnBhcnNlSlNPTiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjaHVua3NCdWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICByb3cgPSBudWxsXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJvdyA9IEpTT04ucGFyc2UoY2h1bmtzQnVmZmVyLmpvaW4oJycpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICByb3cgPSBudWxsXG4gICAgICAgICAgICAgICAgY29uc3QgZXgyID0gbmV3IFJlcXVlc3RFcnJvcihuZXcgRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBpbmNvbWluZyBKU09OLiAke2V4Lm1lc3NhZ2V9YCksICdFSlNPTicpXG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHRoaXMuZW1pdCgnZXJyb3InLCBleDIpXG5cbiAgICAgICAgICAgICAgICAvLyB3ZSBtdXN0IGNvbGxlY3QgZXJyb3JzIGV2ZW4gaW4gc3RyZWFtIG1vZGVcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChleDIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJvdyA9IHt9XG4gICAgICAgICAgICAgIHJvd1tPYmplY3Qua2V5cyhjb2x1bW5zKVswXV0gPSBjaHVua3NCdWZmZXIuam9pbignJylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2h1bmtzQnVmZmVyID0gbnVsbFxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgdGhpcy5lbWl0KCdyb3cnLCByb3cpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZWNvcmRzZXQucHVzaChyb3cpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCF0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgLy8gYWxsIHJvd3Mgb2YgY3VycmVudCByZWNvcmRzZXQgbG9hZGVkXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVjb3Jkc2V0LCAnY29sdW1ucycsIHtcbiAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgdmFsdWU6IGNvbHVtbnNcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWNvcmRzZXQsICd0b1RhYmxlJywge1xuICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICB2YWx1ZSAobmFtZSkgeyByZXR1cm4gVGFibGUuZnJvbVJlY29yZHNldCh0aGlzLCBuYW1lKSB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICByZWNvcmRzZXRzLnB1c2gocmVjb3Jkc2V0KVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlY29yZHNldCA9IFtdXG4gICAgICAgICAgY29sdW1ucyA9IHt9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmVxLm9uKCdkb25lUHJvYycsIChyb3dDb3VudCwgbW9yZSwgcmV0dXJuU3RhdHVzKSA9PiB7XG4gICAgICAgICAgcmV0dXJuVmFsdWUgPSByZXR1cm5TdGF0dXNcbiAgICAgICAgfSlcblxuICAgICAgICByZXEub24oJ3JldHVyblZhbHVlJywgKHBhcmFtZXRlck5hbWUsIHZhbHVlLCBtZXRhZGF0YSkgPT4ge1xuICAgICAgICAgIG91dHB1dFtwYXJhbWV0ZXJOYW1lXSA9IHZhbHVlXG4gICAgICAgIH0pXG5cbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMucGFyYW1ldGVycykge1xuICAgICAgICAgIGlmICghb2JqZWN0SGFzUHJvcGVydHkodGhpcy5wYXJhbWV0ZXJzLCBuYW1lKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLnBhcmFtZXRlcnNbbmFtZV1cbiAgICAgICAgICBpZiAocGFyYW0uaW8gPT09IDEpIHtcbiAgICAgICAgICAgIHJlcS5hZGRQYXJhbWV0ZXIocGFyYW0ubmFtZSwgZ2V0VGVkaW91c1R5cGUocGFyYW0udHlwZSksIHBhcmFtZXRlckNvcnJlY3Rpb24ocGFyYW0udmFsdWUpLCB7IGxlbmd0aDogcGFyYW0ubGVuZ3RoLCBzY2FsZTogcGFyYW0uc2NhbGUsIHByZWNpc2lvbjogcGFyYW0ucHJlY2lzaW9uIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcS5hZGRPdXRwdXRQYXJhbWV0ZXIocGFyYW0ubmFtZSwgZ2V0VGVkaW91c1R5cGUocGFyYW0udHlwZSksIHBhcmFtZXRlckNvcnJlY3Rpb24ocGFyYW0udmFsdWUpLCB7IGxlbmd0aDogcGFyYW0ubGVuZ3RoLCBzY2FsZTogcGFyYW0uc2NhbGUsIHByZWNpc2lvbjogcGFyYW0ucHJlY2lzaW9uIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29ubmVjdGlvbi5jYWxsUHJvY2VkdXJlKHJlcSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIF9wYXVzZSAoKSB7XG4gICAgc3VwZXIuX3BhdXNlKClcbiAgICBpZiAodGhpcy5fY3VycmVudFJlcXVlc3QpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRSZXF1ZXN0LnBhdXNlKClcbiAgICB9XG4gIH1cblxuICBfcmVzdW1lICgpIHtcbiAgICBzdXBlci5fcmVzdW1lKClcbiAgICBpZiAodGhpcy5fY3VycmVudFJlcXVlc3QpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRSZXF1ZXN0LnJlc3VtZSgpXG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVxdWVzdFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/tedious/request.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/tedious/transaction.js":
/*!*******************************************************!*\
  !*** ./node_modules/mssql/lib/tedious/transaction.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst debug = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\")('mssql:tedi')\nconst BaseTransaction = __webpack_require__(/*! ../base/transaction */ \"(rsc)/./node_modules/mssql/lib/base/transaction.js\")\nconst { IDS } = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/mssql/lib/utils.js\")\nconst TransactionError = __webpack_require__(/*! ../error/transaction-error */ \"(rsc)/./node_modules/mssql/lib/error/transaction-error.js\")\n\nclass Transaction extends BaseTransaction {\n  constructor (parent) {\n    super(parent)\n\n    this._abort = () => {\n      if (!this._rollbackRequested) {\n        // transaction interrupted because of XACT_ABORT\n\n        const pc = this._acquiredConnection\n\n        // defer releasing so connection can switch from SentClientRequest to LoggedIn state\n        setImmediate(this.parent.release.bind(this.parent), pc)\n\n        this._acquiredConnection.removeListener('rollbackTransaction', this._abort)\n        this._acquiredConnection = null\n        this._acquiredConfig = null\n        this._aborted = true\n\n        this.emit('rollback', true)\n      }\n    }\n  }\n\n  _begin (isolationLevel, callback) {\n    super._begin(isolationLevel, err => {\n      if (err) return callback(err)\n\n      debug('transaction(%d): begin', IDS.get(this))\n\n      this.parent.acquire(this, (err, connection, config) => {\n        if (err) return callback(err)\n\n        this._acquiredConnection = connection\n        this._acquiredConnection.on('rollbackTransaction', this._abort)\n        this._acquiredConfig = config\n\n        connection.beginTransaction(err => {\n          if (err) err = new TransactionError(err)\n\n          debug('transaction(%d): begun', IDS.get(this))\n\n          callback(err)\n        }, this.name, this.isolationLevel)\n      })\n    })\n  }\n\n  _commit (callback) {\n    super._commit(err => {\n      if (err) return callback(err)\n\n      debug('transaction(%d): commit', IDS.get(this))\n\n      this._acquiredConnection.commitTransaction(err => {\n        if (err) err = new TransactionError(err)\n\n        this._acquiredConnection.removeListener('rollbackTransaction', this._abort)\n        this.parent.release(this._acquiredConnection)\n        this._acquiredConnection = null\n        this._acquiredConfig = null\n\n        if (!err) debug('transaction(%d): commited', IDS.get(this))\n\n        callback(err)\n      })\n    })\n  }\n\n  _rollback (callback) {\n    super._rollback(err => {\n      if (err) return callback(err)\n\n      debug('transaction(%d): rollback', IDS.get(this))\n\n      this._acquiredConnection.rollbackTransaction(err => {\n        if (err) err = new TransactionError(err)\n\n        this._acquiredConnection.removeListener('rollbackTransaction', this._abort)\n        this.parent.release(this._acquiredConnection)\n        this._acquiredConnection = null\n        this._acquiredConfig = null\n\n        if (!err) debug('transaction(%d): rolled back', IDS.get(this))\n\n        callback(err)\n      })\n    })\n  }\n}\n\nmodule.exports = Transaction\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3RlZGlvdXMvdHJhbnNhY3Rpb24uanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosY0FBYyxtQkFBTyxDQUFDLHNEQUFPO0FBQzdCLHdCQUF3QixtQkFBTyxDQUFDLCtFQUFxQjtBQUNyRCxRQUFRLE1BQU0sRUFBRSxtQkFBTyxDQUFDLHlEQUFVO0FBQ2xDLHlCQUF5QixtQkFBTyxDQUFDLDZGQUE0Qjs7QUFFN0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLXR5cGVzY3JpcHQtcmVkdXgtc2FtcGxlLy4vbm9kZV9tb2R1bGVzL21zc3FsL2xpYi90ZWRpb3VzL3RyYW5zYWN0aW9uLmpzPzIzODgiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnbXNzcWw6dGVkaScpXG5jb25zdCBCYXNlVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuLi9iYXNlL3RyYW5zYWN0aW9uJylcbmNvbnN0IHsgSURTIH0gPSByZXF1aXJlKCcuLi91dGlscycpXG5jb25zdCBUcmFuc2FjdGlvbkVycm9yID0gcmVxdWlyZSgnLi4vZXJyb3IvdHJhbnNhY3Rpb24tZXJyb3InKVxuXG5jbGFzcyBUcmFuc2FjdGlvbiBleHRlbmRzIEJhc2VUcmFuc2FjdGlvbiB7XG4gIGNvbnN0cnVjdG9yIChwYXJlbnQpIHtcbiAgICBzdXBlcihwYXJlbnQpXG5cbiAgICB0aGlzLl9hYm9ydCA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5fcm9sbGJhY2tSZXF1ZXN0ZWQpIHtcbiAgICAgICAgLy8gdHJhbnNhY3Rpb24gaW50ZXJydXB0ZWQgYmVjYXVzZSBvZiBYQUNUX0FCT1JUXG5cbiAgICAgICAgY29uc3QgcGMgPSB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb25cblxuICAgICAgICAvLyBkZWZlciByZWxlYXNpbmcgc28gY29ubmVjdGlvbiBjYW4gc3dpdGNoIGZyb20gU2VudENsaWVudFJlcXVlc3QgdG8gTG9nZ2VkSW4gc3RhdGVcbiAgICAgICAgc2V0SW1tZWRpYXRlKHRoaXMucGFyZW50LnJlbGVhc2UuYmluZCh0aGlzLnBhcmVudCksIHBjKVxuXG4gICAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbi5yZW1vdmVMaXN0ZW5lcigncm9sbGJhY2tUcmFuc2FjdGlvbicsIHRoaXMuX2Fib3J0KVxuICAgICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24gPSBudWxsXG4gICAgICAgIHRoaXMuX2FjcXVpcmVkQ29uZmlnID0gbnVsbFxuICAgICAgICB0aGlzLl9hYm9ydGVkID0gdHJ1ZVxuXG4gICAgICAgIHRoaXMuZW1pdCgncm9sbGJhY2snLCB0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9iZWdpbiAoaXNvbGF0aW9uTGV2ZWwsIGNhbGxiYWNrKSB7XG4gICAgc3VwZXIuX2JlZ2luKGlzb2xhdGlvbkxldmVsLCBlcnIgPT4ge1xuICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcblxuICAgICAgZGVidWcoJ3RyYW5zYWN0aW9uKCVkKTogYmVnaW4nLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgICB0aGlzLnBhcmVudC5hY3F1aXJlKHRoaXMsIChlcnIsIGNvbm5lY3Rpb24sIGNvbmZpZykgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuXG4gICAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbiA9IGNvbm5lY3Rpb25cbiAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uLm9uKCdyb2xsYmFja1RyYW5zYWN0aW9uJywgdGhpcy5fYWJvcnQpXG4gICAgICAgIHRoaXMuX2FjcXVpcmVkQ29uZmlnID0gY29uZmlnXG5cbiAgICAgICAgY29ubmVjdGlvbi5iZWdpblRyYW5zYWN0aW9uKGVyciA9PiB7XG4gICAgICAgICAgaWYgKGVycikgZXJyID0gbmV3IFRyYW5zYWN0aW9uRXJyb3IoZXJyKVxuXG4gICAgICAgICAgZGVidWcoJ3RyYW5zYWN0aW9uKCVkKTogYmVndW4nLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgICAgICAgY2FsbGJhY2soZXJyKVxuICAgICAgICB9LCB0aGlzLm5hbWUsIHRoaXMuaXNvbGF0aW9uTGV2ZWwpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBfY29tbWl0IChjYWxsYmFjaykge1xuICAgIHN1cGVyLl9jb21taXQoZXJyID0+IHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG5cbiAgICAgIGRlYnVnKCd0cmFuc2FjdGlvbiglZCk6IGNvbW1pdCcsIElEUy5nZXQodGhpcykpXG5cbiAgICAgIHRoaXMuX2FjcXVpcmVkQ29ubmVjdGlvbi5jb21taXRUcmFuc2FjdGlvbihlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyKSBlcnIgPSBuZXcgVHJhbnNhY3Rpb25FcnJvcihlcnIpXG5cbiAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKCdyb2xsYmFja1RyYW5zYWN0aW9uJywgdGhpcy5fYWJvcnQpXG4gICAgICAgIHRoaXMucGFyZW50LnJlbGVhc2UodGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uKVxuICAgICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24gPSBudWxsXG4gICAgICAgIHRoaXMuX2FjcXVpcmVkQ29uZmlnID0gbnVsbFxuXG4gICAgICAgIGlmICghZXJyKSBkZWJ1ZygndHJhbnNhY3Rpb24oJWQpOiBjb21taXRlZCcsIElEUy5nZXQodGhpcykpXG5cbiAgICAgICAgY2FsbGJhY2soZXJyKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgX3JvbGxiYWNrIChjYWxsYmFjaykge1xuICAgIHN1cGVyLl9yb2xsYmFjayhlcnIgPT4ge1xuICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycilcblxuICAgICAgZGVidWcoJ3RyYW5zYWN0aW9uKCVkKTogcm9sbGJhY2snLCBJRFMuZ2V0KHRoaXMpKVxuXG4gICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24ucm9sbGJhY2tUcmFuc2FjdGlvbihlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyKSBlcnIgPSBuZXcgVHJhbnNhY3Rpb25FcnJvcihlcnIpXG5cbiAgICAgICAgdGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKCdyb2xsYmFja1RyYW5zYWN0aW9uJywgdGhpcy5fYWJvcnQpXG4gICAgICAgIHRoaXMucGFyZW50LnJlbGVhc2UodGhpcy5fYWNxdWlyZWRDb25uZWN0aW9uKVxuICAgICAgICB0aGlzLl9hY3F1aXJlZENvbm5lY3Rpb24gPSBudWxsXG4gICAgICAgIHRoaXMuX2FjcXVpcmVkQ29uZmlnID0gbnVsbFxuXG4gICAgICAgIGlmICghZXJyKSBkZWJ1ZygndHJhbnNhY3Rpb24oJWQpOiByb2xsZWQgYmFjaycsIElEUy5nZXQodGhpcykpXG5cbiAgICAgICAgY2FsbGJhY2soZXJyKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNhY3Rpb25cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/tedious/transaction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/udt.js":
/*!***************************************!*\
  !*** ./node_modules/mssql/lib/udt.js ***!
  \***************************************/
/***/ ((module) => {

eval("\n\n/* const FIGURE = {\n  INTERIOR_RING: 0x00,\n  STROKE: 0x01,\n  EXTERIOR_RING: 0x02\n};\n\nconst FIGURE_V2 = {\n  POINT: 0x00,\n  LINE: 0x01,\n  ARC: 0x02,\n  COMPOSITE_CURVE: 0x03\n};\n\nconst SHAPE = {\n  POINT: 0x01,\n  LINESTRING: 0x02,\n  POLYGON: 0x03,\n  MULTIPOINT: 0x04,\n  MULTILINESTRING: 0x05,\n  MULTIPOLYGON: 0x06,\n  GEOMETRY_COLLECTION: 0x07\n};\n\nconst SHAPE_V2 = {\n  POINT: 0x01,\n  LINESTRING: 0x02,\n  POLYGON: 0x03,\n  MULTIPOINT: 0x04,\n  MULTILINESTRING: 0x05,\n  MULTIPOLYGON: 0x06,\n  GEOMETRY_COLLECTION: 0x07,\n  CIRCULAR_STRING: 0x08,\n  COMPOUND_CURVE: 0x09,\n  CURVE_POLYGON: 0x0A,\n  FULL_GLOBE: 0x0B\n};\n\nconst SEGMENT = {\n  LINE: 0x00,\n  ARC: 0x01,\n  FIRST_LINE: 0x02,\n  FIRST_ARC: 0x03\n}; */\n\nclass Point {\n  constructor () {\n    this.x = 0\n    this.y = 0\n    this.z = null\n    this.m = null\n  }\n}\n\nconst parsePoints = (buffer, count, isGeometryPoint) => {\n  // s2.1.5 + s2.1.6\n  // The key distinction for parsing is that a GEOGRAPHY POINT is ordered Lat (y) then Long (x),\n  // while a GEOMETRY POINT is ordered x then y.\n  // Further, there are additional range constraints on GEOGRAPHY POINT that are useful for testing that the coordinate order has not been flipped, such as that Lat must be in the range [-90, +90].\n\n  const points = []\n  if (count < 1) {\n    return points\n  }\n\n  if (isGeometryPoint) {\n    // GEOMETRY POINT (s2.1.6): x then y.\n    for (let i = 1; i <= count; i++) {\n      const point = new Point()\n      points.push(point)\n      point.x = buffer.readDoubleLE(buffer.position)\n      point.y = buffer.readDoubleLE(buffer.position + 8)\n      buffer.position += 16\n    }\n  } else {\n    // GEOGRAPHY POINT (s2.1.5): Lat (y) then Long (x).\n    for (let i = 1; i <= count; i++) {\n      const point = new Point()\n      points.push(point)\n      point.lat = buffer.readDoubleLE(buffer.position)\n      point.lng = buffer.readDoubleLE(buffer.position + 8)\n\n      // For backwards compatibility, preserve the coordinate inversion in x and y.\n      // A future breaking change likely eliminate x and y for geography points in favor of just the lat and lng fields, as they've proven marvelously confusing.\n      // See discussion at: https://github.com/tediousjs/node-mssql/pull/1282#discussion_r677769531\n      point.x = point.lat\n      point.y = point.lng\n\n      buffer.position += 16\n    }\n  }\n\n  return points\n}\n\nconst parseZ = (buffer, points) => {\n  // s2.1.1 + s.2.1.2\n\n  if (points < 1) {\n    return\n  }\n\n  points.forEach(point => {\n    point.z = buffer.readDoubleLE(buffer.position)\n    buffer.position += 8\n  })\n}\n\nconst parseM = (buffer, points) => {\n  // s2.1.1 + s.2.1.2\n\n  if (points < 1) {\n    return\n  }\n\n  points.forEach(point => {\n    point.m = buffer.readDoubleLE(buffer.position)\n    buffer.position += 8\n  })\n}\n\nconst parseFigures = (buffer, count, properties) => {\n  // s2.1.3\n\n  const figures = []\n  if (count < 1) {\n    return figures\n  }\n\n  if (properties.P) {\n    figures.push({\n      attribute: 0x01,\n      pointOffset: 0\n    })\n  } else if (properties.L) {\n    figures.push({\n      attribute: 0x01,\n      pointOffset: 0\n    })\n  } else {\n    for (let i = 1; i <= count; i++) {\n      figures.push({\n        attribute: buffer.readUInt8(buffer.position),\n        pointOffset: buffer.readInt32LE(buffer.position + 1)\n      })\n\n      buffer.position += 5\n    }\n  }\n\n  return figures\n}\n\nconst parseShapes = (buffer, count, properties) => {\n  // s2.1.4\n\n  const shapes = []\n  if (count < 1) {\n    return shapes\n  }\n\n  if (properties.P) {\n    shapes.push({\n      parentOffset: -1,\n      figureOffset: 0,\n      type: 0x01\n    })\n  } else if (properties.L) {\n    shapes.push({\n      parentOffset: -1,\n      figureOffset: 0,\n      type: 0x02\n    })\n  } else {\n    for (let i = 1; i <= count; i++) {\n      shapes.push({\n        parentOffset: buffer.readInt32LE(buffer.position),\n        figureOffset: buffer.readInt32LE(buffer.position + 4),\n        type: buffer.readUInt8(buffer.position + 8)\n      })\n\n      buffer.position += 9\n    }\n  }\n\n  return shapes\n}\n\nconst parseSegments = (buffer, count) => {\n  // s2.1.7\n\n  const segments = []\n  if (count < 1) {\n    return segments\n  }\n\n  for (let i = 1; i <= count; i++) {\n    segments.push({ type: buffer.readUInt8(buffer.position) })\n\n    buffer.position++\n  }\n\n  return segments\n}\n\nconst parseGeography = (buffer, isUsingGeometryPoints) => {\n  // s2.1.1 + s.2.1.2\n\n  const srid = buffer.readInt32LE(0)\n  if (srid === -1) {\n    return null\n  }\n\n  const value = {\n    srid,\n    version: buffer.readUInt8(4)\n  }\n\n  const flags = buffer.readUInt8(5)\n  buffer.position = 6\n\n  // console.log(\"srid\", srid)\n  // console.log(\"version\", version)\n\n  const properties = {\n    Z: (flags & (1 << 0)) > 0,\n    M: (flags & (1 << 1)) > 0,\n    V: (flags & (1 << 2)) > 0,\n    P: (flags & (1 << 3)) > 0,\n    L: (flags & (1 << 4)) > 0\n  }\n\n  if (value.version === 2) {\n    properties.H = (flags & (1 << 3)) > 0\n  }\n\n  // console.log(\"properties\", properties);\n\n  let numberOfPoints\n  if (properties.P) {\n    numberOfPoints = 1\n  } else if (properties.L) {\n    numberOfPoints = 2\n  } else {\n    numberOfPoints = buffer.readUInt32LE(buffer.position)\n    buffer.position += 4\n  }\n\n  // console.log(\"numberOfPoints\", numberOfPoints)\n\n  value.points = parsePoints(buffer, numberOfPoints, isUsingGeometryPoints)\n\n  if (properties.Z) {\n    parseZ(buffer, value.points)\n  }\n\n  if (properties.M) {\n    parseM(buffer, value.points)\n  }\n\n  // console.log(\"points\", points)\n\n  let numberOfFigures\n  if (properties.P) {\n    numberOfFigures = 1\n  } else if (properties.L) {\n    numberOfFigures = 1\n  } else {\n    numberOfFigures = buffer.readUInt32LE(buffer.position)\n    buffer.position += 4\n  }\n\n  // console.log(\"numberOfFigures\", numberOfFigures)\n\n  value.figures = parseFigures(buffer, numberOfFigures, properties)\n\n  // console.log(\"figures\", figures)\n\n  let numberOfShapes\n  if (properties.P) {\n    numberOfShapes = 1\n  } else if (properties.L) {\n    numberOfShapes = 1\n  } else {\n    numberOfShapes = buffer.readUInt32LE(buffer.position)\n    buffer.position += 4\n  }\n\n  // console.log(\"numberOfShapes\", numberOfShapes)\n\n  value.shapes = parseShapes(buffer, numberOfShapes, properties)\n\n  // console.log( \"shapes\", shapes)\n\n  if (value.version === 2 && buffer.position < buffer.length) {\n    const numberOfSegments = buffer.readUInt32LE(buffer.position)\n    buffer.position += 4\n\n    // console.log(\"numberOfSegments\", numberOfSegments)\n\n    value.segments = parseSegments(buffer, numberOfSegments)\n\n    // console.log(\"segments\", segments)\n  } else {\n    value.segments = []\n  }\n\n  return value\n}\n\nmodule.exports.PARSERS = {\n  geography (buffer) {\n    return parseGeography(buffer, /* isUsingGeometryPoints: */false)\n  },\n\n  geometry (buffer) {\n    return parseGeography(buffer, /* isUsingGeometryPoints: */true)\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3VkdC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixZQUFZO0FBQzlCLG9CQUFvQix5Q0FBeUM7O0FBRTdEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvdWR0LmpzP2VlNmQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbi8qIGNvbnN0IEZJR1VSRSA9IHtcbiAgSU5URVJJT1JfUklORzogMHgwMCxcbiAgU1RST0tFOiAweDAxLFxuICBFWFRFUklPUl9SSU5HOiAweDAyXG59O1xuXG5jb25zdCBGSUdVUkVfVjIgPSB7XG4gIFBPSU5UOiAweDAwLFxuICBMSU5FOiAweDAxLFxuICBBUkM6IDB4MDIsXG4gIENPTVBPU0lURV9DVVJWRTogMHgwM1xufTtcblxuY29uc3QgU0hBUEUgPSB7XG4gIFBPSU5UOiAweDAxLFxuICBMSU5FU1RSSU5HOiAweDAyLFxuICBQT0xZR09OOiAweDAzLFxuICBNVUxUSVBPSU5UOiAweDA0LFxuICBNVUxUSUxJTkVTVFJJTkc6IDB4MDUsXG4gIE1VTFRJUE9MWUdPTjogMHgwNixcbiAgR0VPTUVUUllfQ09MTEVDVElPTjogMHgwN1xufTtcblxuY29uc3QgU0hBUEVfVjIgPSB7XG4gIFBPSU5UOiAweDAxLFxuICBMSU5FU1RSSU5HOiAweDAyLFxuICBQT0xZR09OOiAweDAzLFxuICBNVUxUSVBPSU5UOiAweDA0LFxuICBNVUxUSUxJTkVTVFJJTkc6IDB4MDUsXG4gIE1VTFRJUE9MWUdPTjogMHgwNixcbiAgR0VPTUVUUllfQ09MTEVDVElPTjogMHgwNyxcbiAgQ0lSQ1VMQVJfU1RSSU5HOiAweDA4LFxuICBDT01QT1VORF9DVVJWRTogMHgwOSxcbiAgQ1VSVkVfUE9MWUdPTjogMHgwQSxcbiAgRlVMTF9HTE9CRTogMHgwQlxufTtcblxuY29uc3QgU0VHTUVOVCA9IHtcbiAgTElORTogMHgwMCxcbiAgQVJDOiAweDAxLFxuICBGSVJTVF9MSU5FOiAweDAyLFxuICBGSVJTVF9BUkM6IDB4MDNcbn07ICovXG5cbmNsYXNzIFBvaW50IHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMueCA9IDBcbiAgICB0aGlzLnkgPSAwXG4gICAgdGhpcy56ID0gbnVsbFxuICAgIHRoaXMubSA9IG51bGxcbiAgfVxufVxuXG5jb25zdCBwYXJzZVBvaW50cyA9IChidWZmZXIsIGNvdW50LCBpc0dlb21ldHJ5UG9pbnQpID0+IHtcbiAgLy8gczIuMS41ICsgczIuMS42XG4gIC8vIFRoZSBrZXkgZGlzdGluY3Rpb24gZm9yIHBhcnNpbmcgaXMgdGhhdCBhIEdFT0dSQVBIWSBQT0lOVCBpcyBvcmRlcmVkIExhdCAoeSkgdGhlbiBMb25nICh4KSxcbiAgLy8gd2hpbGUgYSBHRU9NRVRSWSBQT0lOVCBpcyBvcmRlcmVkIHggdGhlbiB5LlxuICAvLyBGdXJ0aGVyLCB0aGVyZSBhcmUgYWRkaXRpb25hbCByYW5nZSBjb25zdHJhaW50cyBvbiBHRU9HUkFQSFkgUE9JTlQgdGhhdCBhcmUgdXNlZnVsIGZvciB0ZXN0aW5nIHRoYXQgdGhlIGNvb3JkaW5hdGUgb3JkZXIgaGFzIG5vdCBiZWVuIGZsaXBwZWQsIHN1Y2ggYXMgdGhhdCBMYXQgbXVzdCBiZSBpbiB0aGUgcmFuZ2UgWy05MCwgKzkwXS5cblxuICBjb25zdCBwb2ludHMgPSBbXVxuICBpZiAoY291bnQgPCAxKSB7XG4gICAgcmV0dXJuIHBvaW50c1xuICB9XG5cbiAgaWYgKGlzR2VvbWV0cnlQb2ludCkge1xuICAgIC8vIEdFT01FVFJZIFBPSU5UIChzMi4xLjYpOiB4IHRoZW4geS5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBwb2ludCA9IG5ldyBQb2ludCgpXG4gICAgICBwb2ludHMucHVzaChwb2ludClcbiAgICAgIHBvaW50LnggPSBidWZmZXIucmVhZERvdWJsZUxFKGJ1ZmZlci5wb3NpdGlvbilcbiAgICAgIHBvaW50LnkgPSBidWZmZXIucmVhZERvdWJsZUxFKGJ1ZmZlci5wb3NpdGlvbiArIDgpXG4gICAgICBidWZmZXIucG9zaXRpb24gKz0gMTZcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gR0VPR1JBUEhZIFBPSU5UIChzMi4xLjUpOiBMYXQgKHkpIHRoZW4gTG9uZyAoeCkuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gY291bnQ7IGkrKykge1xuICAgICAgY29uc3QgcG9pbnQgPSBuZXcgUG9pbnQoKVxuICAgICAgcG9pbnRzLnB1c2gocG9pbnQpXG4gICAgICBwb2ludC5sYXQgPSBidWZmZXIucmVhZERvdWJsZUxFKGJ1ZmZlci5wb3NpdGlvbilcbiAgICAgIHBvaW50LmxuZyA9IGJ1ZmZlci5yZWFkRG91YmxlTEUoYnVmZmVyLnBvc2l0aW9uICsgOClcblxuICAgICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCBwcmVzZXJ2ZSB0aGUgY29vcmRpbmF0ZSBpbnZlcnNpb24gaW4geCBhbmQgeS5cbiAgICAgIC8vIEEgZnV0dXJlIGJyZWFraW5nIGNoYW5nZSBsaWtlbHkgZWxpbWluYXRlIHggYW5kIHkgZm9yIGdlb2dyYXBoeSBwb2ludHMgaW4gZmF2b3Igb2YganVzdCB0aGUgbGF0IGFuZCBsbmcgZmllbGRzLCBhcyB0aGV5J3ZlIHByb3ZlbiBtYXJ2ZWxvdXNseSBjb25mdXNpbmcuXG4gICAgICAvLyBTZWUgZGlzY3Vzc2lvbiBhdDogaHR0cHM6Ly9naXRodWIuY29tL3RlZGlvdXNqcy9ub2RlLW1zc3FsL3B1bGwvMTI4MiNkaXNjdXNzaW9uX3I2Nzc3Njk1MzFcbiAgICAgIHBvaW50LnggPSBwb2ludC5sYXRcbiAgICAgIHBvaW50LnkgPSBwb2ludC5sbmdcblxuICAgICAgYnVmZmVyLnBvc2l0aW9uICs9IDE2XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBvaW50c1xufVxuXG5jb25zdCBwYXJzZVogPSAoYnVmZmVyLCBwb2ludHMpID0+IHtcbiAgLy8gczIuMS4xICsgcy4yLjEuMlxuXG4gIGlmIChwb2ludHMgPCAxKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBwb2ludHMuZm9yRWFjaChwb2ludCA9PiB7XG4gICAgcG9pbnQueiA9IGJ1ZmZlci5yZWFkRG91YmxlTEUoYnVmZmVyLnBvc2l0aW9uKVxuICAgIGJ1ZmZlci5wb3NpdGlvbiArPSA4XG4gIH0pXG59XG5cbmNvbnN0IHBhcnNlTSA9IChidWZmZXIsIHBvaW50cykgPT4ge1xuICAvLyBzMi4xLjEgKyBzLjIuMS4yXG5cbiAgaWYgKHBvaW50cyA8IDEpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHBvaW50cy5mb3JFYWNoKHBvaW50ID0+IHtcbiAgICBwb2ludC5tID0gYnVmZmVyLnJlYWREb3VibGVMRShidWZmZXIucG9zaXRpb24pXG4gICAgYnVmZmVyLnBvc2l0aW9uICs9IDhcbiAgfSlcbn1cblxuY29uc3QgcGFyc2VGaWd1cmVzID0gKGJ1ZmZlciwgY291bnQsIHByb3BlcnRpZXMpID0+IHtcbiAgLy8gczIuMS4zXG5cbiAgY29uc3QgZmlndXJlcyA9IFtdXG4gIGlmIChjb3VudCA8IDEpIHtcbiAgICByZXR1cm4gZmlndXJlc1xuICB9XG5cbiAgaWYgKHByb3BlcnRpZXMuUCkge1xuICAgIGZpZ3VyZXMucHVzaCh7XG4gICAgICBhdHRyaWJ1dGU6IDB4MDEsXG4gICAgICBwb2ludE9mZnNldDogMFxuICAgIH0pXG4gIH0gZWxzZSBpZiAocHJvcGVydGllcy5MKSB7XG4gICAgZmlndXJlcy5wdXNoKHtcbiAgICAgIGF0dHJpYnV0ZTogMHgwMSxcbiAgICAgIHBvaW50T2Zmc2V0OiAwXG4gICAgfSlcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBjb3VudDsgaSsrKSB7XG4gICAgICBmaWd1cmVzLnB1c2goe1xuICAgICAgICBhdHRyaWJ1dGU6IGJ1ZmZlci5yZWFkVUludDgoYnVmZmVyLnBvc2l0aW9uKSxcbiAgICAgICAgcG9pbnRPZmZzZXQ6IGJ1ZmZlci5yZWFkSW50MzJMRShidWZmZXIucG9zaXRpb24gKyAxKVxuICAgICAgfSlcblxuICAgICAgYnVmZmVyLnBvc2l0aW9uICs9IDVcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmlndXJlc1xufVxuXG5jb25zdCBwYXJzZVNoYXBlcyA9IChidWZmZXIsIGNvdW50LCBwcm9wZXJ0aWVzKSA9PiB7XG4gIC8vIHMyLjEuNFxuXG4gIGNvbnN0IHNoYXBlcyA9IFtdXG4gIGlmIChjb3VudCA8IDEpIHtcbiAgICByZXR1cm4gc2hhcGVzXG4gIH1cblxuICBpZiAocHJvcGVydGllcy5QKSB7XG4gICAgc2hhcGVzLnB1c2goe1xuICAgICAgcGFyZW50T2Zmc2V0OiAtMSxcbiAgICAgIGZpZ3VyZU9mZnNldDogMCxcbiAgICAgIHR5cGU6IDB4MDFcbiAgICB9KVxuICB9IGVsc2UgaWYgKHByb3BlcnRpZXMuTCkge1xuICAgIHNoYXBlcy5wdXNoKHtcbiAgICAgIHBhcmVudE9mZnNldDogLTEsXG4gICAgICBmaWd1cmVPZmZzZXQ6IDAsXG4gICAgICB0eXBlOiAweDAyXG4gICAgfSlcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBjb3VudDsgaSsrKSB7XG4gICAgICBzaGFwZXMucHVzaCh7XG4gICAgICAgIHBhcmVudE9mZnNldDogYnVmZmVyLnJlYWRJbnQzMkxFKGJ1ZmZlci5wb3NpdGlvbiksXG4gICAgICAgIGZpZ3VyZU9mZnNldDogYnVmZmVyLnJlYWRJbnQzMkxFKGJ1ZmZlci5wb3NpdGlvbiArIDQpLFxuICAgICAgICB0eXBlOiBidWZmZXIucmVhZFVJbnQ4KGJ1ZmZlci5wb3NpdGlvbiArIDgpXG4gICAgICB9KVxuXG4gICAgICBidWZmZXIucG9zaXRpb24gKz0gOVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzaGFwZXNcbn1cblxuY29uc3QgcGFyc2VTZWdtZW50cyA9IChidWZmZXIsIGNvdW50KSA9PiB7XG4gIC8vIHMyLjEuN1xuXG4gIGNvbnN0IHNlZ21lbnRzID0gW11cbiAgaWYgKGNvdW50IDwgMSkge1xuICAgIHJldHVybiBzZWdtZW50c1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gY291bnQ7IGkrKykge1xuICAgIHNlZ21lbnRzLnB1c2goeyB0eXBlOiBidWZmZXIucmVhZFVJbnQ4KGJ1ZmZlci5wb3NpdGlvbikgfSlcblxuICAgIGJ1ZmZlci5wb3NpdGlvbisrXG4gIH1cblxuICByZXR1cm4gc2VnbWVudHNcbn1cblxuY29uc3QgcGFyc2VHZW9ncmFwaHkgPSAoYnVmZmVyLCBpc1VzaW5nR2VvbWV0cnlQb2ludHMpID0+IHtcbiAgLy8gczIuMS4xICsgcy4yLjEuMlxuXG4gIGNvbnN0IHNyaWQgPSBidWZmZXIucmVhZEludDMyTEUoMClcbiAgaWYgKHNyaWQgPT09IC0xKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IHZhbHVlID0ge1xuICAgIHNyaWQsXG4gICAgdmVyc2lvbjogYnVmZmVyLnJlYWRVSW50OCg0KVxuICB9XG5cbiAgY29uc3QgZmxhZ3MgPSBidWZmZXIucmVhZFVJbnQ4KDUpXG4gIGJ1ZmZlci5wb3NpdGlvbiA9IDZcblxuICAvLyBjb25zb2xlLmxvZyhcInNyaWRcIiwgc3JpZClcbiAgLy8gY29uc29sZS5sb2coXCJ2ZXJzaW9uXCIsIHZlcnNpb24pXG5cbiAgY29uc3QgcHJvcGVydGllcyA9IHtcbiAgICBaOiAoZmxhZ3MgJiAoMSA8PCAwKSkgPiAwLFxuICAgIE06IChmbGFncyAmICgxIDw8IDEpKSA+IDAsXG4gICAgVjogKGZsYWdzICYgKDEgPDwgMikpID4gMCxcbiAgICBQOiAoZmxhZ3MgJiAoMSA8PCAzKSkgPiAwLFxuICAgIEw6IChmbGFncyAmICgxIDw8IDQpKSA+IDBcbiAgfVxuXG4gIGlmICh2YWx1ZS52ZXJzaW9uID09PSAyKSB7XG4gICAgcHJvcGVydGllcy5IID0gKGZsYWdzICYgKDEgPDwgMykpID4gMFxuICB9XG5cbiAgLy8gY29uc29sZS5sb2coXCJwcm9wZXJ0aWVzXCIsIHByb3BlcnRpZXMpO1xuXG4gIGxldCBudW1iZXJPZlBvaW50c1xuICBpZiAocHJvcGVydGllcy5QKSB7XG4gICAgbnVtYmVyT2ZQb2ludHMgPSAxXG4gIH0gZWxzZSBpZiAocHJvcGVydGllcy5MKSB7XG4gICAgbnVtYmVyT2ZQb2ludHMgPSAyXG4gIH0gZWxzZSB7XG4gICAgbnVtYmVyT2ZQb2ludHMgPSBidWZmZXIucmVhZFVJbnQzMkxFKGJ1ZmZlci5wb3NpdGlvbilcbiAgICBidWZmZXIucG9zaXRpb24gKz0gNFxuICB9XG5cbiAgLy8gY29uc29sZS5sb2coXCJudW1iZXJPZlBvaW50c1wiLCBudW1iZXJPZlBvaW50cylcblxuICB2YWx1ZS5wb2ludHMgPSBwYXJzZVBvaW50cyhidWZmZXIsIG51bWJlck9mUG9pbnRzLCBpc1VzaW5nR2VvbWV0cnlQb2ludHMpXG5cbiAgaWYgKHByb3BlcnRpZXMuWikge1xuICAgIHBhcnNlWihidWZmZXIsIHZhbHVlLnBvaW50cylcbiAgfVxuXG4gIGlmIChwcm9wZXJ0aWVzLk0pIHtcbiAgICBwYXJzZU0oYnVmZmVyLCB2YWx1ZS5wb2ludHMpXG4gIH1cblxuICAvLyBjb25zb2xlLmxvZyhcInBvaW50c1wiLCBwb2ludHMpXG5cbiAgbGV0IG51bWJlck9mRmlndXJlc1xuICBpZiAocHJvcGVydGllcy5QKSB7XG4gICAgbnVtYmVyT2ZGaWd1cmVzID0gMVxuICB9IGVsc2UgaWYgKHByb3BlcnRpZXMuTCkge1xuICAgIG51bWJlck9mRmlndXJlcyA9IDFcbiAgfSBlbHNlIHtcbiAgICBudW1iZXJPZkZpZ3VyZXMgPSBidWZmZXIucmVhZFVJbnQzMkxFKGJ1ZmZlci5wb3NpdGlvbilcbiAgICBidWZmZXIucG9zaXRpb24gKz0gNFxuICB9XG5cbiAgLy8gY29uc29sZS5sb2coXCJudW1iZXJPZkZpZ3VyZXNcIiwgbnVtYmVyT2ZGaWd1cmVzKVxuXG4gIHZhbHVlLmZpZ3VyZXMgPSBwYXJzZUZpZ3VyZXMoYnVmZmVyLCBudW1iZXJPZkZpZ3VyZXMsIHByb3BlcnRpZXMpXG5cbiAgLy8gY29uc29sZS5sb2coXCJmaWd1cmVzXCIsIGZpZ3VyZXMpXG5cbiAgbGV0IG51bWJlck9mU2hhcGVzXG4gIGlmIChwcm9wZXJ0aWVzLlApIHtcbiAgICBudW1iZXJPZlNoYXBlcyA9IDFcbiAgfSBlbHNlIGlmIChwcm9wZXJ0aWVzLkwpIHtcbiAgICBudW1iZXJPZlNoYXBlcyA9IDFcbiAgfSBlbHNlIHtcbiAgICBudW1iZXJPZlNoYXBlcyA9IGJ1ZmZlci5yZWFkVUludDMyTEUoYnVmZmVyLnBvc2l0aW9uKVxuICAgIGJ1ZmZlci5wb3NpdGlvbiArPSA0XG4gIH1cblxuICAvLyBjb25zb2xlLmxvZyhcIm51bWJlck9mU2hhcGVzXCIsIG51bWJlck9mU2hhcGVzKVxuXG4gIHZhbHVlLnNoYXBlcyA9IHBhcnNlU2hhcGVzKGJ1ZmZlciwgbnVtYmVyT2ZTaGFwZXMsIHByb3BlcnRpZXMpXG5cbiAgLy8gY29uc29sZS5sb2coIFwic2hhcGVzXCIsIHNoYXBlcylcblxuICBpZiAodmFsdWUudmVyc2lvbiA9PT0gMiAmJiBidWZmZXIucG9zaXRpb24gPCBidWZmZXIubGVuZ3RoKSB7XG4gICAgY29uc3QgbnVtYmVyT2ZTZWdtZW50cyA9IGJ1ZmZlci5yZWFkVUludDMyTEUoYnVmZmVyLnBvc2l0aW9uKVxuICAgIGJ1ZmZlci5wb3NpdGlvbiArPSA0XG5cbiAgICAvLyBjb25zb2xlLmxvZyhcIm51bWJlck9mU2VnbWVudHNcIiwgbnVtYmVyT2ZTZWdtZW50cylcblxuICAgIHZhbHVlLnNlZ21lbnRzID0gcGFyc2VTZWdtZW50cyhidWZmZXIsIG51bWJlck9mU2VnbWVudHMpXG5cbiAgICAvLyBjb25zb2xlLmxvZyhcInNlZ21lbnRzXCIsIHNlZ21lbnRzKVxuICB9IGVsc2Uge1xuICAgIHZhbHVlLnNlZ21lbnRzID0gW11cbiAgfVxuXG4gIHJldHVybiB2YWx1ZVxufVxuXG5tb2R1bGUuZXhwb3J0cy5QQVJTRVJTID0ge1xuICBnZW9ncmFwaHkgKGJ1ZmZlcikge1xuICAgIHJldHVybiBwYXJzZUdlb2dyYXBoeShidWZmZXIsIC8qIGlzVXNpbmdHZW9tZXRyeVBvaW50czogKi9mYWxzZSlcbiAgfSxcblxuICBnZW9tZXRyeSAoYnVmZmVyKSB7XG4gICAgcmV0dXJuIHBhcnNlR2VvZ3JhcGh5KGJ1ZmZlciwgLyogaXNVc2luZ0dlb21ldHJ5UG9pbnRzOiAqL3RydWUpXG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/udt.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mssql/lib/utils.js":
/*!*****************************************!*\
  !*** ./node_modules/mssql/lib/utils.js ***!
  \*****************************************/
/***/ ((module) => {

eval("\n\nconst IDS = new WeakMap()\nconst INCREMENT = {\n  Connection: 1,\n  ConnectionPool: 1,\n  Request: 1,\n  Transaction: 1,\n  PreparedStatement: 1\n}\n\nmodule.exports = {\n  objectHasProperty: (object, property) => Object.prototype.hasOwnProperty.call(object, property),\n  INCREMENT,\n  IDS: {\n    get: IDS.get.bind(IDS),\n    add: (object, type, id) => {\n      if (id) return IDS.set(object, id)\n      IDS.set(object, INCREMENT[type]++)\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbXNzcWwvbGliL3V0aWxzLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10eXBlc2NyaXB0LXJlZHV4LXNhbXBsZS8uL25vZGVfbW9kdWxlcy9tc3NxbC9saWIvdXRpbHMuanM/ZTE2NiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgSURTID0gbmV3IFdlYWtNYXAoKVxuY29uc3QgSU5DUkVNRU5UID0ge1xuICBDb25uZWN0aW9uOiAxLFxuICBDb25uZWN0aW9uUG9vbDogMSxcbiAgUmVxdWVzdDogMSxcbiAgVHJhbnNhY3Rpb246IDEsXG4gIFByZXBhcmVkU3RhdGVtZW50OiAxXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBvYmplY3RIYXNQcm9wZXJ0eTogKG9iamVjdCwgcHJvcGVydHkpID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSxcbiAgSU5DUkVNRU5ULFxuICBJRFM6IHtcbiAgICBnZXQ6IElEUy5nZXQuYmluZChJRFMpLFxuICAgIGFkZDogKG9iamVjdCwgdHlwZSwgaWQpID0+IHtcbiAgICAgIGlmIChpZCkgcmV0dXJuIElEUy5zZXQob2JqZWN0LCBpZClcbiAgICAgIElEUy5zZXQob2JqZWN0LCBJTkNSRU1FTlRbdHlwZV0rKylcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mssql/lib/utils.js\n");

/***/ })

};
;